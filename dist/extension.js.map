{"version":3,"file":"extension.js","mappings":"wBAAA,SAASA,IACPC,KAAKC,QAAU,GAGjBF,EAAQG,UAAUC,KAAO,SAAUC,GACjC,IAAIC,EAAOL,KACPM,EAAS,GACbN,KAAKC,QAAQM,KAAKD,GAClB,IAAIE,EAAU,IAAIC,SAAQ,SAAUC,GAClC,IAAIC,GAAW,EACfL,EAAOI,QAAU,SAAUE,GACzB,IAAID,EAAJ,CAQA,GALAA,GAAW,EACPL,EAAOF,UACTS,aAAaP,EAAOF,SACpBE,EAAOF,QAAU,OAEdQ,EAAU,CACb,IAAIE,EAAMT,EAAKJ,QAAQc,QAAQT,GAC3BQ,GAAO,GACTT,EAAKJ,QAAQe,OAAOF,EAAK,GAG7BJ,SASJ,OANIN,EAAU,GAAKa,SAASb,KAC1BE,EAAOF,QAAUc,YAAW,WAC1BZ,EAAOF,QAAU,KACjBE,EAAOI,YACNN,IAEEI,GAGTT,EAAQG,UAAUiB,OAAS,WACrBnB,KAAKC,QAAQmB,OAAS,GACxBpB,KAAKC,QAAQoB,MAAMX,SAAQ,IAI/BX,EAAQG,UAAUoB,UAAY,WAC5B,IAAK,IAAIC,EAAIvB,KAAKC,QAAQmB,OAAS,EAAGG,GAAK,EAAGA,IAC5CvB,KAAKC,QAAQsB,GAAGb,SAAQ,GAE1BV,KAAKC,QAAU,IAGjBuB,EAAQzB,QAAUA,G,2BChDlB,IAAI0B,EAAS,EAAQ,KACjBC,EAAW,EAAQ,KAEvB,SAASC,EAAUC,GAEf,IAAIC,EAAY,GAUhB,OAPAA,EAAYJ,EAAOK,aAAaF,EAAaC,GAC7CA,EAAYJ,EAAOM,eAAeF,EAAUG,eAAgBH,GAC5DA,EAAYJ,EAAOQ,mBAAmBJ,EAAUG,eAAgBH,UAChEA,EAAYJ,EAAOS,gBAAgBL,EAAUG,eAAgBH,IAG5CG,eACVH,EAGX,SAASM,EAAWC,GAEhB,IAAIC,EAAU,GAQd,OALAA,EAAUX,EAASY,YAAYF,EAAaC,GAC5CA,EAAUX,EAASa,kBAAkBH,EAAaC,GAClDA,EAAUX,EAASc,eAAeJ,EAAaC,GACrCX,EAASe,cAAcL,EAAaC,GA6ClDK,EAAOlB,QAAQmB,MAvCf,SAAef,GAOX,IAHA,IAAIgB,GADJhB,EAAcA,EAAYiB,QAAQ,KAAM,KACXC,MAAM,MAC/BC,EAAc,GAETxB,EAAI,EAAGA,EAAIqB,EAAWxB,OAAQG,IAAK,CACxC,IAAIyB,EAAgBrB,EAAUiB,EAAWrB,IACzCyB,EAAcC,WAAa1B,EAAI,EAC/BwB,EAAYxC,KAAKyC,GAErB,OAAOD,GA4BXL,EAAOlB,QAAQ0B,OAzBf,SAAgBd,GAEZ,IAAIe,EAAW,GACXC,EAAa,GAEZC,MAAMC,QAAQlB,GAGfgB,EAAahB,EAFbgB,EAAW7C,KAAK6B,GAKpB,IAAK,IAAIb,EAAI,EAAGA,EAAI6B,EAAWhC,OAAQG,IAAK,CACxC,IAAIc,EAAUF,EAAWiB,EAAW7B,IAChCA,IAAO6B,EAAWhC,OAAS,EAC3B+B,GAAsBd,EAEtBc,EAAWA,EAAWd,EAAU,KAIxC,OAAOc,I,qBCuDX,SAASI,EAA0BC,GAK/B,IAHA,IAAIC,EAAe,GACfC,EAAY,EAEPnC,EAAI,EAAGA,GAAKiC,EAAUpC,OAAQG,IAGd,MAAjBiC,EAAUjC,IAA+B,OAAjBiC,EAAUjC,GAE7BiC,EAAUG,UAAU,EAAGpC,GAAGuB,MAAM,KAAM1B,OAAS,GAAM,GAAOoC,EAAUG,UAAUpC,GAAGuB,MAAM,KAAM1B,OAAS,GAAM,IAE3GoC,EAAUG,UAAUD,EAAWnC,GAAGH,OAAS,EAC3CqC,EAAalD,KAAKiD,EAAUG,UAAUD,EAAWnC,IAEG,IAA7CiC,EAAUG,UAAUD,EAAWnC,GAAGH,QAAmE,MAAlDoC,EAAUG,UAAUD,EAAY,EAAGA,IAAwE,OAAlDF,EAAUG,UAAUD,EAAY,EAAGA,IACtJD,EAAalD,KAAKiD,EAAUG,UAAUD,EAAWnC,IAErDmC,EAAYnC,EAAI,GAGbA,IAAMiC,EAAUpC,SAEnBoC,EAAUG,UAAUD,EAAWnC,GAAGH,OAAS,EAC3CqC,EAAalD,KAAKiD,EAAUG,UAAUD,EAAWnC,IAE1CA,IAAMmC,GAAgD,MAAlCF,EAAUG,UAAUpC,EAAI,EAAGA,IAAgD,OAAlCiC,EAAUG,UAAUpC,EAAI,EAAGA,IAC/FkC,EAAalD,KAAK,KAK9B,OAAOkD,EAIX,SAASG,EAAuBxB,GAI5B,IADA,IAAIP,EAAYO,EACPb,EAAI,EAAGA,EAAIM,EAAUT,OAAQG,IAClC,GAAIM,EAAUN,GAAGsC,SAAU,CAEvB,IAAIC,EAAWjC,EAAUN,GAAGsC,SAAS9C,QAAQ,KACzC+C,GAAY,IACZjC,EAAUN,GAAGwC,iBAAmBlC,EAAUN,GAAGsC,SAASF,UAAUG,EAAW,GAC3EjC,EAAUN,GAAGsC,SAAWhC,EAAUN,GAAGsC,SAASF,UAAU,EAAGG,IAIvE,OAAOjC,EA4DXa,EAAOlB,QAAQM,aAvOf,SAAsB0B,EAAWpB,GAE7B,IAAK,IAAIb,EAAI,EAAGA,GAAKiC,EAAUpC,OAAQG,IAAK,CACxC,GAAqB,MAAjBiC,EAAUjC,IAA+B,OAAjBiC,EAAUjC,GAAa,CAE/C,GAAU,IAANA,EAAS,CACTa,EAAY4B,UAAYR,EAAUV,MAAM,QAAS,GAAG,GACpD,IAAK,IAAImB,EAAK7B,EAAY4B,UAAU5C,OAAQ6C,GAAMT,EAAUpC,OAAQ6C,IAAM,CAEtE,GAAsB,MAAlBT,EAAUS,IAAiC,OAAlBT,EAAUS,GAAc,CACjD7B,EAAY8B,cAAgBV,EAAUG,UAAUvB,EAAY4B,UAAU5C,OAAQ6C,GAC9E7B,EAAYJ,eAAiBwB,EAAUG,UAAUM,GACjD,MAGJ,GAAIA,IAAQT,EAAUpC,OAAS,EAAI,CAC/BgB,EAAY8B,cAAgBV,EAAUG,UAAUvB,EAAY4B,UAAU5C,QACtEgB,EAAYJ,eAAiB,GAC7B,OAGR,MAGAI,EAAY8B,cAAgBV,EAAUG,UAAU,EAAGpC,GACnDa,EAAYJ,eAAiBwB,EAAUG,UAAUpC,GACjD,MAIR,GAAIA,IAAOiC,EAAUpC,OAAS,EAAI,CAC9BgB,EAAY8B,cAAgBV,EAC5BpB,EAAYJ,eAAiB,GAC7B,OAGR,OAAOI,GAoMXM,EAAOlB,QAAQO,eAhMf,SAAwByB,EAAWpB,GAG/B,GAAIoB,EAAUW,OAAO,MAAQ,EAAG,CAC5B,IAAK,IAAI5C,EAAI,EAAGA,EAAIiC,EAAUpC,OAAQG,IAClC,GAAqB,MAAjBiC,EAAUjC,GAAY,CAEtB,GAAKiC,EAAUG,UAAU,EAAGpC,GAAGuB,MAAM,KAAM1B,OAAS,GAAM,GAAOoC,EAAUG,UAAUpC,GAAGuB,MAAM,KAAM1B,OAAS,GAAM,EAAI,CACnHgB,EAAYJ,eAAiBwB,EAAUG,UAAU,EAAGpC,GACpDa,EAAYgC,YAAcZ,EAAUG,UAAUpC,GAAGoC,UAAU,GAC3D,MAGA,GAAMH,EAAUG,UAAU,EAAGpC,GAAGsB,QAAQ,IAAIC,MAAM,KAAM1B,OAAS,GAAM,GAAOoC,EAAUG,UAAUpC,GAAGuB,MAAM,KAAM1B,OAAS,GAAM,EAAK,CACjIgB,EAAYJ,eAAiBwB,EAAUG,UAAU,EAAGpC,GACpDa,EAAYgC,YAAcZ,EAAUG,UAAUpC,GAAGoC,UAAU,GAC3D,MAGJvB,EAAYJ,eAAiBwB,EAIzC,OAAOpB,EAIP,OADAA,EAAYJ,eAAiBwB,EACtBpB,GAsKfM,EAAOlB,QAAQS,mBAhKf,SAA4BuB,EAAWpB,GAOnC,IALA,IAAIiC,EAAuB,GACvBC,EAAkB,EAClBC,EAAc,EACdC,EAAY,EAEPjD,EAAI,EAAGA,GAAKiC,EAAUpC,OAAQG,IAEnC,GAAqB,MAAjBiC,EAAUjC,GAEc,IAApB+C,IACAE,EAAYjD,EACZ8C,EAAqB9D,KAAKiD,EAAUG,UAAUY,EAAaC,KAG/DD,EAAchD,EAAI,EAClB+C,QACG,CAEH,GAAqB,MAAjBd,EAAUjC,IAA+B,MAAjBiC,EAAUjC,IAA+B,OAAjBiC,EAAUjC,GAAa,CAE/C,IAApB+C,IACAE,EAAYjD,EACZ8C,EAAqB9D,KAAKiD,EAAUG,UAAUY,EAAaC,IAC3DpC,EAAYJ,eAAiBwB,EAAUG,UAAUpC,IAErD,MAGJ,GAAIA,IAAOiC,EAAUpC,OAAS,EAAI,CAC9BoD,EAAYjD,EAAI,EAChB8C,EAAqB9D,KAAKiD,EAAUG,UAAUY,EAAaC,IAC3DpC,EAAYJ,eAAiBwB,EAAUG,UAAUpC,EAAI,GACrD,OAUZ,OALI8C,EAAqBjD,OAAS,EAC9BgB,EAAYiC,qBAAuBA,EAEnCjC,EAAYJ,eAAiBwB,EAE1BpB,GAqHXM,EAAOlB,QAAQ+B,0BAA4BA,EAC3Cb,EAAOlB,QAAQoC,uBAAyBA,EACxClB,EAAOlB,QAAQU,gBA5Df,SAAyBsB,EAAWpB,GAUhC,IARA,IAAIqC,EAAc,GACdC,EAAmB,GAGnBC,EAAYpB,EAA0BC,GAGtCjC,EAAI,EACDA,EAAIoD,EAAUvD,QAAQ,CAEzB,GAAIG,EAAI,GAAM,EACVkD,EAAYZ,SAAWc,EAAUpD,OAC9B,CAEHkD,EAAYG,WAAaD,EAAUpD,GAKnC,IADA,IAAI0C,EAAK1C,EAAI,EACN0C,EAAKU,EAAUvD,QACI,KAAlBuD,EAAUV,IACVU,EAAU3D,OAAOiD,EAAI,GACrBQ,EAAYG,WAAaH,EAAYG,WAAa,IAM1DF,EAAiBnE,KAAKkE,GACtBA,EAAc,GAKdE,EAAUvD,OAAS,GAAM,GAAKuD,EAAUvD,OAAS,GAAKG,IAAOoD,EAAUvD,OAAS,IAChFqD,EAAYZ,SAAWc,EAAUpD,GACjCmD,EAAiBnE,KAAKkE,GACtBA,EAAc,IAGlBlD,IAKJ,IAAIsD,EAA6BjB,EAAuBc,GAIxD,OAHIG,EAA2BzD,OAAS,IACpCgB,EAAY0C,aAAeD,GAExBzC,I,qBCzKXM,EAAOlB,QAAQc,YA1Df,SAAqBF,EAAaoB,GAO9B,OANIpB,EAAY4B,YACZR,GAAwBpB,EAAY4B,WAEpC5B,EAAY8B,gBACZV,GAAwBpB,EAAY8B,eAEjCV,GAoDXd,EAAOlB,QAAQe,kBAhDf,SAA2BH,EAAaoB,GACpC,IAAIuB,EAAiB,GACrB,GAAI3C,EAAYiC,sBACRjC,EAAYiC,qBAAqBjD,OAAS,EAAG,CAC7C,IAAK,IAAIG,KAAKa,EAAYiC,qBACtBU,EAAiBA,EAAiB,IAAM3C,EAAYiC,qBAAqB9C,GAE7EiC,GAAwBuB,EAGhC,OAAOvB,GAuCXd,EAAOlB,QAAQgB,eAnCf,SAAwBJ,EAAaoB,GACjC,GAAIpB,EAAY0C,aACZ,IAAK,IAAIvD,KAAKa,EAAY0C,cAClB1C,EAAY0C,aAAavD,GAAGsC,UAAqD,KAAzCzB,EAAY0C,aAAavD,GAAGsC,YAE1D,MAANtC,EACAiC,GAAwBpB,EAAY0C,aAAavD,GAAGsC,SAEpDL,EAAYA,EAAY,IAAMpB,EAAY0C,aAAavD,GAAGsC,SAG1DzB,EAAY0C,aAAavD,GAAGwC,mBAC5BP,EAAYA,EAAY,IAAMpB,EAAY0C,aAAavD,GAAGwC,kBAG1D3B,EAAY0C,aAAavD,GAAGyD,eAAe,gBAC3CxB,EAAYA,EAAY,IAAMpB,EAAY0C,aAAavD,GAAGqD,aAK1E,OAAOpB,GAeXd,EAAOlB,QAAQiB,cAXf,SAAuBL,EAAaoB,GAIhC,OAHIpB,EAAY4C,eAAe,iBAC3BxB,EAAYA,EAAY,IAAMpB,EAAYgC,aAEvCZ,I,ibCtDX,eAEA,SACA,SACA,OACA,SACA,SACA,SACA,SACA,SACA,QACA,SACA,SACA,SACA,QACA,SACA,SACM/B,EAAS,IAAI,EAAAwD,gBACbC,EAAK,EAAQ,KACnB,IAAI9E,EAEJ,oBAA+B+E,G,yCAC9B,MAAMC,EAAoC,CAAEC,SAAU,QAASC,OAAQ,QAEjEC,EAAmBC,EAAOC,UAAUC,2BAA2B,SACrE,IAAIC,EAAU,GACd,QAA2BC,IAAvBT,EAAQU,WAA0B,CACrCF,EAAUR,EAAQU,WAAWC,OACxBZ,EAAGa,WAAWJ,IAClBT,EAAGc,UAAUL,GAEd,MAAMM,EAASN,EAAU,gBACzBR,EAAQe,cAAc3F,KAAKiF,EAAOC,UAAUU,+BAA+Bf,EAAY,IAAI,EAAAgB,uBAAuBH,KAEnH,MAAMI,EAAUlB,EAAQmB,eACxBnB,EAAQe,cAAc3F,KACrBiF,EAAOe,SAASC,gBAAgB,0BAA0B,MAAQ,IAAAC,uBAClEjB,EAAOe,SAASC,gBAAgB,wBAAwB,KAAQE,EAAkBC,oBAClFnB,EAAOe,SAASC,gBAAgB,sBAAsB,KAAQE,EAAkBE,kBAChFpB,EAAOe,SAASC,gBAAgB,gCAAgC,MAAQ,aAAeH,MACvFb,EAAOe,SAASC,gBAAgB,qBAAqB,IA6F/ChB,EAAOqB,OAAOC,aAAa,CACjCC,YAAa,sDACbC,MAnHiC,OAqBjCxB,EAAOC,UAAUwB,sBAAsB7B,EAAY,IAAI,EAAA8B,oBACvD1B,EAAOC,UAAU0B,2BAA2B/B,EAAY,IAAI,EAAAgC,yBAC5D5B,EAAOC,UAAU4B,sCAAsCjC,EAAY,IAAI,EAAAkC,mCACvE9B,EAAOC,UAAU8B,8BAA8BnC,EAAY,IAAI,EAAAoC,2BAA8B,IAAK,KAClGhC,EAAOC,UAAUgC,+BAA+BrC,EAAY,IAAI,EAAAsC,6BAChElC,EAAOC,UAAUkC,uCAAuCvC,EAAY,EAAAwC,iBAAkB,EAAAC,gBACtFrC,EAAOC,UAAUqC,uCAAuC1C,EAAY,IAAI,EAAA2C,6BACxEvC,EAAOC,UAAUuC,4CAA4C5C,EAAY,IAAI,EAAA2C,6BAC7EvC,EAAOC,UAAUwC,0BAA0B7C,EAAY,IAAI,EAAA8C,wBAC3D1C,EAAO2C,MAAMC,mCAAmC,QAAS,IAAIC,GAC7D7C,EAAO2C,MAAMG,sCAAsC,QAAS,IAAIC,GAChE/C,EAAOqB,OAAO2B,6BAA4BC,IAAgBA,GAAUC,EAAyBD,EAAOE,SAAUpD,MAC9GC,EAAOoD,UAAUC,yBAAwBJ,IAAgBA,GAAUC,EAAyBD,EAAOE,SAAUpD,WAI/G,0BAIA,MAAM8C,EAMLS,0BAA0BC,EAAqCC,EAA4BC,GAG1F,IAAKD,EAAOE,OAASF,EAAOG,UAAYH,EAAOI,KAAM,CACpD,MAAMX,EAASjD,EAAOqB,OAAOwC,iBACzBZ,GAAyC,UAA/BA,EAAOE,SAASW,aAC7BN,EAAOE,KAAO,QACdF,EAAOI,KAAO,SACdJ,EAAOG,QAAU,SACjBH,EAAOO,QAAU,UACjBP,EAAOQ,aAAc,EACrBR,EAAOS,SAAW,cAClBT,EAAOU,kBAAoB,OAC3BV,EAAOW,KAAO,KAIhB,OAAKX,EAAOO,QAMLP,EALCxD,EAAOqB,OAAO+C,uBAAuB,kCAAkCC,MAAKC,SAQtF,MAAMvB,EAELwB,6BAA6BC,GAC5B,OAAO,IAAIxE,EAAOyE,iCAAiC,IAAI,EAAAC,oBA4BzD,SAASxB,EAAyBC,EAA+BwB,GAC5D/J,IACHS,aAAaT,GACbA,OAAUwF,GAEXxF,EAAUc,YAAW,IA9BtB,SAA2ByH,EAA+BwB,GACzD,GAAIxB,GAAoC,UAAxBA,EAASW,WAAwB,CAChDa,EAAWC,QACX,IAAIC,EAAkC,GACtC,IAAK,IAAI9I,EAAI,EAAGA,EAAIoH,EAAS2B,UAAW/I,IAAK,CAC5C,IAAIgJ,EAAO5B,EAAS6B,OAAOjJ,GACvBkJ,EAAOhJ,EAAOiJ,UAAUH,EAAKI,MACf,KAAdF,EAAKE,MACRN,EAAM9J,KAAK,CACVqK,KAAM,GACNC,QAASJ,EAAKE,KACdG,MAAO,IAAItF,EAAOuF,MAAM,IAAIvF,EAAOwF,SAASzJ,EAAGkJ,EAAKQ,UAAW,IAAIzF,EAAOwF,SAASzJ,EAAGgJ,EAAKI,KAAKvJ,SAChG8J,SAAU1F,EAAO2F,mBAAmBC,MACpCC,OAAQ,KAKX,IAAIC,EAAK,IAAI,UAAmB3C,GAChC0B,EAAQA,EAAMkB,OAAOD,EAAGE,mBACpBnB,GACHF,EAAWsB,IAAI9C,EAAS+C,IAAKrB,IASJsB,CAAkBhD,EAAUwB,IAAa,O,oaChIrE,eACA,SACA,SAmBA,IAAKyB,GAAL,SAAKA,GACJ,mCAAc,yCAAiB,uCAAgB,qDAAuB,iDAAqB,+DAA4B,qDAAuB,yCAD/I,CAAKA,IAAAA,EAAY,KAGjB,MAAaC,UAAiB,EAAAC,aAsB7BC,cACCC,QAtBO,KAAAC,QAAU,IAAI,EAAAC,OAMd,KAAAC,OAAS,IAAI,EAAAL,aAKb,KAAAM,aAAe,EAKf,KAAAC,cAAwB,EAExB,KAAAC,UAAoB,EACpB,KAAAC,WAAqB,GACrB,KAAAC,kBAA4B,GAGnCxM,KAAKyM,cAAgB,GACrBzM,KAAK0M,cAAgBd,EAAae,aAClC3M,KAAK4M,YAAc,GACnB5M,KAAK6M,OAAS,GACd7M,KAAK8M,QAAU,GACf9M,KAAK+M,mBAAqB,GAC1B/M,KAAKgN,aAAe,GACpBhN,KAAKiN,YAAc,GACnBjN,KAAKuM,WAAa,GAClBvM,KAAKwM,kBAAoB,GACzBxM,KAAKkN,OAAS,GACdlN,KAAKmM,OAAOgB,GAAG,gBAAgB,KAC9B,QAAkC,IAAtBnN,KAAK6M,OAAW,EAAmB,CAC9C,IAAIO,EAAYpN,KAAK6M,OAAU,EAC/B7M,KAAKqN,YAAYD,OAKPE,KAAK7D,EAAkBE,EAAcD,G,yCAKjD,OAJA1J,KAAKuN,mBAAqB7D,EAC1B1J,KAAKwN,UAAY/D,EACjBzJ,KAAKyN,MAAQ9D,EAEN,IAAIlJ,SAAQ,CAACC,EAASgN,KAC5B1N,KAAKiM,QAAQ0B,QAAQ3N,KAAKyN,MAAOzN,KAAKwN,WAAW,KAChDxN,KAAK4N,KAAK,4BACV5N,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKiM,QAAQkB,GAAG,QAASW,IACxB9N,KAAK4M,aAAekB,EAAMC,WAC1B,IAAIC,EAAIhO,KAAK4M,YAAY7L,QAAQ,MACjC,MAAc,IAAPiN,GAAU,CAChB,IAAIC,EAAOjO,KAAK4M,YAAYjJ,UAAU,EAAGqK,GACzChO,KAAKkO,YAAYD,GACjBjO,KAAK4M,YAAc5M,KAAK4M,YAAYjJ,UAAUqK,EAAI,GAClDA,EAAIhO,KAAK4M,YAAY7L,QAAQ,UAG/BL,EAAQV,KAAKiM,YAEdjM,KAAKiM,QAAQkB,GAAG,SAAUgB,IACzBT,EAAOS,MAERnO,KAAKiM,QAAQkB,GAAG,OAAO,KAAQnN,KAAK0M,cAAgBd,EAAae,sBAI3DiB,KAAKQ,GACRpO,KAAKsM,UAAY+B,QAAQC,IAAIF,GAE1BF,YAAY3D,GAGnB,IAAIgE,EACAvH,EACAwH,EACJ,OALAxO,KAAK4N,KAAK,UAAYrD,GAKdvK,KAAK0M,eACZ,KAAKd,EAAaiC,gBACjB,GAAa,gBAATtD,EAAwB,CAC3BvK,KAAK0M,cAAgBd,EAAa6C,eAClCzO,KAAK8M,QAAU,GACf9M,KAAK6M,OAAS,GACd,MAED,GAAa,eAATtC,EAAuB,CAC1BvK,KAAK0M,cAAgBd,EAAa8C,sBAClC1O,KAAK+M,mBAAqB,GAC1B/M,KAAK4N,KAAKrD,GACV,MAED,GAAa,iBAATA,EAAyB,CAC5BvK,KAAK0M,cAAgBd,EAAa+C,oBAClC3O,KAAKuM,WAAa,GAClBvM,KAAKwM,kBAAoB,GACzB,MAED,GAAa,kBAATjC,EAA0B,CAC7BvK,KAAK4O,UAAU,OACf5O,KAAKiM,QAAQ4C,MACb,MAED,GAAa,mBAATtE,EAA2B,CAC9BvK,KAAK0M,cAAgBd,EAAakD,sBAClC9O,KAAKiN,YAAc,GACnB,MAED,GAAa,kBAAT1C,EAA0B,CAC7BvK,KAAK0M,cAAgBd,EAAamD,gBAClC/O,KAAKkN,OAAS,GACd,MAED,MAED,KAAKtB,EAAa6C,eACjB,GAAa,cAATlE,EACHvK,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKmM,OAAO6C,KAAK,oBACX,CAMN,IALAR,EAAUjE,EAAK5G,UAAU,EAAG,GACZ,MAAZ6K,GACHxO,KAAK8M,QAAQvM,KAAKgK,EAAK5G,UAAU,IAElC4K,EAAUhE,EAAK5G,UAAU,EAAG4G,EAAKxJ,QAAQ,OACjCwN,EAAQzL,MAAM,KAAK1B,OAAS,GAAK,GAAM,GAC9CmN,EAAUhE,EAAK5G,UAAU,EAAG4G,EAAKxJ,QAAQ,IAAKwN,EAAQnN,OAAS,IAEhE4F,EAAQuD,EAAK5G,UAAU4K,EAAQnN,OAAS,GAAGyB,QAAQ,KAAM,IAAIA,QAAQ,KAAM,SACrC,IAA1B7C,KAAK6M,OAAO2B,KAA6BxO,KAAK6M,OAAO2B,GAAW,IAC5ExO,KAAK6M,OAAO2B,GAASD,GAAWvH,EAEjC,MAED,KAAK4E,EAAa8C,sBACJ,aAATnE,GACHvK,KAAK4N,KAAKrD,GACVvK,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKiP,sBAELjP,KAAK4N,KAAKrD,GACVvK,KAAK+M,mBAAmBxM,KAAKgK,IAE9B,MAED,KAAKqB,EAAa+C,oBACJ,iBAATpE,GACHvK,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKmM,OAAO6C,KAAK,oBAAqBhP,KAAKmM,OAAQnM,KAAKuM,WAAYvM,KAAKwM,oBACtD,wBAATjC,EACVvK,KAAK0M,cAAgBd,EAAasD,2BAElClP,KAAKuM,YAAchC,EAEpB,MAED,KAAKqB,EAAasD,2BACJ,iBAAT3E,GACHvK,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKmM,OAAO6C,KAAK,oBAAqBhP,KAAKmM,OAAQnM,KAAKuM,WAAYvM,KAAKwM,oBAEzExM,KAAKwM,mBAAqBjC,EAE3B,MAED,KAAKqB,EAAakD,sBACJ,iBAATvE,GACHvK,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKmM,OAAO6C,KAAK,sBAAuBhP,KAAKmM,OAAQnM,KAAKiN,cAE1DjN,KAAKiN,YAAY1M,KAAKgK,GAEvB,MAED,KAAKqB,EAAamD,gBACJ,gBAATxE,GACHvK,KAAK0M,cAAgBd,EAAaiC,gBAClC7N,KAAKmM,OAAO6C,KAAK,gBAAiBhP,KAAKmM,OAAQnM,KAAKkN,SAEpDlN,KAAKkN,OAAO3M,KAAKgK,GAGnB,QACC8D,QAAQF,MAAM,uBAAyB5D,IAIlC4E,QAAQtE,GAEf,GADA7K,KAAKyM,cAAclM,KAAKsK,GACpB7K,KAAKyM,cAAcrL,OAAS,IAE/B,MADAiN,QAAQF,MAAM,yDACR,IAAI/C,MAEX,GAAIpL,KAAK0M,gBAAkBd,EAAae,aACvC,KAAO3M,KAAKyM,cAAcrL,QAAQ,CACjCyJ,EAAU7K,KAAKyM,cAAc2C,QAC7B,IACCpP,KAAKiM,QAAQoD,MAAMxE,EAAU,MAC5B,SACD7K,KAAKyM,cAAc6C,QAAQzE,GAC3B,QAKI0E,eAAeC,EAAcjF,EAAckF,GAC9CA,EAASzP,KAAKmP,QAAQ,SAAWK,EAAO,IAAMjF,GAC3CvK,KAAKmP,QAAQ,WAAaK,EAAO,IAAMjF,GAExCmF,MAAMF,EAAcG,GACtBA,IACCH,EAAKzO,QAAQ,KAEhBf,KAAKuP,eAAeC,EAAM,GAAG,GAE7BxP,KAAKuP,eAAeC,EAAM,GAAG,IAG/BxP,KAAK4P,qBACL5P,KAAKmP,QAAQ,SAAWK,GAElBK,KAAK3G,GACXlJ,KAAKmP,QAAQjG,GAEP4G,WACN9P,KAAKmP,QAAQ,YAEPY,aACN/P,KAAKmP,QAAQ,SACbnP,KAAKiM,QAAQ4C,MAEPe,qBACN5P,KAAKmP,QAAQ,aAEPa,QAAQR,GACdxP,KAAKmP,QAAQ,WAAaK,GAKnBnC,YAAYD,GACnB,MAAM6C,EAAgB7C,EAAsB,WACtC8C,EAAc9C,EAAoB,SAClC+C,EAAQF,EAAcnN,MAAM,KAC5BmI,EAAWkF,EAAM,GACjB5G,EAAU4G,EAAM,GAChBX,EAAOxP,KAAKuN,mBAAqBhE,EAAU,KACjDvJ,KAAKoQ,WAAWZ,GAChB,MAAMa,EAAapF,EAASnI,MAAM,KAAK,GACvC,IAAIwN,EAAS,OACkB1K,IAA3BqF,EAASnI,MAAM,KAAK,KACvBwN,EAASC,SAAStF,EAASnI,MAAM,KAAK,KAEvC,IAAIyH,EAAO,EACX,GAAmB,KAAf8F,EACH,IAAK,IAAIG,EAAK,EAAGA,EAAKxQ,KAAKyQ,aAAarP,OAAQoP,IAC/C,GAAIxQ,KAAKyQ,aAAaD,GAAI7M,UAAU,EAAG0M,EAAWjP,UAAYiP,EAAY,CACzE9F,EAAOiG,EACP,MAIHxQ,KAAKoM,aAAe7B,EAAO+F,EACP,KAAhBJ,GAAsB9C,EAAkB,SAAMA,EAAkB,QACnEpN,KAAK4O,UAAU,kBAAmBsB,GAClClQ,KAAK4N,KAAKsC,IAEElQ,KAAKgN,aAAa0D,QAAOC,GAAMA,EAAGnB,OAASxP,KAAK4Q,aAAeD,EAAGpG,OAASvK,KAAKoM,eACpFhL,OAAS,EAChBpB,KAAK4O,UAAU,oBAEf5O,KAAK4O,UAAU,cAQXiC,MAAMC,EAAoBC,GAEhC,MAAMC,EAAS,IAAI3N,MAEnB,IAAK,IAAI9B,EAAIuP,EAAYvP,EAAIvB,KAAK8M,QAAQ1L,OAAQG,IAAK,CACtD,MAAM0J,EAAWjL,KAAK8M,QAAQvL,GAC9B,IAA+B,IAA3B0J,EAASlK,QAAQ,KAAa,CACjC,MAAMkQ,EAAejR,KAAKkR,qBAAqBjG,GAC/C+F,EAAOzQ,KAAK,CACX4Q,MAAO5P,EACP6H,KAAM,GAAG6B,KAAY1J,KACrBiO,KAAMyB,EAAazB,KACnBjF,KAAM0G,EAAa1G,QAItB,MAAO,CACNyG,OAAQA,EACRI,MAAOC,KAAKC,IAAIN,EAAO5P,OAAQ2P,IAQ1BQ,cAAc/B,EAAcjF,GAClC,MAAMoG,EAAsB,CAAEa,UAAU,EAAOhC,KAAAA,EAAMjF,KAAAA,EAAMkH,GAAIzR,KAAKqM,iBAGpE,OAFArM,KAAKgN,aAAazM,KAAKoQ,GACvB3Q,KAAKuP,eAAeC,EAAMmB,EAAGpG,KAAO,GAAG,GAChCoG,EAMDe,gBAAgBlC,EAAcjF,GACpC,IAAIoH,EAAM3R,KAAKgN,aACf,GAAI2E,EAAK,CACR,MAAMR,EAAQQ,EAAIC,WAAUjB,GAAMA,EAAGnB,OAASA,GAAQmB,EAAGpG,OAASA,IAClE,GAAI4G,GAAS,EAAG,CACf,MAAMR,EAAKgB,EAAIR,GAGf,OAFAnR,KAAKuP,eAAeC,EAAMmB,EAAGpG,MAAM,GACnCoH,EAAI3Q,OAAOmQ,EAAO,GACXR,IASHkB,iBAAiBrC,GACvBxP,KAAKmP,QAAQ,WAAaK,GAGnBP,oBACP,IAAI6C,EAAkB,GACtB9R,KAAKgN,aAAa+E,SAAQpB,IACzBA,EAAGa,UAAW,EACd,IAAK,IAAIjQ,EAAI,EAAGA,EAAIvB,KAAK+M,mBAAmB3L,OAAQG,IAAK,CACxD,IAAIyQ,EAAahS,KAAKkR,qBAAqBlR,KAAK+M,mBAAmBxL,IACnE,GAAIyQ,EAAWxC,OAASmB,EAAGnB,MAAQmB,EAAGpG,OAASyH,EAAWzH,KAAM,CAC/DoG,EAAGa,UAAW,EACdxR,KAAK4O,UAAU,sBAAuB+B,GACtCmB,EAAKvQ,IAAK,EACV,OAGGoP,EAAGa,UAAYxR,KAAK4O,UAAU,sBAAuB+B,MAE3D,IAAK,IAAIpP,EAAI,EAAGA,EAAIvB,KAAK+M,mBAAmB3L,OAAQG,IACnD,IAAKuQ,EAAKvQ,GAAI,CACb,IAAIyQ,EAAahS,KAAKkR,qBAAqBlR,KAAK+M,mBAAmBxL,IAC/DoP,EAAsB,CAAE,UAAY,EAAM,KAAQqB,EAAWxC,KAAM,KAAQwC,EAAWzH,KAAM,GAAMvK,KAAKqM,iBAC3GrM,KAAK4O,UAAU,sBAAuB+B,IAKlCsB,aAAa/I,GACnB,MAAa,WAATA,EACIlJ,KAAK6M,OAAU,EACH,UAAT3D,EACHlJ,KAAK6M,OAAU,OADhB,EAmBKqF,aAAaC,G,yCACzB,OAAO,IAAI1R,SAAQ,CAACC,EAASgN,KAC5B1N,KAAKmM,OAAOgB,GAAG,uBAAuB,SAASiF,EAAoBC,EAAqBC,GACvFD,EAAME,eAAe,sBAAuBH,GAC5C1R,EAAQ4R,MAETtS,KAAKmP,QAAQ,UACb,IAAK,IAAI5N,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IACjCvB,KAAKmP,QAAQgD,EAAM5Q,IAEpBvB,KAAKmP,QAAQ,uBAGFqD,aAAaC,G,yCACzB,OAAO,IAAIhS,SAAQ,CAACC,EAASgN,KAC5B,IAAIgF,EAAiB,CAAEtJ,KAAMqJ,EAAYE,WAAY,EAAGC,QAAS,YAAaC,MAAO,IACjFC,EAAU,IACe,MAAzBL,EAAWM,OAAO,KACrBD,EAAU,UAEkBlN,IAAzB5F,KAAK6M,OAAOiG,QAC0BlN,IAArC5F,KAAK6M,OAAOiG,GAASL,IACxBC,EAAME,QAAU5S,KAAK6M,OAAOiG,GAASL,GACrC/R,EAAQgS,KAER1S,KAAKmM,OAAOgB,GAAG,qBAAqB,SAAS6F,EAAkBX,EAAOY,EAAWC,GAChFb,EAAME,eAAe,oBAAqBS,GAC1CN,EAAMtJ,KAAO6J,EACbP,EAAME,QAAUM,EAChBxS,EAAQgS,MAET1S,KAAKmP,QAAQ,UAAYsD,IAG1B/R,EAAQgS,SAOHtC,WAAWZ,GAElB,GADAA,EAAOA,EAAK3M,QAAQ,IAAK,KACrB7C,KAAK4Q,cAAgBpB,EAAM,CAC9BxP,KAAK4Q,YAAcpB,EACnB,IACCxP,KAAKyQ,cAAe,IAAA0C,cAAanT,KAAK4Q,aAAa7C,WAAWjL,MAAM,MACnE,SACDuL,QAAQC,IAAI,6BAA+BkB,KAKtC0B,qBAAqBkC,GAC5B,IAAIjD,EAAQiD,EAAetQ,MAAM,KAC7BmI,EAAWkF,EAAM,GACrB,QAAiBvK,IAAbuK,EAAM,GA2BT,MAAO,CAAE,KAAQ,GAAI,KAAQ,GA3BF,CAE3B,IAAI5G,EAAU4G,EAAM,GAAGrN,MAAM,IAAK,GAAG,GACjC0M,GAAQxP,KAAKuN,mBAAqBhE,EAAU,MAAM1G,QAAQ,IAAK,KACnE,IACC,IAAIwQ,GAAc,IAAAF,cAAa3D,GAAMzB,WAAWjL,MAAM,MAClDuN,EAAapF,EAASnI,MAAM,KAAK,GACjCwN,EAAS,OACkB1K,IAA3BqF,EAASnI,MAAM,KAAK,KACvBwN,EAASC,SAAStF,EAASnI,MAAM,KAAK,IACnB,KAAfuN,GAAqBC,KAE1B,IAAI/F,EAAO,EACX,GAAmB,KAAf8F,EACH,IAAK,IAAIG,EAAK,EAAGA,EAAK6C,EAAYjS,OAAQoP,IACzC,GAAI6C,EAAY7C,GAAI7M,UAAU,EAAG0M,EAAWjP,UAAYiP,EAAY,CACnE9F,EAAOiG,EACP,MAIH,MAAO,CAAE,KAAQhB,EAAM,KAAQjF,EAAO+F,GACrC,SAED,OADAjC,QAAQC,IAAI,6BAA+BkB,GACpC,CAAE,KAAQA,EAAM,KAAQ,KAO1BZ,UAAUyD,KAAkBiB,GACnCtT,KAAKgP,KAAKqD,KAAUiB,IAxdtB,c,ybC5BA,eACA,IAAIC,EAAK,EAAQ,KA0EM,EAAA5M,eAxEvB,W,yCACC,IAAI8B,EAASjD,EAAOqB,OAAOwC,iBAC3B,GAAIZ,EAAQ,CACX,IAAI3H,EAAM2H,EAAO+K,UAAUC,OACvBC,EAAcjL,EAAOE,SAAS6B,OAAO1J,EAAIyJ,MAAMI,KAC/CgJ,EAASJ,EAAG5Q,MAAM+Q,GAClBE,EAAU,GACQ,IAAlB9S,EAAI+S,kBAEyBjO,IAA3B+N,EAAO,GAAG7O,cAAgE,IAAlC6O,EAAO,GAAG7O,aAAa1D,UAA+C,IAA9BsS,EAAY3S,QAAQ,WAAkD6E,IAAnC+N,EAAO,GAAGtP,sBAAsCsP,EAAO,GAAGtP,qBAAqBjD,OAAS,GAC/MuS,EAAO,GAAGtP,qBAAqBrD,QAAQ,GACvCyH,EAAOqL,MAAMC,IACZA,EAAYlR,QAAQ,IAAI2C,EAAOuF,MAAMjK,EAAIkT,KAAKlT,EAAIyJ,KAAM,GAAIzJ,EAAIkT,KAAKlT,EAAIyJ,KAAMmJ,EAAYtS,SAAUmS,EAAGrQ,OAAOyQ,cAIzE/N,IAAnC+N,EAAO,GAAGtP,uBACbsP,EAAO,GAAGtP,qBAAuB,IAiBtC,SAA+BsP,GAC9B,IAAIM,EAAON,EAAO7O,aAClB,GAAImP,EAAON,EAAO7O,aACjB,IAAK,IAAIvD,EAAI,EAAGA,EAAI0S,EAAK7S,OAAQG,IAChC,GAAI0S,EAAK1S,GAAGsC,SAASqQ,MAAM,aAAeD,EAAK1S,GAAGqD,WACjD,OAAO,EAIV,OAAO,EAxBAuP,CAAsBR,EAAO,KAChCA,EAAO,GAAGtP,qBAAqB9D,KAAK,KAErCoT,EAAO,GAAG7O,aAAe,UAClB6O,EAAO,GAAGvP,mBACVuP,EAAO,GAAG3P,UACjB4P,EAAUL,EAAGrQ,OAAOyQ,KAGtBlL,EAAOqL,MAAMC,IACZA,EAAYK,OAAOtT,EAAK,KAAO8S,WA2CzB,EAAAhN,aA1BT,W,yCAEC,IAAI6B,EAASjD,EAAOqB,OAAOwC,iBAC3B,GAAIZ,EAAQ,CACX,IAAI3H,EAAM2H,EAAO+K,UAAUC,OACvBC,EAAcjL,EAAOE,SAAS6B,OAAO1J,EAAIyJ,MAAMI,KAC/CgJ,EAASJ,EAAG5Q,MAAM+Q,SACU9N,IAA3B+N,EAAO,GAAG7O,cAAgE,IAAlC6O,EAAO,GAAG7O,aAAa1D,UACrC,IAA9BsS,EAAY3S,QAAQ,WAAkD6E,IAAnC+N,EAAO,GAAGtP,sBAC7CsP,EAAO,GAAGtP,qBAAqBjD,OAAS,GACxCuS,EAAO,GAAGtP,qBAAqB9D,KAAK,KACpCkI,EAAOqL,MAAMC,IACkC,MAA1CL,EAAYX,OAAOjS,EAAI+S,UAAY,GACtCE,EAAYK,OAAOtT,EAAIkT,KAAKlT,EAAIyJ,KAAMzJ,EAAI+S,WAAY,MAEtDE,EAAYK,OAAOtT,EAAIkT,KAAKlT,EAAIyJ,KAAMzJ,EAAI+S,WAAY,WAIxDpL,EAAOqL,MAAMO,IACZA,EAAGD,OAAOtT,EAAK,e,4GCrEnB,eACMoE,EAAK,EAAQ,KAiBnB,+BAaC6G,YAAYuI,GACXtU,KAAKuU,cAAe,EACpBvU,KAAKwU,QAAUF,EACftU,KAAKyU,kBAENC,uBAAuB/L,EAA+BsC,EAA2BhC,GAEhF,IACI0L,EAqIN,SAAuBpK,EAA0BU,GAChD,IAAI2J,EAAa,YACbC,EAAe,EACfC,EAAc,GACdC,EAAc,GACdC,GAAmB,EACvB,GAAIzK,EACH,KAAOsK,EAAe5J,GAAU,CAC/B,IAAIgK,EAAO1K,EAAK5G,UAAUkR,IAAgBA,GACtCK,EAAyB,MAATD,GAAyB,OAATA,EAChCE,EAAoBF,EAAKf,MAAM,cAC/BkB,EAAcH,EAAKf,MAAM,YAG7B,GAAmB,WAAfU,GAAoC,MAATK,EAC9B,MAAO,CAAEL,WAAY,UAAWG,YAAa,IAW9C,OATKI,GACgB,KAAhBJ,GAAsBE,EAAKf,MAAM,SAMrCa,GAAeE,EAHdF,EAAc,GAKRH,GACP,IAAK,WACAM,EACCF,GACHA,GAAmB,EACfF,EAAYZ,MAAM,0BACrBU,EAAa,eAGdA,EAAa,UACbE,EAAc,IAEI,MAATG,EACVL,EAAa,SACHO,EACVP,EAAa,WACM,MAATK,IACVL,EAAa,YAEd,MAED,IAAK,UACJ,GAAa,MAATK,EACHL,EAAa,WACbI,GAAmB,MACb,IAAII,EAAa,CACvBN,GAAeG,EACf,MACM,IAAIC,EAOV,OADAN,EAAa,QACN,CAAEA,WAAY,QAASG,YAAa,IAN3CH,EAAa,WACTE,EAAYZ,MAAM,0BACrBU,EAAa,aAMf,MAED,IAAK,WACAM,EACCF,EACHA,GAAmB,GAEnBJ,EAAa,UACbE,EAAc,IAEI,MAATG,EACVL,EAAa,YACFO,IACXP,EAAa,YAEd,MAED,IAAK,YACAM,GACHN,EAAa,UACbE,EAAc,KACK,MAATG,GAES,MAATA,KADVL,EAAa,YAId,MAED,IAAK,QACAM,EACHN,EAAa,WACHK,EAAO,OACjBL,EAAa,YAEd,MAED,IAAK,YAEHA,EADGM,EACU,UAEA,QAEd,MAED,IAAK,SACS,MAATD,IACHL,EAAa,YAEd,MAED,IAAK,WACAM,EACCF,GACHA,GAAmB,EACnBJ,EAAa,aAEbA,EAAa,UACbE,EAAc,IAEJK,IACXP,EAAa,aAOlB,MAAO,CAAEA,WAAAA,EAAYG,YAAAA,GAvQPM,CADF1M,EAAS2M,QAAQ,IAAI9P,EAAOuF,MAAM,IAAIvF,EAAOwF,SAASC,EAASV,KAAM,GAAIU,IACnDA,EAAS4I,WACtC0B,EAAsC,GAC1C,GAAIvV,KAAKuU,cAAsC,cAAtBI,EAAOC,WAA4B,CAC3D,IAAIY,EAAe,IAAIhQ,EAAOuF,MAAM,IAAIvF,EAAOwF,SAASC,EAASV,KAAMU,EAAS4I,UAAYc,EAAOI,YAAY3T,QAAS6J,GACxHsK,EAAQvV,KAAKyV,WAAWd,EAAOI,YAAaQ,EAAOC,GAEpD,OAAOD,EAEAd,kBACP,IAAKvP,EAAGa,WAAW/F,KAAKwU,SAAU,CACjC,IAAIkB,EAAK,CACRC,OAAQ,CAAC,CAAEC,QAAS,GAAIC,MAAO,KAC/BC,SAAU,IAEX5Q,EAAG6Q,cAAc/V,KAAKwU,QAASwB,KAAKC,UAAUP,IAE/CxQ,EAAGgR,SAASlW,KAAKwU,SAAS,CAAC2B,EAAKlI,KAC/B,IAAKkI,EAAK,CACTnW,KAAKoW,SAAWJ,KAAKrT,MAAMsL,GAC3B,IAAIoI,GAAY,EAChB7Q,EAAOoD,UAAU0N,UAAU,OAAOzM,MAAM0M,IACvCvW,KAAKwW,cAAgBD,EAAMnV,OAC3B,IAAK,IAAIG,EAAI,EAAGA,EAAIgV,EAAMnV,OAAQG,IAAK,CACtC,IAAIkV,EAAOF,EAAMhV,GAAGuE,OACpBZ,EAAGwR,KAAKD,GAAM,GAAO,CAACN,EAAKQ,KAC1B,GAAKR,EAcJnW,KAAK4W,YAAYP,OAdR,CACT,IAAIQ,EAAK7W,KAAKoW,SAASN,SAASW,QACrB7Q,IAAPiR,GAAoBF,EAAMG,QAAUD,GACvC7W,KAAKoW,SAASN,SAASW,GAAQE,EAAMG,QACrCT,GAAY,EACRM,EAAMI,KAAO,IAChB/W,KAAKgX,mBAAmBP,GAExBzW,KAAK4W,YAAYP,IAGlBrW,KAAK4W,YAAYP,OAOrBrW,KAAKuU,cAAe,SAKhBqC,YAAYP,GACU,KAAvBrW,KAAKwW,eACNH,GACHnR,EAAG+R,UAAUjX,KAAKwU,QAASwB,KAAKC,UAAUjW,KAAKoW,WAAYD,IACtDA,GACH3Q,EAAOqB,OAAOqQ,iBAAiB,6BAM5BF,mBAAmBP,GAC1B,IAAIb,EAAUa,EAAK5T,QAAQ,KAAM,KAAKC,MAAM,KAAKzB,MACjDuU,EAAUA,EAAS9S,MAAM,KAAK,GAAGD,QAAQ,IAAK,KAC9CqC,EAAGgR,SAASO,EAAM,QAAQ,CAACN,EAAKvD,KAC/B,IAAKuD,EAAK,CACT,IAAIhE,EAAQS,EAAQ9P,MAAM,MACtB+S,EAAQ,GACZ7V,KAAKoW,SAAST,OAAS3V,KAAKoW,SAAST,OAAOjF,QAAQmF,GAC5CA,EAAMD,UAAYA,IAE1B,IAAK,IAAIrU,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IACvB,IAANA,GACHvB,KAAKoW,SAAST,OAAOpV,KAAK,CAAEsV,MAAO,MAAOD,QAAAA,EAASrL,KAAM4H,EAAM,MAE5D0D,EAAQ1D,EAAM5Q,GAAG2S,MAAM,oCAC1BlU,KAAKoW,SAAST,OAAOpV,KAAK,CAAEsV,MAAOA,EAAM,GAAID,QAAAA,EAASrL,KAAM4H,EAAM5Q,KAIrEvB,KAAK4W,aAAY,MAGXnB,WAAWV,EAAaoC,EAAoC3B,GAEnE,IAAI4B,EACAC,EAAW,GACf,GAA8B,MAA1BtC,EAAYhC,OAAO,GAAY,CAClC,IAAIuE,EAAavC,EAAYpR,UAAU,GACvCyT,EAAUpX,KAAKoW,SAAST,OAAOjF,QAAQ6G,GAC/BA,EAAK3B,QAAQ4B,WAAWF,UAGhC,IAAkC,IAA9BvC,EAAYhU,QAAQ,KAAa,CACpC,IAAI8U,EAAQd,EAAYjS,MAAM,KAAK,GAC/B2U,EAAc1C,EAAYjS,MAAM,KAAK,GACzCsU,EAAUpX,KAAKoW,SAAST,OAAOjF,QAAQ6G,GAC3BA,EAAK1B,QAAUA,GAAS0B,EAAK3B,QAAQ4B,WAAWC,UAI5DL,EAAUpX,KAAKoW,SAAST,OAAOjF,QAAQ6G,GAC3BA,EAAK1B,MAAM2B,WAAWzC,KAKpC,IAAK,IAAIxT,EAAI,EAAGA,EAAI6V,EAAQhW,OAAQG,IAAK,CACxC,IAAIgW,EAAOH,EAAQ7V,GACfsU,EAAQ0B,EAAK1B,MAAQ,IAAM0B,EAAK3B,QACpC,GAAIC,IAAUd,EACb,SAED,GAAmB,QAAfwC,EAAK1B,MAAiB,CACzB,IAAKd,EAAYyC,WAAW,KAC3B,SAED3B,EAAQ,IAAM0B,EAAK3B,QACnByB,EAAW,MAEZ,IAAIK,EAAS,GAC+B,MAAxCH,EAAKhN,KAAKwI,OAAOwE,EAAK1B,MAAMzU,UACC,IAA5BmW,EAAKhN,KAAKxJ,QAAQ,OACrB2W,EAASH,EAAKhN,KAAKzH,MAAM,KAAK,GAAK,MAGL,IAA5ByU,EAAKhN,KAAKxJ,QAAQ,OACrB2W,GAAUH,EAAKhN,KAAK5G,UAAU4T,EAAKhN,KAAKxJ,QAAQ,KAAO,IAEpD2W,EAAOtW,OAAS,GAAkB,QAAbiW,IAAsBA,EAAW,OAC1DF,EAAK5W,KAAK,CAAEsV,MAAAA,EAAO6B,OAAAA,EAAQL,SAAAA,EAAUvM,MAAO0K,IAE7C,OAAO2B,K,6GCxKT,eAQS,EAAA/P,wBAPT,MACCuQ,kBAAkBhP,EAA+BsC,GAEhD,OADa,IAAI,EAAA2M,iBAAiBjP,EAAUsC,GAC9B4M,yB,gHCLhB,eACA,SAEA,oCAEQC,uBAAuBnP,GAC7B,OAAO,IAAIlI,SAAQC,IAClB,IAAIqX,EAAYtW,EAAOuW,UAAUrP,EAAS2M,WAC7B2C,EAAsC,GAEnDF,EAAUG,QAAQnG,SAAQoG,IACb,IAAIC,EAAO5S,EAAO6S,WAAWC,SAErCC,EAAgB,IAAI/S,EAAOwF,SAASmN,EAAO1G,GAAGxG,SAASV,KAAM,GAE7DiO,GAAsC,IAApBL,EAAOM,QAAkB9P,EAAS2B,UAAY,EAAI6N,EAAOM,QAC/DC,EAAc,IAAIlT,EAAOwF,SAASwN,EAAgB,GAElDG,EAAc,IAAInT,EAAOoT,SAASjQ,EAAS+C,IAAK,IAAIlG,EAAOuF,MAAMwN,EAAeG,IAEhGT,EAAQ1X,KAAK,IAAIiF,EAAOqT,kBAAkBV,EAAO1G,GAAGzK,MAAOoR,EAAM,GAAIO,OAGtEjY,EAAQuX,S,sGCvBX,eACMa,EAAc,wBAoCpB,SAASC,EAAcC,GACtB,IAAIC,EAAY,GAEhBA,GAAaH,EACbG,GAAa,sBACb,IAAIC,EAAaF,EAAU9E,MAAM,UAcjC,OAbmB,OAAfgF,GAAuBA,EAAW9X,OAAS,IAC9C8X,EAAaA,EAAW,GAAGvV,UAAU,EAAGuV,EAAW,GAAG9X,OAAS,GAAG0B,MAAM,KACpEoW,EAAW9X,OAAS,IACvB6X,GAAa,qBACbC,EAAWnH,SAAQ,SAAUoH,GAC5BF,GAAa,UAAYE,EAAU,YAKtCF,GAAa,kBACbA,GAAa,oBACbA,GAAaH,EACNG,EAGC,EAAAxS,iBAxDT,WACC,IAAIgC,EAASjD,EAAOqB,OAAOwC,iBAC3B,GAAIZ,EAAQ,CACX,IAAIE,EAAWF,EAAOE,SAClByQ,EAAiB3Q,EAAO+K,UAAU9D,MAAMsE,KAAKvL,EAAO+K,UAAU9D,MAAMnF,KAAM,GAG9E,KAAO6O,EAAe7O,KAAO5B,EAAS2B,WAEH,KADxB7B,EAAOE,SAAS6B,OAAO4O,EAAe7O,MAAMI,KAC9C9H,QAAQ,SAAU,KACzBuW,EAAiBA,EAAeC,UAAU,EAAG,GAS/C,IAJID,EAAe7O,OAAS5B,EAAS2B,YACpC8O,EAAiBA,EAAeC,WAAW,EAAG,IAGxCD,EAAe7O,MAAQ,GAAG,CAChC,IAAII,EAAOlC,EAAOE,SAAS6B,OAAO4O,EAAe7O,MAAMI,KACvD,GAAsB,IAAhBA,EAAKvJ,QAAmC,MAAnBuJ,EAAKoI,OAAO,IAAiC,OAAnBpI,EAAKoI,OAAO,IAAkC,MAAnBpI,EAAKoI,OAAO,GAAa,CACxGtK,EAAOqL,MAAMC,IACZA,EAAYK,OAAOgF,EAAgBL,EAAcpO,OAElD,MAEAyO,EAAiBA,EAAeC,WAAW,EAAG,O,uHC9BlD,eAEA,0CACCC,6BAA6B3Q,EAA+BsC,GAW3D,MAAMsO,EAAc5Q,EAAS6B,OAAOS,EAASV,MAAMI,KACnD,GAA+C,MAA3C4O,EAAYxG,OAAO9H,EAAS4I,WAC/B,OAAO7T,KAAKwZ,cAAcvO,EAASV,KAAMgP,EAAYE,OAAO,EAAGxO,EAAS4I,YAEzE,IAAI6F,EAAiC,KACjCjH,EAAa,iDAGjB,KAAOiH,EAASjH,EAAWkH,KAAKJ,IAAc,CAC7C,IAAI7J,EAAQgK,EAAOvI,MACnBzB,GAASgK,EAAO,GAAGtY,OAASsY,EAAO,GAAGtY,OACtC,IAAIyN,EAAMa,EAAQgK,EAAO,GAAGtY,OAAS,EAErC,GAAIsO,GAASzE,EAAS4I,WAAahF,GAAO5D,EAAS4I,UAClD,OAAO,IAAIrO,EAAOoU,sBAAsB,IAAIpU,EAAOuF,MAAME,EAASV,KAAMmF,EAAOzE,EAASV,KAAMsE,GAAM6K,EAAO,KAM9GF,cAAcjP,EAAcqI,GAC3B,IAAIiH,GAAiB,EACrB,IAAK,IAAItY,EAAI,EAAGA,EAAIqR,EAAQxR,OAAQG,IACT,MAAtBqR,EAAQG,OAAOxR,KAClBsY,GAAkBA,GAGpB,GAAIA,EACH,OAED,IAAIC,EAAQ,EACR7O,EAAW,EACf,IAAK,IAAI1J,EAAIqR,EAAQxR,OAAS,EAAGG,GAAK,EAAGA,IAAK,CAC7C,IAAI0T,EAAOrC,EAAQG,OAAOxR,GAI1B,GAHa,MAAT0T,IACH4E,GAAkBA,GAEN,MAAT5E,IAAiB4E,IACpBC,IACc,IAAVA,GAAa,CAChB7O,EAAW1J,EACX,MAGW,MAAT0T,GAAiB4E,GACpBC,IAGF,GAAc,IAAVA,EAAa,CAChB,IACIrH,EAAa,iDACbyB,EAFOtB,EAAQ6G,OAAO,EAAGxO,GAEZiJ,MAAMzB,GACvB,GAAIyB,EACH,OAAO,IAAI1O,EAAOoU,sBAAsB,IAAIpU,EAAOuF,MAAMR,EAAMU,EAAWiJ,EAAM,GAAG9S,OAAQmJ,EAAMqI,EAAQxR,OAAS,Q,iHCnEtH,eAmBA,SAAS2Y,EAAmBxP,EAActH,EAAoB+W,GAQ7D,GANyB,IADTzP,EAAK1H,QAAQ,YAAa,IAC5BzB,QACb4Y,EAAUzZ,KAAKiF,EAAOyU,SAAS7F,OAAO,IAAI5O,EAAOwF,SAAS/H,EAAY,GAAI,SAEvEsH,EAAK2P,SAAS,OAAS3P,EAAK2P,SAAS,OACxCF,EAAUzZ,KAAKiF,EAAOyU,SAAS7F,OAAO,IAAI5O,EAAOwF,SAAS/H,EAAYsH,EAAKnJ,QAAS,MAEjFmJ,EAAKiN,WAAW,KAAM,CACzB,IAAI2C,EACJ,IAAKA,EAAW,EAAGA,EAAW5P,EAAKnJ,QACJ,MAA1BmJ,EAAKwI,OAAOoH,GAD0BA,KAK3CH,EAAUzZ,KAAKiF,EAAOyU,SAASpX,QAAQ,IAAI2C,EAAOuF,MAAM,IAAIvF,EAAOwF,SAAS/H,EAAY,GAAI,IAAIuC,EAAOwF,SAAS/H,EAAYkX,IAAY,OAEzI,GAAI5P,EAAK2J,MAAM,0FAA2F,CACzG,IAAIkG,EAAoB,KACpBC,EAAc9P,EAAKxJ,QAAQ,KAC3BuZ,EAAW,EACXC,EAAa,EACbtF,EAAO,GACX,GACCA,EAAO1K,EAAKwI,OAAOuH,EAAWC,EAAaF,GAC9B,MAATpF,EACHsF,IACmB,MAATtF,IACVqF,IACAF,GAAqB,YAEL,MAATnF,GAAyB,MAATA,GACrBqF,IAAaC,GAChBP,EAAUzZ,KAAKiF,EAAOyU,SAASpX,QAAQ,IAAI2C,EAAOuF,MAAM,IAAIvF,EAAOwF,SAAS/H,EAAYoX,GAAc,IAAI7U,EAAOwF,SAAS/H,EAAYoX,EAAcC,EAAWC,IAAcH,KAnDhL,oCACCI,+BAA+B7R,EAA+B8R,EAASxR,GACtE,IAAI+Q,EAA+B,GACnC,IAAK,IAAIzY,EAAI,EAAGA,EAAIoH,EAAS2B,UAAW/I,IAEvCwY,EADWpR,EAAS6B,OAAOjJ,GAAGoJ,KACLpJ,EAAGyY,GAE7B,OAAOA,EAERU,oCAAoC/R,EAAUmC,EAAO2P,EAASxR,GAC7D,IAAI+Q,EAA+B,GACnC,IAAK,IAAIzY,EAAIuJ,EAAM4E,MAAMnF,KAAMhJ,GAAKuJ,EAAM+D,IAAItE,KAAMhJ,IAEnDwY,EADWpR,EAAS6B,OAAOjJ,GAAGoJ,KACLpJ,EAAGyY,GAE7B,OAAOA,K,sHChBT,eACA,SAGMW,EAAuBC,OAAOC,KAAK,EAAAC,WACnCjT,EAAiB,IAAIrC,EAAOuV,qBAAqBJ,EAHhC,CAAC,aAuCG,EAAA9S,eAAAA,EAnC3B,MAAMpG,EAAS,IAAI,EAAAwD,gBAKb2C,EAA0D,CAC/DoT,8BACCrS,GAGA,MAAMgC,EAAOhC,EAAS2M,UAChBoE,EAASjY,EAAOwZ,aAAatQ,GAC7BuQ,EAAgB,IAAI1V,EAAO2V,sBAAsBtT,GACvD,IAAK,IAAI0C,EAAO,EAAGA,EAAOmP,EAAOtY,OAAQmJ,IAAQ,CAChD,IAAI6Q,EAAS1B,EAAOnP,GACpB,IAAK,IAAI8Q,EAAU,EAAGA,EAAUD,EAAOha,OAAQia,IAAW,CACzD,IAAIC,EAAIF,EAAOC,GACXnS,EAAOoS,EAAEpS,KACTA,IAAS,EAAA4R,UAAUS,aACtBD,EAAErQ,UAAY,EACdqQ,EAAElS,KAAO,KAAOkS,EAAElS,MAEfkS,EAAErQ,SAAW,GAChBoD,QAAQC,IAAI8M,GAEbF,EAAc3a,KACb,IAAIiF,EAAOuF,MAAM,IAAIvF,EAAOwF,SAAST,EAAM+Q,EAAErQ,UAAW,IAAIzF,EAAOwF,SAAST,EAAM+Q,EAAErQ,SAAWqQ,EAAElS,KAAKhI,SACtG8H,EAAM,CA9BK,cAkCd,OAAOgS,EAAcM,UAId,EAAA5T,iBAAAA,G,sGCxCT,eAOS,EAAAV,mBANT,MACCuU,aAAa9S,EAA+BsC,GAE3C,OADe,IAAI,EAAA2M,iBAAiBjP,EAAUsC,GAChCyQ,uB,4GCLhB,eACA,SACMxW,EAAK,EAAQ,KACbzD,EAAS,IAAI,EAAAwD,gBAwEV,EAAAiD,uBAvET,MACCyT,kBAAkBhT,EAA+BsC,GAChD,IAAI2Q,EAAUna,EAAOoa,WAAWlT,EAAS6B,OAAOS,GAAUN,KAAMM,EAAS4I,WACrE6F,EAA4B,GAChC,QAAgB9T,IAAZgW,EAAuB,CAC1B,IAAIE,EAAwBF,EAAQ1S,KAChC6S,EAAcH,MAAAA,OAAO,EAAPA,EAASxS,KAC3B,GAAI0S,IAAe,EAAAhB,UAAUjF,MAAO,CACnC,IAAID,EAAUjN,EAASqT,SAASnZ,QAAQ,KAAM,KAAKC,MAAM,KAAKzB,MAC9DuU,EAAUA,EAAS9S,MAAM,KAAK,GAAGD,QAAQ,IAAK,KAC9CiZ,EAAa,EAAAhB,UAAUmB,SACvB,IAAIC,EAAwBH,EAAc,IAAMnG,EAE5CuG,EAAqBxT,EAAS2M,UAAUxS,MAAM,MAClD,IAAK,IAAIvB,EAAI,EAAGA,EAAI4a,EAAS/a,OAAQG,IACpC,GAAI4a,EAAS5a,GAAG6a,SAASF,IAAkBC,EAAS5a,GAAG6a,SAASL,GAAc,CAC7E,IAAIM,EAAgBF,EAAS5a,GAAGR,QAAQmb,IACjB,IAAnBG,IACHA,EAAgBF,EAAS5a,GAAGR,QAAQgb,IAErC,IAAI9S,EAAQxH,EAAOoa,WAAWM,EAAS5a,GAAI8a,EAAgB,QAC7CzW,IAAVqD,GAAwBA,EAAMG,OAAS8S,GAAiBjT,EAAMG,OAAS2S,GACzE9S,EAAMC,OAAS,EAAA4R,UAAUmB,UAAYhT,EAAMC,OAAS,EAAA4R,UAAUS,YAC/D7B,EAAQnZ,KAAK,IAAIiF,EAAOoT,SAASjQ,EAAS+C,IAAK,IAAIlG,EAAOuF,MAAMxJ,EAAG8a,EAAe9a,EAAG8a,EAAgBpT,EAAMG,KAAKhI,UAKnH,OAAOpB,KAAKsc,sBAAsB5C,EAAQwC,EAAeJ,GAEzD,OAAIA,IAAe,EAAAhB,UAAUyB,OAAST,IAAe,EAAAhB,UAAU0B,OACvDxc,KAAKsc,sBAAsB5C,EAAQqC,EAAaD,GAEjDrb,QAAQC,QAAQgZ,GAGxB,OAAOjZ,QAAQC,QAAQgZ,GAGzB4C,sBAAsB5C,EAA2BqC,EAAqBD,GAErE,OAAO,IAAIrb,SAAQC,IAClB8E,EAAOoD,UAAU0N,UAAU,OAAOzM,MAAM0M,IACvC,IAAIkG,EAAelG,EAAMnV,OACzB,IAAK,IAAIG,EAAI,EAAGA,EAAIkb,EAAclb,IAAK,CACtC,IAAIkV,EAAOF,EAAMhV,GAAGuE,OACpBZ,EAAGgR,SAASO,EAAM,QAAQ,CAACN,EAAKvD,KAC/B,IAAKuD,GACAvD,EAAQwJ,SAASL,GAAc,CAClC,IAAI5J,EAAQS,EAAQ9P,MAAM,MAC1B,IAAK,IAAIvB,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IACjC,GAAI4Q,EAAM5Q,GAAG6a,SAASL,GAAc,CACnC,IAAIM,EAAgBlK,EAAM5Q,GAAGR,QAAQgb,GACjC9S,EAAQxH,EAAOoa,WAAW1J,EAAM5Q,GAAI8a,EAAgB,QAC1CzW,IAAVqD,GAAuBA,EAAMG,OAAS2S,IACxC9S,EAAMC,OAAS4S,GAAe7S,EAAMC,OAAS,EAAA4R,UAAUS,YAAcO,IAAe,EAAAhB,UAAUmB,WAC/FvC,EAAQnZ,KAAK,IAAIiF,EAAOoT,SAASpT,EAAOkX,IAAIlN,KAAKiH,GAAO,IAAIjR,EAAOuF,MAAMxJ,EAAG8a,EAAe9a,EAAG8a,EAAgBpT,EAAMG,KAAKhI,WAM1HG,IAAMkb,EAAe,GACxB/b,EAAQgZ,gB,QCefhX,EAAOlB,QAAQc,YA1Df,SAAqBF,EAAyBoB,GAO7C,OANIpB,EAAY4B,YACfR,GAAwBpB,EAAY4B,WAEjC5B,EAAY8B,gBACfV,GAAwBpB,EAAY8B,eAE9BV,GAoDRd,EAAOlB,QAAQe,kBAhDf,SAA2BH,EAAyBoB,GACnD,IAAIuB,EAAiB,GACrB,GAAI3C,EAAYiC,sBACXjC,EAAYiC,qBAAqBjD,OAAS,EAAG,CAChD,IAAK,IAAIG,KAAKa,EAAYiC,qBACzBU,EAAiBA,EAAiB,IAAM3C,EAAYiC,qBAAqB9C,GAE1EiC,GAAwBuB,EAG1B,OAAOvB,GAuCRd,EAAOlB,QAAQgB,eAnCf,SAAwBJ,EAAyBoB,GAChD,GAAIpB,EAAY0C,aACf,IAAK,IAAIvD,KAAKa,EAAY0C,cACrB1C,EAAY0C,aAAavD,GAAGob,UAAqD,KAAzCva,EAAY0C,aAAavD,GAAGob,YAE7D,MAANpb,EACHiC,GAAwBpB,EAAY0C,aAAavD,GAAGob,SAEpDnZ,EAAYA,EAAY,IAAMpB,EAAY0C,aAAavD,GAAGob,SAGvDva,EAAY0C,aAAavD,GAAGqb,iBAC/BpZ,EAAYA,EAAY,IAAMpB,EAAY0C,aAAavD,GAAGqb,gBAGvDxa,EAAY0C,aAAavD,GAAGyD,eAAe,gBAC9CxB,EAAYA,EAAY,IAAMpB,EAAY0C,aAAavD,GAAGqD,aAK9D,OAAOpB,GAeRd,EAAOlB,QAAQiB,cAXf,SAAuBL,EAAyBoB,GAI/C,OAHIpB,EAAY4C,eAAe,iBAC9BxB,EAAYA,EAAY,IAAMpB,EAAYgC,YAAayY,SAEjDrZ,I,gHC7ER,eAOS,EAAAgE,2BANT,MACCsV,qBAAqBnU,EAA+BsC,GAEnD,OADa,IAAI,EAAA2M,iBAAiBjP,EAAUsC,GAC9B8R,uB,4ECLhB,eAEMtb,EAAS,IADf,OACmBwD,iBACnB,mBAAuC+X,GACtC,IAAIC,GAAW,EACXxU,EAASjD,EAAOqB,OAAOwC,iBAC3B,GAAIZ,EAAQ,CACX,IAAIyU,EAAWzU,EAAOE,SAASqT,UACc,IAAzCgB,EAAMG,IAAID,EAAW,iBACxBD,GAAW,EACXD,EAAMI,OAAOF,EAAW,gBAAgB,IAExCF,EAAMI,OAAOF,EAAW,gBAAgB,GAEzC,IACI/K,EADW1J,EAAOE,SAAS2M,UACVxS,MAAM,MACvBwH,EAAY6H,EAAM/Q,OACtB,GAAIkJ,EAAW,CACd,IAAI+S,EAAiBlL,EAAM7H,EAAY,GAAGlJ,OAC1C,IAAK,IAAIG,EAAI,EAAGA,EAAI+I,EAAW/I,IAAK,CACnC,IAAI+b,EAAO7b,EAAO8b,mBAAmBpL,EAAM5Q,GAAI0b,GACxB,KAAnBK,EAAKE,YACRrL,EAAM5Q,GAAK+b,EAAKG,UAGlBhV,EAAOqL,MAAKC,IACXA,EAAYlR,QAAQ,IAAI2C,EAAOuF,MAAM,EAAG,EAAGT,EAAW+S,GAAiBlL,EAAMuL,KAAK,c,6aCpBtF,eAMA,SACM,QAAE3d,GAAY,EAAQ,IAC5B,SACA,SACA,SACM4d,EAAmBnY,EAAOC,UAAUC,2BAA2B,SA4BrE,MAAawE,UAA0B,EAAA0T,aAgBtC,cACC5R,QAZO,KAAA6R,iBAAmB,IAAI,EAAAC,QAEvB,KAAAC,mBAAqB,IAAIhe,EAahCC,KAAKge,0BAAyB,GAC9Bhe,KAAKie,4BAA2B,GAChCje,KAAKke,SAAW,GAChBle,KAAKme,UAAY,IAAI,EAAAtS,SAGrB7L,KAAKme,UAAUhR,GAAG,eAAe,KAChCnN,KAAK4O,UAAU,IAAI,EAAAwP,aAAa,QAASlU,EAAkBmU,eAE5Dre,KAAKme,UAAUhR,GAAG,cAAc,KAC/BnN,KAAK4O,UAAU,IAAI,EAAAwP,aAAa,OAAQlU,EAAkBmU,eAE3Dre,KAAKme,UAAUhR,GAAG,oBAAoB,KACrCnN,KAAK4O,UAAU,IAAI,EAAAwP,aAAa,aAAclU,EAAkBmU,eAEjEre,KAAKme,UAAUhR,GAAG,wBAAwB,KACzCnN,KAAK4O,UAAU,IAAI,EAAAwP,aAAa,kBAAmBlU,EAAkBmU,eAEtEre,KAAKme,UAAUhR,GAAG,mBAAmB,KACpCnN,KAAK4O,UAAU,IAAI,EAAAwP,aAAa,YAAalU,EAAkBmU,eAEhEre,KAAKme,UAAUhR,GAAG,uBAAwBwD,IACzC3Q,KAAK4O,UAAU,IAAI,EAAA0P,gBAAgB,UAAqC,CAAE9M,SAAUb,EAAGa,SAAUC,GAAId,EAAGc,SAGzGzR,KAAKme,UAAUhR,GAAG,OAAO,KACxBnN,KAAK4O,UAAU,IAAI,EAAA2P,oBAQXC,kBAAkBrb,EAA4CmQ,GAGvEnQ,EAASsb,KAAOtb,EAASsb,MAAQ,GAGjCtb,EAASsb,KAAKC,kCAAmC,EAGjDvb,EAASsb,KAAKE,2BAA4B,EAG1Cxb,EAASsb,KAAKG,yBAA0B,EAGxCzb,EAASsb,KAAKI,4BAA6B,EAC3C1b,EAASsb,KAAKK,4BAA8B,CAAC,IAAK,KAGlD3b,EAASsb,KAAKM,uBAAwB,EAGtC5b,EAASsb,KAAKO,oCAAqC,EACnD7b,EAASsb,KAAKQ,8BAA+B,EAC7C9b,EAASsb,KAAKS,wBAAyB,EAMvClf,KAAKmf,aAAahc,GAClBnD,KAAK4O,UAAU,IAAI,EAAAwQ,kBAOVC,yBAAyBlc,EAAmDmQ,GACrFtH,MAAMqT,yBAAyBlc,EAAUmQ,GAIzCtT,KAAK+d,mBAAmB5c,SAGTme,cAAcnc,EAAwCmQ,G,+CAM/DtT,KAAK+d,mBAAmB5d,KAAK,KAGnCH,KAAKme,UAAU7Q,KAAKgG,EAAK7J,SAAU6J,EAAK3J,KAAM2J,EAAK5J,mBAAmBG,MAAK,IAAY,EAAD,gCACrF7J,KAAKuf,mBAAmB/Z,EAAOqB,OAAOwC,iBAAkBV,SAAUgV,GAClE3d,KAAKme,UAAUzO,MAAM4D,EAAK/J,UAAW+J,EAAK9J,aAC1CxJ,KAAKke,SAAW5K,EAAK/J,QACrBvJ,KAAKmf,aAAahc,QAChBqc,OAAOrR,IACT3I,EAAOqB,OAAOqQ,iBAAiB,mEAGvBuI,sBAAsBtc,EAAgDmQ,GAE/E,MAAMmD,EAAenD,EAAKjI,OAAOoL,KAC3BiJ,EAAcpM,EAAKnB,OAAS,GAElCnS,KAAKme,UAAUtM,iBAAiB4E,GAEhC,MAAMkJ,EAAoBD,EAAYE,KAAIC,IACzC,IAAI,SAAErO,EAAQ,KAAEjH,EAAI,GAAEkH,GAAOzR,KAAKme,UAAU5M,cAAckF,EAAMzW,KAAK8f,4BAA4BD,IACjG,MAAMlP,EAA+B,IAAI,EAAAoP,WAAWvO,EAAUxR,KAAKggB,4BAA4BzV,IAE/F,OADAoG,EAAGc,GAAKA,EACDd,KAGRxN,EAASsb,KAAO,CACfwB,YAAaN,GAEd3f,KAAKmf,aAAahc,GAClBnD,KAAKme,UAAUvO,qBAGNsQ,eAAe/c,GAGxBA,EAASsb,KAAO,CACf0B,QAAS,CACR,IAAI,EAAAC,OAAOlW,EAAkBmU,UAAW,cAG1Cre,KAAKmf,aAAahc,GAGTkd,kBAAkBld,EAA4CmQ,GAEvE,MAAMxC,EAAwC,iBAApBwC,EAAKxC,WAA0BwC,EAAKxC,WAAa,EAErEC,EAAWD,GADwB,iBAAhBwC,EAAKgN,OAAsBhN,EAAKgN,OAAS,KAG5DC,EAAMvgB,KAAKme,UAAUtN,MAAMC,EAAYC,GAC7C5N,EAASsb,KAAO,CACf+B,YAAaD,EAAIvP,OAAO4O,KAAIa,GAAK,IAAI,EAAAC,WAAWD,EAAEtP,MAAOsP,EAAErX,KAAMpJ,KAAK2gB,aAAaF,EAAEjR,MAAOxP,KAAKggB,4BAA4BS,EAAElW,SAC/HqW,YAAaL,EAAInP,OAEA,IAAdmP,EAAInP,OACPpR,KAAK4O,UAAU,IAAI,EAAA2P,iBAEpBve,KAAKmf,aAAahc,GAGT0d,cAAc1d,EAAwCmQ,GAE/DnQ,EAASsb,KAAO,CACfqC,OAAQ,CACP,IAAI,EAAAC,MAAM,QAAS/gB,KAAK6d,iBAAiBmD,OAAO,YAAY,GAC5D,IAAI,EAAAD,MAAM,SAAU/gB,KAAK6d,iBAAiBmD,OAAO,WAAW,KAG9DhhB,KAAKmf,aAAahc,GAGH8d,iBAAiB9d,EAA2CmQ,EAAwCnK,G,yCAEnH,MAAM+X,EAAsC,GAC5C,IAAIC,EACJ,MAAMC,EAAQphB,KAAK6d,iBAAiBV,IAAI7J,EAAK+N,oBAC7C,GAAc,WAAVD,EAAoB,CACvB,IAAIE,EAAYthB,KAAKme,UAAUlM,aAAa,UAC5C,IAAK,IAAI1D,KAAW+S,EACnBJ,EAAU3gB,KAAK,CACd6I,KAAMmF,EACNrF,KAAM,SACNlC,MAAOsa,EAAU/S,GACjB8S,mBAAoB,QAGhB,CACN,MAAME,EAAqBH,EAAMte,MAAM,KACjC6P,EAAqBpC,SAASgR,EAASlgB,OACvCmgB,EAAUD,EAAS7D,KAAK,KAC9B,IACI+D,EADAH,EAAYthB,KAAKme,UAAUlM,aAAa,SAExCyP,GAAqB,EACrBC,EAAkB,GACtB,IAAK,IAAIpT,KAAW+S,EAAW,CAC9B,IAAIM,EAAY5hB,KAAK6hB,WAAWtT,EAAS+S,EAAU/S,IAC/CmT,GACHD,EAAUG,EACVF,GAAY,KAGTP,EAAiBnhB,KAAK8hB,UAAUL,EAAUG,EAAWjP,EAAY6O,EAASG,MACnC,IAAtCR,EAAeE,qBAA4BM,EAAUF,EAAS5O,MAAMF,IACxEuO,EAAU3gB,KAAK4gB,IAEhBM,EAAUG,GAEX,IAAKF,EAAW,CACf,MAAMK,EAAoB,CAAE3Y,KAAM,GAAI,WAAc,EAAG,MAAS,GAAI,QAAW,KAC3E+X,EAAiBnhB,KAAK8hB,UAAUL,EAAUM,EAAUpP,EAAY6O,EAASG,KAC5ET,EAAU3gB,KAAK4gB,IAIlBhe,EAASsb,KAAO,CACfyC,UAAWA,GAEZlhB,KAAKmf,aAAahc,MAGX2e,UAAUL,EAAkBG,EAAoBjP,EAAoB6O,EAAiBG,GAC5F,IAAIK,EACAC,EAA0B,EAC9B,GAAmB,IAAftP,GAAqB8O,EAAQ5O,MAAMF,EAAa,KAAO6O,GAAWC,EAAQ9O,WAAaA,EAC1F,GAAI8O,EAAQ9O,WAAaA,EAAa,GACrC,GAAIgP,IAAYF,EAAQ5O,MAAMF,GAAa,CAC1C,IAAIvJ,EAAOqY,EAAQ5O,MAAMF,GACrBA,EAAa,IAAKvJ,GAAQ,KAC9B4Y,EAAY,CACX5Y,KAAAA,EACAF,KAAM,SACNlC,MAAO,YACPqa,mBAAoBrhB,KAAK6d,iBAAiBmD,OAAOS,EAAQ5O,MAAMF,GAAc,KAAOA,EAAa,WAI/F8O,EAAQ5O,MAAMF,KAAgBiP,EAAU/O,MAAMF,KACjDsP,EAAkBjiB,KAAK6d,iBAAiBmD,OAAOS,EAAQ5O,MAAMF,GAAc,KAAOA,EAAa,KAEhGqP,EAAY,CACX5Y,KAAMqY,EAAQrY,KACdF,KAAM,SACNlC,MAAOya,EAAQ7O,QACfyO,mBAAoBY,GAIvB,OAAOD,EAEEE,gBAAgB/e,EAA0CmQ,GACnEtT,KAAKme,UAAUrO,WACf9P,KAAKmf,aAAahc,GAGTgf,YAAYhf,EAAsCmQ,GAC3DtT,KAAKme,UAAUtO,KAAK,QACpB7P,KAAKmf,aAAahc,GAGTif,cAAcjf,EAAwCmQ,EAAqCnK,GACpGnJ,KAAKme,UAAUtO,KAAK,QACpB7P,KAAKmf,aAAahc,GAGTkf,eAAelf,EAAyCmQ,EAAsCnK,GACvGnJ,KAAKme,UAAUtO,KAAK,SACpB7P,KAAKmf,aAAahc,GAGHmf,gBAAgBnf,EAA0CmQ,G,yCACpD,UAAjBA,EAAKnO,SAAwC,SAAjBmO,EAAKnO,SACpCnF,KAAKme,UAAU3L,aAAac,EAAKb,YAAY5I,MAAM0Y,IAClDpf,EAASsb,KAAO,CACf/E,OAAQ6I,EAASnZ,KAAO,OAASmZ,EAAS3P,QAC1CyO,mBAAoB,GAErBrhB,KAAKmf,aAAahc,SAKLqf,eAAerf,EAAyCmQ,G,yCACvE,IAAImP,GAAc,IAAAtP,cAAanT,KAAKke,UAAUnQ,WAAWjL,MAAM,MAC/D9C,KAAKme,UAAUjM,aAAauQ,GAAa5Y,MAAMyI,IAC1CA,EAAWlR,OACdoE,EAAOqB,OAAOqQ,iBAAiB,iDAE/BlX,KAAKme,UAAUnO,QAAQhQ,KAAKke,aAG9Ble,KAAKmf,aAAahc,MAGTuf,kBAAkBvf,EAA4CmQ,EAAyCnK,GAChHnJ,KAAKme,UAAUpO,aACf/P,KAAKmf,aAAahc,GAGXwd,aAAagC,GACpB,OAAO,IAAI,EAAAC,QAAO,IAAAC,UAASF,GAAW3iB,KAAK8iB,4BAA4BH,QAAW/c,OAAWA,EAAW,sBAGzFmd,qBAAqB5f,EAA+CmQ,G,yCACnF,MAAM0P,QAA0BhjB,KAAKme,UAAU3L,aAAa,YACtDmC,EAASqO,EAAapQ,QAAQ9P,MAAM,KAC1C,IAAImgB,EAActO,EAAO,GAAGvT,OAASuT,EAAO,GAAGvT,OAASuT,EAAO,GAAGvT,OAAS,EACvE8hB,EAAcF,EAAapQ,QAAQ6G,OAAOwJ,GAC9C9f,EAASsb,KAAO,CACf0E,YAAaxO,EAAO,GACpBuO,YAAAA,EACAE,UAAW,SACXC,QAAS,CACRxY,QAAS,SAAW8J,EAAO,GAC3B2O,SAAU,mBAGZtjB,KAAKmf,aAAahc,MAGX0e,WAAWtT,EAAiBqE,GACnC,IAAI2Q,EAAa,EACb1Q,EAAkB,GAClBzR,EAASmN,EAAQnN,OACjBoiB,EAAajV,EAAQxN,QAAQ,KAC7B0iB,GAAa,EAEjB,GAAID,EAAa,EAAG,CACnB3Q,EAAMtS,KAAKgO,EAAQ5K,UAAU,EAAG6f,IAChCD,IAEA,IAAK,IAAIhiB,EAAIiiB,EAAYjiB,EAAIH,EAAQG,IACA,MAAhCgN,EAAQ5K,UAAUpC,EAAGA,EAAI,IAAckiB,IAC1C5Q,EAAMtS,KAAKgO,EAAQ5K,UAAU,EAAGpC,IAChCgiB,KAGmC,MAAhChV,EAAQ5K,UAAUpC,EAAGA,EAAI,KAAckiB,GAAcA,GAE1D5Q,EAAMtS,KAAKgO,EAAQ5K,UAAU,EAAG4K,EAAQnN,OAAS,SAEjDyR,EAAMtS,KAAKgO,GAEZ,MAAO,CAAE,KAAQA,EAAS,WAAcgV,EAAY,MAAS1Q,EAAOD,QAAAA,GAG7D2M,mBAAmBmE,EAAsCne,GAChE,IAAIoe,EAAmC,GACvC,GAAID,EAAK,CACR,IAAIvR,EAAkB,GACtB,IAAK,IAAIyR,EAAY,EAAGA,EAAYF,EAAIpZ,UAAWsZ,IAAa,CAC/D,MAAMC,EAAaH,EAAIlZ,OAAOoZ,GAC9BzR,EAAM5R,KAAKsjB,EAAWlZ,MAEvB3K,KAAKme,UAAUjM,aAAaC,GAAOtI,MAAMia,IACxC,IAAK,IAAIviB,EAAI,EAAGA,EAAIuiB,EAAS1iB,OAAQG,IAAK,CACzC,IAAIwiB,EAAUD,EAASviB,GAAGuB,MAAM,KAC5BkhB,EAASzT,SAASwT,EAAQ,IAAM,EAChCE,MAAMD,KAAWA,EAAS,GAC9B,IAAIzZ,EAAOgG,SAASwT,EAAQ,IAAM,EAC9BE,MAAM1Z,KAASA,EAAO,GAC1B,IAAI2Z,EAAYR,EAAIlZ,OAAOD,GAAMI,KAAKvJ,OACzB,IAATmJ,GAAyB,IAAXyZ,IAAgBE,EAAY,GAC9C,IAAIrZ,EAAUkZ,EAAQ,GAClBjZ,EAAQ,IAAItF,EAAOuF,MAAMR,EAAMyZ,EAAQzZ,EAAM2Z,GAC7CC,EAAa,IAAI3e,EAAO4e,WAAWtZ,EAAOD,EAASrF,EAAO2F,mBAAmBC,OACjF+Y,EAAWvZ,KAAOC,EAClB8Y,EAAYpjB,KAAK4jB,GAElB5e,EAAiB6E,QACjB7E,EAAiBkG,IAAIiY,EAAIhY,IAAKiY,QAxXlC,sBAGgB,EAAAtF,UAAY,G,mIChD5B,IAAInZ,EAAK,EAAQ,KACbxD,EAAW,EAAQ,KASvB,IAAYoZ,GAAZ,SAAYA,GACX,kBAAqB,gBAAmB,0BAA6B,8BAAiC,sBACtG,sBAAyB,oBAAuB,wBAA2B,gBAAmB,oBAC9F,4BAA+B,kBAAqB,kBAAqB,4BAA+B,sCAHzG,CAAYA,EAAA,EAAAA,YAAA,EAAAA,UAAS,KA6CrB,MAAMjF,EAAQ,8EACRwO,EAAM,yBACNC,EAAM,2BACNC,EAAM,uvBA8xEQ,EAAAA,IAAAA,EA7xEpB,MAAMC,EAAY,4nBA6xET,EAAAA,UAAAA,EA5xET,MAAMC,EAAe,yFACfxI,EAAW,iFACXyI,EAAa,6BACbC,EAAS,wBACTC,EAAS,mBACTC,EAAU,gYACVC,EAAc,qFACdC,EAAgB,cAChBC,EAAU,yCACVC,EAAkB,aAClBC,EAAe,2YACfC,EAAc,idACdC,EAAgB,sFAChBC,EAAc,+GACdC,EAAiB,+BACjBC,EAAgB,CACrB,EAAK,QAAS,EAAK,QAAS,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,KAAM,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,MAC9J,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,OAAQ,EAAK,QAAS,EAAK,SAAU,GAAM,YAAa,GAAM,SAAU,GAAM,YAClJ,GAAM,cAAe,IAAO,QAAS,GAAM,QAAS,GAAM,QAAS,GAAM,QAAS,GAAM,QAAS,GAAM,WAAY,GAAM,SAAU,IAAO,QAC1I,IAAO,QAAS,IAAO,UAAW,IAAO,WAAY,IAAO,WAAY,IAAO,UAAW,IAAO,YAAa,IAAO,UAEhHC,EAAiB,CACtB,EAAK,QAAS,EAAK,OAAQ,EAAK,OAAQ,EAAK,UAAW,EAAK,OAAQ,GAAM,UAAW,EAAK,MAAO,EAAK,YAAa,EAAK,UAAW,EAAK,SAAU,GAAM,OAAQ,EAAK,OAAQ,EAAK,QACnL,EAAK,QAAS,GAAM,UAAW,GAAM,aAAc,EAAK,QAAS,EAAK,SAAU,GAAM,UAAW,EAAK,SAAU,GAAM,QAAS,EAAK,OAAQ,GAAM,YAAa,EAAK,OACpK,GAAM,SAAU,IAAO,WAAY,IAAO,WAAY,GAAM,QAAS,GAAM,WAAY,GAAM,QAAS,GAAM,UAAW,GAAM,WAAY,GAAM,UAAW,GAAM,WAAY,IAAO,SAAU,GAAM,YACnM,KAAQ,UAAW,IAAO,aAAc,KAAQ,WAAY,GAAM,UAE7DC,EAAgB,CACrB,EAAK,SAAU,GAAM,QAAS,GAAM,SAAU,GAAM,QAAS,EAAK,UAAW,EAAK,KAAM,EAAK,MAAO,EAAK,MAAO,EAAK,YAAa,EAAK,OAAQ,EAAK,YAAa,GAAM,QACvK,EAAK,UAAW,GAAM,SAAU,EAAK,OAAQ,GAAM,SAAU,GAAM,WAAY,GAAM,WAAY,IAAO,YAAa,GAAM,aAAc,IAAO,UAAW,IAAO,OAAQ,GAAM,SAChL,GAAM,UAAW,GAAM,WAAY,KAAQ,eAAgB,KAAQ,aAAc,GAAM,OAAQ,GAAM,SAAU,QAAW,aAAc,IAAO,QAAS,KAAQ,YAChK,MAAS,UAAW,IAAO,YAAa,IAAO,UAAW,GAAM,UAAW,IAAO,QAAS,MAAS,YAAa,IAAO,UAAW,IAAO,SAAU,KAAQ,WAAY,GAAM,QAC9K,GAAM,WAAY,KAAQ,UAAW,KAAQ,YAAa,KAAQ,WAG7DC,EAAY,CACjB,MAAS,CACR,aAAgB,IAChB,eAAiB,EACjB,UAAa,yBAEd,MAAS,CACR,aAAgB,IAChB,eAAiB,EACjB,UAAa,uCAEd,GAAM,CACL,aAAgB,IAChB,eAAiB,EACjB,UAAa,gDAEd,KACA,CACC,aAAgB,IAChB,eAAiB,EACjB,UAAa,IAEd,IAAO,CACN,aAAgB,IAChB,eAAiB,EACjB,UAAa,2CAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,2BAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,IAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,iBAEd,GAAM,CACL,aAAgB,IAChB,eAAiB,EACjB,UAAa,kBAEd,IAAO,CACN,aAAgB,IAChB,eAAiB,EACjB,UAAa,sEAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,yCAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,6CAEd,MAAS,CACR,aAAgB,IAChB,eAAiB,EACjB,UAAa,mBAEd,IAAO,CACN,aAAgB,IAChB,eAAiB,EACjB,UAAa,2BAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,oDAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,0BAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,wDAEd,IAAO,CACN,aAAgB,IAChB,eAAiB,EACjB,UAAa,2EAEd,QAAW,CACV,aAAgB,KAChB,eAAiB,EACjB,UAAa,IAEd,SAAY,CACX,aAAgB,MAChB,eAAiB,EACjB,UAAa,IAEd,UAAa,CACZ,aAAgB,MAChB,eAAiB,EACjB,UAAa,aAEd,OAAU,CACT,aAAgB,KAChB,eAAiB,EACjB,UAAa,8CAEd,IAAO,CACN,aAAgB,IAChB,eAAiB,EACjB,UAAa,uCAEd,KAAQ,CACP,aAAgB,IAChB,eAAiB,EACjB,UAAa,8BAEd,MAAS,CACR,aAAgB,IAChB,eAAiB,EACjB,UAAa,2BAEd,OAAU,CACT,aAAgB,IAChB,eAAiB,EACjB,UAAa,uBAEd,UAAa,CACZ,aAAgB,KAChB,eAAiB,EACjB,UAAa,oCAEd,OAAU,CACT,aAAgB,KAChB,eAAiB,EACjB,UAAa,wCAEd,SAAY,CACX,aAAgB,OAChB,eAAiB,EACjB,UAAa,cAEd,UAAa,CACZ,aAAgB,KAChB,eAAiB,EACjB,UAAa,IAEd,YAAe,CACd,aAAgB,KAChB,eAAiB,EACjB,UAAa,gBAEd,MAAS,CACR,aAAgB,MAChB,eAAiB,EACjB,UAAa,gBAEd,MAAS,CACR,aAAgB,KAChB,eAAiB,EACjB,UAAa,uCAEd,MAAS,CACR,aAAgB,QAChB,eAAiB,EACjB,UAAa,aAEd,MAAS,CACR,aAAgB,KAChB,eAAiB,EACjB,UAAa,uBAEd,MAAS,CACR,aAAgB,KAChB,eAAiB,EACjB,UAAa,QAEd,MAAS,CACR,aAAgB,KAChB,eAAiB,EACjB,UAAa,yBAEd,SAAY,CACX,aAAgB,KAChB,eAAiB,EACjB,UAAa,yBAEd,OAAU,CACT,aAAgB,KAChB,eAAiB,EACjB,UAAa,qCAEd,SAAY,CACX,aAAgB,OAChB,eAAiB,EACjB,UAAa,cAEd,MAAS,CACR,aAAgB,MAChB,eAAiB,EACjB,UAAa,uBAEd,MAAS,CACR,aAAgB,MAChB,eAAiB,EACjB,UAAa,0BAEd,QAAW,CACV,aAAgB,MAChB,eAAiB,EACjB,UAAa,iBAEd,SAAY,CACX,aAAgB,MAChB,eAAiB,EACjB,UAAa,aAEd,SAAY,CACX,aAAgB,MAChB,eAAiB,EACjB,UAAa,OAEd,QAAW,CACV,aAAgB,MAChB,eAAiB,EACjB,UAAa,IAEd,UAAa,CACZ,aAAgB,MAChB,eAAiB,EACjB,UAAa,QAEd,OAAU,CACT,aAAgB,MAChB,eAAiB,EACjB,UAAa,oBAGTC,EAAa,CAClB,MAAS,CACR,UAAa,GAEd,KAAQ,CACP,UAAa,IAEd,KAAQ,CACP,UAAa,EACb,OAAU,QAEX,QAAW,CACV,UAAa,GAEd,KAAQ,CACP,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,IAAO,CACN,UAAa,EACb,OAAU,aAEX,UAAa,CACZ,UAAa,EACb,OAAU,aAEX,QAAW,CACV,UAAa,GAEd,OAAU,CACT,UAAa,GAEd,KAAQ,CACP,UAAa,EACb,OAAU,aAEX,KAAQ,CACP,UAAa,EACb,OAAU,SAEX,MAAS,CACR,UAAa,EACb,OAAU,aAEX,MAAS,CACR,UAAa,GAEd,QAAW,CACV,UAAa,EACb,OAAU,QAEX,WAAc,CACb,UAAa,EACb,OAAU,aAEX,MAAS,CACR,UAAa,EACb,OAAU,QAEX,OAAU,CACT,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,OAAU,CACT,UAAa,GACb,OAAU,WAEX,MAAS,CACR,UAAa,GAEd,KAAQ,CACP,UAAa,EACb,OAAU,YAEX,UAAa,CACZ,UAAa,GAEd,KAAQ,CACP,UAAa,GAEd,OAAU,CACT,UAAa,GAEd,YAAe,CACd,UAAa,EACb,UAAa,EACb,OAAU,uBAEX,QAAW,CACV,UAAa,EACb,UAAa,GAEd,UAAa,CACZ,UAAa,GAEd,SAAY,CACX,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,OAAU,CACT,UAAa,EACb,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,MAAS,CACR,UAAa,IAEd,SAAY,CACX,UAAa,EACb,OAAU,kBAEX,SAAY,CACX,UAAa,GAEd,MAAS,CACR,UAAa,EACb,OAAU,OAEX,MAAS,CACR,UAAa,GAEd,SAAY,CACX,UAAa,GAEd,MAAS,CACR,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,SAAY,CACX,UAAa,EACb,UAAa,GAEd,SAAY,CACX,UAAa,EACb,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,SAAY,CACX,UAAa,GAEd,OAAU,CACT,UAAa,GAEd,MAAS,CACR,UAAa,GAEd,OAAU,CACT,UAAa,GAEd,UAAa,CACZ,UAAa,EACb,OAAU,QAEX,SAAY,CACX,UAAa,EACb,OAAU,OAEX,QAAW,CACV,UAAa,GAEd,SAAY,CACX,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,QAAW,CACV,UAAa,EACb,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,WAAc,CACb,UAAa,GAEd,SAAY,CACX,UAAa,GAEd,QAAW,CACV,UAAa,GAEd,OAAU,CACT,UAAa,GAEd,OAAU,CACT,UAAa,IA8yDU,EAAA1gB,gBAnyDzB,oBACS,KAAA2gB,QAAuB,GAIvB,KAAAC,aAAuB,EAQvBC,iBAAiBvb,EAAcU,EAAkB6O,GACxD,IAAIJ,EAAS,CAAE/O,KAAM,GAAIM,SAAAA,GACrB8a,GAAkB,OACRngB,IAAVkU,IACHA,EAAQ,GAET,EAAG,CACF,GAAuB,MAAnBvP,EAAKU,GAAmB,CAC3ByO,EAAS1Z,KAAKgmB,mBA5BL,EA4BiDzb,IAAQU,GAClE8a,GAAkB,EAClB,MAED,IAAIxb,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM+Q,GA6BnC,IAA8B,MAA1B1a,EAAKmP,EAAOzO,UAAmB,CACzC,IAAK8a,EAEJ,MADArM,EAAO/O,KAAO,qBACR+O,EAIP,OAFCA,EAAOzO,WAEDyO,EACD,GAA8B,MAA1BnP,EAAKmP,EAAOzO,WAAqB6O,EAAQ,EAAG,CACtD,IAAKiM,EAEJ,MADArM,EAAO/O,KAAO,qBACR+O,EAENA,EAAOzO,WAER,SAEA,MA9C2D,CAC3D,IAAIgb,EAAW1b,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM+Q,GAAkB,GACvE,GAAiB,KAAbgB,EAYG,IAA8B,MAA1B1b,EAAKmP,EAAOzO,UAAmB,CACzC,IAAK8a,EAEJ,MADArM,EAAO/O,KAAO,qBACR+O,EAKP,OAHII,EAAQ,GACXJ,EAAOzO,WAEDyO,EACD,GAA8B,MAA1BnP,EAAKmP,EAAOzO,WAAqB6O,EAAQ,EAAG,CACtDJ,EAAOzO,WACP,SAEA,MAtBA,GAFA8a,GAAkB,EAClBrM,EAAOzO,UAAYgb,EAAS7kB,OACxBmJ,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM8Q,GAAU,CACnDe,GAAkB,EAClBrM,EAAOzO,UAAYV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM8Q,GAAU,GAAG5jB,OACtE,SACM,GAA8B,MAA1BmJ,EAAKmP,EAAOzO,UAAmB,CACzCyO,EAAS1Z,KAAK8lB,iBAAiBvb,IAAQmP,EAAOzO,SAAU6O,EAAQ,GAChEiM,GAAkB,EAClB,iBAoCK9a,EAAWV,EAAKnJ,QACzB,IAAK2kB,EAEJ,MADArM,EAAO/O,KAAO,qBACR+O,EAEP,GAAII,EAAQ,EAEX,MADAJ,EAAO/O,KAAO,cACR+O,EAEP,OAAOA,EAIDsM,mBAAmBE,EAAgB3b,EAAcU,EAAkB6O,GACzE,IAAIqM,GAAqB,EACrBC,EAAgBnb,OACNrF,IAAVkU,IACHA,EAAQ,GAET,IAAIuM,EAAiB,GACrB,KAAOpb,EAAWV,EAAKnJ,QAAQ,CAC9B,IAAI6T,EAAO1K,EAAKwI,OAAO9H,GACvB,GAAa,MAATgK,EAAc,CACjB,IAAIqR,EAvGK,EAwGT,OAAQD,GACP,IAAK,YACJC,EAvGQ,EAwGR,MACD,IAAK,aACJA,EA3GQ,EA4GR,MACD,IAAK,UACJ,KAAM,CAAE3b,KAAM,iBAAkBM,SAAAA,GAElC,IAAIyO,EAAS1Z,KAAKgmB,mBAAmBM,EAAW/b,IAAQU,EAAU6O,EAAQ,GAC1E,GA/GK,IA+GDoM,EACH,OAAOxM,EAERyM,GAAqB,EACrBlb,EAAWyO,EAAOzO,SAClB,SAGD,GADAob,EAAiB,GACJ,MAATpR,EAAc,CACjB,IAAKkR,EAAoB,CACxB,GAAIlb,IAAamb,GA3HR,IA2HyBF,EACjC,MAAO,CAAEvb,KAAM,GAAIM,WAAYA,GAEhC,KAAM,CAAEN,KAAM,wBAAyBM,SAAAA,GAKxC,OAHI6O,EAAQ,GACX7O,IAEM,CAAEN,KAAM,GAAIM,SAAUA,GAE9B,GAAa,MAATgK,GArIO,IAqISiR,EAAqC,CACxDjb,IACA,IAAIsb,EAAahc,EAAK5G,UAAUsH,GAChC,GAAIsb,EAAWrS,MAAMmQ,GAAM,CAC1B,IAAImC,EAAYD,EAAWrS,MAAMmQ,GAAM,GAIvC,GAHArkB,KAAK4lB,QAAQrlB,KAAK,CAAE2I,KAAM4R,EAAUyB,MAAOnT,KAAMod,EAAWvb,SAAUA,EAAWjL,KAAK6lB,eACtF5a,GAAYub,EAAUplB,OACtB6T,EAAO1K,EAAKwI,OAAO9H,GACN,MAATgK,GAAyB,MAATA,EACnB,KAAM,CAAEtK,KAAM,qCAAsCM,SAAAA,GAEpDkb,GAAqB,EACrB,UAIH,GAAa,MAATlR,EAAc,CACjB,IAAKkR,EAAoB,CACxB,GAAIlb,IAAamb,GAvJR,IAuJyBF,EAAqC,CACtE,GAAc,IAAVpM,EACH,MAAO,CAAEnP,KAAM,GAAIM,WAAYA,GAG/Bkb,GAAqB,EACrBC,IAFAnb,EAGA,SAGF,KAAM,CAAEN,KAAM,wBAAyBM,SAAAA,GAExC,GArKS,IAqKLib,GAjKC,IAiKqCA,EACzC,MAAO,CAAEvb,KAAM,GAAIM,SAAAA,GAGpBkb,GAAqB,EACrBC,IAFAnb,EAGA,SAED,GAAIkb,EAAoB,CACvB,GA1KK,IA0KDD,EACH,MAAO,CAAEvb,KAAM,GAAIM,SAAAA,GAEpB,GAAIV,EAAK5G,UAAUsH,GAAUiJ,MAAM4Q,GAAc,CAChD,IAAI2B,EAAWlc,EAAK5G,UAAUsH,GAAUiJ,MAAM4Q,GAAc,GAC5D9kB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMqd,EAAUxb,SAAUA,EAAWjL,KAAK6lB,aAAc3c,KAAM4R,EAAU2L,WAC5Fxb,GAAYwb,EAASrlB,OACrB+kB,GAAqB,GACJ,MAAbM,GAAiC,OAAbA,KAEvBxb,EADajL,KAAK8lB,iBAAiBvb,EAAMU,GACvBA,SAClBkb,GAAqB,EACrBE,EAAiB,WAElB,SAEA,MAAO,CAAE1b,KAAM,GAAIM,SAAAA,GAGrB,IAAIsb,EAAahc,EAAK5G,UAAUsH,GAChC,IACC,IAAIyb,EAAa1mB,KAAK2mB,UAAUpc,EAAMU,GACtCkb,GAAqB,EACrBlb,EAAWyb,EAAWzb,SACrB,MAAOyb,GACR,GAAmC,OAA/BH,EAAW5iB,UAAU,EAAG,GAC3BsH,GAAY,EAEZkb,GAAqB,EACrBlb,GAFAyb,EAAa1mB,KAAK4mB,eAAerc,EAAMU,GAAU,GAAM,IAEjCA,SACtBkb,GAAqB,OACf,GAAII,EAAWrS,MAAMuQ,GAAe,CAC1C,IAAIoC,EAAeN,EAAWrS,MAAMuQ,GAAe,GACnDzkB,KAAK4lB,QAAQrlB,KAAK,CAAE2I,KAAM4R,EAAU2J,aAAcrb,KAAMyd,EAAc5b,SAAAA,IACtEA,GAAY4b,EAAazlB,OACzBilB,EAAiB,aACjBF,GAAqB,OACf,GAAII,EAAWrS,MAAMsQ,GAAY,CACvC,IAAIqC,EAAeN,EAAWrS,MAAMsQ,GAAY,GAAG7gB,UAAU,GAAGmjB,cAChE7b,GAAY4b,EAAazlB,OAAS,EAClC,IAAI2lB,EAAWF,OACsBjhB,IAAjC4f,EAAeqB,KAClBE,EAAWvB,EAAeqB,IAE3B7mB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM,IAAMyd,EAAc5b,SAAUA,EAAW4b,EAAazlB,OAAS,EAAG8H,KAAM4R,EAAU0J,UAAWuC,SAAU,IAAMA,IAEvI9b,EADajL,KAAKgnB,eAAeD,EAAUxc,EAAMU,GAC/BA,SAClBob,EAAiB,GACjBF,GAAqB,OACf,GAAII,EAAWrS,MAAMqQ,GAAM,CACjC,IAAI0C,EAAiBV,EAAWrS,MAAMqQ,GAAM,GACxCwC,EAAWE,EAAeH,mBACelhB,IAAzC6f,EAAcsB,EAASpjB,UAAU,MACpCojB,EAAW,IAAMtB,EAAcsB,EAASpjB,UAAU,KAEnD3D,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM6d,EAAgBhc,SAAUA,EAAWjL,KAAK6lB,aAAc3c,KAAM4R,EAAUoM,YAAaH,SAAAA,IAC/G9b,GAAYgc,EAAe7lB,OAC3B+kB,GAAqB,OACf,GAAII,EAAWrS,MAAMyQ,IAA4C,KAAjC4B,EAAWrS,MAAMyQ,GAAS,GAAW,CAC3E,IAAIwC,EAAiBZ,EAAWrS,MAAMyQ,GAAS,GAC/C3kB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM+d,EAAgBje,KAAM4R,EAAUsM,OAAQnc,SAAUA,EAAWjL,KAAK6lB,eAC5F5a,GAAYkc,EAAe/lB,OAC3B+kB,GAAqB,OACf,GAAII,EAAWrS,MAAM0Q,GAAS,CACpC,IAAIyC,EAAYd,EAAWrS,MAAM0Q,GAAS,GAC1C5kB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMie,EAAWne,KAAM4R,EAAUwM,OAAQrc,SAAUA,EAAWjL,KAAK6lB,eACvF5a,GAAYoc,EAAUjmB,OACtB+kB,GAAqB,MACf,KAAIlR,EAAKf,MAAM6Q,GAIrB,KAAM,CAAEpa,KAAM,wBAA0BsK,EAAMhK,SAAAA,GAH9CjL,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM6L,EAAM/L,KAAM4R,EAAU2L,SAAUxb,SAAUA,EAAWjL,KAAK6lB,eACpF5a,MAMH,GAAIkb,EAAoB,CACvB,GAAIrM,EAAQ,EACX,KAAM,CAAEnP,KAAM,cAAeM,SAAAA,GAE9B,MAAO,CAAEN,KAAM,GAAIM,SAAAA,GAEnB,KAAM,CAAEN,KAAM,wBAAyBM,SAAAA,GAGjCsc,cAAcnlB,GACrBA,EAAY4B,UAAY,GACxB,IAAIR,EAAYpB,EAAYJ,eAC5BI,EAAYJ,eAAiB,GACzBwB,EAAU0Q,MAAM2B,KACnBzT,EAAY4B,UAAYR,EAAU0Q,MAAM2B,GAAQ,IAEjD,IAAI5K,EAAW7I,EAAY4B,UAAU5C,OACrC,GAAI6J,IAAazH,EAAUpC,OAC1B,OAAOgB,EAER,IAAKoB,EAAUuP,OAAO9H,GAAUiJ,MAAM,UAGrC,OAFA9R,EAAYob,UAAY,uBAAyBha,EAAUuP,OAAO9H,GAClE7I,EAAYolB,cAAgBvc,EACrB7I,EAER,IAAIb,EAAI,EACR,IAAKA,EAAI0J,EAAU1J,GAAKiC,EAAUpC,SACZ,MAAjBoC,EAAUjC,IAA+B,OAAjBiC,EAAUjC,IADGA,KAU1C,OALAa,EAAY8B,cAAgBV,EAAUG,UAAUsH,EAAU1J,GACtDA,IAAOiC,EAAgB,SAC1BpB,EAAYJ,eAAiBwB,EAAUG,UAAUpC,GACjDa,EAAYqlB,mBAAqBlmB,GAE3Ba,EAIAslB,gBAAgBtlB,GACvB,IAAIoB,EAAYpB,EAAYJ,eAE5B,GAAIwB,EAAUW,OAAO,MAAQ,EAAG,CAC/B,IAAI0V,GAAiB,EACrB,IAAK,IAAItY,EAAI,EAAGA,EAAIiC,EAAUpC,OAAQG,IAAK,CAC1C,GAAqB,MAAjBiC,EAAUjC,KACRsY,EAGJ,OAFAzX,EAAYJ,eAAiBwB,EAAUG,UAAU,EAAGpC,GACpDa,EAAYgC,YAAc,CAAEyY,QAASrZ,EAAUG,UAAUpC,GAAGoC,UAAU,GAAIsH,SAAU1J,EAAIa,EAAYqlB,oBAC7FrlB,EAGY,MAAjBoB,EAAUjC,KACbsY,GAAkBA,IAIrB,OAAOzX,EAKAulB,oBAAoBvlB,GAE3B,IAAIiC,EAAiC,GACjCC,EAAkB,EAClBd,EAAYpB,EAAYJ,eACxB4lB,EAAS,GACTrmB,EAAI,EACR,IAAKA,EAAI,EAAGA,GAAKiC,EAAUpC,OAAQG,IAAK,CACvC,IAAI0T,EAAOzR,EAAUjC,GACrB,GAAa,MAAT0T,EAAJ,CAQA,GAAa,MAATA,GAAyB,OAATA,EAGnB,MAFA2S,GAAU3S,OARN3Q,EAAkB,GACrBD,EAAqB9D,KAAKqnB,GAE3BtjB,IACAsjB,EAAS,GAeX,OANItjB,EAAkB,IACrBD,EAAqB9D,KAAKqnB,GAC1BxlB,EAAYJ,eAAiBwB,EAAUG,UAAUpC,GACjDa,EAAYqlB,oBAAuBlmB,EACnCa,EAAYiC,qBAAuBA,GAE7BjC,EAKAylB,iBAAiBzlB,GAExB,IAAIqC,EACAC,EAAuC,GAEvCC,EAAY3E,KAAK8nB,2BAA2B1lB,GAE5Cb,EAAI,EAER,IADAkD,EAAc,CAAEkY,SAAU,GAAIC,eAAgB,GAAIhY,WAAY,GAAImjB,YAAa,EAAGC,YAAa,EAAGC,WAAY,GACvG1mB,EAAIoD,EAAUvD,QAAQ,CAC5B,GAAIG,EAAI,GAAM,EACbkD,EAAYkY,SAAWhY,EAAUpD,GAAGsjB,QACpCpgB,EAAYsjB,YAAcpjB,EAAUpD,GAAG0J,aACjC,CAENxG,EAAYG,WAAaD,EAAUpD,GAAGsjB,QACtCpgB,EAAYujB,YAAcrjB,EAAUpD,GAAG0J,SAIvC,IAAIhH,EAAK1C,EAAI,EACb,KAAO0C,EAAKU,EAAUvD,QACS,KAA1BuD,EAAUV,GAAI4gB,SACjBlgB,EAAU3D,OAAOiD,EAAI,GAMvBS,EAAiBnE,KAAKkE,GACtBA,EAAc,CAAEkY,SAAU,GAAIC,eAAgB,GAAIhY,WAAY,GAAImjB,YAAa,EAAGC,YAAa,EAAGC,WAAY,GAE/G1mB,IAGGoD,EAAUvD,OAAS,GAAM,IAC5BqD,EAAYkY,SAAWhY,EAAUA,EAAUvD,OAAS,GAAGyjB,QACvDpgB,EAAYsjB,YAAcpjB,EAAUA,EAAUvD,OAAS,GAAG6J,SAC1DxG,EAAYG,WAAa,GACzBH,EAAYujB,YAAc5lB,EAAYJ,eAAgBZ,OACtDsD,EAAiBnE,KAAKkE,IAKvB,IAAII,EAA6B7E,KAAKkoB,wBAAwBxjB,GAI9D,OAHIG,EAA2BzD,OAAS,IACvCgB,EAAY0C,aAAeD,GAErBzC,EAGA0lB,2BAA2B1lB,GAElC,IAAIqB,EAA6B,GAC7BC,EAAY,EACZmW,GAAiB,EACjBrW,EAAYpB,EAAYJ,eACxB0N,EAAQtN,EAAYqlB,mBACxB,IAAK,IAAIlmB,EAAI,EAAGA,EAAIiC,EAAUpC,OAAQG,IAGhB,MAAjBiC,EAAUjC,KACbsY,GAAkBA,GAGG,MAAjBrW,EAAUjC,IAA+B,OAAjBiC,EAAUjC,IAAiBsY,IAEnDrW,EAAUG,UAAUD,EAAWnC,GAAGH,OAAS,EAC9CqC,EAAalD,KAAK,CAAEskB,QAASrhB,EAAUG,UAAUD,EAAWnC,GAAI0J,SAAUyE,EAAQhM,IAE3B,IAA7CF,EAAUG,UAAUD,EAAWnC,GAAGH,QAAmE,MAAlDoC,EAAUG,UAAUD,EAAY,EAAGA,IAAwE,OAAlDF,EAAUG,UAAUD,EAAY,EAAGA,IACzJD,EAAalD,KAAK,CAAEskB,QAASrhB,EAAUG,UAAUD,EAAWnC,GAAI0J,SAAUyE,EAAQhM,IAEnFA,EAAYnC,EAAI,GAGlB,IAAIA,EAAIiC,EAAUpC,OAOlB,OANIoC,EAAUG,UAAUD,EAAWnC,GAAGH,OAAS,EAC9CqC,EAAalD,KAAK,CAAEskB,QAASrhB,EAAUG,UAAUD,EAAWnC,GAAI0J,SAAUyE,EAAQhM,IAExEnC,IAAMmC,GAAgD,MAAlCF,EAAUG,UAAUpC,EAAI,EAAGA,IAAgD,OAAlCiC,EAAUG,UAAUpC,EAAI,EAAGA,IAClGkC,EAAalD,KAAK,CAAEskB,QAAS,GAAI5Z,SAAUyE,EAAQhM,IAE7CD,EAGAykB,wBAAwBxjB,GAG/B,IAAI7C,EAAY6C,EAChB,IAAK,IAAInD,EAAI,EAAGA,EAAIM,EAAUT,OAAQG,IAAK,CAE1C,IAAIuC,EAAWjC,EAAUN,GAAGob,SAAU5b,QAAQ,KAC1C+C,GAAY,IACfjC,EAAUN,GAAGqb,eAAiB/a,EAAUN,GAAGob,SAAShZ,UAAUG,EAAW,GACzEjC,EAAUN,GAAGob,SAAW9a,EAAUN,GAAGob,SAAShZ,UAAU,EAAGG,GAC3DjC,EAAUN,GAAG0mB,WAAapmB,EAAUN,GAAGwmB,YAAcjkB,EAAW,GAGlE,OAAOjC,EAODF,UAAUC,GAEhB,IAAIC,EAAwB,CAAEG,eAAgBJ,EAAa6lB,mBAAoB,GAI/E,OADA5lB,EAAY7B,KAAKunB,cAAc1lB,GAC3BA,EAAU2b,YAGd3b,EAAY7B,KAAK0nB,gBAAgB7lB,GACjCA,EAAY7B,KAAK2nB,oBAAoB9lB,GACrCA,EAAY7B,KAAK6nB,iBAAiBhmB,GAGlCA,EAAUG,eAAiB,IAPnBH,EAeFsmB,UAAUjL,GAChB,IACItK,EADAwV,EAA8B,GAElC,IACCxV,EAAU1N,EAAGiO,aAAa+J,EAAU,QACnC,MAAO/G,GAER,OADAiS,EAAQ7nB,KAAK,CAAEoK,KAAM,oBAAsBuS,EAAUjS,SAAU,EAAGV,KAAM,IACjE6d,EAER,IAAIjW,EAAQS,EAAQ9P,MAAM,MAC1B,IAAK,IAAIvB,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IAAK,CACtC4Q,EAAM5Q,GAAK4Q,EAAM5Q,GAAGsB,QAAQ,KAAM,IAClC,IAAIya,EAAOtd,KAAK0K,UAAUyH,EAAM5Q,IACd,KAAd+b,EAAK3S,OACR2S,EAAK/S,KAAOhJ,EAAI,EAChB6mB,EAAQ7nB,KAAK+c,IAGf,OAAO8K,EAEDnN,aAAaoN,GACnB,IAAIlW,EAAQkW,EAAMvlB,MAAM,MACpBwlB,EAAsC,GAC1C,IAAK,IAAI/mB,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IACjC4Q,EAAM5Q,GAAK4Q,EAAM5Q,GAAGsB,QAAQ,KAAM,IAClC7C,KAAK0K,UAAUyH,EAAM5Q,IACrB+mB,EAAW/mB,GAAKvB,KAAK4lB,QAEtB,OAAO0C,EAEAC,yBAAyB1S,GAChC,IAA4B,IAAxBA,EAAM9U,QAAQ,KACjBf,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMyM,EAAO5K,SAAU,EAAG/B,KAAM4R,EAAUjF,YACxD,CACN,IAAI2S,EAAa3S,EAAM/S,MAAM,KACzB2lB,EAAYD,EAAW,GAC3BxoB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMqf,EAAWxd,SAAU,EAAG/B,KAAM4R,EAAUjF,QAClE,IACI6S,EADaF,EAAW,GAAG1lB,MAAM,KAAK,GACXA,MAAM,KACjCmI,EAAWwd,EAAUrnB,OAAS,EAClC,IAAK,IAAIG,EAAI,EAAGA,EAAImnB,EAActnB,OAAQG,IACzCvB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMsf,EAAcnnB,GAAI0J,SAAAA,EAAU/B,KAAM4R,EAAUyB,QACtEtR,GAAYyd,EAAcnnB,GAAGH,OAAS,GAIlCunB,cAAcvmB,GACpB,IAAImI,EAAe,GAKnB,OAJAA,EAAO7I,EAASY,YAAYF,EAAamI,GACzCA,EAAO7I,EAASa,kBAAkBH,EAAamI,GAC/CA,EAAO7I,EAASc,eAAeJ,EAAamI,GAC5CA,EAAO7I,EAASe,cAAcL,EAAamI,GACpCA,EAEDqe,mBAAmB1L,EAAkBD,GAE3C,IAAIrK,OADahN,IAAbqX,IAA0BA,GAAW,GAEzC,IAAI9K,EAAkB,GACtB,IACCS,EAAU1N,EAAGiO,aAAa+J,EAAU,QACnC,MAAO/G,GAER,OADAhE,EAAM,GAAK,oBACJA,EAAM,GAEdA,EAAQS,EAAQ9P,MAAM,MACtB,IAAK,IAAIvB,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IAAK,CACtC4Q,EAAM5Q,GAAK4Q,EAAM5Q,GAAGsB,QAAQ,KAAM,IAClC,IAAIya,EAAOtd,KAAKud,mBAAmBpL,EAAM5Q,GAAI0b,GAC7C,GAAuB,KAAnBK,EAAKE,UAAkB,CAC1BrL,EAAQ,GACRA,EAAM,GAAK,iBAAmB5Q,EAAI,MAAQ+b,EAAKE,UAC/C,MAEDrL,EAAM5Q,GAAK+b,EAAKG,SAEjB,OAAOtL,EAAMuL,KAAK,MAEZH,mBAAmBhT,EAAc0S,IACtB,IAAbA,QAA+CrX,IAAzB5F,KAAK6oB,kBAC9B7oB,KAAK6oB,gBAAkB,GACvBjO,OAAOC,KAAK0K,GAAexT,SAAQ+W,IAClC9oB,KAAK6oB,gBAAgBtD,EAAcuD,IAAiBA,KAErD9oB,KAAK+oB,iBAAmB,GACxBnO,OAAOC,KAAK2K,GAAgBzT,SAAQiX,IACnChpB,KAAK+oB,iBAAiBvD,EAAewD,IAAkBA,KAExDhpB,KAAKipB,gBAAkB,GACvBrO,OAAOC,KAAK4K,GAAe1T,SAAQmX,IAClClpB,KAAKipB,gBAAgBxD,EAAcyD,IAAaA,MAGlD,IAAIC,EAAwB,CAAE1L,SAAUlT,EAAMiT,UAAW,IACrD4L,EAAYppB,KAAK0K,UAAUH,GAC3B8e,EAAU9e,EACd,GAAuB,KAAnB6e,EAAUze,KACbwe,EAAQ3L,UAAY4L,EAAUze,SACxB,CACN,IAAI2e,EAAe,EACnB,IAAK,IAAI/nB,EAAI,EAAGA,EAAIvB,KAAK4lB,QAAQxkB,OAAQG,IAAK,CAC7C,IAAI0H,EAAQjJ,KAAK4lB,QAAQrkB,GACzB,GAAI0H,EAAMjE,eAAe,YAAa,CACrC,IAAIoE,EAAOH,EAAMG,KACb2d,EAAW3d,EACX6B,EAAWhC,EAAMgC,SACrB,GAAIgS,EACH8J,EAAW9d,EAAM8d,SAAUwC,cAE1BxC,EADmB,MAAhBA,EAAS,GACD,IAAMA,EAAS,GAAGD,cAAgBC,EAASpjB,UAAU,GAErDojB,EAAS,GAAGD,cAAgBC,EAASpjB,UAAU,OAErD,CACN,IAAI6lB,EAAYpgB,EAAK0d,cACL,MAAZ1d,EAAK,KAAcogB,EAAYpgB,EAAKzF,UAAU,IAC9CsF,EAAMC,OAAS4R,EAAU2O,aACY7jB,IAApC5F,KAAK6oB,gBAAgBW,KACxBzC,EAAW/mB,KAAK6oB,gBAAgBW,IAEvBvgB,EAAMC,OAAS4R,EAAU0J,eACM5e,IAArC5F,KAAK+oB,iBAAiBS,KACzBzC,EAAW,IAAM/mB,KAAK+oB,iBAAiBS,IAE9BvgB,EAAMC,OAAS4R,EAAUoM,kBACKthB,IAApC5F,KAAKipB,gBAAgBO,KACxBzC,EAAW,IAAM/mB,KAAKipB,gBAAgBO,IAIrCpgB,EAAKhI,SAAW2lB,EAAS3lB,SAC5BioB,EAAUA,EAAQ1lB,UAAU,EAAG2lB,EAAere,GAAY8b,EAAWsC,EAAQ1lB,UAAU2lB,EAAere,EAAW7B,EAAKhI,QACtHkoB,GAAgBvC,EAAS3lB,OAASgI,EAAKhI,UAM3C,OADA+nB,EAAQ1L,SAAW4L,EACZF,EAEDze,UAAUH,GAChBvK,KAAK4lB,QAAU,GACf5lB,KAAK6lB,aAAe,EACpB,IAAIlS,EAAS3T,KAAK2B,UAAU4I,GAI5B,GAHIoJ,EAAO3P,WACVhE,KAAKuoB,yBAAyB5U,EAAO3P,WAElC2P,EAAOtP,qBAAsB,CAChC,IAAI4G,EAAW,EACX0I,EAAOzP,gBACV+G,GAAY0I,EAAOzP,cAAc9C,QAE9BuS,EAAO3P,YACViH,GAAY0I,EAAO3P,UAAU5C,QAE9BpB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM,IAAIsgB,OAAO/V,EAAOtP,qBAAqBjD,QAAS8H,KAAM4R,EAAU6O,YAAa1e,SAAAA,IAEpG0I,EAAOvP,aACVpE,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMuK,EAAOvP,YAAYyY,QAAS5R,SAAU0I,EAAOvP,YAAY6G,SAAU/B,KAAM4R,EAAU+B,UAE9G,IAAInD,EAA2B,CAAE/O,KAAM,GAAIM,SAAU,GACrD,GAAI0I,EAAO7O,aACV,IAAK,IAAIvD,EAAI,EAAGA,EAAIoS,EAAO7O,aAAa1D,OAAQG,IAAK,CACpD,IAAIqJ,EAAO+I,EAAO7O,aAAavD,GAC/B,GAAIqJ,EAAK+R,SAASvb,OAAS,EAAG,CAC7B,IAAIwoB,EAAMhf,EAAK+R,SAASmK,cAQxB,GAPY,MAAR8C,IAEFA,EADuB,KAApBhf,EAAKhG,WACF,OAEA,SAGJglB,EAAI1V,MAAM2Q,GAwBb,MAAO,CAAEla,KAAM,kBAAmBM,SAAUL,EAAKmd,aAxB1B,CACvB,IAAI8B,EAAUD,EAYd,QAXuBhkB,IAAnB8f,EAAUkE,KACbC,EAAUtE,EAAcqE,IAEzB5pB,KAAK4lB,QAAQrlB,KAAK,CACjB6I,KAAMwB,EAAK+R,SACXzT,KAAM4R,EAAU2O,QAChBxe,SAAUL,EAAKmd,YACfhB,SAAU8C,EACVC,kBAA2C,KAAxBlf,EAAKgS,sBAGThX,IAAZikB,EAGH,OAFAnQ,EAAO/O,KAAO,kBACd+O,EAAOzO,SAAWL,EAAKmd,YAChBrO,EAER,IACCA,EAAS1Z,KAAK+pB,cAAcxf,EAAMsf,EAASjf,GAC1C,MAAO8O,GACR,OAAOA,KAQZ,OAAOA,EAEDmC,WAAWtR,EAAcU,GAC/BjL,KAAK0K,UAAUH,GACf,IAAIyf,EAAc,EACd3O,GAAW,EACf,IAAK,IAAI9Z,EAAI,EAAGA,EAAIvB,KAAK4lB,QAAQxkB,OAAQG,IAAK,CAC7C,IAAI0H,EAAQjJ,KAAK4lB,QAAQrkB,GACrB0H,EAAMgC,UAAY+e,GAAe/gB,EAAMgC,SAAWA,IACrD+e,EAAc/gB,EAAMgC,SACpBoQ,EAAU9Z,GAGZ,IAAiB,IAAb8Z,EAGJ,OAAOrb,KAAK4lB,QAAQvK,GAEb4O,+BAA+B1f,EAAcU,EAAkBif,GACtE,IAAIxQ,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAM3C,OALAyO,EAAS1Z,KAAK4mB,eAAerc,EAAMmP,EAAOzO,SAAUif,GACtB,MAA1B3f,EAAKmP,EAAOzO,YACfjL,KAAK4lB,QAAQrlB,KAAK,CAAE2I,KAAM4R,EAAUqP,iBAAkB/gB,KAAM,IAAK6B,SAAAA,IACjEyO,EAAS1Z,KAAKgmB,mBA5rBJ,EA4rBgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEAkN,eAAerc,EAAcU,EAAkBif,EAAqBE,QACpDxkB,IAAnBwkB,IACHA,GAAiB,GAElB,IAAIC,EAAuBvP,EAAUmB,SACjCmO,IACHC,EAAYvP,EAAUS,YAEvB,IAAI7B,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAKlC,GAJAyO,EAAS1Z,KAAKgmB,mBAtsBR,EAssBgDzb,IAAQmP,EAAOzO,UACvC,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBA5sBL,EA4sBiDzb,IAAQmP,EAAOzO,WAE5C,MAA1BV,EAAKmP,EAAOzO,UACf,GAAkC,MAA9BV,EAAKmP,EAAOzO,SAAW,GAC1ByO,EAAS1Z,KAAKgmB,mBA5sBV,EA4sBkDzb,IAAQmP,EAAOzO,cAC/D,CACN,IAAIV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM+H,GAKzC,MADAvC,EAAO/O,KAAO,mBACR+O,EAL8C,CACpD,IAAI4Q,EAAM/f,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM+H,GAAW,GAC3DvC,EAAOzO,UAAYqf,EAAIlpB,QAOmC,OAAzDmJ,EAAK5G,UAAU+V,EAAOzO,SAAUyO,EAAOzO,SAAW,IACrDyO,EAAOzO,eAEF,KAAIV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM+H,GAiChD,MADAvC,EAAO/O,KAAO,mBACR+O,EAjCqD,CAC3D,IAAI4Q,EAAM/f,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM+H,GAAW,GACvDsO,EAAU7Q,EAAOzO,SACrByO,EAAOzO,UAAYqf,EAAIlpB,OACvB,IAAI6T,EAAO1K,EAAKmP,EAAOzO,UACvB,GAAIyO,EAAOzO,UAAYV,EAAKnJ,OAAQ,CACnC,GAAIkpB,EAAIlpB,OAAS,EAKhB,MAJe,MAAXkpB,EAAI,KACPD,EAAYvP,EAAU2J,cAEvBzkB,KAAK4lB,QAAQrlB,KAAK,CAAE,KAAQ8pB,EAAWjhB,KAAMkhB,EAAKrf,SAAUsf,EAAUvqB,KAAK6lB,eACpEnM,EAGP,MADAA,EAAO/O,KAAO,mBACR+O,EAGR,IAA0B,IAAtB4Q,EAAIvpB,QAAQ,MAAwB,MAATkU,EAAc,CAG5C,GAFAyE,EAAS1Z,KAAKgmB,mBAhvBL,EAgvBiDzb,IAAQmP,EAAOzO,UAErEyO,EAAOzO,UAAYV,EAAKnJ,OAE3B,OADApB,KAAK4lB,QAAQrlB,KAAK,CAAE,KAAQ8pB,EAAWjhB,KAAMkhB,EAAKrf,SAAUsf,EAAUvqB,KAAK6lB,eACpEnM,EAER,GAAInP,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMwQ,GAAa,CACtD,IAAI9O,EAAUrL,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMwQ,GAAa,GACjE4F,GAAO1U,EACP8D,EAAOzO,UAAY2K,EAAQxU,QAG7BpB,KAAK4lB,QAAQrlB,KAAK,CAAE,KAAQ8pB,EAAWjhB,KAAMkhB,EAAKrf,SAAUsf,EAAUvqB,KAAK6lB,gBAQ5E,MAH8B,MAA1Btb,EAAKmP,EAAOzO,WAAqBif,IACpCxQ,EAAS1Z,KAAKgmB,mBAhwBH,EAgwBgDzb,IAAQmP,EAAOzO,SAAU,IAE9EyO,EAEAiN,UAAUpc,EAAcU,EAAkBuf,EAAoBC,EAAmBC,GACxF,IAAIhR,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,EAAU0f,YAAY,EAAOC,aAAa,EAAOC,kBAAkB,GAC1GC,GAAW,EAUf,QATiBllB,IAAb4kB,IACHA,GAAW,QAEI5kB,IAAZ6kB,IACHA,GAAU,QAEO7kB,IAAd8kB,IACHA,GAAY,GAEiB,MAA1BngB,EAAKmP,EAAOzO,UACfyO,EAAS1Z,KAAKgmB,mBA/wBR,EA+wBgDzb,IAAQmP,EAAOzO,UACrEyO,EAAOmR,kBAAmB,EAC1BC,GAAW,EACkD,OAAzDvgB,EAAK5G,UAAU+V,EAAOzO,SAAUyO,EAAOzO,SAAW,IACrDyO,EAAOzO,gBAGR,GAAIV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMoQ,IAAiE,OAAzD/Z,EAAK5G,UAAU+V,EAAOzO,SAAUyO,EAAOzO,SAAW,GAAa,CAChH,IAAKuf,EAEJ,MADA9Q,EAAO/O,KAAO,0BACR+O,EAGP,GADAA,EAAOkR,aAAc,EACwC,OAAzDrgB,EAAK5G,UAAU+V,EAAOzO,SAAUyO,EAAOzO,SAAW,GAAa,CAQlE,GAPAyO,EAAOzO,UAAY,EACnByO,EAAS1Z,KAAKgmB,mBAlyBN,EAkyBkDzb,EAAMmP,EAAOzO,UACvEyO,EAAOkR,aAAc,EACS,MAA1BrgB,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAryBP,EAqyBmDzb,IAAQmP,EAAOzO,UACzEyO,EAAOkR,aAAc,GAEQ,MAA1BrgB,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,cACR+O,EAGP,GADAA,EAAOzO,WACHV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMmQ,GAAM,CAC/C,IAAI7H,EAASjS,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMmQ,GAAM,GACzDrkB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMoT,EAAQtT,KAAM4R,EAAU0B,OAAQvR,SAAUyO,EAAOzO,SAAWjL,KAAK6lB,eAC3FiF,GAAW,EACXpR,EAAOzO,UAAYuR,EAAOpb,YAErB,CACN,IAAIob,EAASjS,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMoQ,GAAM,GACzDtkB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMoT,EAAQtT,KAAM4R,EAAU0B,OAAQvR,SAAUyO,EAAOzO,SAAWjL,KAAK6lB,eAC3FiF,GAAW,EACXpR,EAAOzO,UAAYuR,EAAOpb,aAErB,GAAImJ,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMmQ,GAAM,CACtD,IAAI9H,EAAQhS,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMmQ,GAAM,GACxDrkB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAMmT,EAAOrT,KAAM4R,EAAUyB,MAAOtR,SAAUyO,EAAOzO,SAAWjL,KAAK6lB,aAAckF,mBAAoBL,IAC3HI,GAAW,EACXpR,EAAOzO,UAAYsR,EAAMnb,YACnB,GAA6D,OAAzDmJ,EAAK5G,UAAU+V,EAAOzO,SAAUyO,EAAOzO,SAAW,GAAa,CAEzE,GADAyO,EAAOkR,aAAc,GAChBJ,EAGJ,MAFA9Q,EAAO/O,KAAO,0BACdmgB,GAAW,EACLpR,EAEPoR,GAAW,EACXpR,EAAOzO,WAGT,GAAI6f,GAAsC,MAA1BvgB,EAAKmP,EAAOzO,UAAmB,CAC9C,IAAKwf,EAEJ,MADA/Q,EAAO/O,KAAO,yBACR+O,EAEP,IAAIgN,EAAa1mB,KAAKgmB,mBA70Bf,EA60BwDzb,IAAQmP,EAAOzO,SAAU,GACxFyO,EAAOzO,SAAWyb,EAAWzb,SAC7ByO,EAAOiR,YAAa,EAErB,IAAKG,EAEJ,MADApR,EAAO/O,KAAO,eACR+O,EAEP,OAAOA,EAEAsR,YAAYzgB,EAAcU,GAEjC,IAAIyO,EAAS1Z,KAAKgmB,mBA11BP,EA01BmDzb,EAAMU,GAIpE,MAH8B,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBA51BJ,EA41BgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEAuR,cAAcC,EAAkB3gB,EAAcU,GACrD,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,IAAIV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMgX,GAQzC,MADAxR,EAAO/O,KAAO,qCACR+O,EAR8C,CACpD,IAAI+P,EAAUlf,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMgX,GAAW,GAC/DxR,EAAOzO,UAAYwe,EAAQroB,OACD,MAAtBqoB,EAAQ0B,OAAO,KAClBzR,EAAS1Z,KAAKgmB,mBAt2BL,EAs2BiDzb,EAAMmP,EAAOzO,WAMzE,OAAOyO,EAEA0R,UAAUF,EAAkB3gB,EAAcU,GACjD,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAG3C,GADAyO,EAAS1Z,KAAKgmB,mBAj3BH,EAi3B+Czb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,UAEf,GADAyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,IAAIogB,GAAgB,EACpB,EAAG,CAGF,GAFA3R,EAAS1Z,KAAKirB,cAAcC,EAAU3gB,EAAMmP,EAAOzO,UACnDogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,SACPrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,yBACR+O,MAGuB,MAA1BnP,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKirB,cAAcC,EAAU3gB,EAAMmP,EAAOzO,WAatD,OATIigB,IAAahG,GAA0C,MAA1B3a,EAAKmP,EAAOzO,YAC5CyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAn5BL,EAm5BiDzb,EAAMmP,EAAOzO,YAGrEigB,IAAahG,GAA0C,MAA1B3a,EAAKmP,EAAOzO,YAC5CyO,EAAS1Z,KAAKgmB,mBAv5BJ,EAu5BgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEA6R,UAAUhhB,EAAcU,EAAkBugB,GAEjD,IAAI9R,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,GAAIugB,EAAY,EACf,IACC,IAAI9E,EAAa1mB,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GACrB,MAA9BV,EAAKmc,EAAWzb,YACnByO,EAAOzO,SAAWyb,EAAWzb,SAAW,GAExC,MAAOyb,GACR,GAAwB,iBAApBA,EAAW/b,KACd,MAAM+O,MAGF,CAEN,GADAA,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GACjB,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,qBACR+O,EAEPA,EAAOzO,WAGR,OADAyO,EAAS1Z,KAAKgmB,mBAj7BH,EAi7B+Czb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,YAGhByO,EAAS1Z,KAAKgmB,mBAr7BH,EAq7B+Czb,IAAQmP,EAAOzO,UAC3C,MAA1BV,EAAKmP,EAAOzO,YAGhByO,EAAS1Z,KAAKgmB,mBAz7BH,EAy7B+Czb,IAAQmP,EAAOzO,YANjEyO,EASD+R,iBAAiBlhB,EAAcU,GACtC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,IAAIV,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMmR,GAkBzC,MADA3L,EAAO/O,KAAO,mCACR+O,EAlBiD,CACvD,IAAI+P,EAAUlf,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMmR,GAAc,GAElE,GADA3L,EAAOzO,UAAYwe,EAAQroB,OACS,MAAhCqoB,EAAQA,EAAQroB,OAAS,GAAY,CACxC,IAAImJ,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM0Q,GASzC,MADAlL,EAAO/O,KAAO,0BACR+O,EAT4C,CAClD,IAAI2N,EAAY9c,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM0Q,GAAS,GAE/D,GADAlL,EAAOzO,UAAYoc,EAAUjmB,OACJ,IAArBimB,EAAUjmB,OAEb,MADAsY,EAAO/O,KAAO,0BACR+O,IAWV,OAAOA,EAEAgS,UAAUnhB,EAAcU,GAE/B,IAAIyO,EAAS1Z,KAAK4mB,eAAerc,EAAMU,GAAU,GACjD,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,GADAyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,IAAIogB,GAAgB,EACpB,EAAG,CAGF,GAFA3R,EAAS1Z,KAAKyrB,iBAAiBlhB,EAAMmP,EAAOzO,UAC5CogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,SACPrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,yBACR+O,MAGuB,MAA1BnP,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKyrB,iBAAiBlhB,EAAMmP,EAAOzO,WAO/C,MAH8B,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAt/BJ,EAs/BgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEAiS,WAAWphB,EAAcU,GAEhC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,IAAIogB,GAAgB,EACpB,EAAG,CAGF,GAFA3R,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UACrCogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,SACPrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,sBACR+O,OAGPA,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAEtC,OAAOyO,EAEAkS,WAAWrhB,EAAcU,EAAkB4gB,GAElD,IAAInS,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAI3C,GAH+B,MAA1BV,EAAKmP,EAAOzO,WAA+C,MAA1BV,EAAKmP,EAAOzO,YAAsB4gB,GACvEnS,EAAOzO,WAEsB,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,IAAIogB,GAAgB,EACpB,EAAG,CAGF,GAFA3R,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UACrCogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,SACPrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,sBACR+O,OAGPA,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAKtC,MAH8B,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAxjCJ,EAwjCgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEAoS,YAAYvhB,EAAcU,GAEjC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAE3C,GADAyO,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UACP,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,sBACR+O,EAGP,OADAA,EAAS1Z,KAAK2mB,UAAUpc,IAAQmP,EAAOzO,UAChCyO,EAEAqS,UAAUxhB,EAAcU,GAE/B,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,IAAIogB,GAAgB,EACpB,EAAG,CACF,GAAI9gB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMqQ,GAAM,CAC/C,IAAI2C,EAAc3c,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMqQ,GAAM,GAC1DwC,EAAWG,EAAYJ,mBACkBlhB,IAAzC6f,EAAcsB,EAASpjB,UAAU,MACpCojB,EAAW,IAAMtB,EAAcsB,EAASpjB,UAAU,KAEnD3D,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM8d,EAAajc,SAAUA,EAAWjL,KAAK6lB,aAAc3c,KAAM4R,EAAUoM,YAAaH,SAAAA,EAAUgE,oBAAoB,IAC1IrR,EAAOzO,UAAYic,EAAY9lB,YAE/BsY,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GAAO,GAAO,GAG9D,GADAogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,SACPrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,sBACR+O,OAGP,GAAInP,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMqQ,GAAM,CAC/C,IAAI2C,EAAc3c,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMqQ,GAAM,GAC1DwC,EAAWG,EAAYJ,mBACkBlhB,IAAzC6f,EAAcsB,EAASpjB,UAAU,MACpCojB,EAAW,IAAMtB,EAAcsB,EAASpjB,UAAU,KAEnD3D,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM8d,EAAajc,SAAUA,EAAWjL,KAAK6lB,aAAc3c,KAAM4R,EAAUoM,YAAaH,SAAAA,EAAUgE,oBAAoB,IAC1IrR,EAAOzO,UAAYic,EAAY9lB,YAE/BsY,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GAGjD,OAAOyO,EAEAsS,WAAWzhB,EAAcU,GAEhC,IAEIghB,EAFAvS,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GACvCihB,GAAe,EAEW,MAA1B3hB,EAAKmP,EAAOzO,YACfyO,EAAOzO,WACPihB,GAAe,GAEhB,IACC,IAAIxF,EAAa1mB,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAE7C,OADAyO,EAAOzO,SAAWyb,EAAWzb,SACC,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAtoCL,EAsoCiDzb,IAAQmP,EAAOzO,UACrD,KAAhByO,EAAO/O,OAIkB,MAA1BJ,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBA5oCL,EA4oCiDzb,IAAQmP,EAAOzO,WAJjEyO,EAOR,SACD,GAAIwS,EAEH,MADAxS,EAAO/O,KAAO,oBACR+O,EAEP,GAAIuS,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM0Q,GAE/C,OADAlL,EAAOzO,UAAYghB,EAAI,GAAG7qB,OACnBsY,EAIR,IAHWuS,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM,cACtDwF,EAAOzO,UAAYghB,EAAI,GAAG7qB,QAEG,MAA1BmJ,EAAKmP,EAAOzO,UAEf,OADAyO,EAAS1Z,KAAKgmB,mBA3pCL,EA2pCiDzb,IAAQmP,EAAOzO,UAClEyO,EAGT,OAAOA,EAEAyS,UAAU5hB,EAAcU,GAE/B,IACIghB,EADAvS,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAEvCmhB,GAAW,EACf,GAA8B,MAA1B7hB,EAAKmP,EAAOzO,UAAmB,CAElC,GADAyO,EAAS1Z,KAAK2mB,UAAUpc,IAAQmP,EAAOzO,UAAU,GACnB,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,sBACR+O,EAGP,OADAA,EAAS1Z,KAAK2mB,UAAUpc,IAAQmP,EAAOzO,UAAU,GAC1CyO,EAEsB,MAA1BnP,EAAKmP,EAAOzO,YACfmhB,GAAW,EACX1S,EAAOzO,YAER,EAAG,CACF,GAA8B,MAA1BV,EAAKmP,EAAOzO,UACf,IACC,IAAIyb,EAAa1mB,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAE7C,GADAyO,EAAOzO,SAAWyb,EAAWzb,SACzBjL,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAAuC,MAA1BV,EAAKmP,EAAOzO,UAC/D,OAAOyO,EAEP,SAED,GADAA,EAAS1Z,KAAKgmB,mBAxrCV,EAwrCkDzb,IAAQmP,EAAOzO,UACjEjL,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAAuC,MAA1BV,EAAKmP,EAAOzO,UAC/D,OAAOyO,OAGH,GAAIuS,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM,+BAAgC,CACtF,IAAI2S,EAAeoF,EAAI,GAAGtoB,UAAU,EAAGsoB,EAAI,GAAG7qB,OAAS,GAAG0lB,cAC1DpN,EAAOzO,UAAY4b,EAAazlB,OAAS,OACJwE,IAAjC4f,EAAeqB,KAClB7mB,KAAK4lB,QAAQrlB,KAAK,CAAE6I,KAAM,IAAMyd,EAAc5b,SAAUyO,EAAOzO,SAAW4b,EAAazlB,OAAS,EAAG8H,KAAM4R,EAAU0J,UAAWuC,SAAU,IAAMvB,EAAeqB,KAC7JA,EAAerB,EAAeqB,IAE/BnN,EAAS1Z,KAAKgnB,eAAeH,EAActc,EAAMmP,EAAOzO,eAC9CghB,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAMqQ,IACtD7K,EAAOzO,UAAYghB,EAAI,GAAG7qB,OAE1BsY,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GAElB,MAA1BV,EAAKmP,EAAOzO,WAAqBmhB,EACpC1S,EAAOzO,WAGsB,MAA1BV,EAAKmP,EAAOzO,WAAqBmhB,IACpCA,GAAW,EACX1S,EAAOzO,mBAECjL,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAAamhB,GAC1D,GAA8B,MAA1B7hB,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,sBACR+O,EAGP,OADAA,EAAS1Z,KAAKgmB,mBA3tCH,EA2tC+Czb,IAAQmP,EAAOzO,UAClEyO,EAEA2S,aAAa9hB,EAAcU,GAElC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,GAA8B,MAA1BV,EAAKmP,EAAOzO,WAEf,GADAyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClC,IAAIogB,GAAgB,EACpB,EAAG,CAGF,GAFAA,GAAgB,EAChB3R,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GAAO,GACxB,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,SACPrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,sBACR+O,OAIsB,MAA1BnP,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GAAO,IAGxD,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,GADAyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,IAAIogB,GAAgB,EACpB,EAAG,CAGF,GAFA3R,EAAS1Z,KAAKirB,cAAc3F,EAAgB/a,EAAMmP,EAAOzO,UACzDogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,MAED,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,uBACR+O,EAENA,EAAOzO,WAERogB,GAAgB,QACR3R,EAAOzO,SAAWV,EAAKnJ,QAChC,IAAKiqB,EAEJ,MADA3R,EAAO/O,KAAO,yBACR+O,OAGPA,EAAS1Z,KAAKirB,cAAc3F,EAAgB/a,EAAMmP,EAAOzO,UAI3D,OAAOyO,EAEA4S,WAAW/hB,EAAcU,GAEhC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAE3C,IADAyO,EAAS1Z,KAAKgmB,mBAhyCH,EAgyC+Czb,EAAMmP,EAAOzO,UACtC,MAA1BV,EAAKmP,EAAOzO,WAClByO,EAAS1Z,KAAKgmB,mBAlyCJ,EAkyCgDzb,IAAQmP,EAAOzO,UAE1E,OAAOyO,EAEA6S,YAAYhiB,EAAcU,GAEjC,IACIghB,EADAvS,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAE3C,MAA8B,MAA1BV,EAAKmP,EAAOzO,WACfyO,EAAS1Z,KAAKgmB,mBA3yCJ,EA2yCgDzb,IAAQmP,EAAOzO,UAClEyO,GAEJnP,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM,8CACzCwF,EAAS1Z,KAAKwsB,kBAAkBjiB,EAAMmP,EAAOzO,UACtCyO,IAEJuS,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM,aAC/CwF,EAAOzO,UAAYghB,EAAI,GAAG7qB,OACI,MAA1BmJ,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBArzCL,EAqzCiDzb,IAAQmP,EAAOzO,WAEnEyO,GAEsB,MAA1BnP,EAAKmP,EAAOzO,WACfyO,EAAS1Z,KAAKgmB,mBA1zCJ,EA0zCgDzb,IAAQmP,EAAOzO,UAClEyO,IAERA,EAAS1Z,KAAKgmB,mBA7zCH,EA6zC+Czb,EAAMmP,EAAOzO,UAChEyO,GAEA8S,kBAAkBjiB,EAAcU,GACvC,IACIghB,EADAvS,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAE3C,GAAIghB,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM,6CAA8C,CAC7FwF,EAAOzO,UAAYghB,EAAI,GAAG7qB,OAC1B,IAAIqrB,EAAQR,EAAK,GAAGnF,cACpB,GAAc,SAAV2F,EACH,OAAO/S,EAER,GAA8B,MAA1BnP,EAAKmP,EAAOzO,UAAmB,CAClC,IAAKwhB,EAAMvY,MAAM,wBAEhB,MADAwF,EAAO/O,KAAO8hB,EAAQ,sBAChB/S,EAEP,OAAOA,EAERA,EAAOzO,WACP,IAAIyhB,EAAY,GACF,YAAVD,GAAiC,OAAVA,GAA4B,UAAVA,GAA+B,OAAVA,EACjEC,EAAY,EACQ,SAAVD,IACVC,EAAY,GAEb,IAAIC,EAAa,EACbtB,GAAgB,EACpB,EAAG,CAEF,GADAsB,IACIA,EAAaD,EAEhB,MADAhT,EAAO/O,KAAO,gCACR+O,EAEP,GAAc,YAAV+S,GAAsC,IAAfE,EAAkB,CAC5C,GAA8B,MAA1BpiB,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,0CACR+O,EAEPA,EAAS1Z,KAAK2mB,UAAUpc,IAAQmP,EAAOzO,UAAU,GAAO,QAExDyO,EAAS1Z,KAAKgmB,mBAt2CN,EAs2CkDzb,EAAMmP,EAAOzO,UAGxE,GADAogB,GAAgB,EACc,MAA1B9gB,EAAKmP,EAAOzO,WAIhB,GAA8B,MAA1BV,EAAKmP,EAAOzO,UAAmB,CAClCyO,EAAOzO,WACP,YALAogB,GAAgB,SAORrrB,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAC7C,IAAKogB,EAEJ,MADA3R,EAAO/O,KAAO,2BACR+O,EAGR,OAAOA,EAEAkT,aAAariB,EAAcU,GAClC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAK3C,OAJAyO,EAAS1Z,KAAKgmB,mBA33CH,EA23C+Czb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBA73CJ,EA63CgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEAmT,aAAatiB,EAAcU,GAElC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAC3C,MAA8B,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAOzO,WACAyO,IAGTA,EAAS1Z,KAAK4mB,eAAerc,EAAMmP,EAAOzO,UAAU,GACtB,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAOzO,WACuB,MAA1BV,EAAKmP,EAAOzO,UACfyO,EAAS1Z,KAAKgmB,mBA/4CL,EA+4CiDzb,IAAQmP,EAAOzO,WAEzEyO,EAAS1Z,KAAKgmB,mBAj5CL,EAi5CiDzb,IAAQmP,EAAOzO,UAC3C,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAn5CN,EAm5CkDzb,IAAQmP,EAAOzO,aAIrEyO,GAEAoT,aAAaviB,EAAcU,GAElC,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAK3C,OAJAyO,EAAS1Z,KAAK4mB,eAAerc,EAAMmP,EAAOzO,UAAU,GACtB,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAK4mB,eAAerc,IAAQmP,EAAOzO,UAAU,IAEhDyO,EAEAqT,YAAYxiB,EAAcU,GAEjC,IACIghB,EADAvS,EAA2B,CAAE/O,KAAM,GAAIM,SAAAA,GAG3C,KAAIghB,EAAM1hB,EAAK5G,UAAU+V,EAAOzO,UAAUiJ,MAAM,8BAI/C,MADAwF,EAAO/O,KAAO,0BACR+O,EAKP,OARCA,EAAOzO,UAAYghB,EAAI7qB,OAKM,MAA1BmJ,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBA96CJ,EA86CgDzb,IAAQmP,EAAOzO,WAEnEyO,EAEAqQ,cAAcxf,EAAcsf,EAAiBjf,GACpD,IAAIoiB,EAAOtH,EAAUmE,GACjB5e,EAAWL,EAAKqd,WAChBgF,EAAmBD,EAAKE,cACxBC,EAAYH,EAAKI,UACjB1T,EAA2B,CAAE/O,KAAM,GAAIM,SAAU,GACrD,IAAKgiB,GAA4C,KAAxBriB,EAAKgS,eAC7B,KAAM,CAAEjS,KAAM,2BAA4BM,SAAAA,GAK3C,GAJmC,KAAxBL,EAAKgS,iBACflD,EAAS1Z,KAAKgmB,mBA37CJ,EA27CgDzb,EAAMU,IAEjEA,EAAWL,EAAKod,YACQ,KAApBpd,EAAKhG,WAAmB,CAC3B,GAAkB,KAAduoB,GAAqC,MAAjBA,EAAU,GACjC,MAAO,CAAExiB,KAAM,GAAIM,SAAAA,GAEnB,KAAM,CAAEN,KAAM,wBAA0BC,EAAK+R,SAAW,YAAa1R,SAAAA,GAGvEyO,EAAOzO,SAAWA,EAClB,IAAIoiB,EAAW,EACf,EAAG,CAEF,OADAA,IACQxD,GACP,IAAK,QACJnQ,EAAS1Z,KAAKgrB,YAAYzgB,EAAMmP,EAAOzO,UACvC,MACD,IAAK,QACJyO,EAAS1Z,KAAKorB,UAAUhG,EAAe7a,EAAMmP,EAAOzO,UACpD,MACD,IAAK,KACJyO,EAAS1Z,KAAKiqB,+BAA+B1f,EAAMmP,EAAOzO,UAAU,GACpE,MACD,IAAK,OACJ,GAAa,KAATV,EACH,KAAM,CAAEI,KAAM,uBAAwBM,SAAAA,GAEvC,MACD,IAAK,MACJyO,EAAS1Z,KAAKurB,UAAUhhB,EAAMmP,EAAOzO,SAAUoiB,GAC/C,MACD,IAAK,OACJ3T,EAAS1Z,KAAKiqB,+BAA+B1f,EAAMmP,EAAOzO,UAAU,GACpE,MACD,IAAK,OAGL,IAAK,KAmEL,IAAK,WAYL,IAAK,QAeL,IAAK,QA6CL,IAAK,WAqBL,IAAK,UAML,IAAK,WAIJyO,EAAS1Z,KAAKgmB,mBA3oDN,EA2oDkDzb,EAAMmP,EAAOzO,UACvE,MAxKD,IAAK,MACJyO,EAAS1Z,KAAK0rB,UAAUnhB,EAAMmP,EAAOzO,UACrC,MACD,IAAK,OACJyO,EAAS1Z,KAAK2rB,WAAWphB,EAAMmP,EAAOzO,UACtC,MACD,IAAK,OACJyO,EAAS1Z,KAAK4rB,WAAWrhB,EAAMmP,EAAOzO,UAAU,GAChD,MACD,IAAK,QACJyO,EAAS1Z,KAAK8rB,YAAYvhB,EAAMmP,EAAOzO,UACvC,MACD,IAAK,MACJyO,EAAS1Z,KAAK+rB,UAAUxhB,EAAMmP,EAAOzO,UACrC,MACD,IAAK,OACJyO,EAAS1Z,KAAKorB,UAAUlG,EAAc3a,EAAMmP,EAAOzO,UACnD,MACD,IAAK,OACJ,GAAIoiB,EAAW,EAEd,MADA3T,EAAO/O,KAAO,gCACR+O,EAGLA,EAD6B,MAA1BnP,EAAKmP,EAAOzO,UACNjL,KAAK2mB,UAAUpc,IAAQmP,EAAOzO,UAAU,GAExCjL,KAAKgmB,mBA9/CR,EA8/CoDzb,EAAMmP,EAAOzO,UAGzE,MACD,IAAK,OACJyO,EAAS1Z,KAAKgsB,WAAWzhB,EAAMmP,EAAOzO,UACtC,MACD,IAAK,MACJyO,EAAS1Z,KAAKmsB,UAAU5hB,EAAMmP,EAAOzO,UACrC,MACD,IAAK,YACAoiB,EAAW,EACd3T,EAAO/O,KAAO,qCAEd+O,EAAS1Z,KAAKgmB,mBA5gDP,EA4gDmDzb,EAAMmP,EAAOzO,UAExE,MACD,IAAK,SACJyO,EAAS1Z,KAAKqsB,aAAa9hB,EAAMmP,EAAOzO,UACxC,MACD,IAAK,MACJyO,EAAS1Z,KAAKorB,UAAUjG,EAAa5a,EAAMmP,EAAOzO,UAClD,MACD,IAAK,OACJyO,EAAS1Z,KAAKssB,WAAW/hB,EAAMmP,EAAOzO,UACtC,MACD,IAAK,QACJyO,EAAS1Z,KAAKusB,YAAYhiB,EAAMmP,EAAOzO,UACvC,MACD,IAAK,SACJyO,EAAS1Z,KAAK4sB,aAAariB,EAAMmP,EAAOzO,UACxC,MACD,IAAK,YACJyO,EAAS1Z,KAAK4rB,WAAWrhB,EAAMmP,EAAOzO,UAAU,GAChD,MACD,IAAK,SACJyO,EAAS1Z,KAAK6sB,aAAatiB,EAAMmP,EAAOzO,UACxC,MAOD,IAAK,cAoCL,IAAK,QAyEL,IAAK,YAIJyO,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UACrC,MAtGD,IAAK,QACJyO,EAAS1Z,KAAKgmB,mBAvjDN,EAujDkDzb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKiqB,+BAA+B1f,IAAQmP,EAAOzO,UAAU,IAKvE,MAOD,IAAK,QAeL,IAAK,QACJyO,EAAS1Z,KAAKgmB,mBArlDN,EAqlDkDzb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAKgmB,mBAvlDP,EAulDmDzb,IAAQmP,EAAOzO,WAK1E,MACD,IAAK,WAEJ,IADAyO,EAAS1Z,KAAKgmB,mBA9lDN,EA8lDkDzb,EAAMmP,EAAOzO,UACtC,MAA1BV,EAAKmP,EAAOzO,WAClByO,EAAS1Z,KAAKgmB,mBAhmDP,EAgmDmDzb,IAAQmP,EAAOzO,UAK1E,MACD,IAAK,SAIJyO,EAAS1Z,KAAK8sB,aAAaviB,EAAMmP,EAAOzO,UACxC,MAOD,IAAK,QAIJyO,EAAS1Z,KAAKgmB,mBAtnDN,EAsnDkDzb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,YACfyO,EAAS1Z,KAAK2mB,UAAUpc,IAAQmP,EAAOzO,WAExC,MACD,IAAK,QAIJyO,EAAS1Z,KAAK+sB,YAAYxiB,EAAMmP,EAAOzO,UACvC,MAaD,IAAK,WAKJ,GADAyO,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UAAU,GAAM,IAChDyO,EAAOkR,YAEX,MADAlR,EAAO/O,KAAO,2BACR+O,EAEP,MAOD,IAAK,SAKJA,EAAOzO,UAAYV,EAAKnJ,OACxB,MACD,QACCsY,EAAOzO,SAAWV,EAAKnJ,OAGzB,GAA8B,MAA1BmJ,EAAKmP,EAAOzO,WAQT,QAA8BrF,IAA1B2E,EAAKmP,EAAOzO,UAAyB,CAC/C,IAAIgK,EAAO1K,EAAKmP,EAAOzO,UACvB,GAAa,MAATgK,GAAyB,OAATA,GAA0B,MAATA,EAAgB,MAErD,MADAyE,EAAO/O,KAAO,yBAA2BJ,EAAKmP,EAAOzO,UAAY,IAC3DyO,QAVN,GADAA,EAAOzO,WACHyO,EAAOzO,WAAaV,EAAKnJ,QACV,KAAd+rB,GAAqC,MAAjBA,EAAU,GACjC,KAAM,CAAExiB,KAAM,wBAA0BC,EAAK+R,SAAW,YAAa1R,SAAUyO,EAAOzO,gBAUjFyO,EAAOzO,SAAWV,EAAKnJ,QAChC,OAAOsY,EAEAsN,eAAesG,EAAkB/iB,EAAcU,GACtD,IAAIyO,EAA2B,CAAE/O,KAAM,GAAIM,SAAUA,GACjDsiB,EAAS5H,EAAW2H,GACxB,QAAe1nB,IAAX2nB,EAEH,MADA7T,EAAO/O,KAAO,oBAAsB2iB,EAC9B5T,EAEP,IAAI8T,OAAoC5nB,IAArB2nB,EAAOE,UAA0BF,EAAOE,UAAY,EACnEC,OAA4B9nB,IAAlB2nB,EAAOI,OAAuBJ,EAAOI,OAAO7qB,MAAM,UAAO8C,EACnEynB,EAAW,EAEf,GADAC,EAAW,IAAMA,EACI,IAAjBE,GAAgD,MAA1BjjB,EAAKmP,EAAOzO,UAErC,OADAyO,EAAOzO,WACAyO,EAER,EAAG,CACF,IAAIiU,OAAsB/nB,IAAZ8nB,QAA+C9nB,IAAtB8nB,EAAQL,GAA2BK,EAAQL,GAAY,OAI9F,GAHiB,YAAbC,IACHK,EAAS,WAEK,SAAXA,GAAgC,QAAXA,GAA+B,UAAXA,GAAiC,QAAXA,EAAkB,CAEpF,GADAjU,EAAS1Z,KAAK2mB,UAAUpc,EAAMmP,EAAOzO,UACtB,UAAX0iB,IAAwBjU,EAAOiR,aAAejR,EAAOmR,iBAExD,MADAnR,EAAO/O,KAAO,oCAAsC2iB,EAC9C5T,EAEP,GAAe,QAAXiU,GAAoBjU,EAAOkR,YAE9B,MADAlR,EAAO/O,KAAO,0BACR+O,OAED,GAAe,aAAXiU,EACVjU,EAAS1Z,KAAK4mB,eAAerc,EAAMmP,EAAOzO,UAAU,QAC9C,GAAe,SAAX0iB,EACVjU,EAAS1Z,KAAKgmB,mBA1tDL,EA0tDiDzb,EAAMmP,EAAOzO,eACjE,GAAe,SAAX0iB,EAAmB,CAC7B,GAA8B,MAA1BpjB,EAAKmP,EAAOzO,WAA+C,MAA1BV,EAAKmP,EAAOzO,UAEhD,MADAyO,EAAO/O,KAAO,eACR+O,EAENA,EAAOzO,gBAEF,GAAe,YAAX0iB,GACO,YAAbL,EAAwB,CAE3B,GADA5T,EAAS1Z,KAAKgmB,mBApuDN,EAouDkDzb,EAAMmP,EAAOzO,UACzC,MAA1BV,EAAKmP,EAAOzO,UAEf,MADAyO,EAAO/O,KAAO,qBACR+O,EAEPA,EAAOzO,WACPyO,EAAS1Z,KAAKgmB,mBA1uDN,EA0uDkDzb,EAAMmP,EAAOzO,UAGzEoiB,IACA,IAAIpY,EAAO1K,EAAKmP,EAAOzO,UACvB,GAAa,MAATgK,EAAJ,CAOO,GAAa,MAATA,EAAc,CACxB,GAAIoY,EAAWG,EAEd,MADA9T,EAAO/O,KAAO,sBAAwB2iB,EAAW,iBAC3C5T,EAEPA,EAAOzO,WACP,MAGA,MADAyO,EAAO/O,KAAO,wBACR+O,EAfN,GAAI2T,EAAWE,EAAOb,UAErB,MADAhT,EAAO/O,KAAO,sBAAwB2iB,EAAW,iBAC3C5T,EAEPA,EAAOzO,kBAaCjL,KAAKsrB,iBAAiB/gB,EAAMmP,EAAOzO,WAE7C,OAAOyO,EAEA4R,iBAAiB/gB,EAAcU,GACtC,IAAI2iB,GAAkB,EAClB3Y,EAAO1K,EAAKU,GAEhB,YADarF,IAATqP,GAA+B,MAATA,GAAyB,OAATA,GAA0B,MAATA,IAAgB2Y,GAAkB,GACtFA,K,sGCvzET,eACA,SACMnsB,EAAS,IAAI,EAAAwD,gBACb4oB,EAAmB,EAAQ,IAC3BC,EAAc,GACpB,IAAI5oB,EAAK,EAAQ,KACbuR,EAAO,EAAQ,IACfiG,EAAMlX,EAAOkX,IACjB,MAAMqR,EAAa,CAAC,KAAM,OAAQ,OAAQ,KAAM,OAAQ,QACxD,IAAIC,EAAa,GAuBjB,SAASC,EAAc7kB,EAAc8kB,GAC/BJ,EAAY1kB,GAGhB0kB,EAAY1kB,GAAM7I,KAAK2tB,GAFvBJ,EAAY1kB,GAAQ,CAAC8kB,GAKvB,GAAwC,IAApCtT,OAAOC,KAAKiT,GAAa1sB,OAC5B,IAAK,IAAI8sB,KAAcL,EACtBI,EAAcC,EAAW9kB,KAAM8kB,GAC3BA,EAAWC,cACdF,EAAcC,EAAWC,aAAcD,GAI1C,yBAGCniB,YAAYpD,EAA+BsC,GAC1CjL,KAAKouB,UAAYzlB,EACjB3I,KAAKquB,UAAYpjB,EAEVqjB,SAAS5iB,GAChB,GAAIA,IAAQ1L,KAAKouB,UAAU1iB,IAC1B,OAAO1L,KAAKouB,UAAU9Y,UAEvB,GAAI5J,EAAI5F,SAAWkoB,EAAMloB,OACxB,OAAOkoB,EAAMrjB,KAEd,IAGC,OAFAqjB,EAAMrjB,KAAOzF,EAAGiO,aAAazH,EAAI5F,OAAQ,QACzCkoB,EAAMloB,OAAS4F,EAAI5F,OACZkoB,EAAMrjB,KACZ,MAAO4jB,GACR,MAAO,IAGFxR,oBACN,IAAIxS,EAAOvK,KAAKouB,UAAU5jB,OAAOxK,KAAKquB,WACtC,IAAK9jB,EACJ,OAED,IAAII,EAAOJ,EAAKI,KACZiR,EAAU5b,KAAKwuB,kBAAkB7jB,GACrC,QAAgB/E,IAAZgW,GAA0BA,EAAQ1S,OAAS,EAAA4R,UAAU0J,WAAa5I,EAAQ1S,OAAS,EAAA4R,UAAUS,WAChG,OAED,IAAI2S,EAAaluB,KAAKyuB,aAAa7S,EAAQxS,KAAMwS,EAAQ1S,MACzD,IAAKglB,EACJ,OAED,IAAIQ,EAAO,IAAIlpB,EAAOmpB,cAItB,OAHAD,EAAKE,WAAa,CAAC5uB,KAAK6uB,kBAAkBX,IAC1CQ,EAAKI,gBAAkB,EACvBJ,EAAKK,gBAAkB/uB,KAAKgvB,0BAA0BzkB,EAAKI,KAAMiR,EAAQ3Q,SAAW2Q,EAAQxS,KAAKhI,OAAQpB,KAAKquB,UAAUxa,WACjH6a,EAEDhT,oBACN,IAAIE,EAAUna,EAAOoa,WAAW7b,KAAKouB,UAAU5jB,OAAOxK,KAAKquB,WAAW1jB,KAAM3K,KAAKquB,UAAUxa,WAC3F,QAAgBjO,IAAZgW,IAGAA,EAAQ1S,OAAS,EAAA4R,UAAUS,YAAcK,EAAQ1S,OAAS,EAAA4R,UAAU0J,WACvE5I,EAAQ1S,OAAS,EAAA4R,UAAUmB,UAAYL,EAAQ1S,OAAS,EAAA4R,UAAU2O,SAAS,CAC3E,IAAIyE,EAAaluB,KAAKyuB,aAAa7S,EAAQxS,KAAMwS,EAAQ1S,MACzD,IAAKglB,EACJ,OAED,GAAIA,EAAWhV,WAAY,CAC1BgV,EAAW9kB,MAAQ,IACnB,IAAK,IAAI7H,EAAI,EAAGA,EAAI2sB,EAAWhV,WAAW9X,OAAQG,IACvC,IAANA,IACH2sB,EAAW9kB,MAAQ,KAEpB8kB,EAAW9kB,MAAQ8kB,EAAWhV,WAAW3X,GAAG6H,KAE7C8kB,EAAW9kB,MAAQ,IAEpB,IAAI6lB,EAAU,CAAE5pB,SAAU,QAAS2B,MAAOknB,EAAW9kB,MACrD,OAAO,IAAI5D,EAAO0pB,MAAM,CAACD,EAASf,EAAWiB,aAAejB,EAAWhL,eAGjE8L,0BAA0BvR,EAAkB2R,EAA8BC,GACjF,IAAI5b,EAAS,EACT6b,EAAQ,EACRzV,GAAiB,EACrB,IAAK,IAAItY,EAAI6tB,EAAuB,EAAG7tB,EAAI8tB,EAAa9tB,IAAK,CAC5D,IAAI0T,EAAOwI,EAAS1K,OAAOxR,GACd,MAAT0T,GAAiB4E,EAED,MAAT5E,GAAiB4E,EAER,MAAT5E,EACV4E,GAAkBA,EACC,MAAT5E,GAA0B,IAAVqa,GAAgBzV,GAC1CpG,IAJA6b,IAFAA,IASF,OAAO7b,EAEDoE,sBACN,IAAI+D,EAAUna,EAAOoa,WAAW7b,KAAKouB,UAAU5jB,OAAOxK,KAAKquB,WAAW1jB,KAAM3K,KAAKquB,UAAUxa,WAC3F,QAAgBjO,IAAZgW,IAGAA,EAAQ1S,OAAS,EAAA4R,UAAUmB,UAAYL,EAAQ1S,OAAS,EAAA4R,UAAUS,YAAY,CACjF,IAAIgU,EAAYvvB,KAAKyuB,aAAa7S,EAAQxS,KAAMwS,EAAQ1S,MACxD,GAAIqmB,EACH,OAAOA,EAAUC,UAMbf,aAAagB,EAAsBC,GACzC,GAAIA,IAAiB,EAAA5U,UAAU0J,WAAakL,IAAiB,EAAA5U,UAAU2O,QAAS,CAC/E,IAAIkG,EAAU7B,EAAY2B,EAAa3I,eACvC,IAAI6I,EAQH,OAPA,IAAK,IAAIzB,KAAcyB,EACtB,GAAwB,aAApBzB,EAAWhlB,MAA2C,YAApBglB,EAAWhlB,KAGjD,OAAO0R,OAAOgV,OAAO,GAAI1B,OAKrB,IAAIwB,IAAiB,EAAA5U,UAAUS,YAAcmU,IAAiB,EAAA5U,UAAUmB,SAM9E,OANwF,CACxF,IAAI4T,EAAe7vB,KAAK8vB,oBAAoBL,GAC5C,GAAII,EACH,OAAO7vB,KAAK+vB,mBAAmBF,KAM3BhB,kBAAkBX,GACxB,IAAIjgB,EAAkB,CACrB7E,KAAM,GACN8Z,YAAa,GACbhK,WAAY,IAGb,GADAjL,EAAKiV,YAAcgL,EAAWhL,YAC1BgL,EAAWhV,WAAY,CAC1BjL,EAAK7E,KAAO8kB,EAAW9kB,KAAO,IAC9B,IAAK,IAAI7H,EAAI,EAAGA,EAAI2sB,EAAWhV,WAAW9X,OAAQG,IAAK,CACtD,IAAI6rB,EAAYc,EAAWhV,WAAW3X,GAClC2hB,EAAckK,EAAU4C,SAAW,cAAgB,GACvD9M,GAAekK,EAAUlK,aAAekK,EAAUhkB,KAClD6E,EAAKiL,WAAW3Y,KAAK,IAAIiF,EAAOyqB,qBAAqB7C,EAAUhkB,KAAM8Z,IACjEkK,EAAU4C,WACb/hB,EAAK7E,MAAQ,KAEd6E,EAAK7E,MAAe,IAAN7H,EAAU,GAAK,IAC7B0M,EAAK7E,MAAQgkB,EAAUhkB,KAAO,IAAMgkB,EAAUlkB,KAC1CkkB,EAAU4C,WACb/hB,EAAK7E,MAAQ,KAGf6E,EAAK7E,MAAQ,IACT8kB,EAAWgC,UACdjiB,EAAK7E,MAAQ,IAAM8kB,EAAWgC,SAGhC,IAAIC,EAAY,IAAI3qB,EAAO4qB,qBAAqBniB,EAAK7E,KAAM6E,EAAKiV,aAEhE,OADAiN,EAAUjX,WAAajL,EAAKiL,WACrBiX,EAEDL,oBAAoBja,GAC1B,IAAIwa,EAAUrwB,KAAKouB,UAAU1iB,IACzB4kB,EAAaza,EAAM/S,MAAM,KAAK,GAC9BwN,EAAS,EACT0I,EAAY,GAKhB,QAJiCpT,IAA7B0qB,EAAWxtB,MAAM,KAAK,KACzBwN,EAASC,SAASsF,EAAM/S,MAAM,KAAK,IACnCwtB,EAAaA,EAAWxtB,MAAM,KAAK,KAER,IAAxB+S,EAAM9U,QAAQ,KAAa,CAC9B,IAAIib,EAAWnG,EAAM/S,MAAM,KAAK,GACL,MAAvBkZ,EAASjJ,OAAO,KACnBiJ,EAAW,IAAMA,EAASrY,UAAU,IAErC,IAAI4sB,EAAW9Z,EAAK/V,QAAQV,KAAKouB,UAAU1iB,IAAI5F,OAAQ,MAAQkW,GAC/D,IAAK,IAAIwU,KAAazC,EAAY,CACjC,IAAI0C,EAAeF,EAAWC,EAC9B,GAAItrB,EAAGa,WAAW0qB,GAAe,CAChCF,EAAWE,EACX,OAGFJ,EAAU3T,EAAIlN,KAAK+gB,GAEpB,IAAIpe,EAAkBnS,KAAKsuB,SAAS+B,GAASvtB,MAAM,MAC/CqsB,EAAc,GACd5tB,EAAI,EACJmvB,EAAcJ,EAAWlvB,OAC7B,IAAKG,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IAC7B,GAAI4Q,EAAM5Q,GAAGkY,OAAO,EAAGiX,KAAiBJ,GAAqE,OAAvDne,EAAM5Q,GAAGkY,OAAOiX,EAAa,GAAGxc,MAAM,aAAuB,CAClH8E,EAAY7G,EAAM5Q,GAClB4tB,GAAehd,EAAM5Q,GAAK,KAC1B,IAAK,IAAIovB,EAAIpvB,EAAI,EAAGovB,EAAI,IACC,IAApBxe,EAAMwe,GAAGvvB,QAAgB+Q,EAAMwe,GAAGzc,MAAM,UADlByc,IAEzBxB,GAAehd,EAAMwe,GAAK,KAK5B,MAGF,GAAIxB,EAAY/tB,OAAS,EAExB,OADA+tB,EAAcA,EAAYrsB,MAAM,MAAM8tB,UAAUlT,KAAK,MAC9C,CACNyR,YAAAA,EACAK,SAAU,IAAIhqB,EAAOoT,SAASyX,EAAS,IAAI7qB,EAAOwF,SAASzJ,EAAI+O,EAAQ,IACvE0I,UAAAA,GAKK+W,mBAAmBF,GAC1B,IAAI3B,EAA8B,CACjC9kB,KAAM,GACNF,KAAM,WACNimB,YAAa,GACbjM,YAAa,GACbgN,QAAS,GACTV,SAAUK,EAAaL,UAEpBqB,EAAahB,EAAaV,YAC9BjB,EAAWiB,YAAc0B,EACzB,IACInX,EADkB,iDACOC,KAAKkW,EAAa7W,WAC/C,IAAKU,EACJ,OAEDwU,EAAW9kB,KAAOsQ,EAAO,GACrBmX,EAAW9vB,QAAQ,OACtBmtB,EAAWiB,YAAc0B,EAAWltB,UAAUktB,EAAW9vB,QAAQ,KAAO,IAEzE,IAAI+vB,EAA2B,GAC3BC,EAAmB,GACvB,QAAkBnrB,IAAd8T,EAAO,GAAkB,CAC5BoX,EAAiBpX,EAAO,GAAG/V,UAAU,EAAG+V,EAAO,GAAGtY,OAAS,GAAG0B,MAAM,KACpEorB,EAAWhV,WAAa,GACxB,IAAK,IAAI3X,EAAI,EAAGA,EAAIuvB,EAAe1vB,OAAQG,IAC1C2sB,EAAWhV,WAAW3Y,KACrB,CACC6I,KAAM0nB,EAAevvB,GACrB2H,KAAM,QAER6nB,EAAiBD,EAAevvB,IAAM2sB,EAAWhV,WAAW9X,OAAS,EAGvE,GAAmB,KAAfyvB,EAAmB,CACtB,IAAI3N,EAAc2N,EAAW3c,MAAM,mBACf,OAAhBgP,IAAwBgL,EAAWhL,YAAcA,EAAY,IAEjE,IAAK,IAAI8N,KAASD,EAAkB,CACnC,IAAIE,EAAmBJ,EAAW3c,MAAM,IAAIgd,OAAO,MAAQF,EAAQ,iBAAkB,MAC5D,OAArBC,IAA6B/C,EAAWhV,WAAY6X,EAAiBC,IAAQ9N,YAAc+N,EAAiB,KAGlH,OAAO/C,EAEAM,kBAAkB/Q,GACzB,IACItM,EADAme,EAAQ,EAGZ,IAAKne,EADcnR,KAAKquB,UAAUxa,UACN,EAAG1C,EAAQ,GAAKme,EAAQ,EAAGne,IAAS,CAC/D,IAAI8D,EAAOwI,EAAS1K,OAAO5B,GACd,MAAT8D,EACHqa,IACmB,MAATra,GACVqa,IAGF,KAAIA,EAAQ,GAAKne,GAAS,GAG1B,OAAO1P,EAAOoa,WAAW4B,EAAUtM,M,4ECxTrC,eACA,SACM1P,EAAS,IAAI,EAAAwD,gBA4BnB,gBAQC8G,YAAYpD,GALJ,KAAAwoB,sBAAkC,GAClC,KAAAC,sBAAgC,EAKvCpxB,KAAKqxB,YAAc5vB,EAAOwZ,aAAatS,EAAS2M,WAChD,MAAMgc,EAAgB9rB,EAAOoD,UAAU2oB,wBACoB3rB,IAAvD0rB,EAAcE,MAAMC,iCACvBzxB,KAAKmxB,sBAAwBG,EAAcE,MAAMC,+BAA+B3uB,MAAM,WAEvC8C,IAA5C0rB,EAAcE,MAAME,sBACvB1xB,KAAKoxB,qBAAuBE,EAAcE,MAAME,qBAO3ClmB,kBAENxL,KAAK2xB,UAAY,GACjB3xB,KAAK4xB,aAAe,GACpB5xB,KAAK6xB,aACL,IAAK,IAAItwB,EAAI,EAAGA,EAAIvB,KAAK4xB,aAAaxwB,OAAQG,IAC7CvB,KAAK8xB,kBAAkB9xB,KAAK4xB,aAAarwB,IAE1C,OAAOvB,KAAK2xB,UAONG,kBAAkBlc,GACxB,GAAI5V,KAAKoxB,qBAAsB,CAC9BpxB,KAAK+xB,WAAa,GAClB/xB,KAAKgyB,mBAAqB,GAC1B,IAAIlY,EAAQ,EACZ,IAAK,IAAIvY,EAAI,EAAGA,EAAIqU,EAAQsD,WAAW9X,OAAQG,IAC9CvB,KAAK+xB,WAAWnc,EAAQsD,WAAW3X,GAAG6H,MAAQ,CAAE6oB,aAAa,EAAMC,kBAAmBtc,EAAQsD,WAAW3X,GAAG0J,UAE7G,IAAK,IAAI1J,EAAIqU,EAAQuc,UAAW5wB,GAAKqU,EAAQ6C,QAASlX,IAAK,CAC1D,IAAI6wB,GAAmB,EACvB,IAAK,IAAIzB,EAAI,EAAGA,EAAI3wB,KAAKqxB,YAAY9vB,GAAGH,OAAQuvB,IAAK,CACpD,IAAI1nB,EAAQjJ,KAAKqxB,YAAY9vB,GAAGovB,GAChC,GAAIpvB,IAAMqU,EAAQuc,WAAmB,IAANxB,EAAS,CACvC,OAASA,EAAI3wB,KAAKqxB,YAAY9vB,GAAGH,QAAUpB,KAAKqxB,YAAY9vB,GAAGovB,GAAGznB,OAAS,EAAA4R,UAAUyB,QAErF,KAAIoU,EAAI3wB,KAAKqxB,YAAY9vB,GAAGH,QAG3B,SAFA6H,EAAQjJ,KAAKqxB,YAAY9vB,GAAGovB,GAK9B,GAAI1nB,EAAMC,OAAS,EAAA4R,UAAU6O,YAAa,CACzCyI,GAAmB,EACnB,IAAIC,EAAWppB,EAAMG,KAAKhI,OACtBixB,EAAWvY,GACd9Z,KAAKsyB,wBAAwBxY,EAAOuY,GAErCvY,EAAQuY,OACEppB,EAAMC,OAAS,EAAA4R,UAAU+B,UAC9BuV,GAAoBtY,EAAQ,IAChC9Z,KAAKsyB,wBAAwBxY,EAAO,GACpCA,EAAQ,GAGV,GAAI7Q,EAAMC,OAAS,EAAA4R,UAAU2O,SAK5B,IAJK2I,GAAoBtY,EAAQ,IAChC9Z,KAAKsyB,wBAAwBxY,EAAO,GACpCA,EAAQ,GAEc,QAAnB7Q,EAAM8d,SAAoB,CAC7B,IAAIwL,GAA6B,EAC7BC,GAAqB,EACzB,OAAS7B,EAAI3wB,KAAKqxB,YAAY9vB,GAAGH,SAC/BpB,KAAKqxB,YAAY9vB,GAAGovB,GAAGznB,OAAS,EAAA4R,UAAUyB,OAC1Cvc,KAAKqxB,YAAY9vB,GAAGovB,GAAGznB,OAAS,EAAA4R,UAAUoM,cAM3C,GALAqL,GAAoB,EACpBtpB,EAAQjJ,KAAKqxB,YAAY9vB,GAAGovB,GACxB1nB,EAAM8hB,qBACTyH,GAAqB,GAElBvpB,EAAMC,OAAS,EAAA4R,UAAUyB,MAAO,CACnC,IAAIkW,EAAUxpB,EAAMG,KAChByB,EAAU,GACV6nB,EAA0B1yB,KAAK+xB,WAAWU,GAAWzyB,KAAK+xB,WAAWU,GAAW,CAAEE,WAAY1pB,EAAM8hB,oBAEpG2H,EAAST,YACRhpB,EAAM8hB,mBACT2H,EAASC,YAAa,EAER,IAAV7Y,IACHjP,EAAU,8BAAgC4nB,GAIvCC,EAASE,aAKTF,EAASE,aAAa7xB,QAAQ+Y,IAAU,EAC3CjP,EAAU,YAAc4nB,EAAU,qCAElCC,EAASE,aAAaryB,KAAKuZ,GAC3B4Y,EAASG,YAAatyB,KAAKgB,GAC3BmxB,EAASI,eAAgBvyB,KAAK0I,EAAMgC,YATrCynB,EAASE,aAAe,CAAC9Y,GACzB4Y,EAASG,YAAc,CAACtxB,GACxBmxB,EAASI,eAAiB,CAAC7pB,EAAMgC,WAWnB,KAAZJ,GACH7K,KAAK+yB,YAAYloB,EAAStJ,EAAG0H,EAAMgC,SAAUhC,EAAMG,KAAKhI,QAEzDpB,KAAK+xB,WAAWU,GAAWC,EAU7B,IAP0B,IAAtBH,IACHC,GAAqB,GAElBA,GACHxyB,KAAKgyB,mBAAmBzxB,KAAKuZ,GAG1BlE,EAAQsD,WAAW9X,OAAS,GAAKoxB,GAAgC,IAAV1Y,EAC1D,IAAK,IAAIkZ,EAAI,EAAGA,EAAIpd,EAAQsD,WAAW9X,OAAQ4xB,IAC9C,IAAKhzB,KAAK+xB,WAAWnc,EAAQsD,WAAW8Z,GAAG5pB,MAAMupB,WAAY,CAC5D3yB,KAAK+yB,YAAY,8BAA+BxxB,EAAG0H,EAAMgC,SAAUhC,EAAMG,KAAKhI,QAC9E,aAKE,GAAI6H,EAAMC,OAAS,EAAA4R,UAAUyB,MAAO,CAC1C,IAAIkW,EAAUxpB,EAAMG,KACpBpJ,KAAKizB,YAAYR,EAAS3Y,EAAOvY,EAAG0H,EAAMgC,YAI7CjL,KAAKkzB,oBAAoBtd,IAQnBsd,oBAAoBtd,GAC3B,IAAK,IAAIud,KAAOnzB,KAAK+xB,WAAY,CAChC,IAAI/U,EAAuBhd,KAAK+xB,WAAWoB,IACvCnW,EAAMiV,aAAgBjV,EAAMoW,QAAWpzB,KAAKqzB,mBAAmBF,GAIxDnW,EAAM6V,aAAe7V,EAAM6V,YAAYzxB,OAAS,IAAM4b,EAAMoW,SAAWpzB,KAAKqzB,mBAAmBF,IACzGnzB,KAAK+yB,YAAY,YAAcI,EAAM,yBACpCnW,EAAM6V,YAAY,GAClB7V,EAAM8V,eAAgB,GACtBK,EAAI/xB,QAPLpB,KAAK+yB,YAAY,YAAcI,EAAM,sCAAuCvd,EAAQuc,UACnFnV,EAAMkV,kBACNiB,EAAI/xB,SAgBA6xB,YAAYR,EAAiB3Y,EAAevP,EAAcU,GAEjE,IAAIynB,EAAW1yB,KAAK+xB,WAAWU,GAC/B,IAAKzyB,KAAKqzB,mBAAmBZ,GAAU,CACtC,IAAIa,GAAU,EACd,IAAK,IAAIN,EAAI,EAAGA,EAAIhzB,KAAKgyB,mBAAmB5wB,OAAQ4xB,IAC/ChzB,KAAKgyB,mBAAmBgB,IAAMlZ,IACjCwZ,GAAU,GAGZ,IAAKA,GACAZ,EAAU,CACb,GAAKA,EAAST,YAUbqB,GAAU,OATV,GAAIZ,EAASE,aACZ,IAAK,IAAIrxB,EAAI,EAAGA,EAAImxB,EAASE,aAAaxxB,OAAQG,IACjD,GAAImxB,EAASE,aAAarxB,IAAMuY,EAAO,CACtCwZ,GAAU,EACV,MAOJZ,EAASU,QAAS,EAGfE,GACJtzB,KAAK+yB,YAAY,YAAcN,EAAU,aAAcloB,EAAMU,EAAUwnB,EAAQrxB,QAG7EsxB,EACHA,EAASU,QAAS,EAElBV,EAAW,CAAEU,QAAQ,GAEtBpzB,KAAK+xB,WAAWU,GAAWC,EASpBK,YAAYloB,EAAiBN,EAAcgO,EAAuBgb,GACzEvzB,KAAK2xB,UAAUpxB,KAAK,CACnBqK,KAAM,GACNC,QAAAA,EACAC,MAAO,IAAItF,EAAOuF,MAAM,IAAIvF,EAAOwF,SAAST,EAAMgO,GAAgB,IAAI/S,EAAOwF,SAAST,EAAMgO,EAAgBgb,IAC5GroB,SAAU1F,EAAO2F,mBAAmBqoB,QACpCnoB,OAAQ,KAOFwmB,aACP,IAAIjc,EAAsB,CAAEuc,WAAY,EAAG1Z,SAAU,EAAGS,WAAY,IAChEY,EAAgB,EAChB2Z,GAAwB,EACxBC,GAA4C,EAChD,IAAK,IAAInpB,EAAO,EAAGA,EAAOvK,KAAKqxB,YAAYjwB,OAAQmJ,IAAQ,CAC1D,IAAIopB,GAAS,EACTvB,GAAmB,EACvB,IAAK,IAAIzB,EAAI,EAAGA,EAAI3wB,KAAKqxB,YAAY9mB,GAAMnJ,OAAQuvB,IAAK,CACvD,IAAI1nB,EAAmBjJ,KAAKqxB,YAAY9mB,GAAMomB,GAI9C,GAHI1nB,EAAMC,OAAS,EAAA4R,UAAU+B,SAAW5T,EAAMG,KAAK8K,MAAM,iBACxDlU,KAAKmxB,sBAAwBnxB,KAAKmxB,sBAAsB5lB,OAAOtC,EAAMG,KAAKtG,MAAM,eAAe,GAAGA,MAAM,OAE/F,IAAN6tB,GAAW1nB,EAAMC,OAAS,EAAA4R,UAAUjF,QACvC4d,GAAe,EACXC,IACH1zB,KAAK2xB,UAAUpxB,KAAK,CACnBqK,KAAM,GACNC,QAAS,mBACTC,MAAO,IAAItF,EAAOuF,MAAM2oB,EAAkB,IAAIluB,EAAOwF,SAAST,EAAM,IACpEW,SAAU1F,EAAO2F,mBAAmBqoB,QACpCnoB,OAAQ,KAETqoB,GAAmB,QAEc9tB,IAA9B5F,KAAKqxB,YAAY9mB,GAAM,IAC1BvK,KAAKqxB,YAAY9mB,GAAM,GAAGrB,OAAS,EAAA4R,UAAUyB,OAAO,CAEpD,IADA3G,EAAQuc,UAAY5nB,IACXomB,EAAI3wB,KAAKqxB,YAAY9mB,GAAMnJ,QAAUpB,KAAKqxB,YAAY9mB,GAAMomB,GAAGznB,OAAS,EAAA4R,UAAUyB,OAC1F3G,EAAQsD,WAAW3Y,KAAK,CAAE6I,KAAMpJ,KAAKqxB,YAAY9mB,GAAMomB,GAAGvnB,KAAM6B,SAAUjL,KAAKqxB,YAAY9mB,GAAMomB,GAAG1lB,WAErG,GAAI0lB,GAAK3wB,KAAKqxB,YAAY9mB,GAAMnJ,OAC/B,SAED6H,EAAQjJ,KAAKqxB,YAAY9mB,GAAMomB,GAGjC,GAAI1nB,EAAMC,OAAS,EAAA4R,UAAU2O,QAAS,CACjCgK,IAAqC,IAArBC,IACnBA,EAAmB,IAAIluB,EAAOwF,SAAST,EAAMtB,EAAMgC,YAE3B,IAArBmnB,IACHtY,EAAQ,GAET,IAAI+K,EAAU5b,EAAM8d,SAIpB,GAHgB,OAAZlC,GAAgC,SAAZA,IACvB8O,GAAS,KAELA,GAAuB,SAAZ9O,GAAkC,SAAZA,GAAwB5b,EAAM6gB,mBAA+B,IAAVhQ,GAAa,CACrG,IAAI8Z,GAAmB,EACvB,GAAgB,SAAZ/O,EACH,IAAK,IAAImO,EAAIrC,EAAI,EAAGqC,EAAIhzB,KAAKqxB,YAAY9mB,GAAMnJ,OAAQ4xB,IAAK,CAC3D,GAAIhzB,KAAKqxB,YAAY9mB,GAAMyoB,GAAG9pB,OAAS,EAAA4R,UAAUqP,iBAAkB,CAClEyJ,GAAmB,EACnB,MACM,GAAI5zB,KAAKqxB,YAAY9mB,GAAMyoB,GAAG9pB,OAAS,EAAA4R,UAAU2O,QACvD,MAIH,IAAKmK,EAAkB,CACtBhe,EAAQ6C,QAAUlO,GACS,IAAvBqL,EAAQuc,YACXnyB,KAAK4xB,aAAarxB,KAAKqV,GACvBA,EAAU,CAAEuc,WAAY,EAAG1Z,SAAU,EAAGS,WAAY,KAErDua,GAAe,EACf,QAICxqB,EAAMC,OAAS,EAAA4R,UAAU6O,cAC5B7P,EAAQ7Q,EAAMG,KAAKhI,OACnBgxB,GAAmB,KAMfiB,mBAAmBQ,GAC1B,IAAIC,GAAoB,EACxB,IAAK,IAAId,EAAI,EAAGA,EAAIhzB,KAAKmxB,sBAAsB/vB,OAAQ4xB,IACtD,GAAI,IAAI9B,OAAO,IAAMlxB,KAAKmxB,sBAAsB6B,GAAK,KAAKe,KAAKF,GAAW,CACzEC,GAAoB,EACpB,MAGF,OAAOA,EAOAxB,wBAAwBxY,EAAeuY,G,MAC9C,IAAK,IAAIW,EAAIX,EAAW,EAAGW,GAAKlZ,EAAOkZ,IAAK,CAC3C,IAAI7hB,EAAQnR,KAAKgyB,mBAAmBjxB,QAAQiyB,GACxC7hB,GAAS,GACZnR,KAAKgyB,mBAAmBhxB,OAAOmQ,EAAO,GAGxC,IAAK,IAAIgiB,KAAOnzB,KAAK+xB,WAAY,CAChC,IAAI/U,EAAQhd,KAAK+xB,WAAWoB,GACxBa,GAAQ,EACRC,EAAU,EACVjK,EAAc,EAClB,GAAIhN,EAAM4V,aAAc,CACvB,IAAK,IAAII,EAAIX,EAAW,EAAGW,GAAKlZ,EAAOkZ,IAAK,CAC3C,IAAI7hB,EAA0B,QAAlB,EAAA6L,EAAM4V,oBAAY,eAAE7xB,QAAQiyB,GACpC7hB,GAAS,IACZ8iB,EAAUjX,EAAM6V,YAAa1hB,GAC7B6Y,EAAchN,EAAM8V,eAAgB3hB,GACpC6L,EAAM4V,aAAa5xB,OAAOmQ,EAAO,GACjC6L,EAAM6V,YAAa7xB,OAAOmQ,EAAO,GACjC6L,EAAM8V,eAAgB9xB,OAAOmQ,EAAO,GACpC6iB,GAAQ,EACRh0B,KAAK+xB,WAAWoB,GAAOnW,GAGrBgX,IAAUhX,EAAMoW,QACnBpzB,KAAK+yB,YAAY,YAAcI,EAAM,yBACpCc,EACAjK,EACAmJ,EAAI/xB,a,6GChYV,eAOA,IAAY8yB,GAAZ,SAAYA,GACX,uBACA,6BAEA,iCACA,uBACA,qBACA,mBAPD,CAAYA,EAAA,EAAAA,cAAA,EAAAA,YAAW,KAwGvB,MAAMC,EAaLpoB,cACC/L,KAAKkZ,WAAa,GAClBlZ,KAAKuK,MAAQ,EACbvK,KAAKo0B,aAAe,GACpBp0B,KAAKyY,SAAW,EAChBzY,KAAKq0B,YAAcH,EAAY/b,OAC/BnY,KAAKs0B,cAAgB,IAIvB,MAAMC,EAILxoB,gBAGD,qBAA0ByoB,GAEzB,OADa,IAAIC,GACHC,cAAcF,IAG7B,MAAMC,EASL1oB,YAAY4oB,GACX30B,KAAKkY,QAAU,GACflY,KAAKo0B,aAAe,GACpBp0B,KAAKob,OAAS,GACVuZ,IAAa30B,KAAK20B,UAAYA,GAG3BC,OAGP,OAFA50B,KAAK60B,YAAc70B,KAAK20B,UAAUC,OAAO5tB,MACrChH,KAAK60B,aAAe70B,KAAKob,OAAO7a,KAAKP,KAAK60B,kBAClBjvB,IAArB5F,KAAK60B,YAGbH,cAAcI,GAEb,IADA90B,KAAK20B,WAAY,IAAAI,WAAUD,GACpB90B,KAAK40B,QACX,GAAI50B,KAAK60B,YAAYG,iBAAkB,CACtC,IAAI7c,EAASnY,KAAKi1B,cAClB,IAAK9c,EAAU,SACfnY,KAAKkY,QAAQ3X,KAAK4X,GAClBnY,KAAKk1B,aAAe/c,OAEhB,GAAInY,KAAK60B,YAAYM,SAAWn1B,KAAK60B,YAAYO,UAAW,CAChE,IAAInyB,EAAajD,KAAK60B,YAAY5pB,SAASV,KACvC8qB,EAAcr1B,KAAKs1B,kBACvB,GAAIt1B,KAAKk1B,cAAgBl1B,KAAKk1B,aAAaK,WAAatyB,EAAY,CACnE,IAAIqxB,EAAgBt0B,KAAKw1B,sBAAsBH,GAC3Cf,IAAiBt0B,KAAKk1B,aAAaZ,cAAgBA,QAGpD,IAAIt0B,KAAK60B,YAAYY,YAAe,SAClCz1B,KAAK01B,mBAAmB,IAEhC,MAAO,CACNtB,aAAcp0B,KAAKo0B,aACnBlc,QAASlY,KAAKkY,QACdkD,OAAQpb,KAAKob,QAIPoa,sBAAsBH,GAC7B,IAAI9zB,EAAI,EACR,KAAOA,EAAI8zB,EAAYj0B,QAAQ,CAC9B,IAAI6H,EAAQosB,EAAY9zB,GACxB,IAAI0H,EAAMmsB,YAAansB,EAAMksB,QAI7B,OAAIlsB,EAAM0sB,qBAAuBN,EAAY9zB,EAAI,IAAM8zB,EAAY9zB,EAAI,GAAGq0B,gBAClEP,EAAY9zB,EAAI,GAAGyF,MAEpB,GANNzF,IAQF,MAAO,GAGA+zB,kBACP,IAAID,EAAuB,GAC3B,KAAOr1B,KAAK40B,QAAoC,KAA1B50B,KAAK60B,YAAY3rB,MACtCmsB,EAAY90B,KAAKP,KAAK60B,aAEvB,OAAOQ,EAGAJ,cACP,IAAI9c,EAAiB,IAAIgc,EACzB,GACC,GAAKn0B,KAAK60B,cACN70B,KAAK60B,YAAYM,UAAWn1B,KAAK60B,YAAYO,UAAjD,CACK,GAAIp1B,KAAK60B,YAAYY,YAAe,MACpC,GAAIz1B,KAAK60B,YAAYgB,cAAe,CACxC,IAAIC,EAAY91B,KAAK+1B,kBAAkB5d,GACvC,IAAK2d,EAAa,OAClB3d,EAAOe,WAAa4c,EACpB,MAEI,GAAI91B,KAAK60B,YAAYG,kBACJ,IAAjB7c,EAAO5N,OACV4N,EAAO5N,KAAOvK,KAAK60B,YAAY5pB,SAASV,KACxC4N,EAAO6d,SAAWh2B,KAAK60B,YAAY5pB,SAASV,KAAO,EACnD4N,EAAOod,SAAWv1B,KAAK60B,YAAY5pB,SAASV,KAAO,EACnD4N,EAAO1G,GAAKzR,KAAK60B,iBAGd,IAAI70B,KAAK60B,YAAYc,qBAAuB31B,KAAK60B,YAAYe,gBACjE,SAEI,GAA+B,OAA3B51B,KAAK60B,YAAY7tB,MAAkB,SACvC,IAAIhH,KAAK60B,YAAYoB,eAMrB,CAEJ,GADAj2B,KAAK01B,mBAAmB,IACpBvd,EAAO1G,GACV,MAED,OAVK0G,EAAO+d,aACX/d,EAAO+d,WAAal2B,KAAK60B,YACzB1c,EAAOod,SAAWv1B,KAAK60B,YAAY5pB,SAASV,KAAO,WAU7CvK,KAAK40B,QAMd,OAJI50B,KAAKk1B,eACRl1B,KAAKk1B,aAAazc,QAAUN,EAAO1G,GAAGxG,SAASV,KAAO,GAEvDvK,KAAKk1B,aAAe/c,EACbA,EAGA4d,kBAAkB5d,GACzB,IACI6Y,EADA1d,EAAoB,GAEpB6iB,GAAO,EACX,KAAOn2B,KAAK40B,QACX,KAAI50B,KAAK60B,YAAYM,SAAWn1B,KAAK60B,YAAYO,WAAap1B,KAAK60B,YAAYY,aAC1E,GAAIz1B,KAAK60B,YAAYgB,eAEzB,GADAM,GAAO,GACFnF,EAAS,WAFV,CAKA,GAAIhxB,KAAK60B,YAAYoB,eAAgB,CAIzC,GAHAE,GAAO,EACPhe,EAAO+d,WAAal2B,KAAK60B,YACzB1c,EAAOod,SAAWv1B,KAAK60B,YAAY5pB,SAASV,KAAO,GAC9CymB,EAAS,MACd1d,EAAK/S,KAAKywB,GACV,MAEI,GAAIhxB,KAAK60B,YAAYG,iBACpBhE,IAASA,EAAQ,IAAIuD,GAC1BvD,EAAMvf,GAAKzR,KAAK60B,iBAEZ,GAAI70B,KAAK60B,YAAYe,gBACrB5E,EACHA,EAAMnU,QAAU7c,KAAK60B,YAEbvhB,EAAKlS,QAAU,IACvBkS,EAAKA,EAAKlS,OAAS,GAAGyb,QAAU7c,KAAK60B,kBAGlC,GAAI70B,KAAK60B,YAAYuB,UAAW,CACpC,IAAKpF,EAAS,OACd1d,EAAK/S,KAAKywB,GACVA,OAAQprB,GAGV,IAAIuwB,EACJ,OAAO7iB,EAGAoiB,mBAAmBxsB,GAC1B,UAAclJ,KAAK40B,QAAU50B,KAAK60B,YAAY3rB,OAASA,M,8GCnTzD,eAIA,sBAA2BmtB,GAC1B,IAAI1B,EAAuB,IAAI2B,EAE/B,IAAK,IAAIrhB,KAAQohB,EAAkB,CAKlC,IAJA1B,EAAU4B,SAAWC,EAAQvhB,GACD,IAAxB0f,EAAU8B,YACb9B,EAAU8B,UAAY9B,EAAU4B,WAEzB5B,EAAUhhB,QACbghB,EAAU+B,eAAezhB,WACtB0f,EAAUgC,gBAGlBhC,EAAUhhB,QAAS,EAIQ,IAAxBghB,EAAU8B,YACb9B,EAAUiC,cAAc,SAClBjC,EAAUgC,iBAIlB,MAAaE,EAKZ9qB,YAAY7C,EAAYlC,EAAeiE,GACtCjL,KAAKkJ,KAAOA,EACZlJ,KAAKgH,MAAQA,EACbhH,KAAKiL,SAAWA,EAGjB6rB,WACC,IAAIpnB,EAAkB1P,KAAKiL,SACvB4D,EAAgB,IAAI,EAAA7D,SAAShL,KAAKiL,SAASV,KAAMvK,KAAKiL,SAAS4I,UAAY7T,KAAKgH,MAAM5F,QAC1F,OAAO,IAAI,EAAA2J,MAAM2E,EAAOb,GAGzBmmB,iBACC,OAAqB,IAAdh1B,KAAKkJ,KAGb+sB,eACC,OAAqB,KAAdj2B,KAAKkJ,KAGbktB,UACC,OAAqB,KAAdp2B,KAAKkJ,KAGb0sB,gBACC,OAAqB,IAAd51B,KAAKkJ,KAGbysB,oBACC,OAAqB,IAAd31B,KAAKkJ,KAGbusB,YACC,OAAqB,KAAdz1B,KAAKkJ,KAGb6tB,YACC,OAAqB,IAAd/2B,KAAKkJ,KAGb2sB,cACC,OAAqB,KAAd71B,KAAKkJ,KAGbksB,UACC,OAAqB,KAAdp1B,KAAKkJ,KAGbisB,QACC,OAAqB,KAAdn1B,KAAKkJ,KAGbgM,eACC,OAAqB,KAAdlV,KAAKkJ,MAAqC,KAAdlJ,KAAKkJ,MAAmC,KAAdlJ,KAAKkJ,OAAkC,IAATlJ,KAAKkJ,MA1DlG,UA8DA,MAAMotB,EAeLvqB,cACC/L,KAAKg3B,aAAe,EACpBh3B,KAAKi3B,eAAiB,EAEtBj3B,KAAKu2B,SAAW,EAChBv2B,KAAKy2B,UAAY,EACjBz2B,KAAKk3B,WAAa,GAClBl3B,KAAKm3B,cAAgB,IAAI,EAAAnsB,SAAShL,KAAKg3B,aAAch3B,KAAKi3B,gBAE1Dj3B,KAAK2T,QAAS,EACd3T,KAAKo3B,YAAa,EAClBp3B,KAAKq3B,YAAa,EAClBr3B,KAAKs3B,UAAW,EAQjBZ,eAAezhB,GACd,OAAuB,IAAnBjV,KAAKy2B,UACc,IAAlBz2B,KAAKu2B,UAAoD,IAAlBv2B,KAAKu2B,UAC/Cv2B,KAAKu3B,4BAA4BtiB,IAC1B,IAEPjV,KAAK42B,cAAc52B,KAAKu2B,WACjB,GAEqB,IAAnBv2B,KAAKy2B,UACO,IAAlBz2B,KAAKu2B,UACRv2B,KAAKu3B,4BAA4BtiB,IAC1B,IAEPjV,KAAK42B,cAAc52B,KAAKu2B,WACjB,GAEqB,IAAnBv2B,KAAKy2B,UACO,KAAlBz2B,KAAKu2B,UACRv2B,KAAKu3B,4BAA4BtiB,IAC1B,IAEPjV,KAAK42B,cAAc,KACZ,GAEqB,IAAnB52B,KAAKy2B,UACO,IAAlBz2B,KAAKu2B,UACRv2B,KAAKu3B,4BAA4BtiB,IAC1B,IAEPjV,KAAK42B,cAAc,IACZ,GAEqB,IAAnB52B,KAAKy2B,WACfz2B,KAAKu3B,4BAA4BtiB,GACjCjV,KAAK42B,cAAc,IACZ,GACsB,KAAnB52B,KAAKy2B,WACfz2B,KAAKy2B,UAAY,GACV,GACsB,IAAnBz2B,KAAKy2B,WACfz2B,KAAKu3B,4BAA4BtiB,GAC7BjV,KAAKo3B,YACRp3B,KAAKo3B,YAAa,EAClBp3B,KAAK42B,cAAc,KAEnB52B,KAAKo3B,YAAa,EAClBp3B,KAAK42B,cAAc,KAEb,GACsB,KAAnB52B,KAAKy2B,WACfz2B,KAAKk3B,WAAal3B,KAAKk3B,WAAajiB,EACpCjV,KAAK2T,QAAS,EACd3T,KAAKg3B,eACLh3B,KAAKi3B,eAAiB,EACtBj3B,KAAK42B,cAAc,IACZ,IACI52B,KAAKy2B,UAAY,KAA4B,IAApBz2B,KAAKy2B,aACzCz2B,KAAKu3B,4BAA4BtiB,GACjCjV,KAAK42B,cAAc,IACZ,GAKTW,4BAA4BtiB,GAC3BjV,KAAKk3B,WAAal3B,KAAKk3B,WAAajiB,EACpCjV,KAAK2T,QAAS,EACd3T,KAAKi3B,iBAGNL,cAAcY,GACbx3B,KAAK22B,eAAiB,IAAIE,EAAM72B,KAAKy2B,UAAWz2B,KAAKk3B,WAAYl3B,KAAKm3B,eACtEn3B,KAAKy2B,UAAYe,EACjBx3B,KAAKk3B,WAAa,GAClBl3B,KAAKm3B,cAAgB,IAAI,EAAAnsB,SAAShL,KAAKg3B,aAAch3B,KAAKi3B,iBAI5D,SAAST,EAAQiB,GAChB,IAAIC,EAAmBD,EAAEE,WAAW,GACpC,OAAID,GAAY,IAAMA,GAAY,IAAMA,GAAY,IAAMA,GAAY,KAAoB,KAAbA,EACrE,EACGA,GAAY,IAAMA,GAAY,GACjC,EACgB,KAAbA,EACH,EACgB,IAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GAGgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,KAAbA,EACH,GACgB,MAAbA,EACH,IACgB,MAAbA,EACH,IACgB,MAAbA,EACH,IACgB,MAAbA,EACH,KAIC,EAIV,IAAkBE,GAAAA,EAAA,EAAAA,OAAA,EAAAA,KAAI,KACrB,iCACA,yBACA,iCACA,mCACA,uBACA,yCACA,mCAEA,kBACA,0BACA,sBAEA,0CACA,gCACA,gCACA,8BACA,kCACA,8BACA,gCACA,4BACA,4BACA,sBACA,8BACA,wBACA,sBACA,8BACA,4BACA,8BACA,kCACA,oCACA,4BACA,kCACA,8BACA,oCACA,sBACA,gCACA,8BACA,+BACA,qBACA,iCACA,uBAEA,+B,2BClUDhd,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQoc,aAAepc,EAAQs2B,iBAAmBt2B,EAAQu2B,iBAAmBv2B,EAAQw2B,iBAAmBx2B,EAAQy2B,oBAAsBz2B,EAAQ02B,mBAAqB12B,EAAQ22B,kBAAoB32B,EAAQ42B,kBAAoB52B,EAAQ62B,YAAc72B,EAAQ8c,gBAAkB9c,EAAQ82B,YAAc92B,EAAQ+2B,YAAc/2B,EAAQ+c,gBAAkB/c,EAAQ4d,iBAAmB5d,EAAQg3B,eAAiBh3B,EAAQ4c,aAAe5c,EAAQi3B,eAAiBj3B,EAAQk3B,OAASl3B,EAAQue,WAAave,EAAQm3B,SAAWn3B,EAAQ4e,OAAS5e,EAAQkf,WAAalf,EAAQuf,MAAQvf,EAAQohB,YAAS,EACrjB,MAAMgW,EAAa,EAAQ,KACrBC,EAAa,EAAQ,KACrBC,EAAoB,EAAQ,KAC5BC,EAAQ,EAAQ,KActBv3B,EAAQohB,OAbR,MACI7W,YAAY3C,EAAMqN,EAAMhF,EAAK,EAAGunB,EAAQ/qB,GACpCjO,KAAKoJ,KAAOA,EACZpJ,KAAKyW,KAAOA,EACZzW,KAAKi5B,gBAAkBxnB,EACnBunB,IACAh5B,KAAKg5B,OAASA,GAEd/qB,IACAjO,KAAKk5B,YAAcjrB,KAY/BzM,EAAQuf,MAPR,MACIhV,YAAY3C,EAAM+vB,EAAWC,GAAY,GACrCp5B,KAAKoJ,KAAOA,EACZpJ,KAAKqhB,mBAAqB8X,EAC1Bn5B,KAAKo5B,UAAYA,IAazB53B,EAAQkf,WATR,MACI3U,YAAYxK,EAAG83B,EAAIC,EAAK9oB,EAAK,EAAG+oB,EAAM,GAClCv5B,KAAKyR,GAAKlQ,EACVvB,KAAKqL,OAASiuB,EACdt5B,KAAKuK,KAAOiG,EACZxQ,KAAKgkB,OAASuV,EACdv5B,KAAKoJ,KAAOiwB,IAepB73B,EAAQ4e,OAXR,MACIrU,YAAY0F,EAAIrI,GACZpJ,KAAKyR,GAAKA,EAENzR,KAAKoJ,KADLA,GAIY,WAAaqI,IAkBrCjQ,EAAQm3B,SAbR,MACI5sB,YAAY3C,EAAMpC,EAAOsjB,EAAM,EAAGkP,EAAkBC,GAChDz5B,KAAKoJ,KAAOA,EACZpJ,KAAKgH,MAAQA,EACbhH,KAAKqhB,mBAAqBiJ,EACI,iBAAnBmP,IACPz5B,KAAKy5B,eAAiBA,GAEM,iBAArBD,IACPx5B,KAAKw5B,iBAAmBA,KAoBpCh4B,EAAQue,WAfR,MACIhU,YAAYyF,EAAUjH,EAAMyZ,EAAQ3Y,GAChCrL,KAAKwR,SAAWA,EAChB,MAAM+c,EAAIvuB,KACU,iBAATuK,IACPgkB,EAAEhkB,KAAOA,GAES,iBAAXyZ,IACPuK,EAAEvK,OAASA,GAEX3Y,IACAkjB,EAAEljB,OAASA,KAWvB7J,EAAQk3B,OANR,MACI3sB,YAAY0F,EAAIrI,GACZpJ,KAAKyR,GAAKA,EACVzR,KAAKoJ,KAAOA,IAWpB5H,EAAQi3B,eAPR,MACI1sB,YAAY8J,EAAOnG,EAAOtO,EAAS,GAC/BpB,KAAK6V,MAAQA,EACb7V,KAAK0P,MAAQA,EACb1P,KAAKoB,OAASA,IAItB,MAAMgd,UAAqBya,EAAWa,MAClC3tB,YAAY4tB,EAAQC,EAAUC,GAC1B7tB,MAAM,WACNhM,KAAKye,KAAO,CACRkb,OAAQA,GAEY,iBAAbC,IACP55B,KAAKye,KAAKmb,SAAWA,GAEI,iBAAlBC,IACP75B,KAAKye,KAAK9T,KAAOkvB,IAI7Br4B,EAAQ4c,aAAeA,EACvB,MAAMoa,UAAuBK,EAAWa,MACpC3tB,YAAY6tB,EAAUE,GAClB9tB,MAAM,aACNhM,KAAKye,KAAO,CACRmb,SAAUA,GAEqB,kBAAxBE,IACP95B,KAAKye,KAAKqb,oBAAsBA,IAI5Ct4B,EAAQg3B,eAAiBA,EACzB,MAAMpZ,UAAyByZ,EAAWa,MACtC3tB,cACIC,MAAM,gBAGdxK,EAAQ4d,iBAAmBA,EAC3B,MAAMb,UAAwBsa,EAAWa,MACrC3tB,YAAYiE,GACRhE,MAAM,eACiB,kBAAZgE,GAAyBA,KACtBhQ,KACRye,KAAO,CACLzO,QAASA,KAKzBxO,EAAQ+c,gBAAkBA,EAC1B,MAAMga,UAAoBM,EAAWa,MACjC3tB,YAAYguB,EAAQC,EAAW,UAAW/rB,GACtCjC,MAAM,UACNhM,KAAKye,KAAO,CACRub,SAAUA,EACVD,OAAQA,QAECn0B,IAATqI,IACAjO,KAAKye,KAAKxQ,KAAOA,IAI7BzM,EAAQ+2B,YAAcA,EACtB,MAAMD,UAAoBO,EAAWa,MACjC3tB,YAAY4tB,EAAQC,GAChB5tB,MAAM,UACNhM,KAAKye,KAAO,CACRkb,OAAQA,EACRC,SAAUA,IAItBp4B,EAAQ82B,YAAcA,EACtB,MAAMha,UAAwBua,EAAWa,MACrC3tB,YAAY4tB,EAAQM,GAChBjuB,MAAM,cACNhM,KAAKye,KAAO,CACRkb,OAAQA,EACRM,WAAYA,IAIxBz4B,EAAQ8c,gBAAkBA,EAC1B,MAAM+Z,UAAoBQ,EAAWa,MACjC3tB,YAAY4tB,EAAQj3B,GAChBsJ,MAAM,UACNhM,KAAKye,KAAO,CACRkb,OAAQA,EACRj3B,OAAQA,IAIpBlB,EAAQ62B,YAAcA,EACtB,MAAMD,UAA0BS,EAAWa,MACvC3tB,YAAY4tB,EAAQtuB,GAChBW,MAAM,gBACNhM,KAAKye,KAAO,CACRkb,OAAQA,EACRtuB,OAAQA,IAIpB7J,EAAQ42B,kBAAoBA,EAC5B,MAAMD,UAA0BU,EAAWa,MACvC3tB,YAAYmuB,GACRluB,MAAM,gBACNhM,KAAKye,KAAO,CACRyb,aAAcA,IAI1B14B,EAAQ22B,kBAAoBA,EAC5B,MAAMD,UAA2BW,EAAWa,MACxC3tB,YAAYouB,EAAYC,EAAOvvB,GAC3BmB,MAAM,iBACNhM,KAAKye,KAAO,CACR0b,WAAYA,EACZC,MAAOA,GAEY,iBAAZvvB,IACP7K,KAAKye,KAAK5T,QAAUA,IAIhCrJ,EAAQ02B,mBAAqBA,EAC7B,MAAMD,UAA4BY,EAAWa,MACzC3tB,YAAYouB,EAAYtvB,GACpBmB,MAAM,kBACNhM,KAAKye,KAAO,CACR0b,WAAYA,GAEO,iBAAZtvB,IACP7K,KAAKye,KAAK5T,QAAUA,IAIhCrJ,EAAQy2B,oBAAsBA,EAC9B,MAAMD,UAAyBa,EAAWa,MACtC3tB,YAAYouB,EAAYtvB,GACpBmB,MAAM,eACNhM,KAAKye,KAAO,CACR0b,WAAYA,GAEO,iBAAZtvB,IACP7K,KAAKye,KAAK5T,QAAUA,IAIhCrJ,EAAQw2B,iBAAmBA,EAC3B,MAAMD,UAAyBc,EAAWa,MACtC3tB,YAAYsuB,EAAOT,EAAUU,GACzBtuB,MAAM,eACNhM,KAAKye,KAAO,GACR4b,IACAr6B,KAAKye,KAAK4b,MAAQA,GAElBT,IACA55B,KAAKye,KAAKmb,SAAWA,GAErBU,IACAt6B,KAAKye,KAAK6b,aAAeA,IAKrC,IAAIxC,EADJt2B,EAAQu2B,iBAAmBA,EAE3B,SAAWD,GACPA,EAAiBA,EAAuB,KAAI,GAAK,OACjDA,EAAiBA,EAA4B,UAAI,GAAK,YAF1D,CAGGA,EAAmBt2B,EAAQs2B,mBAAqBt2B,EAAQs2B,iBAAmB,KAE9E,MAAMla,UAAqBgb,EAAW2B,eAClCxuB,YAAYyuB,EAA0CC,GAClDzuB,QACA,MAAM0uB,EAA8E,kBAA7CF,GAAyDA,EAChGx6B,KAAK26B,uBAAyBD,EAC9B16B,KAAK46B,yBAA2BF,EAChC16B,KAAK66B,uBAAwB,EAC7B76B,KAAK86B,sBAAuB,EAC5B96B,KAAK+6B,wBAAyB,EAC9B/6B,KAAKg7B,qBAAsB,EAC3Bh7B,KAAKi7B,UAAyC,kBAAtBR,GAAkCA,EAC1Dz6B,KAAKmN,GAAG,SAAS,KACbnN,KAAKk7B,cAETl7B,KAAKmN,GAAG,SAAUgB,IACdnO,KAAKk7B,cAGbC,sBAAsBxN,GAClB3tB,KAAK66B,sBAAmC,SAAXlN,EAEjC3P,yBAAyBod,GACrBp7B,KAAK26B,uBAAyBS,EAElCnd,2BAA2Bmd,GACvBp7B,KAAK46B,yBAA2BQ,EAEpCC,eAAeD,GACXp7B,KAAKi7B,UAAYG,EAKrBE,WAAWC,GACPzC,EAAkB0C,gBAAgBD,GAEtCL,WACQl7B,KAAKi7B,WAAaj7B,KAAKy7B,oBAKvBv6B,YAAW,KACPw6B,QAAQC,KAAK,KACd,KAGXC,kBAAkBz4B,EAAU04B,EAAelO,EAAQzM,EAAW4a,EAAOhE,EAAiBiE,MAClF,IAAI3tB,EACyB,iBAAlBytB,GACPztB,EAAM,CACFqD,GAAIoqB,EACJlO,OAAQA,GAERzM,IACA9S,EAAI8S,UAAYA,GAEhB4a,EAAOhE,EAAiBiE,OACxB3tB,EAAI4tB,UAAW,GAEfF,EAAOhE,EAAiBmE,YACxB7tB,EAAI8tB,eAAgB,IAIxB9tB,EAAMytB,EAEV14B,EAASg5B,SAAU,EACnBh5B,EAAS0H,QAAU+S,EAAawe,UAAUhuB,EAAIuf,QAAQ,EAAMvf,EAAI8S,WAC3D/d,EAASsb,OACVtb,EAASsb,KAAO,IAEpBtb,EAASsb,KAAKtQ,MAAQC,EACtBpO,KAAKmf,aAAahc,GAEtBk5B,qBAAqB/oB,EAAMlT,EAASk8B,GAChCt8B,KAAKu8B,YAAY,gBAAiBjpB,EAAMlT,EAASk8B,GAErDE,gBAAgBrzB,GACZ,MAAMhG,EAAW,IAAI01B,EAAW4D,SAAStzB,GACzC,IACI,GAAwB,eAApBA,EAAQ0b,QAA0B,CAClC,IAAIvR,EAAOnK,EAAQuzB,UAOnB,GANkC,kBAAvBppB,EAAKqpB,gBACZ38B,KAAK86B,qBAAuBxnB,EAAKqpB,eAED,kBAAzBrpB,EAAKspB,kBACZ58B,KAAK+6B,uBAAyBznB,EAAKspB,iBAEf,SAApBtpB,EAAKupB,WACL78B,KAAK47B,kBAAkBz4B,EAAU,KAAM,2CAA4C,KAAM20B,EAAiBmE,eAEzG,CACD,MAAMa,EAAqB35B,EAC3B25B,EAAmBre,KAAO,GAC1Bze,KAAKwe,kBAAkBse,EAAoBxpB,QAGtB,WAApBnK,EAAQ0b,QACb7kB,KAAKsf,cAAcnc,EAAUgG,EAAQuzB,UAAWvzB,GAEvB,WAApBA,EAAQ0b,QACb7kB,KAAK+8B,cAAc55B,EAAUgG,EAAQuzB,UAAWvzB,GAEvB,eAApBA,EAAQ0b,QACb7kB,KAAK0iB,kBAAkBvf,EAAUgG,EAAQuzB,UAAWvzB,GAE3B,cAApBA,EAAQ0b,QACb7kB,KAAKg9B,iBAAiB75B,EAAUgG,EAAQuzB,UAAWvzB,GAE1B,YAApBA,EAAQ0b,QACb7kB,KAAKwiB,eAAerf,EAAUgG,EAAQuzB,UAAWvzB,GAExB,mBAApBA,EAAQ0b,QACb7kB,KAAKyf,sBAAsBtc,EAAUgG,EAAQuzB,UAAWvzB,GAE/B,2BAApBA,EAAQ0b,QACb7kB,KAAKi9B,8BAA8B95B,EAAUgG,EAAQuzB,UAAWvzB,GAEvC,4BAApBA,EAAQ0b,QACb7kB,KAAKk9B,+BAA+B/5B,EAAUgG,EAAQuzB,UAAWvzB,GAExC,sBAApBA,EAAQ0b,QACb7kB,KAAKqf,yBAAyBlc,EAAUgG,EAAQuzB,UAAWvzB,GAElC,aAApBA,EAAQ0b,QACb7kB,KAAKkiB,gBAAgB/e,EAAUgG,EAAQuzB,UAAWvzB,GAEzB,SAApBA,EAAQ0b,QACb7kB,KAAKmiB,YAAYhf,EAAUgG,EAAQuzB,UAAWvzB,GAErB,WAApBA,EAAQ0b,QACb7kB,KAAKoiB,cAAcjf,EAAUgG,EAAQuzB,UAAWvzB,GAEvB,YAApBA,EAAQ0b,QACb7kB,KAAKqiB,eAAelf,EAAUgG,EAAQuzB,UAAWvzB,GAExB,aAApBA,EAAQ0b,QACb7kB,KAAKm9B,gBAAgBh6B,EAAUgG,EAAQuzB,UAAWvzB,GAEzB,oBAApBA,EAAQ0b,QACb7kB,KAAKo9B,uBAAuBj6B,EAAUgG,EAAQuzB,UAAWvzB,GAEhC,iBAApBA,EAAQ0b,QACb7kB,KAAKq9B,oBAAoBl6B,EAAUgG,EAAQuzB,UAAWvzB,GAE7B,SAApBA,EAAQ0b,QACb7kB,KAAKs9B,YAAYn6B,EAAUgG,EAAQuzB,UAAWvzB,GAErB,UAApBA,EAAQ0b,QACb7kB,KAAKu9B,aAAap6B,EAAUgG,EAAQuzB,UAAWvzB,GAEtB,eAApBA,EAAQ0b,QACb7kB,KAAKqgB,kBAAkBld,EAAUgG,EAAQuzB,UAAWvzB,GAE3B,WAApBA,EAAQ0b,QACb7kB,KAAK6gB,cAAc1d,EAAUgG,EAAQuzB,UAAWvzB,GAEvB,cAApBA,EAAQ0b,QACb7kB,KAAKihB,iBAAiB9d,EAAUgG,EAAQuzB,UAAWvzB,GAE1B,gBAApBA,EAAQ0b,QACb7kB,KAAKw9B,mBAAmBr6B,EAAUgG,EAAQuzB,UAAWvzB,GAE5B,kBAApBA,EAAQ0b,QACb7kB,KAAKy9B,qBAAqBt6B,EAAUgG,EAAQuzB,UAAWvzB,GAE9B,WAApBA,EAAQ0b,QACb7kB,KAAK09B,cAAcv6B,EAAUgG,EAAQuzB,UAAWvzB,GAEvB,YAApBA,EAAQ0b,QACb7kB,KAAKkgB,eAAe/c,EAAUgG,GAEL,qBAApBA,EAAQ0b,QACb7kB,KAAK29B,wBAAwBx6B,EAAUgG,EAAQuzB,UAAWvzB,GAEjC,aAApBA,EAAQ0b,QACb7kB,KAAKsiB,gBAAgBnf,EAAUgG,EAAQuzB,UAAWvzB,GAEzB,kBAApBA,EAAQ0b,QACb7kB,KAAK49B,qBAAqBz6B,EAAUgG,EAAQuzB,UAAWvzB,GAE9B,gBAApBA,EAAQ0b,QACb7kB,KAAK69B,mBAAmB16B,EAAUgG,EAAQuzB,UAAWvzB,GAE5B,gBAApBA,EAAQ0b,QACb7kB,KAAK89B,mBAAmB36B,EAAUgG,EAAQuzB,UAAWvzB,GAE5B,kBAApBA,EAAQ0b,QACb7kB,KAAK+iB,qBAAqB5f,EAAUgG,EAAQuzB,UAAWvzB,GAE9B,kBAApBA,EAAQ0b,QACb7kB,KAAK+9B,qBAAqB56B,EAAUgG,EAAQuzB,UAAWvzB,GAE9B,uBAApBA,EAAQ0b,QACb7kB,KAAKg+B,0BAA0B76B,EAAUgG,EAAQuzB,UAAWvzB,GAEnC,uBAApBA,EAAQ0b,QACb7kB,KAAKi+B,0BAA0B96B,EAAUgG,EAAQuzB,UAAWvzB,GAEnC,eAApBA,EAAQ0b,QACb7kB,KAAKk+B,kBAAkB/6B,EAAUgG,EAAQuzB,UAAWvzB,GAE3B,gBAApBA,EAAQ0b,QACb7kB,KAAKm+B,mBAAmBh7B,EAAUgG,EAAQuzB,UAAWvzB,GAE5B,gBAApBA,EAAQ0b,QACb7kB,KAAKo+B,mBAAmBj7B,EAAUgG,EAAQuzB,UAAWvzB,GAE5B,WAApBA,EAAQ0b,QACb7kB,KAAKq+B,cAAcl7B,EAAUgG,EAAQuzB,UAAWvzB,GAEvB,wBAApBA,EAAQ0b,QACb7kB,KAAKs+B,2BAA2Bn7B,EAAUgG,EAAQuzB,UAAWvzB,GAEpC,8BAApBA,EAAQ0b,QACb7kB,KAAKu+B,iCAAiCp7B,EAAUgG,EAAQuzB,UAAWvzB,GAGnEnJ,KAAKw+B,cAAcr1B,EAAQ0b,QAAS1hB,EAAUgG,EAAQuzB,UAAWvzB,GAGzE,MAAOolB,GACHvuB,KAAK47B,kBAAkBz4B,EAAU,KAAM,WAAY,CAAEs7B,WAAYlQ,EAAE1jB,QAAS6zB,OAAQnQ,EAAE1d,OAASinB,EAAiBmE,YAGxHzd,kBAAkBrb,EAAUmQ,GAExBnQ,EAASsb,KAAKkgB,gCAAiC,EAE/Cx7B,EAASsb,KAAKmgB,mCAAoC,EAElDz7B,EAASsb,KAAKogB,6BAA8B,EAE5C17B,EAASsb,KAAKC,kCAAmC,EAEjDvb,EAASsb,KAAKE,2BAA4B,EAE1Cxb,EAASsb,KAAKqgB,kBAAmB,EAEjC37B,EAASsb,KAAKsgB,qBAAsB,EAEpC57B,EAASsb,KAAKugB,sBAAuB,EAErC77B,EAASsb,KAAKwgB,8BAA+B,EAE7C97B,EAASsb,KAAKygB,4BAA6B,EAE3C/7B,EAASsb,KAAKI,4BAA6B,EAE3C1b,EAASsb,KAAKS,wBAAyB,EAEvC/b,EAASsb,KAAK0gB,0BAA2B,EAEzCh8B,EAASsb,KAAK2gB,gCAAiC,EAE/Cj8B,EAASsb,KAAKQ,8BAA+B,EAE7C9b,EAASsb,KAAK4gB,0BAA2B,EAEzCl8B,EAASsb,KAAK6gB,kCAAmC,EAEjDn8B,EAASsb,KAAK8gB,8BAA+B,EAE7Cp8B,EAASsb,KAAK+gB,mBAAoB,EAElCr8B,EAASsb,KAAKghB,iCAAkC,EAEhDt8B,EAASsb,KAAKihB,uBAAwB,EAEtCv8B,EAASsb,KAAKkhB,0BAA2B,EAEzCx8B,EAASsb,KAAKG,yBAA0B,EAExCzb,EAASsb,KAAKmhB,2BAA4B,EAE1Cz8B,EAASsb,KAAKohB,4BAA6B,EAE3C18B,EAASsb,KAAKM,uBAAwB,EAEtC5b,EAASsb,KAAKO,oCAAqC,EAEnD7b,EAASsb,KAAKqhB,0BAA2B,EAEzC38B,EAASsb,KAAKshB,6BAA8B,EAE5C58B,EAASsb,KAAKuhB,gCAAiC,EAE/C78B,EAASsb,KAAKwhB,gCAAiC,EAC/CjgC,KAAKmf,aAAahc,GAEtBuf,kBAAkBvf,EAAUmQ,EAAMnK,GAC9BnJ,KAAKmf,aAAahc,GAClBnD,KAAKk7B,WAET5b,cAAcnc,EAAUmQ,EAAMnK,GAC1BnJ,KAAKmf,aAAahc,GAEtB45B,cAAc55B,EAAUmQ,EAAMnK,GAC1BnJ,KAAKmf,aAAahc,GAEtB65B,iBAAiB75B,EAAUmQ,EAAMnK,GAC7BnJ,KAAKmf,aAAahc,GAEtBqf,eAAerf,EAAUmQ,EAAMnK,GAC3BnJ,KAAKmf,aAAahc,GAEtBsc,sBAAsBtc,EAAUmQ,EAAMnK,GAClCnJ,KAAKmf,aAAahc,GAEtB85B,8BAA8B95B,EAAUmQ,EAAMnK,GAC1CnJ,KAAKmf,aAAahc,GAEtB+5B,+BAA+B/5B,EAAUmQ,EAAMnK,GAC3CnJ,KAAKmf,aAAahc,GAEtBkc,yBAAyBlc,EAAUmQ,EAAMnK,GACrCnJ,KAAKmf,aAAahc,GAEtB+e,gBAAgB/e,EAAUmQ,EAAMnK,GAC5BnJ,KAAKmf,aAAahc,GAEtBgf,YAAYhf,EAAUmQ,EAAMnK,GACxBnJ,KAAKmf,aAAahc,GAEtBif,cAAcjf,EAAUmQ,EAAMnK,GAC1BnJ,KAAKmf,aAAahc,GAEtBkf,eAAelf,EAAUmQ,EAAMnK,GAC3BnJ,KAAKmf,aAAahc,GAEtBg6B,gBAAgBh6B,EAAUmQ,EAAMnK,GAC5BnJ,KAAKmf,aAAahc,GAEtBi6B,uBAAuBj6B,EAAUmQ,EAAMnK,GACnCnJ,KAAKmf,aAAahc,GAEtBk6B,oBAAoBl6B,EAAUmQ,EAAMnK,GAChCnJ,KAAKmf,aAAahc,GAEtBm6B,YAAYn6B,EAAUmQ,EAAMnK,GACxBnJ,KAAKmf,aAAahc,GAEtBo6B,aAAap6B,EAAUmQ,EAAMnK,GACzBnJ,KAAKmf,aAAahc,GAEtBu6B,cAAcv6B,EAAUmQ,EAAMnK,GAC1BnJ,KAAKmf,aAAahc,GAEtB+c,eAAe/c,EAAUgG,GACrBnJ,KAAKmf,aAAahc,GAEtBw6B,wBAAwBx6B,EAAUmQ,EAAMnK,GACpCnJ,KAAKmf,aAAahc,GAEtBkd,kBAAkBld,EAAUmQ,EAAMnK,GAC9BnJ,KAAKmf,aAAahc,GAEtB0d,cAAc1d,EAAUmQ,EAAMnK,GAC1BnJ,KAAKmf,aAAahc,GAEtB8d,iBAAiB9d,EAAUmQ,EAAMnK,GAC7BnJ,KAAKmf,aAAahc,GAEtBq6B,mBAAmBr6B,EAAUmQ,EAAMnK,GAC/BnJ,KAAKmf,aAAahc,GAEtBs6B,qBAAqBt6B,EAAUmQ,EAAMnK,GACjCnJ,KAAKmf,aAAahc,GAEtBmf,gBAAgBnf,EAAUmQ,EAAMnK,GAC5BnJ,KAAKmf,aAAahc,GAEtBy6B,qBAAqBz6B,EAAUmQ,EAAMnK,GACjCnJ,KAAKmf,aAAahc,GAEtB06B,mBAAmB16B,EAAUmQ,EAAMnK,GAC/BnJ,KAAKmf,aAAahc,GAEtB26B,mBAAmB36B,EAAUmQ,EAAMnK,GAC/BnJ,KAAKmf,aAAahc,GAEtB4f,qBAAqB5f,EAAUmQ,EAAMnK,GACjCnJ,KAAKmf,aAAahc,GAEtB46B,qBAAqB56B,EAAUmQ,EAAMnK,GACjCnJ,KAAKmf,aAAahc,GAEtB66B,0BAA0B76B,EAAUmQ,EAAMnK,GACtCnJ,KAAKmf,aAAahc,GAEtB86B,0BAA0B96B,EAAUmQ,EAAMnK,GACtCnJ,KAAKmf,aAAahc,GAEtB+6B,kBAAkB/6B,EAAUmQ,EAAMnK,GAC9BnJ,KAAKmf,aAAahc,GAEtBg7B,mBAAmBh7B,EAAUmQ,EAAMnK,GAC/BnJ,KAAKmf,aAAahc,GAEtBi7B,mBAAmBj7B,EAAUmQ,EAAMnK,GAC/BnJ,KAAKmf,aAAahc,GAEtBk7B,cAAcl7B,EAAUmQ,EAAMnK,GAC1BnJ,KAAKmf,aAAahc,GAEtBm7B,2BAA2Bn7B,EAAUmQ,EAAMnK,GACvCnJ,KAAKmf,aAAahc,GAEtBo7B,iCAAiCp7B,EAAUmQ,EAAMnK,GAC7CnJ,KAAKmf,aAAahc,GAKtBq7B,cAAc3Z,EAAS1hB,EAAUmQ,EAAMnK,GACnCnJ,KAAK47B,kBAAkBz4B,EAAU,KAAM,uBAAwB,KAAM20B,EAAiBmE,WAG1Fnc,4BAA4BvV,GACxB,OAAIvK,KAAK26B,uBACE36B,KAAK86B,qBAAuBvwB,EAAOA,EAAO,EAE9CvK,KAAK86B,qBAAuBvwB,EAAO,EAAIA,EAElDyV,4BAA4BzV,GACxB,OAAIvK,KAAK26B,uBACE36B,KAAK86B,qBAAuBvwB,EAAOA,EAAO,EAE9CvK,KAAK86B,qBAAuBvwB,EAAO,EAAIA,EAElD21B,8BAA8Blc,GAC1B,OAAIhkB,KAAK46B,yBACE56B,KAAK+6B,uBAAyB/W,EAASA,EAAS,EAEpDhkB,KAAK+6B,uBAAyB/W,EAAS,EAAIA,EAEtDmc,8BAA8Bnc,GAC1B,OAAIhkB,KAAK46B,yBACE56B,KAAK+6B,uBAAyB/W,EAASA,EAAS,EAEpDhkB,KAAK+6B,uBAAyB/W,EAAS,EAAIA,EAEtDoc,4BAA4BC,GACxB,OAAIrgC,KAAKg7B,sBAAwBh7B,KAAK66B,sBAC9B76B,KAAKg7B,oBACEpd,EAAa0iB,SAASD,GAGtBziB,EAAa2iB,SAASF,GAG9BA,EAEXvd,4BAA4B0d,GACxB,OAAIxgC,KAAK66B,wBAA0B76B,KAAKg7B,oBAChCh7B,KAAK66B,sBACEjd,EAAa0iB,SAASE,GAGtB5iB,EAAa2iB,SAASC,GAG9BA,EAGXlF,gBAAgB7kB,GACa,UAArBilB,QAAQ+E,WACJ,UAAU1M,KAAKtd,KACfA,EAAOA,EAAK,GAAG8S,cAAgB9S,EAAKgD,OAAO,IAE/ChD,EAAOA,EAAK5T,QAAQ,MAAO,MAE/B4T,EAAOiqB,UAAUjqB,GACjB,IAAI/K,EAAM,IAAIqtB,EAAM4H,IAAI,SAExB,OADAj1B,EAAIk1B,SAAWnqB,EACR/K,EAAIqC,WAEfutB,gBAAgBuF,GACZ,IAAIn1B,EAAM,IAAIqtB,EAAM4H,IAAIE,GACpBC,EAAIC,mBAAmBr1B,EAAIk1B,UAO/B,MANyB,UAArBlF,QAAQ+E,WACJ,eAAe1M,KAAK+M,KACpBA,EAAIA,EAAE,GAAGvX,cAAgBuX,EAAErnB,OAAO,IAEtCqnB,EAAIA,EAAEj+B,QAAQ,MAAO,OAElBi+B,EAKXxF,iBAAiB3N,EAAQqT,EAAY1tB,GACjC,OAAOqa,EAAO9qB,QAAQ+a,EAAaqjB,kBAAkB,SAAU/sB,EAAOgtB,GAClE,OAAIF,GAAcE,EAAU9/B,OAAS,GAAsB,MAAjB8/B,EAAU,GACzChtB,EAEJZ,EAAK4tB,IAAc5tB,EAAKtO,eAAek8B,GAC1C5tB,EAAK4tB,GACLhtB,MAIhB1S,EAAQoc,aAAeA,EACvBA,EAAaqjB,iBAAmB,c,yBC7vBhCrmB,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQsc,aAAU,EAoBlBtc,EAAQsc,QAnBR,MACI/R,YAAYo1B,GACRnhC,KAAKohC,aAAe,IACpBphC,KAAKqhC,WAAa,IAAIC,IACtBthC,KAAKuhC,YAAqC,iBAAhBJ,EAA2BA,EAAcnhC,KAAKohC,aAE5EI,QACIxhC,KAAKuhC,YAAcvhC,KAAKohC,aACxBphC,KAAKqhC,WAAa,IAAIC,IAE1BtgB,OAAOha,GACH,IAAIy6B,EAASzhC,KAAKuhC,cAElB,OADAvhC,KAAKqhC,WAAW51B,IAAIg2B,EAAQz6B,GACrBy6B,EAEXtkB,IAAIskB,EAAQC,GACR,OAAO1hC,KAAKqhC,WAAWlkB,IAAIskB,IAAWC,K,iCClB9C,IAAIC,EAAa3hC,MAAQA,KAAK2hC,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIrhC,WAAU,SAAUC,EAASgN,GAC/C,SAASs0B,EAAUh7B,GAAS,IAAM6I,EAAKkyB,EAAUnN,KAAK5tB,IAAW,MAAOunB,GAAK7gB,EAAO6gB,IACpF,SAAS0T,EAASj7B,GAAS,IAAM6I,EAAKkyB,EAAiB,MAAE/6B,IAAW,MAAOunB,GAAK7gB,EAAO6gB,IACvF,SAAS1e,EAAK6J,GAJlB,IAAe1S,EAIa0S,EAAOwoB,KAAOxhC,EAAQgZ,EAAO1S,QAJ1CA,EAIyD0S,EAAO1S,MAJhDA,aAAiB86B,EAAI96B,EAAQ,IAAI86B,GAAE,SAAUphC,GAAWA,EAAQsG,OAIT6C,KAAKm4B,EAAWC,GAClGpyB,GAAMkyB,EAAYA,EAAUI,MAAMP,EAASC,GAAc,KAAKjN,YAGtEha,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQ4gC,oBAAiB,EACzB,MAAMl9B,EAAK,EAAQ,KACbuR,EAAO,EAAQ,IACf4rB,EAAS,EAAQ,KACjBC,EAAW,EAAQ,KAwHzB,SAASC,IACL,IAAIC,EAAI,IAAIC,KAKZ,OAJiBC,EAAW,EAAGC,OAAOH,EAAEI,gBAIpB,IAHDF,EAAW,EAAGC,OAAOH,EAAEK,kBAGD,IAFtBH,EAAW,EAAGC,OAAOH,EAAEM,kBAEoB,IADtCJ,EAAW,EAAGC,OAAOH,EAAEO,uBACyC,OAE5F,SAASL,EAAWM,EAAkBC,GAClC,OAAIA,EAAY7hC,QAAU4hC,EACfC,EAGAN,OAAO,IAAIjZ,OAAOsZ,GAAoBC,GAAa9X,OAAO6X,GAdzExhC,EAAQ4gC,eAlHR,MACIr2B,YAAYm3B,EAAaC,GAErBnjC,KAAKojC,mBAAqB,IAAMpjC,KAAKqjC,UACrCrjC,KAAKsjC,aAAeJ,EACpBljC,KAAKujC,cAAgBJ,EACrBnjC,KAAKwjC,aAAelB,EAASmB,SAASC,KACtC1jC,KAAK2jC,gBAAkB,CAACC,EAAQh5B,KAC5B5K,KAAKqjC,UAGLz4B,EAAOA,GAAQ,EACfA,GAAQ,IACR8wB,QAAQC,KAAK/wB,IAGrBi5B,MAAMppB,GACF,OAAOknB,EAAU3hC,UAAM,OAAQ,GAAQ,YAInC,GAHAA,KAAKwjC,aAAe/oB,EAAQqpB,mBAC5B9jC,KAAK+jC,kBAAoBtpB,EAAQupB,iBAE7BvpB,EAAQwpB,YACR,GAAKxtB,EAAKytB,WAAWzpB,EAAQwpB,aAGxB,CACD,MAAME,EAAchuB,GAAOnW,KAAKokC,QAAQ,oCAAoC3pB,EAAQwpB,uBAAuB9tB,EAAIpI,eAAgBu0B,EAASmB,SAASr4B,OACjJ,UACUi3B,EAAO5rB,EAAK4tB,QAAQ5pB,EAAQwpB,cAClCjkC,KAAKsO,IAAI,iCAAkCg0B,EAASmB,SAASC,MAC7D1jC,KAAKsO,IAAImM,EAAQwpB,YAAc,KAAM3B,EAASmB,SAASC,MACvD1jC,KAAKskC,eAAiBp/B,EAAGq/B,kBAAkB9pB,EAAQwpB,aACnDjkC,KAAKwkC,cACLxkC,KAAKykC,yBACLzkC,KAAKskC,eAAen3B,GAAG,SAASgJ,IAC5BguB,EAAYhuB,MAGpB,MAAOA,GACHguB,EAAYhuB,SAhBhBnW,KAAKsO,IAAI,yCAAyCmM,EAAQwpB,cAAe3B,EAASmB,SAASr4B,UAsB3Go5B,cACI,IAAIhC,EAAI,IAAIC,KAEZ,MAAMiC,EADWlC,EAAEmC,iBAAmB,IAAM,GAAGnC,EAAEoC,cAAgB,KAAYpC,EAAEqC,aACzC,KAAOtC,IAC7CviC,KAAKsO,IAAIo2B,EAAmB,KAAMpC,EAASmB,SAASqB,SAAS,GAEjEL,yBACI/I,QAAQqJ,YAAY,aAAc/kC,KAAKojC,oBACvC1H,QAAQqJ,YAAY,UAAW/kC,KAAK2jC,iBACpCjI,QAAQqJ,YAAY,SAAU/kC,KAAK2jC,iBAEvCqB,0BACItJ,QAAQnpB,eAAe,aAAcvS,KAAKojC,oBAC1C1H,QAAQnpB,eAAe,UAAWvS,KAAK2jC,iBACvCjI,QAAQnpB,eAAe,SAAUvS,KAAK2jC,iBAE1CN,UACI,OAAO,IAAI5iC,SAAQC,IACfV,KAAKglC,0BACDhlC,KAAKskC,gBACLtkC,KAAKskC,eAAez1B,IAAInO,GACxBV,KAAKskC,eAAiB,MAGtB5jC,OAIZ4N,IAAIF,EAAK0L,EAAOkqB,GAAmB,GAC/B,GAAIhkC,KAAKwjC,eAAiBlB,EAASmB,SAASwB,KAA5C,CAMA,GAHInrB,GAAS9Z,KAAKwjC,cACdxjC,KAAKokC,QAAQh2B,EAAK0L,GAElB9Z,KAAKujC,cAAe,CACpB,MAAM2B,EAAQprB,IAAUwoB,EAASmB,SAASr4B,MAAQiD,QAAQF,MACtD2L,IAAUwoB,EAASmB,SAASC,KAAOr1B,QAAQ82B,KACvC,KACJD,GACAA,EAAM5C,EAAS8C,gBAAgBh3B,IAInC0L,IAAUwoB,EAASmB,SAASr4B,QAC5BgD,EAAM,IAAIk0B,EAASmB,SAAS3pB,OAAW1L,KAEvCpO,KAAK+jC,mBAAqBC,IAC1B51B,EAAM,IAAMm0B,IAA2B,KAAOn0B,GAE9CpO,KAAKskC,gBACLtkC,KAAKskC,eAAej1B,MAAMjB,IAGlCg2B,QAAQh2B,EAAK0L,GAET,GAAI1L,EAAIhN,OAAS,KAAM,CACnB,MAAMikC,IAAkBj3B,EAAI8F,MAAM,cAClC9F,EAAMA,EAAIqL,OAAO,EAAG,MAAQ,QACxB4rB,IACAj3B,GAAY,MAGpB,GAAIpO,KAAKsjC,aAAc,CACnB,MAAMjxB,EAAQ,IAAIiwB,EAASgD,eAAel3B,EAAK0L,GAC/C9Z,KAAKsjC,aAAajxB,O,2BClI9BuI,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQ4jC,gBAAkB5jC,EAAQ8jC,eAAiB9jC,EAAQ+jC,OAAS/jC,EAAQgkC,OAAShkC,EAAQiiC,cAAW,EACxG,MAAMgC,EAAmB,EAAQ,KAC3BC,EAAiB,EAAQ,KAC/B,IAAIjC,GACJ,SAAWA,GACPA,EAASA,EAAkB,QAAI,GAAK,UACpCA,EAASA,EAAc,IAAI,GAAK,MAChCA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAgB,MAAI,GAAK,QAClCA,EAASA,EAAe,KAAI,GAAK,OALrC,CAMGA,EAAWjiC,EAAQiiC,WAAajiC,EAAQiiC,SAAW,KACtD,MAAM+B,EACFz5B,cACI/L,KAAK2lC,aAAe,GAExBr3B,IAAIF,EAAK0L,EAAQ2pB,EAASmC,KACtBx3B,GAAY,KACZpO,KAAK6lC,OAAOz3B,EAAK0L,GAErBgsB,QAAQ13B,GACJpO,KAAKsO,IAAIF,EAAKq1B,EAASqB,SAE3BK,KAAK/2B,GACDpO,KAAKsO,IAAIF,EAAKq1B,EAASC,MAE3Bv1B,MAAMC,GACFpO,KAAKsO,IAAIF,EAAKq1B,EAASr4B,OAE3Bi4B,UACI,GAAIrjC,KAAK+lC,eAAgB,CACrB,MAAMC,EAAWhmC,KAAK+lC,eAAe1C,UAErC,OADArjC,KAAK+lC,eAAiB,KACfC,EAGP,OAAOvlC,QAAQC,UAMvBmlC,OAAOz3B,EAAK0L,EAAQ2pB,EAASmC,KAEzBx3B,GAAY,GACRpO,KAAK2lC,aACL3lC,KAAK2lC,aAAaplC,KAAK,CAAE6N,IAAAA,EAAK0L,MAAAA,IAEzB9Z,KAAK+lC,gBACV/lC,KAAK+lC,eAAez3B,IAAIF,EAAK0L,GAOrC+pB,MAAMC,EAAoBmC,EAAcjC,GAAmB,GACvD,MAAMC,EAAsC,iBAAjBgC,EACvBA,EACCA,GAAgBjmC,KAAKkmC,qBAC1B,GAAIlmC,KAAK+lC,eAAgB,CACrB,MAAMtrB,EAAU,CACZqpB,mBAAAA,EACAG,YAAAA,EACAD,iBAAAA,GAEJhkC,KAAK+lC,eAAelC,MAAMppB,GAAS5Q,MAAK,KAEpC,GAAI7J,KAAK2lC,aAAc,CACnB,MAAMQ,EAAOnmC,KAAK2lC,aAClB3lC,KAAK2lC,aAAe,KACpBQ,EAAKp0B,SAAQwF,GAAQvX,KAAK6lC,OAAOtuB,EAAKnJ,IAAKmJ,EAAKuC,cAKhExM,KAAK41B,EAAae,EAAamC,GAE3BpmC,KAAK2lC,aAAe3lC,KAAK2lC,cAAgB,GACzC3lC,KAAK+lC,eAAiB,IAAIN,EAAiBrD,eAAec,EAAakD,GACvEpmC,KAAKkmC,qBAAuBjC,GAGpCziC,EAAQgkC,OAASA,EACjBhkC,EAAQ+jC,OAAS,IAAIC,EACrB,MAAMF,UAAuBI,EAAenN,YACxCxsB,YAAYqC,EAAK0L,GAIb9N,MAAMoC,EAHW0L,IAAU2pB,EAASr4B,MAAQ,SACxC0O,IAAU2pB,EAASC,KAAO,UACtB,WAIhBliC,EAAQ8jC,eAAiBA,EAIzB9jC,EAAQ4jC,gBAHR,SAAyBiB,GACrB,OAAOA,EAAIxjC,QAAQ,aAAc,M,2BC9FrC+X,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQ8kC,yBAAsB,EAC9B,MAAMd,EAAS,EAAQ,KACjBD,EAASC,EAAOD,OAChBG,EAAiB,EAAQ,KAC/B,MAAMY,UAA4BZ,EAAe9nB,aAC7C7R,YAAYw6B,EAAsB/L,EAA0CC,GACxEzuB,MAAMwuB,EAA0CC,GAChDz6B,KAAKumC,qBAAuBA,EAC5BvmC,KAAKmN,GAAG,SAAUkF,IACdkzB,EAAOp3B,MAAMkE,EAAMoM,SAG3B/O,MAAM82B,EAAUC,GACZz6B,MAAM0D,MAAM82B,EAAUC,GACtBlB,EAAOj4B,MAAKihB,GAAKvuB,KAAK4O,UAAU2f,IAAIvuB,KAAKumC,qBAAsBvmC,KAAKi7B,WAKxErsB,UAAUyD,GACN,KAAMA,aAAiBmzB,EAAOF,gBAAiB,CAE3C,IAAIoB,EAAcr0B,EACdA,aAAiBqzB,EAAenN,aAAelmB,EAAMoM,MAAQpM,EAAMoM,KAAKxQ,MAAQoE,EAAMoM,KAAKxQ,KAAK04B,wBACzFt0B,EAAMoM,KAAKxQ,KAAK04B,eACvBD,EAAc9rB,OAAOgV,OAAO,GAAIvd,GAChCq0B,EAAYjoB,KAAO7D,OAAOgV,OAAOhV,OAAOgV,OAAO,GAAIvd,EAAMoM,MAAO,CAAEsb,OAAQ,yBAE9EwL,EAAOO,QAAQ,cAAc9vB,KAAKC,UAAUywB,MAEhD16B,MAAM4C,UAAUyD,GAKpBkqB,YAAY1X,EAASvR,EAAMlT,EAASk8B,GAChCiJ,EAAOO,QAAQ,cAAc9vB,KAAKC,UAAU4O,MAAY7O,KAAKC,UAAU3C,iBAAoBlT,KAC3F4L,MAAMuwB,YAAY1X,EAASvR,EAAMlT,EAASk8B,GAK9Cnd,aAAahc,GACToiC,EAAOO,QAAQ,cAAc9vB,KAAKC,UAAU9S,MAC5C6I,MAAMmT,aAAahc,GAEvBq5B,gBAAgBrzB,GACZo8B,EAAOO,QAAQ,gBAAgB38B,EAAQ0b,WAAW7O,KAAKC,UAAU9M,EAAQuzB,eACzE1wB,MAAMwwB,gBAAgBrzB,IAG9B3H,EAAQ8kC,oBAAsBA,G,2BCpD9B1rB,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQsc,QAAUtc,EAAQi7B,SAAWj7B,EAAQk4B,MAAQl4B,EAAQs2B,iBAAmBt2B,EAAQi3B,eAAiBj3B,EAAQk3B,OAASl3B,EAAQohB,OAASphB,EAAQue,WAAave,EAAQm3B,SAAWn3B,EAAQuf,MAAQvf,EAAQkf,WAAalf,EAAQ4e,OAAS5e,EAAQu2B,iBAAmBv2B,EAAQw2B,iBAAmBx2B,EAAQy2B,oBAAsBz2B,EAAQ02B,mBAAqB12B,EAAQ22B,kBAAoB32B,EAAQ42B,kBAAoB52B,EAAQ62B,YAAc72B,EAAQ8c,gBAAkB9c,EAAQ82B,YAAc92B,EAAQ+2B,YAAc/2B,EAAQg3B,eAAiBh3B,EAAQ4c,aAAe5c,EAAQ+c,gBAAkB/c,EAAQ4d,iBAAmB5d,EAAQ+jC,OAAS/jC,EAAQgkC,OAAShkC,EAAQ8kC,oBAAsB9kC,EAAQoc,kBAAe,EAC1qB,MAAM8nB,EAAiB,EAAQ,KAC/B9qB,OAAOid,eAAer2B,EAAS,eAAgB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe9nB,gBAC5GhD,OAAOid,eAAer2B,EAAS,mBAAoB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAetmB,oBAChHxE,OAAOid,eAAer2B,EAAS,kBAAmB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAennB,mBAC/G3D,OAAOid,eAAer2B,EAAS,eAAgB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAetnB,gBAC5GxD,OAAOid,eAAer2B,EAAS,iBAAkB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAelN,kBAC9G5d,OAAOid,eAAer2B,EAAS,cAAe,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAenN,eAC3G3d,OAAOid,eAAer2B,EAAS,cAAe,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAepN,eAC3G1d,OAAOid,eAAer2B,EAAS,kBAAmB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAepnB,mBAC/G1D,OAAOid,eAAer2B,EAAS,cAAe,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAerN,eAC3Gzd,OAAOid,eAAer2B,EAAS,oBAAqB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAetN,qBACjHxd,OAAOid,eAAer2B,EAAS,oBAAqB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAevN,qBACjHvd,OAAOid,eAAer2B,EAAS,qBAAsB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAexN,sBAClHtd,OAAOid,eAAer2B,EAAS,sBAAuB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAezN,uBACnHrd,OAAOid,eAAer2B,EAAS,mBAAoB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe1N,oBAChHpd,OAAOid,eAAer2B,EAAS,mBAAoB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe3N,oBAChHnd,OAAOid,eAAer2B,EAAS,SAAU,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAetlB,UACtGxF,OAAOid,eAAer2B,EAAS,aAAc,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAehlB,cAC1G9F,OAAOid,eAAer2B,EAAS,QAAS,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe3kB,SACrGnG,OAAOid,eAAer2B,EAAS,WAAY,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe/M,YACxG/d,OAAOid,eAAer2B,EAAS,aAAc,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe3lB,cAC1GnF,OAAOid,eAAer2B,EAAS,SAAU,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe9iB,UACtGhI,OAAOid,eAAer2B,EAAS,SAAU,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAehN,UACtG9d,OAAOid,eAAer2B,EAAS,iBAAkB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAejN,kBAC9G7d,OAAOid,eAAer2B,EAAS,mBAAoB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAOuoB,EAAe5N,oBAChH,MAAM+O,EAAwB,EAAQ,KACtCjsB,OAAOid,eAAer2B,EAAS,sBAAuB,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAO0pB,EAAsBP,uBAC1H,MAAMd,EAAS,EAAQ,KACvBhkC,EAAQgkC,OAASA,EACjB,MAAM3M,EAAa,EAAQ,KAC3Bje,OAAOid,eAAer2B,EAAS,QAAS,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAO0b,EAAWa,SACjG9e,OAAOid,eAAer2B,EAAS,WAAY,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAO0b,EAAW4D,YACpG,MAAMqK,EAAY,EAAQ,KAC1BlsB,OAAOid,eAAer2B,EAAS,UAAW,CAAEolC,YAAY,EAAMzpB,IAAK,WAAc,OAAO2pB,EAAUhpB,WAClG,MAAMynB,EAASC,EAAOD,OACtB/jC,EAAQ+jC,OAASA,G,yBCrCjB3qB,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQk4B,MAAQl4B,EAAQi7B,SAAWj7B,EAAQulC,aAAU,EACrD,MAAMA,EACFh7B,YAAY7C,GACRlJ,KAAKgnC,IAAM,EACXhnC,KAAKkJ,KAAOA,GAGpB1H,EAAQulC,QAAUA,EAelBvlC,EAAQi7B,SAdR,cAAuBsK,EACnBh7B,YAAY5C,EAAS0B,GACjBmB,MAAM,YACNhM,KAAKinC,YAAc99B,EAAQ69B,IAC3BhnC,KAAK6kB,QAAU1b,EAAQ0b,QACnBha,GACA7K,KAAKm8B,SAAU,EACfn8B,KAAK6K,QAAUA,GAGf7K,KAAKm8B,SAAU,IAc3B36B,EAAQk4B,MATR,cAAoBqN,EAChBh7B,YAAYsG,EAAOoM,GACfzS,MAAM,SACNhM,KAAKqS,MAAQA,EACToM,IACAze,KAAKye,KAAOA,M,2BC7BxB7D,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQ+4B,oBAAiB,EACzB,MAAM2M,EAAK,EAAQ,KACbrO,EAAa,EAAQ,KAK3B,MAAMsO,EACE90B,YAeA,OAdKrS,KAAKmM,SACNnM,KAAKmM,OAAS,CAACi7B,EAAUxF,KAGrB,IAAIloB,EAOJ,OATA1Z,KAAKqnC,UAAYD,EACjBpnC,KAAKsnC,MAAQ1F,EAEbloB,EAAS,CACL2pB,QAAS,KACLrjC,KAAKqnC,eAAYzhC,EACjB5F,KAAKsnC,WAAQ1hC,IAGd8T,IAGR1Z,KAAKmM,OAEhBo7B,KAAKl1B,GACD,GAAIrS,KAAKqnC,UACL,IACIrnC,KAAKqnC,UAAUG,KAAKxnC,KAAKsnC,MAAOj1B,GAEpC,MAAOkc,KAIfkZ,cACI,QAASznC,KAAKqnC,UAElBhE,UACIrjC,KAAKqnC,eAAYzhC,EACjB5F,KAAKsnC,WAAQ1hC,GAGrB,MAAM20B,UAAuB2M,EAAGp7B,aAC5BC,cACIC,QACAhM,KAAK0nC,aAAe,IAAIP,EACxBnnC,KAAK2nC,iBAAmB,IAAIrG,IAC5BthC,KAAK4nC,iBAAmB5nC,KAAK0nC,aAAar1B,MAG9CgxB,WAEAwE,cAAcz5B,GACV,GAAiB,YAAbA,EAAIlF,KACJlJ,KAAKw8B,gBAAgBpuB,QAEpB,GAAiB,aAAbA,EAAIlF,KAAqB,CAC9B,MAAM/F,EAAWiL,EACX05B,EAAM9nC,KAAK2nC,iBAAiBxqB,IAAIha,EAAS8jC,aAC3Ca,IACA9nC,KAAK2nC,iBAAiBI,OAAO5kC,EAAS8jC,aACtCa,EAAI3kC,KAIhBs4B,mBACI,OAAOz7B,KAAK0nC,cAAgB1nC,KAAK0nC,aAAaD,cAGlD/3B,MAAM82B,EAAUC,GACZzmC,KAAKgoC,UAAY,EACjBhoC,KAAKioC,gBAAkBxB,EACvBzmC,KAAKkoC,SAAWC,OAAOC,MAAM,GAC7B5B,EAASr5B,GAAG,QAASc,GAASjO,KAAKqoC,YAAYp6B,KAC/Cu4B,EAASr5B,GAAG,SAAS,KACjBnN,KAAKsoC,WAAW,IAAIzP,EAAWa,MAAM,aAEzC8M,EAASr5B,GAAG,SAAUgB,IAClBnO,KAAKsoC,WAAW,IAAIzP,EAAWa,MAAM,QAAS,oBAAsBvrB,GAASA,EAAMtD,cAEvF47B,EAAUt5B,GAAG,SAAUgB,IACnBnO,KAAKsoC,WAAW,IAAIzP,EAAWa,MAAM,QAAS,qBAAuBvrB,GAASA,EAAMtD,cAExF27B,EAAS+B,SAEbC,OACQxoC,KAAKioC,iBACLjoC,KAAKioC,gBAAgBp5B,MAG7BD,UAAUyD,GACNrS,KAAKyoC,MAAM,QAASp2B,GAExB8M,aAAahc,GACLA,EAAS6jC,IAAM,EACf34B,QAAQF,MAAM,sDAAsDhL,EAAS0hB,WAG7E7kB,KAAKyoC,MAAM,WAAYtlC,GAG/Bo5B,YAAY1X,EAASvR,EAAMlT,EAASk8B,GAChC,MAAMnzB,EAAU,CACZ0b,QAASA,GAMb,GAJIvR,GAAQsH,OAAOC,KAAKvH,GAAMlS,OAAS,IACnC+H,EAAQuzB,UAAYppB,GAExBtT,KAAKyoC,MAAM,UAAWt/B,GAClBmzB,EAAI,CACJt8B,KAAK2nC,iBAAiBl8B,IAAItC,EAAQ69B,IAAK1K,GACvC,MAAMoM,EAAQxnC,YAAW,KACrBL,aAAa6nC,GACb,MAAMZ,EAAM9nC,KAAK2nC,iBAAiBxqB,IAAIhU,EAAQ69B,KAC1Cc,IACA9nC,KAAK2nC,iBAAiBI,OAAO5+B,EAAQ69B,KACrCc,EAAI,IAAIjP,EAAW4D,SAAStzB,EAAS,eAE1C/I,IAIXo8B,gBAAgBrzB,IAGhBm/B,WAAWj2B,GACPrS,KAAKgP,KAAKqD,EAAMA,MAAOA,GAE3Bo2B,MAAME,EAAK99B,GAGP,GAFAA,EAAQ3B,KAAOy/B,EACf99B,EAAQm8B,IAAMhnC,KAAKgoC,YACfhoC,KAAKioC,gBAAiB,CACtB,MAAMW,EAAO5yB,KAAKC,UAAUpL,GAC5B7K,KAAKioC,gBAAgB54B,MAAM,mBAAmB84B,OAAOU,WAAWD,EAAM,kBAAkBA,IAAQ,QAEpG5oC,KAAK0nC,aAAaH,KAAK18B,GAE3Bw9B,YAAYp6B,GAER,IADAjO,KAAKkoC,SAAWC,OAAO58B,OAAO,CAACvL,KAAKkoC,SAAUj6B,MACjC,CACT,GAAIjO,KAAK8oC,gBAAkB,GACvB,GAAI9oC,KAAKkoC,SAAS9mC,QAAUpB,KAAK8oC,eAAgB,CAC7C,MAAMj+B,EAAU7K,KAAKkoC,SAASn6B,SAAS,OAAQ,EAAG/N,KAAK8oC,gBAGvD,GAFA9oC,KAAKkoC,SAAWloC,KAAKkoC,SAAS/c,MAAMnrB,KAAK8oC,gBACzC9oC,KAAK8oC,gBAAkB,EACnBj+B,EAAQzJ,OAAS,EACjB,IACI,IAAIgN,EAAM4H,KAAKrT,MAAMkI,GACrB7K,KAAK6nC,cAAcz5B,GAEvB,MAAOmgB,GACHvuB,KAAKsoC,WAAW,IAAIzP,EAAWa,MAAM,QAAS,yBAA2BnL,GAAKA,EAAE1jB,WAGxF,cAGH,CACD,MAAMk+B,EAAM/oC,KAAKkoC,SAASnnC,QAAQw5B,EAAeyO,UACjD,IAAa,IAATD,EAAY,CACZ,MACM52B,EADSnS,KAAKkoC,SAASn6B,SAAS,OAAQ,EAAGg7B,GAC5BjmC,MAAM,QAC3B,IAAK,IAAIvB,EAAI,EAAGA,EAAI4Q,EAAM/Q,OAAQG,IAAK,CACnC,MAAM0nC,EAAO92B,EAAM5Q,GAAGuB,MAAM,OACb,kBAAXmmC,EAAK,KACLjpC,KAAK8oC,gBAAkBG,EAAK,IAGpCjpC,KAAKkoC,SAAWloC,KAAKkoC,SAAS/c,MAAM4d,EAAMxO,EAAeyO,SAAS5nC,QAClE,UAGR,QAIZI,EAAQ+4B,eAAiBA,EACzBA,EAAeyO,SAAW,Y,2BClL1BpuB,OAAOid,eAAer2B,EAAS,aAAc,CAAEwF,OAAO,IACtDxF,EAAQg6B,qBAAkB,EAC1B,MAAM0N,EAAM,EAAQ,KAkCpB1nC,EAAQg6B,gBAjCR,SAAyBD,GAErB,IAAI5xB,EAAO,EAQX,GAPa+xB,QAAQyN,KAAKhe,MAAM,GAC3BpZ,SAAQ,SAAUq3B,EAAKj4B,EAAOk4B,GAC/B,MAAMC,EAAY,uBAAuB3vB,KAAKyvB,GAC1CE,IACA3/B,EAAO4G,SAAS+4B,EAAU,GAAI,QAGlC3/B,EAAO,EAEP0E,QAAQF,MAAM,sCAAsCxE,KACpDu/B,EAAIK,cAAcC,IACdn7B,QAAQF,MAAM,sCACdq7B,EAAOr8B,GAAG,OAAO,KACbkB,QAAQF,MAAM,oCAElB,MAAMs7B,EAAU,IAAIlO,GAAa,GAAO,GACxCkO,EAAQpO,gBAAe,GACvBoO,EAAQ/5B,MAAM85B,EAAQA,MACvBE,OAAO//B,OAET,CAGD,MAAM8/B,EAAU,IAAIlO,GAAa,GACjCG,QAAQvuB,GAAG,WAAW,KAClBs8B,EAAQvO,cAEZuO,EAAQ/5B,MAAMgsB,QAAQiO,MAAOjO,QAAQkO,W,cCtC7C,MAAMC,EAAU,EAAQ,KAClBC,EAAU,EAAQ,MAElB,aAACC,EAAY,iBAAEC,GAAoB,EAAQ,MAC3C,aAACC,EAAY,iBAAEC,GAAoB,EAAQ,MAC3C,UAACC,EAAS,cAAEC,GAAiB,EAAQ,KAGrC/H,EAAS,CAAC5rB,EAAM4zB,KACpB5zB,EAAOqzB,EAAQrzB,GACf4zB,EAAOR,EAAQQ,GACRF,EAAUE,GACbN,EAAatzB,EAAM4zB,GACnBJ,EAAaxzB,EAAM4zB,IAWzBhI,EAAOiI,KARY,CAAC7zB,EAAM4zB,KACxB5zB,EAAOqzB,EAAQrzB,GACf4zB,EAAOR,EAAQQ,GACRD,EAAcC,GACjBL,EAAiBvzB,EAAM4zB,GACvBH,EAAiBzzB,EAAM4zB,IAI7BhI,EAAOkI,OAAS,CAAC9zB,EAAM4zB,IAASN,EAAaD,EAAQrzB,GAAOozB,EAAQQ,IACpEhI,EAAOmI,OAAS,CAAC/zB,EAAM4zB,IAASJ,EAAaH,EAAQrzB,GAAOozB,EAAQQ,IACpEhI,EAAOoI,WAAa,CAACh0B,EAAM4zB,IAASL,EAAiBF,EAAQrzB,GAAOozB,EAAQQ,IAC5EhI,EAAOqI,WAAa,CAACj0B,EAAM4zB,IAASH,EAAiBJ,EAAQrzB,GAAOozB,EAAQQ,IAE5E3nC,EAAOlB,QAAU6gC,G,cC9BjB,MAAM,QAACgC,GAAW,EAAQ,IAEpBsG,EAAW,CAACN,EAAMO,EAAQn0B,IAE1BA,IAASm0B,EACJnqC,QAAQC,UAEV2pC,EAAKQ,UAAUD,GAAQ/gC,MAC5BihC,GAAMA,EAAGC,cAAgBt0B,OAAO7Q,IAChColC,GAAkB,WAAZA,EAAGpgC,KACL+/B,EAASN,EAAMhG,EAAQuG,GAASA,QAChChlC,IAIFqlC,EAAe,CAACZ,EAAMO,EAAQn0B,KAClC,GAAIA,IAASm0B,EAGb,IACE,OAAOP,EAAKa,SAASN,GAAQG,cAAgBt0B,OAAO7Q,EACpD,MAAOolC,GACP,MAAmB,WAAZA,EAAGpgC,KACNqgC,EAAaZ,EAAMhG,EAAQuG,GAASA,QACpChlC,IAIRlD,EAAOlB,QAAU,CAACmpC,SAAAA,EAAUM,aAAAA,I,cC5B5B,MAAM,QAAC5G,GAAW,EAAQ,IAEpB4F,EAAe,CAACxzB,EAAM4zB,EAAMc,KAChCd,EAAKe,WAAY,EACjB,MAAMR,EAASvG,EAAQ5tB,GACvB,OAAIm0B,IAAWn0B,EACN4zB,EAAKgB,WAAW50B,EAAM4zB,GAAM7qB,OAAMwrB,IAGvC,GAAgB,WAAZA,EAAGpgC,KACL,MAAMogC,KAILX,EAAKgB,WAAW50B,EAAM4zB,GAAMxgC,MAAK,IAAMshC,GAAQ10B,IAAMu0B,IAC1D,GAAgB,WAAZA,EAAGpgC,KACL,OAAOq/B,EAAaW,EAAQP,GACzBxgC,MAAKshC,GAAQlB,EAAaxzB,EAAM4zB,EAAMc,KAC3C,GAAgB,WAAZH,EAAGpgC,MAAiC,UAAZogC,EAAGpgC,KAC7B,MAAMogC,EACR,OAAOX,EAAKQ,UAAUp0B,GAAM5M,MAAKihC,IAC/B,GAAIA,EAAGC,cACL,OAAOI,EAEP,MAAMH,KACP,KAAQ,MAAMA,SAIfd,EAAmB,CAACzzB,EAAM4zB,EAAMc,KACpC,MAAMP,EAASvG,EAAQ5tB,GAGvB,GAFA4zB,EAAKe,WAAY,EAEbR,IAAWn0B,EACb,IACE,OAAO4zB,EAAKrkC,UAAUyQ,EAAM4zB,GAC5B,MAAOW,GAGP,GAAgB,WAAZA,EAAGpgC,KACL,MAAMogC,EAEN,OAIN,IAEE,OADAX,EAAKrkC,UAAUyQ,EAAM4zB,GACdc,GAAQ10B,EACf,MAAOu0B,GACP,GAAgB,WAAZA,EAAGpgC,KACL,OAAOs/B,EAAiBzzB,EAAM4zB,EAAMH,EAAiBU,EAAQP,EAAMc,IACrE,GAAgB,WAAZH,EAAGpgC,MAAiC,UAAZogC,EAAGpgC,KAC7B,MAAMogC,EACR,IACE,IAAKX,EAAKa,SAASz0B,GAAMs0B,cACvB,MAAMC,EACR,MAAOlhC,GACP,MAAMkhC,KAKZtoC,EAAOlB,QAAU,CAACyoC,aAAAA,EAAcC,iBAAAA,I,cC/DhC,MAAM,QAAC7F,GAAW,EAAQ,KACpB,SAACsG,EAAQ,aAAEM,GAAgB,EAAQ,MACnC,aAAChB,EAAY,iBAAEC,GAAoB,EAAQ,KAoCjDxnC,EAAOlB,QAAU,CAACuoC,aAlCG,CAACtzB,EAAM4zB,KAC1BA,EAAKe,WAAY,EACF/G,EAAQ5tB,KACRA,EACN4zB,EAAKgB,WAAW50B,EAAM4zB,GAExBM,EAASN,EAAM5zB,GAAM5M,MAAKshC,GAC/Bd,EAAKgB,WAAW50B,EAAM4zB,GAAMxgC,MAAK,IAAMshC,IACtC3rB,OAAMwrB,IACL,GAAgB,WAAZA,EAAGpgC,KACL,OAAOq/B,EAAaxzB,EAAM4zB,GAE1B,MAAMW,QAsBkBhB,iBAlBP,CAACvzB,EAAM4zB,KAG9B,GAFAA,EAAKe,WAAY,EACF/G,EAAQ5tB,KACRA,EACb,OAAO4zB,EAAKrkC,UAAUyQ,EAAM4zB,GAE9B,MAAMc,EAAOF,EAAaZ,EAAM5zB,GAChC,IAEE,OADA4zB,EAAKrkC,UAAUyQ,EAAM4zB,GACdc,EACP,MAAOH,GACP,GAAgB,WAAZA,EAAGpgC,KACL,OAAOs/B,EAAiBzzB,EAAM4zB,GAE9B,MAAMW,M,cClCZ,MAAM,UAAEM,GAAc,EAAQ,KACxBpmC,EAAK,EAAQ,KAqBnBxC,EAAOlB,QApBS6oC,IACd,GAAKA,EAEA,GAAoB,iBAATA,EACdA,EAAO,CAAEkB,KAAM,IAAOrmC,GAAAA,KAAOmlC,QAC1B,GAAoB,iBAATA,EACdA,EAAO,CAAEkB,KAAMlB,EAAMnlC,GAAAA,OAClB,IAAoB,iBAATmlC,EAGd,MAAM,IAAImB,UAAU,4BAFpBnB,EAAO,CAAEkB,KAAMh7B,SAAS85B,EAAM,GAAInlC,GAAAA,QANlCmlC,EAAO,CAAEkB,KAAM,IAAOrmC,GAAAA,GAgBxB,OANAmlC,EAAKoB,MAAQpB,EAAKoB,OAASpB,EAAKnlC,GAAGumC,OAASvmC,EAAGumC,MAC/CpB,EAAKgB,WAAaC,EAAUjB,EAAKoB,OACjCpB,EAAK3zB,KAAO2zB,EAAK3zB,MAAQ2zB,EAAKnlC,GAAGwR,MAAQxR,EAAGwR,KAC5C2zB,EAAKQ,UAAYS,EAAUjB,EAAK3zB,MAChC2zB,EAAKa,SAAWb,EAAKa,UAAYb,EAAKnlC,GAAGgmC,UAAYhmC,EAAGgmC,SACxDb,EAAKrkC,UAAYqkC,EAAKrkC,WAAaqkC,EAAKnlC,GAAGc,WAAad,EAAGc,UACpDqkC,I,cCpBT,MAAM5J,EAAW/E,QAAQgQ,IAAIC,6BAA+BjQ,QAAQ+E,UAC9D,QAAE//B,EAAO,MAAEiC,GAAU,EAAQ,IA2BnCD,EAAOlB,QA1BSiV,IACd,GAAI,KAAKsd,KAAKtd,GAEZ,MAAMmE,OAAOgV,OACX,IAAI4b,UAAU,4CACd,CACE/0B,KAAAA,EACA7L,KAAM,0BAMZ,GADA6L,EAAO/V,EAAQ+V,GACE,UAAbgqB,EAAsB,CACxB,MAAMmL,EAAc,aACd,KAACC,GAAQlpC,EAAM8T,GACrB,GAAIm1B,EAAY7X,KAAKtd,EAAKgD,OAAOoyB,EAAKzqC,SACpC,MAAMwZ,OAAOgV,OAAO,IAAIxkB,MAAM,+BAAgC,CAC5DqL,KAAAA,EACA7L,KAAM,WAKZ,OAAO6L,I,cC1BT,MAAMvR,EAAK,EAAQ,KAGb4mC,GADUpQ,QAAQgQ,IAAIK,iCAAmCrQ,QAAQsQ,SAC/CnpC,QAAQ,KAAM,IAAIC,MAAM,KAC1CmpC,GAAaH,EAAQ,GAAK,IAAsB,KAAfA,EAAQ,KAAcA,EAAQ,IAAM,GAErE3B,EAAa8B,EAA0B5B,GAAQA,EAAKoB,QAAUvmC,EAAGumC,MAAxC,KAAM,EAC/BrB,EAAiB6B,EAA0B5B,GAAQA,EAAKrkC,YAAcd,EAAGc,UAA5C,KAAM,EAEzCtD,EAAOlB,QAAU,CAAC2oC,UAAAA,EAAWC,cAAAA,I,qBCT7B1nC,EAAOlB,QAAU0qC,QAAQ,W,qBCAzBxpC,EAAOlB,QAAU0qC,QAAQ,W,qBCAzBxpC,EAAOlB,QAAU0qC,QAAQ,O,qBCAzBxpC,EAAOlB,QAAU0qC,QAAQ,Q,oBCAzBxpC,EAAOlB,QAAU0qC,QAAQ,S,qBCAzBxpC,EAAOlB,QAAU0qC,QAAQ,Q,qBCAzBxpC,EAAOlB,QAAU0qC,QAAQ,S,q6hCCCrBC,EAA2B,GCE3BC,EDCJ,SAASC,EAAoBC,GAE5B,IAAIC,EAAeJ,EAAyBG,GAC5C,QAAqB1mC,IAAjB2mC,EACH,OAAOA,EAAa/qC,QAGrB,IAAIkB,EAASypC,EAAyBG,GAAY,CAGjD9qC,QAAS,IAOV,OAHAgrC,EAAoBF,GAAU9E,KAAK9kC,EAAOlB,QAASkB,EAAQA,EAAOlB,QAAS6qC,GAGpE3pC,EAAOlB,QClBW6qC,CAAoB,K","sources":[".././node_modules/await-notify/index.js",".././node_modules/emcellent/index.js",".././node_modules/emcellent/lib/parse.js",".././node_modules/emcellent/lib/render.js",".././src/extension.ts",".././src/mconnect.ts",".././src/mumps-autospace.ts",".././src/mumps-completion-item-provider.ts",".././src/mumps-definition-provider.ts",".././src/mumps-document.ts",".././src/mumps-documenter.ts",".././src/mumps-evalutable-expression-provider.ts",".././src/mumps-formatting-help-provider.ts",".././src/mumps-highlighter.ts",".././src/mumps-hover-provider.ts",".././src/mumps-reference-provider.ts",".././src/mumps-render.ts",".././src/mumps-signature-help-provider.ts",".././src/mumpsCompExp.ts",".././src/mumpsDebug.ts",".././src/mumpsLineParser.ts",".././src/mumpsTokenData.ts",".././src/mumpsVariableCheck.ts",".././src/parser/parser.ts",".././src/parser/tokenizer.ts",".././node_modules/vscode-debugadapter/lib/debugSession.js",".././node_modules/vscode-debugadapter/lib/handles.js",".././node_modules/vscode-debugadapter/lib/internalLogger.js",".././node_modules/vscode-debugadapter/lib/logger.js",".././node_modules/vscode-debugadapter/lib/loggingDebugSession.js",".././node_modules/vscode-debugadapter/lib/main.js",".././node_modules/vscode-debugadapter/lib/messages.js",".././node_modules/vscode-debugadapter/lib/protocol.js",".././node_modules/vscode-debugadapter/lib/runDebugAdapter.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/index.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/lib/find-made.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/lib/mkdirp-manual.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/lib/mkdirp-native.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/lib/opts-arg.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/lib/path-arg.js",".././node_modules/vscode-debugadapter/node_modules/mkdirp/lib/use-native.js","../external commonjs \"vscode\"","../external node-commonjs \"events\"","../external node-commonjs \"fs\"","../external node-commonjs \"net\"","../external node-commonjs \"path\"","../external node-commonjs \"url\"","../external node-commonjs \"util\"","../webpack/bootstrap","../webpack/startup"],"sourcesContent":["function Subject() {\n  this.waiters = [];\n}\n\nSubject.prototype.wait = function (timeout) {\n  var self = this;\n  var waiter = {};\n  this.waiters.push(waiter);\n  var promise = new Promise(function (resolve) {\n    var resolved = false;\n    waiter.resolve = function (noRemove) {\n      if (resolved) {\n        return;\n      }\n      resolved = true;\n      if (waiter.timeout) {\n        clearTimeout(waiter.timeout);\n        waiter.timeout = null;\n      }\n      if (!noRemove) {\n        var pos = self.waiters.indexOf(waiter);\n        if (pos > -1) {\n          self.waiters.splice(pos, 1);\n        }\n      }\n      resolve();\n    };\n  });\n  if (timeout > 0 && isFinite(timeout)) {\n    waiter.timeout = setTimeout(function () {\n      waiter.timeout = null;\n      waiter.resolve();\n    }, timeout);\n  }\n  return promise;\n};\n\nSubject.prototype.notify = function () {\n  if (this.waiters.length > 0) {\n    this.waiters.pop().resolve(true);\n  }\n};\n\nSubject.prototype.notifyAll = function () {\n  for (var i = this.waiters.length - 1; i >= 0; i--) {\n    this.waiters[i].resolve(true);\n  }\n  this.waiters = [];\n}\n\nexports.Subject = Subject;\n","\"use strict\";\n\nvar parser = require('./lib/parse.js');\nvar renderer = require('./lib/render.js');\n\nfunction parseLine(inputString) {\n\n    var tmpObject = {};\n\n    //Parsing must be performed sequentially.\n    tmpObject = parser.extractLabel(inputString, tmpObject);\n    tmpObject = parser.extractComment(tmpObject.lineExpression, tmpObject);\n    tmpObject = parser.extractIndentation(tmpObject.lineExpression, tmpObject);\n    tmpObject = parser.extractRoutines(tmpObject.lineExpression, tmpObject);\n\n    //Line Expression is no longer needed.\n    delete tmpObject.lineExpression;\n    return tmpObject;\n}\n\nfunction renderLine(inputObject) {\n\n    var tmpLine = \"\";\n\n    //Rendering must be performed sequentially.\n    tmpLine = renderer.appendLabel(inputObject, tmpLine);\n    tmpLine = renderer.appendIndentation(inputObject, tmpLine);\n    tmpLine = renderer.appendRoutines(inputObject, tmpLine);\n    tmpLine = renderer.appendComment(inputObject, tmpLine);\n\n    return tmpLine;\n\n}\n\nfunction parse(inputString) {\n\n    //Strip out carriage returns.\n    inputString = inputString.replace(\"\\r\", \"\");\n    var inputArray = inputString.split('\\n');\n    var returnArray = [];\n\n    for (var i = 0; i < inputArray.length; i++) {\n        var tmpLineObject = parseLine(inputArray[i]);\n        tmpLineObject.lineNumber = i + 1;\n        returnArray.push(tmpLineObject);\n    }\n    return returnArray;\n}\n\nfunction render(inputObject) {\n\n    var response = \"\";\n    var parseArray = [];\n\n    if (!Array.isArray(inputObject)) {\n        parseArray.push(inputObject);\n    } else {\n        parseArray = inputObject;\n    }\n\n    for (var i = 0; i < parseArray.length; i++) {\n        var tmpLine = renderLine(parseArray[i]);\n        if (i === (parseArray.length - 1)) {\n            response = response + tmpLine;\n        } else {\n            response = response + tmpLine + \"\\n\";\n        }\n    }\n\n    return response;\n\n}\n\nmodule.exports.parse = parse;\nmodule.exports.render = render;\n","\"use strict\";\n\n//Extract Labels and Lead Spacing.\nfunction extractLabel(inputLine, inputObject) {\n\n    for (var i = 0; i <= inputLine.length; i++) {\n        if (inputLine[i] !== \" \" && inputLine[i] !== \"\\t\") {\n            //If no leading chars, label.\n            if (i === 0) {\n                inputObject.lineLabel = inputLine.split(/[ \\t]/, 1)[0];\n                for (var ii = inputObject.lineLabel.length; ii <= inputLine.length; ii++) {\n                    //After label spacing.\n                    if (inputLine[ii] !== \" \" && inputLine[ii] !== \"\\t\") {\n                        inputObject.lineLeadSpace = inputLine.substring(inputObject.lineLabel.length, ii);\n                        inputObject.lineExpression = inputLine.substring(ii);\n                        break;\n                    }\n                    //After label spacing for empty lines.\n                    if (ii === (inputLine.length - 1)) {\n                        inputObject.lineLeadSpace = inputLine.substring(inputObject.lineLabel.length);\n                        inputObject.lineExpression = \"\";\n                        break;\n                    }\n                }\n                break;\n                //Unlabeled spacing with code.\n            } else {\n                inputObject.lineLeadSpace = inputLine.substring(0, i);\n                inputObject.lineExpression = inputLine.substring(i);\n                break;\n            }\n        }\n        //Unlabeled spacing without code.\n        if (i === (inputLine.length - 1)) {\n            inputObject.lineLeadSpace = inputLine;\n            inputObject.lineExpression = \"\";\n            break;\n        }\n    }\n    return inputObject;\n}\n\n//Extract Comments.\nfunction extractComment(inputLine, inputObject) {\n\n    //Semicolon identifies comments.\n    if (inputLine.search(\";\") >= 0) {\n        for (var i = 0; i < inputLine.length; i++) {\n            if (inputLine[i] === \";\") {\n                //Check if semicolon is double quoted.\n                if ((inputLine.substring(0, i).split(\"\\\"\").length % 2 !== 0) && (inputLine.substring(i).split(\"\\\"\").length % 2 !== 0)) {\n                    inputObject.lineExpression = inputLine.substring(0, i);\n                    inputObject.lineComment = inputLine.substring(i).substring(1);\n                    break;\n                } else {\n                    //Check if semicolon has only trailing quote.\n                    if (((inputLine.substring(0, i).replace(\"\").split(\"\\\"\").length % 2 !== 0) && (inputLine.substring(i).split(\"\\\"\").length % 2 === 0))) {\n                        inputObject.lineExpression = inputLine.substring(0, i);\n                        inputObject.lineComment = inputLine.substring(i).substring(1);\n                        break;\n                    }\n                    //If only quoted semicolons, set expression.\n                    inputObject.lineExpression = inputLine;\n                }\n            }\n        }\n        return inputObject;\n        //If no comments, set expression.\n    } else {\n        inputObject.lineExpression = inputLine;\n        return inputObject;\n    }\n}\n\n//Extract Indentation.\n//Assumes inputLine has extracted comments/spacing.\nfunction extractIndentation(inputLine, inputObject) {\n\n    var lineIndentationArray = [];\n    var lineIndentation = 0;\n    var tmpPosStart = 0;\n    var tmpPosEnd = 0;\n\n    for (var i = 0; i <= inputLine.length; i++) {\n        //Period identifies indentation.\n        if (inputLine[i] === \".\") {\n            //Second period identifies sub-indentation, push to array.\n            if (lineIndentation !== 0) {\n                tmpPosEnd = i;\n                lineIndentationArray.push(inputLine.substring(tmpPosStart, tmpPosEnd));\n            }\n            //Flag start position and presence.\n            tmpPosStart = i + 1;\n            lineIndentation++;\n        } else {\n            //End of indentation with code.\n            if (inputLine[i] !== \".\" && inputLine[i] !== \" \" && inputLine[i] !== \"\\t\") {\n                //Make sure a period was found.\n                if (lineIndentation !== 0) {\n                    tmpPosEnd = i;\n                    lineIndentationArray.push(inputLine.substring(tmpPosStart, tmpPosEnd));\n                    inputObject.lineExpression = inputLine.substring(i);\n                }\n                break;\n            }\n            //End of indentation without code.\n            if (i === (inputLine.length - 1)) {\n                tmpPosEnd = i + 1;\n                lineIndentationArray.push(inputLine.substring(tmpPosStart, tmpPosEnd));\n                inputObject.lineExpression = inputLine.substring(i + 1);\n                break;\n            }\n        }\n    }\n    //Only assign array if present.\n    if (lineIndentationArray.length > 0) {\n        inputObject.lineIndentationArray = lineIndentationArray;\n    } else {\n        inputObject.lineExpression = inputLine;\n    }\n    return inputObject;\n}\n\n//Divide routines and arguments into array, used by extractRoutines.\nfunction splitRoutinesAndArguments(inputLine) {\n\n    var lineCommands = [];\n    var tmpCursor = 0;\n\n    for (var i = 0; i <= inputLine.length; i++) {\n\n        //Flag spaces/tabs as dividers.\n        if (inputLine[i] === \" \" || inputLine[i] === \"\\t\") {\n            //Ensure space isn't quoted.\n            if ((inputLine.substring(0, i).split(\"\\\"\").length % 2 !== 0) && (inputLine.substring(i).split(\"\\\"\").length % 2 !== 0)) {\n                //If has content, push.\n                if (inputLine.substring(tmpCursor, i).length > 0) {\n                    lineCommands.push(inputLine.substring(tmpCursor, i));\n                    //Otherwise, push empty commands.\n                } else if (inputLine.substring(tmpCursor, i).length === 0 && (inputLine.substring(tmpCursor - 1, tmpCursor) === \" \" || inputLine.substring(tmpCursor - 1, tmpCursor) === \"\\t\")) {\n                    lineCommands.push(inputLine.substring(tmpCursor, i));\n                }\n                tmpCursor = i + 1;\n            }\n            //Flag splits at line end.\n        } else if (i === inputLine.length) {\n            //If has content, push.\n            if (inputLine.substring(tmpCursor, i).length > 0) {\n                lineCommands.push(inputLine.substring(tmpCursor, i));\n                //Gather empty commands from end of line.\n            } else if (i === tmpCursor && (inputLine.substring(i - 1, i) === \" \" || inputLine.substring(i - 1, i) === \"/t\")) {\n                lineCommands.push('');\n            }\n            //tmpCursor = 0;\n        }\n    }\n    return lineCommands;\n}\n\n//Extracts Post-Conditionals from Routines, used by extractRoutines.\nfunction extractPostConditional(inputObject) {\n\n    //Assign to new variable to truncate Routines.\n    var tmpObject = inputObject;\n    for (var i = 0; i < tmpObject.length; i++) {\n        if (tmpObject[i].mRoutine) {\n            //Semicolon indicates Post-Conditionals.\n            var tmpIndex = tmpObject[i].mRoutine.indexOf(\":\");\n            if (tmpIndex > -1) {\n                tmpObject[i].mPostConditional = tmpObject[i].mRoutine.substring(tmpIndex + 1);\n                tmpObject[i].mRoutine = tmpObject[i].mRoutine.substring(0, tmpIndex);\n            }\n        }\n    }\n    return tmpObject;\n}\n\n//Extract Routines.\n//Assumes inputLine has extracted comments/spacing/indentation.\nfunction extractRoutines(inputLine, inputObject) {\n\n    var tmpFunction = {};\n    var tmpFunctionArray = [];\n\n    //Divide Routines and Arguments.\n    var splitLine = splitRoutinesAndArguments(inputLine);\n\n    //Loop, even is function, odd is arguments.\n    var i = 0;\n    while (i < splitLine.length) {\n\n        if (i % 2 === 0) {\n            tmpFunction.mRoutine = splitLine[i];\n        } else {\n\n            tmpFunction.mArguments = splitLine[i];\n\n            //Custom handler for trailing argument spacing.\n            //Go until splitline hits a non empty val.\n            var ii = i + 1;\n            while (ii < splitLine.length) {\n                if (splitLine[ii] === \"\") {\n                    splitLine.splice(ii, 1);\n                    tmpFunction.mArguments = tmpFunction.mArguments + \" \";\n                } else {\n                    break;\n                }\n            }\n\n            tmpFunctionArray.push(tmpFunction);\n            tmpFunction = {};\n\n        }\n\n        //Last command doesn't always require parameter, so if odd number of pairs, push it.\n        if (splitLine.length % 2 !== 0 && splitLine.length > 0 && i === (splitLine.length - 1)) {\n            tmpFunction.mRoutine = splitLine[i];\n            tmpFunctionArray.push(tmpFunction);\n            tmpFunction = {};\n        }\n\n        i++;\n\n    }\n\n    //Extract and output Post Conditionals.\n    var postConditionFunctionArray = extractPostConditional(tmpFunctionArray);\n    if (postConditionFunctionArray.length > 0) {\n        inputObject.lineRoutines = postConditionFunctionArray;\n    }\n    return inputObject;\n}\n\n//Export all routines.\nmodule.exports.extractLabel = extractLabel;\nmodule.exports.extractComment = extractComment;\nmodule.exports.extractIndentation = extractIndentation;\nmodule.exports.splitRoutinesAndArguments = splitRoutinesAndArguments;\nmodule.exports.extractPostConditional = extractPostConditional;\nmodule.exports.extractRoutines = extractRoutines;\n","\"use strict\";\n\n//Append Line Label and Lead Spacing.\nfunction appendLabel(inputObject, inputLine) {\n    if (inputObject.lineLabel) {\n        inputLine = inputLine + inputObject.lineLabel;\n    }\n    if (inputObject.lineLeadSpace) {\n        inputLine = inputLine + inputObject.lineLeadSpace;\n    }\n    return inputLine;\n}\n\n//Append Indentation to Label/Spacing.\nfunction appendIndentation(inputObject, inputLine) {\n    var tmpIndentation = \"\";\n    if (inputObject.lineIndentationArray) {\n        if (inputObject.lineIndentationArray.length > 0) {\n            for (var i in inputObject.lineIndentationArray) {\n                tmpIndentation = tmpIndentation + \".\" + inputObject.lineIndentationArray[i];\n            }\n            inputLine = inputLine + tmpIndentation;\n        }\n    }\n    return inputLine;\n}\n\n//Append Routines to Label/Spacing/Indentation.\nfunction appendRoutines(inputObject, inputLine) {\n    if (inputObject.lineRoutines) {\n        for (var i in inputObject.lineRoutines) {\n            if (inputObject.lineRoutines[i].mRoutine || inputObject.lineRoutines[i].mRoutine === \"\") {\n                //Leave off interval spacing for first Routine.\n                if (i === \"0\") {\n                    inputLine = inputLine + inputObject.lineRoutines[i].mRoutine;\n                } else {\n                    inputLine = inputLine + \" \" + inputObject.lineRoutines[i].mRoutine;\n                }\n                //Append Post-Conditional.\n                if (inputObject.lineRoutines[i].mPostConditional) {\n                    inputLine = inputLine + \":\" + inputObject.lineRoutines[i].mPostConditional;\n                }\n                //Append Arguments.\n                if (inputObject.lineRoutines[i].hasOwnProperty(\"mArguments\")) {\n                    inputLine = inputLine + \" \" + inputObject.lineRoutines[i].mArguments;\n                }\n            }\n        }\n    }\n    return inputLine;\n}\n\n//Append Comment.\nfunction appendComment(inputObject, inputLine) {\n    if (inputObject.hasOwnProperty(\"lineComment\")) {\n        inputLine = inputLine + \";\" + inputObject.lineComment;\n    }\n    return inputLine;\n}\n\n//Export all Routines.\nmodule.exports.appendLabel = appendLabel;\nmodule.exports.appendIndentation = appendIndentation;\nmodule.exports.appendRoutines = appendRoutines;\nmodule.exports.appendComment = appendComment;\n","\r\n'use strict';\r\n\r\nimport * as vscode from 'vscode';\r\nimport { WorkspaceFolder, ProviderResult, DebugConfiguration, CancellationToken } from 'vscode';\r\nimport { MumpsDebugSession } from './mumpsDebug';\r\nimport { MumpsEvalutableExpressionProvider } from './mumps-evalutable-expression-provider';\r\nimport { MumpsHoverProvider } from './mumps-hover-provider';\r\nimport { MumpsDefinitionProvider } from './mumps-definition-provider';\r\nimport { MumpsFormattingHelpProvider } from './mumps-formatting-help-provider';\r\nimport { MumpsReferenceProvider } from './mumps-reference-provider';\r\nimport { MumpsSignatureHelpProvider } from './mumps-signature-help-provider';\r\nimport { DocumentFunction } from './mumps-documenter';\r\nimport { MumpsDocumentSymbolProvider } from './mumps-document';\r\nimport { CompletionItemProvider } from './mumps-completion-item-provider';\r\nimport * as AutospaceFunction from './mumps-autospace';\r\nimport { MumpsLineParser } from './mumpsLineParser';\r\nimport { MumpsHighlighter, SemanticTokens } from './mumps-highlighter';\r\nimport expandCompress from './mumpsCompExp';\r\nimport MumpsVariableCheck from './mumpsVariableCheck';\r\nconst parser = new MumpsLineParser;\r\nconst fs = require('fs');\r\nlet timeout: ReturnType<typeof setTimeout> | undefined;\r\nlet entryRef: string | undefined = \"\";\r\nexport async function activate(context: vscode.ExtensionContext) {\r\n\tconst MUMPS_MODE: vscode.DocumentFilter = { language: 'mumps', scheme: 'file' };\r\n\t// register a configuration provider for 'mumps' debug type\r\n\tconst mumpsDiagnostics = vscode.languages.createDiagnosticCollection(\"mumps\");\r\n\tlet storage = \"\";\r\n\tif (context.storageUri !== undefined) {\r\n\t\tstorage = context.storageUri.fsPath;\r\n\t\tif (!fs.existsSync(storage)) {\r\n\t\t\tfs.mkdirSync(storage);\r\n\t\t}\r\n\t\tconst dbFile = storage + \"/labeldb.json\";\r\n\t\tcontext.subscriptions.push(vscode.languages.registerCompletionItemProvider(MUMPS_MODE, new CompletionItemProvider(dbFile)));\r\n\t}\r\n\tconst wsState = context.workspaceState;\r\n\tcontext.subscriptions.push(\r\n\t\tvscode.commands.registerCommand(\"mumps.documentFunction\", () => { DocumentFunction(); }),\r\n\t\tvscode.commands.registerCommand(\"mumps.autoSpaceEnter\", () => { AutospaceFunction.autoSpaceEnter(); }),\r\n\t\tvscode.commands.registerCommand(\"mumps.autoSpaceTab\", () => { AutospaceFunction.autoSpaceTab(); }),\r\n\t\tvscode.commands.registerCommand(\"mumps.toggleExpandedCommands\", () => { expandCompress(wsState) }),\r\n\t\tvscode.commands.registerCommand('mumps.getEntryRef', () => { return getEntryRef() }),\r\n\t\tvscode.languages.registerHoverProvider(MUMPS_MODE, new MumpsHoverProvider()),\r\n\t\tvscode.languages.registerDefinitionProvider(MUMPS_MODE, new MumpsDefinitionProvider()),\r\n\t\tvscode.languages.registerEvaluatableExpressionProvider(MUMPS_MODE, new MumpsEvalutableExpressionProvider()),\r\n\t\tvscode.languages.registerSignatureHelpProvider(MUMPS_MODE, new MumpsSignatureHelpProvider(), '(', ','),\r\n\t\tvscode.languages.registerDocumentSymbolProvider(MUMPS_MODE, new MumpsDocumentSymbolProvider()),\r\n\t\tvscode.languages.registerDocumentSemanticTokensProvider(MUMPS_MODE, MumpsHighlighter, SemanticTokens),\r\n\t\tvscode.languages.registerDocumentFormattingEditProvider(MUMPS_MODE, new MumpsFormattingHelpProvider()),\r\n\t\tvscode.languages.registerDocumentRangeFormattingEditProvider(MUMPS_MODE, new MumpsFormattingHelpProvider()),\r\n\t\tvscode.languages.registerReferenceProvider(MUMPS_MODE, new MumpsReferenceProvider()),\r\n\t\tvscode.debug.registerDebugConfigurationProvider('mumps', new MumpsConfigurationProvider()),\r\n\t\tvscode.debug.registerDebugAdapterDescriptorFactory('mumps', new InlineDebugAdapterFactory()),\r\n\t\tvscode.window.onDidChangeActiveTextEditor(editor => { if (editor) { triggerUpdateDiagnostics(editor.document, mumpsDiagnostics) } }),\r\n\t\tvscode.workspace.onDidChangeTextDocument(editor => { if (editor) { triggerUpdateDiagnostics(editor.document, mumpsDiagnostics) } })\r\n\t);\r\n}\r\n\r\nexport function deactivate() {\r\n\t// nothing to do\r\n}\r\n\r\nclass MumpsConfigurationProvider implements vscode.DebugConfigurationProvider {\r\n\r\n\t/**\r\n\t * Message a debug configuration just before a debug session is being launched,\r\n\t * e.g. add all missing attributes to the debug configuration.\r\n\t*/\r\n\tresolveDebugConfiguration(folder: WorkspaceFolder | undefined, config: DebugConfiguration, token?: CancellationToken): ProviderResult<DebugConfiguration> {\r\n\r\n\t\t// if launch.json is missing or empty\r\n\t\tif (!config.type && !config.request && !config.name) {\r\n\t\t\tconst editor = vscode.window.activeTextEditor;\r\n\t\t\tif (editor && editor.document.languageId === 'mumps') {\r\n\t\t\t\tconfig.type = 'mumps';\r\n\t\t\t\tconfig.name = 'Launch';\r\n\t\t\t\tconfig.request = 'launch';\r\n\t\t\t\tconfig.program = '${file}';\r\n\t\t\t\tconfig.stopOnEntry = true;\r\n\t\t\t\tconfig.hostname = '192.168.0.1';\r\n\t\t\t\tconfig.localRoutinesPath = 'y:\\\\';\r\n\t\t\t\tconfig.port = 9000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!config.program) {\r\n\t\t\treturn vscode.window.showInformationMessage(\"Cannot find a program to debug\").then(_ => {\r\n\t\t\t\treturn undefined;\t// abort launch\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn config;\r\n\t}\r\n}\r\nclass InlineDebugAdapterFactory implements vscode.DebugAdapterDescriptorFactory {\r\n\r\n\tcreateDebugAdapterDescriptor(_session: vscode.DebugSession): ProviderResult<vscode.DebugAdapterDescriptor> {\r\n\t\treturn new vscode.DebugAdapterInlineImplementation(new MumpsDebugSession());\r\n\t}\r\n}\r\nfunction updateDiagnostics(document: vscode.TextDocument, collection: vscode.DiagnosticCollection): void {\r\n\tif (document && document.languageId === 'mumps') {\r\n\t\tcollection.clear();\r\n\t\tlet diags: Array<vscode.Diagnostic> = [];\r\n\t\tfor (let i = 0; i < document.lineCount; i++) {\r\n\t\t\tlet line = document.lineAt(i);\r\n\t\t\tlet diag = parser.checkLine(line.text);\r\n\t\t\tif (diag.text !== '') {\r\n\t\t\t\tdiags.push({\r\n\t\t\t\t\tcode: '',\r\n\t\t\t\t\tmessage: diag.text,\r\n\t\t\t\t\trange: new vscode.Range(new vscode.Position(i, diag.position), new vscode.Position(i, line.text.length)),\r\n\t\t\t\t\tseverity: vscode.DiagnosticSeverity.Error,\r\n\t\t\t\t\tsource: '',\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet vc = new MumpsVariableCheck(document);\r\n\t\tdiags = diags.concat(vc.scanSubroutines());\r\n\t\tif (diags) {\r\n\t\t\tcollection.set(document.uri, diags);\r\n\t\t}\r\n\t}\r\n}\r\nfunction triggerUpdateDiagnostics(document: vscode.TextDocument, collection: vscode.DiagnosticCollection) {\r\n\tif (timeout) {\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = undefined;\r\n\t}\r\n\ttimeout = setTimeout(() => updateDiagnostics(document, collection), 500);\r\n}\r\n\r\nfunction getEntryRef() {\r\n\treturn vscode.window.showInputBox({\r\n\t\tplaceHolder: \"Please enter the Entry-Reference to start Debugging\",\r\n\t\tvalue: entryRef\r\n\t})\r\n}\r\n\r\n","/*\r\n\tConnector to MDEBUG-Server by Jens Wulf\r\n\tLicense: LGPL\r\n*/\r\nimport { Socket } from \"net\";\r\nimport { EventEmitter } from 'events';\r\nimport { readFileSync } from 'fs';\r\nexport interface MumpsBreakpoint {\r\n\tid: number;\r\n\tfile: string,\r\n\tline: number;\r\n\tverified: boolean;\r\n}\r\ninterface VarData {\r\n\tname: string,\r\n\tindexCount: number,\r\n\tbases: Array<string>,\r\n\tcontent: string\r\n}\r\ninterface FrameInfo {\r\n\tindex: number,\r\n\tname: string,\r\n\tfile: string,\r\n\tline: number\r\n}\r\nenum connectState {\r\n\tdisconnected, waitingforStart, waitingForVars, waitingForBreakpoints, waitingForSingleVar, waitingForSingleVarContent, waitingForErrorReport, waitingForHints\r\n}\r\nexport class MConnect extends EventEmitter {\r\n\tprivate _socket = new Socket();\r\n\tprivate _connectState: connectState;\r\n\tprivate _readedData: string;\r\n\tprivate _mVars: Object;\r\n\tprivate _mStack: Array<string>;\r\n\tprivate _activeBreakpoints: Array<string>;\r\n\tprivate _event = new EventEmitter();\r\n\tprivate _hostname: string;\r\n\tprivate _port: number;\r\n\tprivate _sourceFile: string;\r\n\tprivate _sourceLines: string[];\r\n\tprivate _currentLine = 0;\r\n\tprivate _errorLines: string[];\r\n\tprivate _hints: string[];\r\n\tprivate _breakPoints: MumpsBreakpoint[];\r\n\tprivate _localRoutinesPath: string;\r\n\tprivate _breakpointId: number = 1;\r\n\tprivate _commandQueue: string[];\r\n\tprivate _logging: boolean = false;\r\n\tprivate _singleVar: string = \"\";\r\n\tprivate _singleVarContent: string = \"\";\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._commandQueue = [];\r\n\t\tthis._connectState = connectState.disconnected;\r\n\t\tthis._readedData = \"\";\r\n\t\tthis._mVars = {};\r\n\t\tthis._mStack = [];\r\n\t\tthis._activeBreakpoints = [];\r\n\t\tthis._breakPoints = [];\r\n\t\tthis._errorLines = [];\r\n\t\tthis._singleVar = \"\";\r\n\t\tthis._singleVarContent = \"\";\r\n\t\tthis._hints = [];\r\n\t\tthis._event.on('varsComplete', () => {\r\n\t\t\tif (typeof (this._mVars[\"I\"]) !== 'undefined') {\r\n\t\t\t\tlet internals = this._mVars[\"I\"];\r\n\t\t\t\tthis.checkEvents(internals);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tpublic async init(hostname: string, port: number, localRoutinesPath: string) {\r\n\t\tthis._localRoutinesPath = localRoutinesPath;\r\n\t\tthis._hostname = hostname;\r\n\t\tthis._port = port;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._socket.connect(this._port, this._hostname, () => {\r\n\t\t\t\tthis._log(\"Debug-Server connected\\n\");\r\n\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\tthis._socket.on('data', (chunk) => {\r\n\t\t\t\t\tthis._readedData += chunk.toString();\r\n\t\t\t\t\tlet n = this._readedData.indexOf('\\n');\r\n\t\t\t\t\twhile (n !== -1) {\r\n\t\t\t\t\t\tlet data = this._readedData.substring(0, n);\r\n\t\t\t\t\t\tthis.processLine(data)\r\n\t\t\t\t\t\tthis._readedData = this._readedData.substring(n + 1);\r\n\t\t\t\t\t\tn = this._readedData.indexOf('\\n');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tresolve(this._socket);\r\n\t\t\t});\r\n\t\t\tthis._socket.on('error', (error) => {\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t\t\tthis._socket.on('end', () => { this._connectState = connectState.disconnected })\r\n\t\t})\r\n\t\t// Put a friendly message on the terminal of the server.\r\n\t}\r\n\tprivate _log(msg: string) {\r\n\t\tif (this._logging) { console.log(msg); }\r\n\t}\r\n\tprivate processLine(line: string) {\r\n\t\tthis._log(\"Line:  \" + line);\r\n\r\n\t\tlet varname: string;\r\n\t\tlet value: string;\r\n\t\tlet vartype: string;\r\n\t\tswitch (this._connectState) {\r\n\t\t\tcase connectState.waitingforStart: {\r\n\t\t\t\tif (line === \"***STARTVAR\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingForVars;\r\n\t\t\t\t\tthis._mStack = [];\r\n\t\t\t\t\tthis._mVars = {};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line === \"***STARTBP\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingForBreakpoints;\r\n\t\t\t\t\tthis._activeBreakpoints = [];\r\n\t\t\t\t\tthis._log(line);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line === \"***SINGLEVAR\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingForSingleVar;\r\n\t\t\t\t\tthis._singleVar = \"\";\r\n\t\t\t\t\tthis._singleVarContent = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line === \"***ENDPROGRAM\") {\r\n\t\t\t\t\tthis.sendEvent(\"end\");\r\n\t\t\t\t\tthis._socket.end();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line === \"***BEGINERRCHK\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingForErrorReport;\r\n\t\t\t\t\tthis._errorLines = [];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line === \"***STARTHINTS\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingForHints;\r\n\t\t\t\t\tthis._hints = [];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase connectState.waitingForVars: {\r\n\t\t\t\tif (line === \"***ENDVAR\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\t\tthis._event.emit(\"varsComplete\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvartype = line.substring(0, 1); //I=internal,V=local Variable,S=Stackframe\r\n\t\t\t\t\tif (vartype === \"S\") {\r\n\t\t\t\t\t\tthis._mStack.push(line.substring(2));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvarname = line.substring(2, line.indexOf('='));\r\n\t\t\t\t\twhile ((varname.split('\"').length - 1) % 2 !== 0) {\r\n\t\t\t\t\t\tvarname = line.substring(0, line.indexOf('=', varname.length + 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue = line.substring(varname.length + 3).replace(/^\"/, \"\").replace(/\"$/, \"\");\r\n\t\t\t\t\tif (typeof (this._mVars[vartype]) === 'undefined') { this._mVars[vartype] = {}; }\r\n\t\t\t\t\tthis._mVars[vartype][varname] = value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase connectState.waitingForBreakpoints: {\r\n\t\t\t\tif (line === \"***ENDBP\") {\r\n\t\t\t\t\tthis._log(line);\r\n\t\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\t\tthis.verifyBreakpoints();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._log(line);\r\n\t\t\t\t\tthis._activeBreakpoints.push(line);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase connectState.waitingForSingleVar: {\r\n\t\t\t\tif (line === \"***SINGLEEND\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\t\tthis._event.emit('SingleVarReceived', this._event, this._singleVar, this._singleVarContent);\r\n\t\t\t\t} else if (line === \"***SINGLEVARCONTENT\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingForSingleVarContent;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._singleVar += line;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase connectState.waitingForSingleVarContent: {\r\n\t\t\t\tif (line === \"***SINGLEEND\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\t\tthis._event.emit('SingleVarReceived', this._event, this._singleVar, this._singleVarContent);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._singleVarContent += line;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase connectState.waitingForErrorReport: {\r\n\t\t\t\tif (line === \"***ENDERRCHK\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\t\tthis._event.emit('ErrorreportReceived', this._event, this._errorLines);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._errorLines.push(line);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase connectState.waitingForHints: {\r\n\t\t\t\tif (line === \"***ENDHINTS\") {\r\n\t\t\t\t\tthis._connectState = connectState.waitingforStart;\r\n\t\t\t\t\tthis._event.emit('HintsReceived', this._event, this._hints);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._hints.push(line);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tconsole.error(\"Unexpected Message: \" + line);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate writeln(message: string): void {\r\n\t\tthis._commandQueue.push(message);\r\n\t\tif (this._commandQueue.length > 1000) {\r\n\t\t\tconsole.error(\"Too many Commands in Queue: Check Debugger Connection\");\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tif (this._connectState !== connectState.disconnected) {\r\n\t\t\twhile (this._commandQueue.length) {\r\n\t\t\t\tmessage = this._commandQueue.shift()!;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis._socket.write(message + \"\\n\");\r\n\t\t\t\t} catch {\r\n\t\t\t\t\tthis._commandQueue.unshift(message);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate sendBreakpoint(file: string, line: number, onOff: boolean): void {\r\n\t\tif (onOff) { this.writeln(\"SETBP;\" + file + \";\" + line); }\r\n\t\telse { this.writeln(\"CLEARBP;\" + file + \";\" + line); }\r\n\t}\r\n\tpublic start(file: string, stopAtStart: boolean): void {\r\n\t\tif (stopAtStart) {\r\n\t\t\tif (file.indexOf(\"^\")) {\r\n\t\t\t\t//Stop direct at given Label not at first line\r\n\t\t\t\tthis.sendBreakpoint(file, 0, true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.sendBreakpoint(file, 1, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.requestBreakpoints();\r\n\t\tthis.writeln(\"START;\" + file);\r\n\t}\r\n\tpublic step(type: string): void {\r\n\t\tthis.writeln(type);\r\n\t}\r\n\tpublic continue(): void {\r\n\t\tthis.writeln(\"CONTINUE\");\r\n\t}\r\n\tpublic disconnect(): void {\r\n\t\tthis.writeln(\"RESET\");\r\n\t\tthis._socket.end();\r\n\t}\r\n\tpublic requestBreakpoints(): void {\r\n\t\tthis.writeln(\"REQUESTBP\");\r\n\t}\r\n\tpublic restart(file: string) {\r\n\t\tthis.writeln(\"RESTART;\" + file);\r\n\t}\r\n\t/**\r\n\t * Fire events if line has a breakpoint or hs stopped beacause of a different reason\r\n\t */\r\n\tprivate checkEvents(internals: Array<string>): void {\r\n\t\tconst mumpsposition = internals[\"$ZPOSITION\"];\r\n\t\tconst mumpsstatus = internals[\"$ZSTATUS\"];\r\n\t\tconst parts = mumpsposition.split(\"^\");\r\n\t\tconst position = parts[0];\r\n\t\tconst program = parts[1];\r\n\t\tconst file = this._localRoutinesPath + program + \".m\";\r\n\t\tthis.loadSource(file);\r\n\t\tconst startlabel = position.split(\"+\")[0];\r\n\t\tlet offset = 0;\r\n\t\tif (position.split(\"+\")[1] !== undefined) {\r\n\t\t\toffset = parseInt(position.split(\"+\")[1]);\r\n\t\t}\r\n\t\tlet line = 0\r\n\t\tif (startlabel !== \"\") {\r\n\t\t\tfor (let ln = 0; ln < this._sourceLines.length; ln++) {\r\n\t\t\t\tif (this._sourceLines[ln].substring(0, startlabel.length) === startlabel) {\r\n\t\t\t\t\tline = ln;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._currentLine = line + offset;\r\n\t\tif (mumpsstatus !== \"\" && internals[\"$ZTRAP\"] === internals[\"$ZSTEP\"]) {\r\n\t\t\tthis.sendEvent('stopOnException', mumpsstatus);\r\n\t\t\tthis._log(mumpsstatus);\r\n\t\t} else {\r\n\t\t\tconst bps = this._breakPoints.filter(bp => bp.file === this._sourceFile && bp.line === this._currentLine);\r\n\t\t\tif (bps.length > 0) {\r\n\t\t\t\tthis.sendEvent('stopOnBreakpoint');\r\n\t\t\t} else {\r\n\t\t\t\tthis.sendEvent('stopOnStep');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the actual Stack\r\n\t */\r\n\tpublic stack(startFrame: number, endFrame: number): any {\r\n\r\n\t\tconst frames = new Array<FrameInfo>();\r\n\r\n\t\tfor (let i = startFrame; i < this._mStack.length; i++) {\r\n\t\t\tconst position = this._mStack[i];\r\n\t\t\tif (position.indexOf(\"^\") !== -1) {\r\n\t\t\t\tconst fileposition = this.convertMumpsPosition(position);\r\n\t\t\t\tframes.push({\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tname: `${position}(${i})`,\r\n\t\t\t\t\tfile: fileposition.file,\r\n\t\t\t\t\tline: fileposition.line\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tframes: frames,\r\n\t\t\tcount: Math.min(frames.length, endFrame)\r\n\t\t};\r\n\t}\r\n\r\n\r\n\t/*\r\n\t * Set breakpoint in file with given line.\r\n\t */\r\n\tpublic setBreakPoint(file: string, line: number): MumpsBreakpoint {\r\n\t\tconst bp = <MumpsBreakpoint>{ verified: false, file, line, id: this._breakpointId++ };\r\n\t\tthis._breakPoints.push(bp);\r\n\t\tthis.sendBreakpoint(file, bp.line + 1, true);\r\n\t\treturn bp;\r\n\t}\r\n\r\n\t/*\r\n\t * Clear breakpoint in file with given line.\r\n\t */\r\n\tpublic clearBreakPoint(file: string, line: number): MumpsBreakpoint | undefined {\r\n\t\tlet bps = this._breakPoints;\r\n\t\tif (bps) {\r\n\t\t\tconst index = bps.findIndex(bp => bp.file === file && bp.line === line);\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\tconst bp = bps[index];\r\n\t\t\t\tthis.sendBreakpoint(file, bp.line, false);\r\n\t\t\t\tbps.splice(index, 1);\r\n\t\t\t\treturn bp;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t/*\r\n\t * Clear all breakpoints\r\n\t */\r\n\tpublic clearBreakpoints(file: string): void {\r\n\t\tthis.writeln(\"CLEARBP;\" + file);\r\n\t}\r\n\r\n\tprivate verifyBreakpoints(): void {\r\n\t\tlet merk: boolean[] = [];\r\n\t\tthis._breakPoints.forEach(bp => {\r\n\t\t\tbp.verified = false;\r\n\t\t\tfor (let i = 0; i < this._activeBreakpoints.length; i++) {\r\n\t\t\t\tlet internalBp = this.convertMumpsPosition(this._activeBreakpoints[i])\r\n\t\t\t\tif (internalBp.file === bp.file && bp.line === internalBp.line) {\r\n\t\t\t\t\tbp.verified = true;\r\n\t\t\t\t\tthis.sendEvent('breakpointValidated', bp);\r\n\t\t\t\t\tmerk[i] = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!bp.verified) { this.sendEvent('breakpointValidated', bp); }\r\n\t\t});\r\n\t\tfor (let i = 0; i < this._activeBreakpoints.length; i++) {\r\n\t\t\tif (!merk[i]) {\r\n\t\t\t\tlet internalBp = this.convertMumpsPosition(this._activeBreakpoints[i])\r\n\t\t\t\tlet bp: MumpsBreakpoint = { 'verified': true, 'file': internalBp.file, 'line': internalBp.line, 'id': this._breakpointId++ }\r\n\t\t\t\tthis.sendEvent('breakpointValidated', bp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getVariables(type: string) {\r\n\t\tif (type === \"system\") {\r\n\t\t\treturn this._mVars[\"I\"];\r\n\t\t} else if (type === \"local\") {\r\n\t\t\treturn this._mVars[\"V\"];\r\n\t\t}\r\n\t}\r\n\t/*\r\n\tpublic buildLabelDb() {\r\n\t\tthis.writeln(\"BUILDLABELDB\");\r\n\t}\r\n\r\n\tpublic async requestHints(part: string) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._event.on('HintsReceived', function HintsReceived(event: EventEmitter, hints: string[]) {\r\n\t\t\t\tevent.removeListener('HintsReceived', HintsReceived);\r\n\t\t\t\tresolve(hints);\r\n\t\t\t});\r\n\t\t\tthis.writeln(\"GETHINTS;\" + part);\r\n\t\t})\r\n\t}\r\n\t*/\r\n\tpublic async checkRoutine(lines: string[]) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._event.on('ErrorreportReceived', function ErrorreportReceived(event: EventEmitter, errorLines: string[]) {\r\n\t\t\t\tevent.removeListener('ErrorreportReceived', ErrorreportReceived);\r\n\t\t\t\tresolve(errorLines);\r\n\t\t\t});\r\n\t\t\tthis.writeln(\"ERRCHK\");\r\n\t\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\t\tthis.writeln(lines[i]);\r\n\t\t\t}\r\n\t\t\tthis.writeln(\"***ENDPROGRAM\");\r\n\t\t})\r\n\t}\r\n\tpublic async getSingleVar(expression: string) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet reply: VarData = { name: expression, indexCount: 0, content: \"undefined\", bases: [] }\r\n\t\t\tlet varType = \"V\";\r\n\t\t\tif (expression.charAt(0) === \"$\") {\r\n\t\t\t\tvarType = \"I\";\r\n\t\t\t}\r\n\t\t\tif (this._mVars[varType] !== undefined) {\r\n\t\t\t\tif (this._mVars[varType][expression] !== undefined) {\r\n\t\t\t\t\treply.content = this._mVars[varType][expression];\r\n\t\t\t\t\tresolve(reply);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._event.on('SingleVarReceived', function SingleVarReceived(event, singleVar, singleVarContent) {\r\n\t\t\t\t\t\tevent.removeListener('SingleVarReceived', SingleVarReceived);\r\n\t\t\t\t\t\treply.name = singleVar;\r\n\t\t\t\t\t\treply.content = singleVarContent;\r\n\t\t\t\t\t\tresolve(reply);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.writeln(\"GETVAR;\" + expression);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresolve(reply);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// private methods\r\n\r\n\tprivate loadSource(file: string) {\r\n\t\tfile = file.replace(\"%\", \"_\");\r\n\t\tif (this._sourceFile !== file) {\r\n\t\t\tthis._sourceFile = file;\r\n\t\t\ttry {\r\n\t\t\t\tthis._sourceLines = readFileSync(this._sourceFile).toString().split('\\n');\r\n\t\t\t} catch {\r\n\t\t\t\tconsole.log(\"Could not read Sourcefile \" + file)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate convertMumpsPosition(positionstring: string) {\r\n\t\tlet parts = positionstring.split(\"^\");\r\n\t\tlet position = parts[0];\r\n\t\tif (parts[1] !== undefined) {\r\n\r\n\t\t\tlet program = parts[1].split(\" \", 1)[0];\r\n\t\t\tlet file = (this._localRoutinesPath + program + \".m\").replace(\"%\", \"_\");\r\n\t\t\ttry {\r\n\t\t\t\tlet filecontent = readFileSync(file).toString().split('\\n');\r\n\t\t\t\tlet startlabel = position.split(\"+\")[0];\r\n\t\t\t\tlet offset = 0;\r\n\t\t\t\tif (position.split(\"+\")[1] !== undefined) {\r\n\t\t\t\t\toffset = parseInt(position.split(\"+\")[1]);\r\n\t\t\t\t\tif (startlabel === \"\") { offset-- }   //If there's no startlabel M reports +1^XXX\r\n\t\t\t\t}\r\n\t\t\t\tlet line = 0;\r\n\t\t\t\tif (startlabel !== \"\") {\r\n\t\t\t\t\tfor (let ln = 0; ln < filecontent.length; ln++) {\r\n\t\t\t\t\t\tif (filecontent[ln].substring(0, startlabel.length) === startlabel) {\r\n\t\t\t\t\t\t\tline = ln;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn { \"file\": file, \"line\": line + offset };\r\n\t\t\t} catch {\r\n\t\t\t\tconsole.log(\"Could not read Sourcefile \" + file)\r\n\t\t\t\treturn { \"file\": file, \"line\": 1 };\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn { \"file\": \"\", \"line\": 1 };\r\n\t\t}\r\n\t}\r\n\r\n\tprivate sendEvent(event: string, ...args: any[]) {\r\n\t\tthis.emit(event, ...args);\r\n\t}\r\n}","import * as vscode from 'vscode';\r\nlet em = require('emcellent');\r\n\r\nasync function autoSpaceEnter() {\r\n\tlet editor = vscode.window.activeTextEditor\r\n\tif (editor) {\r\n\t\tlet pos = editor.selection.active\r\n\t\tlet currentLine = editor.document.lineAt(pos.line).text;\r\n\t\tlet parsed = em.parse(currentLine);\r\n\t\tlet newLine = '';\r\n\t\tif (pos.character !== 0) {\r\n\t\t\t//check for removing a trailing .\r\n\t\t\tif ((parsed[0].lineRoutines === undefined || parsed[0].lineRoutines.length === 0) && currentLine.indexOf(\";\") === -1 && parsed[0].lineIndentationArray !== undefined && parsed[0].lineIndentationArray.length > 0) {\r\n\t\t\t\tparsed[0].lineIndentationArray.splice(-1)\r\n\t\t\t\teditor.edit((editBuilder) => {\r\n\t\t\t\t\teditBuilder.replace(new vscode.Range(pos.with(pos.line, 0), pos.with(pos.line, currentLine.length)), em.render(parsed))\r\n\t\t\t\t})\r\n\t\t\t\t//check for adding indentation to the new line\r\n\t\t\t} else {\r\n\t\t\t\tif (parsed[0].lineIndentationArray === undefined) {\r\n\t\t\t\t\tparsed[0].lineIndentationArray = []\r\n\t\t\t\t}\r\n\t\t\t\tif (lineContainsNoParamDo(parsed[0])) {\r\n\t\t\t\t\tparsed[0].lineIndentationArray.push(\" \")\r\n\t\t\t\t}\r\n\t\t\t\tparsed[0].lineRoutines = []\r\n\t\t\t\tdelete parsed[0].lineComment\r\n\t\t\t\tdelete parsed[0].lineLabel\r\n\t\t\t\tnewLine = em.render(parsed);\r\n\t\t\t}\r\n\t\t}\r\n\t\teditor.edit((editBuilder) => {\r\n\t\t\teditBuilder.insert(pos, \"\\n\" + newLine);\r\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction lineContainsNoParamDo(parsed) {\r\n\tlet cmds = parsed.lineRoutines;\r\n\tif (cmds = parsed.lineRoutines) {\r\n\t\tfor (let i = 0; i < cmds.length; i++) {\r\n\t\t\tif (cmds[i].mRoutine.match(/(d|do)/i) && !cmds[i].mArguments) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nasync function autoSpaceTab() {\r\n\r\n\tlet editor = vscode.window.activeTextEditor\r\n\tif (editor) {\r\n\t\tlet pos = editor.selection.active\r\n\t\tlet currentLine = editor.document.lineAt(pos.line).text;\r\n\t\tlet parsed = em.parse(currentLine);\r\n\t\tif ((parsed[0].lineRoutines === undefined || parsed[0].lineRoutines.length === 0) &&\r\n\t\t\tcurrentLine.indexOf(\";\") === -1 && parsed[0].lineIndentationArray !== undefined &&\r\n\t\t\tparsed[0].lineIndentationArray.length > 0) {\r\n\t\t\tparsed[0].lineIndentationArray.push(\" \")\r\n\t\t\teditor.edit((editBuilder) => {\r\n\t\t\t\tif (currentLine.charAt(pos.character - 1) === \" \") {\r\n\t\t\t\t\teditBuilder.insert(pos.with(pos.line, pos.character), \". \")\r\n\t\t\t\t} else {\r\n\t\t\t\t\teditBuilder.insert(pos.with(pos.line, pos.character), \" . \")\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\teditor.edit((eb) => {\r\n\t\t\t\teb.insert(pos, \"\\t\")\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { autoSpaceTab, autoSpaceEnter };","import * as vscode from 'vscode';\r\nconst fs = require('fs');\r\n\r\n//let Location = vscode.Location;\r\n//let Position = vscode.Position;\r\ninterface ItemHint {\r\n\tlineStatus: string,\r\n\tstartstring: string\r\n}\r\ninterface LabelItem {\r\n\troutine: string,\r\n\tlabel: string,\r\n\tline: string\r\n}\r\ninterface DbItem {\r\n\tlabels: LabelItem[],\r\n\troutines: {}\r\n}\r\nexport class CompletionItemProvider {\r\n\t/**\r\n * Provides the completion items for the supplied words.\r\n *\r\n * @param {TextDocument} document\r\n * @param {Position} position\r\n * @param {CancellationToken} token\r\n * @returns\r\n */\r\n\tprivate _labelsReady: boolean;\r\n\tprivate _labelDB: DbItem;\r\n\tprivate _filesToCheck: number;\r\n\tprivate _dbfile: string;\r\n\tconstructor(labeldb: string) {\r\n\t\tthis._labelsReady = false;\r\n\t\tthis._dbfile = labeldb;\r\n\t\tthis._refreshLabelDB();\r\n\t}\r\n\tprovideCompletionItems(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken) {\r\n\t\t//let word = document.getText(document.getWordRangeAtPosition(position));\r\n\t\tlet line = document.getText(new vscode.Range(new vscode.Position(position.line, 0), position))\r\n\t\tlet status = getLineStatus(line, position.character);\r\n\t\tlet clean: Array<vscode.CompletionItem> = [];\r\n\t\tif (this._labelsReady && status.lineStatus === 'jumplabel') {\r\n\t\t\tlet replaceRange = new vscode.Range(new vscode.Position(position.line, position.character - status.startstring.length), position)\r\n\t\t\tclean = this._findLabel(status.startstring, clean, replaceRange);\r\n\t\t}\r\n\t\treturn clean;\r\n\t}\r\n\tprivate _refreshLabelDB() { // Look for all Labels in .m-Routines and them + Comments\r\n\t\tif (!fs.existsSync(this._dbfile)) {\r\n\t\t\tlet db = {\r\n\t\t\t\tlabels: [{ routine: '', label: '' }],\r\n\t\t\t\troutines: {}\r\n\t\t\t}\r\n\t\t\tfs.writeFileSync(this._dbfile, JSON.stringify(db));\r\n\t\t}\r\n\t\tfs.readFile(this._dbfile, (err, data) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tthis._labelDB = JSON.parse(data);\r\n\t\t\t\tlet dbChanged = false;\r\n\t\t\t\tvscode.workspace.findFiles('*.m').then((files) => {\r\n\t\t\t\t\tthis._filesToCheck = files.length;\r\n\t\t\t\t\tfor (let i = 0; i < files.length; i++) {\r\n\t\t\t\t\t\tlet path = files[i].fsPath;\r\n\t\t\t\t\t\tfs.stat(path, false, (err, stats) => {\r\n\t\t\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\t\t\tlet ms = this._labelDB.routines[path];\r\n\t\t\t\t\t\t\t\tif (ms === undefined || stats.mtimeMs > ms) {\r\n\t\t\t\t\t\t\t\t\tthis._labelDB.routines[path] = stats.mtimeMs;\r\n\t\t\t\t\t\t\t\t\tdbChanged = true;\r\n\t\t\t\t\t\t\t\t\tif (stats.size < 50000) {  //parse only Files <50K\r\n\t\t\t\t\t\t\t\t\t\tthis._refreshFileLabels(path);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis._checkReady(dbChanged);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis._checkReady(dbChanged);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis._checkReady(dbChanged);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._labelsReady = true;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tprivate _checkReady(dbChanged: boolean) {\t// Check if all .m Files are processed and save LabelDB then\r\n\t\tif (--this._filesToCheck === 0) {\r\n\t\t\tif (dbChanged) {\r\n\t\t\t\tfs.writeFile(this._dbfile, JSON.stringify(this._labelDB), (err) => {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tvscode.window.showErrorMessage(\"Error writing Label DB\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tprivate _refreshFileLabels(path) {  // Refresh all Labels of a changed .m File\r\n\t\tlet routine = path.replace('\\\\', '/').split('/').pop();\r\n\t\troutine = routine!.split('.')[0].replace('_', '%');\r\n\t\tfs.readFile(path, 'utf8', (err, content) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tlet lines = content.split('\\n');\r\n\t\t\t\tlet label = '';\r\n\t\t\t\tthis._labelDB.labels = this._labelDB.labels.filter((label) => {\r\n\t\t\t\t\treturn label.routine !== routine;\r\n\t\t\t\t})\r\n\t\t\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\t\t\tif (i === 0) {\r\n\t\t\t\t\t\tthis._labelDB.labels.push({ label: '*FL', routine, line: lines[0] });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (label = lines[i].match(/^[%A-Za-z0-9][A-Za-z0-9]{0,31}/)) {\r\n\t\t\t\t\t\tthis._labelDB.labels.push({ label: label[0], routine, line: lines[i] })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._checkReady(true);\r\n\t\t});\r\n\t}\r\n\tprivate _findLabel(startstring, list: Array<vscode.CompletionItem>, replaceRange: vscode.Range) {\r\n\t\t//let hits = 0;\r\n\t\tlet hitlist: LabelItem[];\r\n\t\tlet sortText = '';\r\n\t\tif (startstring.charAt(0) === '^') {\r\n\t\t\tlet suchstring = startstring.substring(1);\r\n\t\t\thitlist = this._labelDB.labels.filter((item) => {\r\n\t\t\t\treturn item.routine.startsWith(suchstring);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (startstring.indexOf('^') !== -1) {\r\n\t\t\t\tlet label = startstring.split('^')[0];\r\n\t\t\t\tlet routinepart = startstring.split('^')[1];\r\n\t\t\t\thitlist = this._labelDB.labels.filter((item) => {\r\n\t\t\t\t\tlet fits = item.label === label && item.routine.startsWith(routinepart);\r\n\t\t\t\t\treturn fits;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\thitlist = this._labelDB.labels.filter((item) => {\r\n\t\t\t\t\tlet fits = item.label.startsWith(startstring);\r\n\t\t\t\t\treturn fits;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i = 0; i < hitlist.length; i++) {\r\n\t\t\tlet item = hitlist[i];\r\n\t\t\tlet label = item.label + '^' + item.routine;\r\n\t\t\tif (label === startstring) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (item.label === \"*FL\") {\r\n\t\t\t\tif (!startstring.startsWith('^')) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlabel = '^' + item.routine;\r\n\t\t\t\tsortText = \"100\";\r\n\t\t\t}\r\n\t\t\tlet detail = ''\r\n\t\t\tif (item.line.charAt(item.label.length) === '(') {\r\n\t\t\t\tif (item.line.indexOf(')') !== -1) {\r\n\t\t\t\t\tdetail = item.line.split(')')[0] + ')';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.line.indexOf(';') !== -1) {\r\n\t\t\t\tdetail += item.line.substring(item.line.indexOf(';') + 1);\r\n\t\t\t}\r\n\t\t\tif (detail.length > 0 && sortText !== '100') { sortText = '099'; }\r\n\t\t\tlist.push({ label, detail, sortText, range: replaceRange });\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n}\r\nfunction getLineStatus(line: string | undefined, position: number): ItemHint {\r\n\tlet lineStatus = 'lineStart';\r\n\tlet lookPosition = 0;\r\n\tlet lastCommand = '';\r\n\tlet startstring = '';\r\n\tlet isInsidePostcond = false;\r\n\tif (line) {\r\n\t\twhile (lookPosition < position) {\r\n\t\t\tlet char = line.substring(lookPosition, ++lookPosition);\r\n\t\t\tlet isWhiteSpace = (char === \" \" || char === \"\\t\");\r\n\t\t\tlet isBeginOfVariable = char.match(/[A-Za-z%^]/);\r\n\t\t\tlet isAlphaChar = char.match(/[A-Za-z]/);\r\n\t\t\t//let isAlphanumeric=char.match(/[A-Za-z0-9%]/);\r\n\t\t\t//let isOperand = char.match(/[*+-/\\[\\]']/);\r\n\t\t\tif (lineStatus !== 'string' && char === ';') {\r\n\t\t\t\treturn { lineStatus: 'comment', startstring: '' };\r\n\t\t\t}\r\n\t\t\tif (!isBeginOfVariable) {\r\n\t\t\t\tif (startstring !== '' && char.match(/[0-9]/)) {\r\n\t\t\t\t\tstartstring += char\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstartstring = '';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tstartstring += char;\r\n\t\t\t}\r\n\t\t\tswitch (lineStatus) {\r\n\t\t\t\tcase 'argument': {\r\n\t\t\t\t\tif (isWhiteSpace) {\r\n\t\t\t\t\t\tif (isInsidePostcond) {\r\n\t\t\t\t\t\t\tisInsidePostcond = false;\r\n\t\t\t\t\t\t\tif (lastCommand.match(/[D|DO|G|GOTO|J|JOB]/i)) {\r\n\t\t\t\t\t\t\t\tlineStatus = 'jumplabel'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlineStatus = 'command';\r\n\t\t\t\t\t\t\tlastCommand = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (char === '\"') {\r\n\t\t\t\t\t\tlineStatus = 'string';\r\n\t\t\t\t\t} else if (isBeginOfVariable) {\r\n\t\t\t\t\t\tlineStatus = 'variable';\r\n\t\t\t\t\t} else if (char === \"$\") {\r\n\t\t\t\t\t\tlineStatus = 'function';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'command': {\r\n\t\t\t\t\tif (char === \":\") {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t\tisInsidePostcond = true;\r\n\t\t\t\t\t} else if (isAlphaChar) {\r\n\t\t\t\t\t\tlastCommand += char;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (isWhiteSpace) {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t\tif (lastCommand.match(/[D|DO|G|GOTO|J|JOB]/i)) {\r\n\t\t\t\t\t\t\tlineStatus = 'jumplabel'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlineStatus = 'error';\r\n\t\t\t\t\t\treturn { lineStatus: 'error', startstring: '' };\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'function': {\r\n\t\t\t\t\tif (isWhiteSpace) {\r\n\t\t\t\t\t\tif (isInsidePostcond) {\r\n\t\t\t\t\t\t\tisInsidePostcond = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlineStatus = 'command';\r\n\t\t\t\t\t\t\tlastCommand = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (char === \"$\") {\r\n\t\t\t\t\t\tlineStatus = 'jumplabel';\r\n\t\t\t\t\t} else if (!isBeginOfVariable) {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'jumplabel': {\r\n\t\t\t\t\tif (isWhiteSpace) {\r\n\t\t\t\t\t\tlineStatus = 'command';\r\n\t\t\t\t\t\tlastCommand = '';\r\n\t\t\t\t\t} else if (char === \":\") {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t} else if (char === \"(\") {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'label': {\r\n\t\t\t\t\tif (isWhiteSpace) {\r\n\t\t\t\t\t\tlineStatus = 'command';\r\n\t\t\t\t\t} else if (char = '(') {\r\n\t\t\t\t\t\tlineStatus = 'variable';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'lineStart': {\r\n\t\t\t\t\tif (isWhiteSpace) {\r\n\t\t\t\t\t\tlineStatus = 'command';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlineStatus = 'label';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'string': {\r\n\t\t\t\t\tif (char === '\"') {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'variable': {\r\n\t\t\t\t\tif (isWhiteSpace) {\r\n\t\t\t\t\t\tif (isInsidePostcond) {\r\n\t\t\t\t\t\t\tisInsidePostcond = false;\r\n\t\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlineStatus = 'command';\r\n\t\t\t\t\t\t\tlastCommand = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (!isBeginOfVariable) {\r\n\t\t\t\t\t\tlineStatus = 'argument';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn { lineStatus, startstring };\r\n}\r\n","import * as vscode from 'vscode';\r\nimport { MumpsTokenHelper } from './mumpsTokenData';\r\nclass MumpsDefinitionProvider {\r\n\tprovideDefinition(document: vscode.TextDocument, position: vscode.Position) {\r\n\t\tlet helper = new MumpsTokenHelper(document, position);\r\n\t\treturn helper.getTokenRefLocation();\r\n\t}\r\n}\r\n\r\nexport { MumpsDefinitionProvider };","import * as vscode from 'vscode';\r\nimport * as parser from './parser/parser';\r\n\r\nexport class MumpsDocumentSymbolProvider implements vscode.DocumentSymbolProvider {\r\n\r\n\tpublic provideDocumentSymbols(document: vscode.TextDocument): Promise<vscode.SymbolInformation[]> {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tlet parsedDoc = parser.parseText(document.getText());\r\n            let symbols: vscode.SymbolInformation[] = [];\r\n\r\n\t\t\tparsedDoc.methods.forEach(method => {\r\n                let kind = vscode.SymbolKind.Function;\r\n\r\n\t\t\t\tlet startPosition = new vscode.Position(method.id.position.line, 0);\r\n\r\n\t\t\t\tlet endPostionLine = (method.endLine === -1) ? document.lineCount - 1 : method.endLine;\r\n                let endPosition = new vscode.Position(endPostionLine, 0);\r\n\r\n                let methodRange = new vscode.Location(document.uri, new vscode.Range(startPosition, endPosition));\r\n\r\n\t\t\t\tsymbols.push(new vscode.SymbolInformation(method.id.value, kind, '', methodRange));\r\n            });\r\n\r\n\t\t\tresolve(symbols);\r\n\t\t})\r\n\t}\r\n}","import * as vscode from 'vscode';\r\nconst DIVIDERLINE = \"\\t;****************\\n\"\r\n\r\nfunction DocumentFunction() {\r\n\tlet editor = vscode.window.activeTextEditor\r\n\tif (editor) {\r\n\t\tlet document = editor.document\r\n\t\tlet InsertPosition = editor.selection.start.with(editor.selection.start.line, 0)\r\n\r\n\t\t//if the line is empty look down for the label\r\n\t\twhile (InsertPosition.line < document.lineCount) {\r\n\t\t\tlet txt = editor.document.lineAt(InsertPosition.line).text\r\n\t\t\tif (txt.replace(/\\t|\\ /i, \"\") === \"\") {\r\n\t\t\t\tInsertPosition = InsertPosition.translate(1, 0)\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (InsertPosition.line === document.lineCount) {\r\n\t\t\tInsertPosition = InsertPosition.translate(-1, 0)\r\n\t\t}\r\n\t\t//start moving up the file looking for the label header\r\n\t\twhile (InsertPosition.line >= 0) {\r\n\t\t\tlet text = editor.document.lineAt(InsertPosition.line).text\r\n\t\t\tif (!(text.length === 0 || text.charAt(0) === \" \" || text.charAt(0) === '\\t' || text.charAt(0) === ';')) {\r\n\t\t\t\teditor.edit((editBuilder) => {\r\n\t\t\t\t\teditBuilder.insert(InsertPosition, makeSignature(text))\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tInsertPosition = InsertPosition.translate(-1, 0)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nfunction makeSignature(labelLine: string) {\r\n\tlet Signature = \"\"\r\n\r\n\tSignature += DIVIDERLINE\r\n\tSignature += \"\\t; DESCRIPTION: \\n\"\r\n\tlet parameters = labelLine.match(/\\(.*\\)/)\r\n\tif (parameters !== null && parameters.length > 0) {\r\n\t\tparameters = parameters[0].substring(1, parameters[0].length - 1).split(\",\")\r\n\t\tif (parameters.length > 0) {\r\n\t\t\tSignature += \"\\t; PARAMETERS: \\n\"\r\n\t\t\tparameters.forEach(function (element: string) {\r\n\t\t\t\tSignature += \"\\t;    \" + element + \": \\n\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tSignature += \"\\t; RETURNS: \\n\"\r\n\tSignature += \"\\t; REVISIONS: \\n\"\r\n\tSignature += DIVIDERLINE\r\n\treturn Signature;\r\n}\r\n\r\nexport { DocumentFunction };","import * as vscode from 'vscode';\n\nexport class MumpsEvalutableExpressionProvider {\n\tprovideEvaluatableExpression(document: vscode.TextDocument, position: vscode.Position): vscode.ProviderResult<vscode.EvaluatableExpression> {\n\t\t/*\n\t\tconst diags: readonly vscode.Diagnostic[] | undefined = mumpsDiagnostics.get(document.uri);\n\t\t//If Position is inside Error-marked Area then no Check for Variables is performed\n\t\tif (diags) {\n\t\t\tconst found = diags.find(diag => diag.range.contains(position))\n\t\t\tif (found) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\t*/\n\t\tconst lineContent = document.lineAt(position.line).text;\n\t\tif (lineContent.charAt(position.character) === \")\") {\n\t\t\treturn this.getExpression(position.line, lineContent.substr(0, position.character))\n\t\t}\n\t\tlet result: RegExpExecArray | null = null;\n\t\tlet expression = /([ (,+\\-\\*_:=])([\\^\\$]?%?[a-zA-Z][a-zA-Z\\d]*)/g;\n\n\t\t// find the word under the cursor\n\t\twhile (result = expression.exec(lineContent)) {\n\t\t\tlet start = result.index;\n\t\t\tstart += result[0].length - result[2].length; // ignore first part of expression\n\t\t\tlet end = start + result[2].length - 1;\n\n\t\t\tif (start <= position.character && end >= position.character) {\n\t\t\t\treturn new vscode.EvaluatableExpression(new vscode.Range(position.line, start, position.line, end), result[2]);\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\tgetExpression(line: number, content: string): vscode.EvaluatableExpression | undefined {\n\t\tlet isInsideString = false;\n\t\tfor (let i = 0; i < content.length; i++) {\n\t\t\tif (content.charAt(i) === '\"') {\n\t\t\t\tisInsideString = !isInsideString;\n\t\t\t}\n\t\t}\n\t\tif (isInsideString) { //Closing Bracket is inside a String - no evaluable Expression\n\t\t\treturn;\n\t\t}\n\t\tlet level = 1;\n\t\tlet position = 0;\n\t\tfor (let i = content.length - 1; i > -1; i--) {\n\t\t\tlet char = content.charAt(i);\n\t\t\tif (char === '\"') {\n\t\t\t\tisInsideString = !isInsideString;\n\t\t\t}\n\t\t\tif (char === '(' && !isInsideString) {\n\t\t\t\tlevel--;\n\t\t\t\tif (level === 0) {\n\t\t\t\t\tposition = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (char === ')' && !isInsideString) {\n\t\t\t\tlevel++;\n\t\t\t}\n\t\t}\n\t\tif (level === 0) { // Corresponding opening bracket found\n\t\t\tlet part = content.substr(0, position);\n\t\t\tlet expression = /([ (,+\\-\\*_:=])([\\^\\$]?%?[a-zA-Z][a-zA-Z\\d]*)$/\n\t\t\tlet match = part.match(expression);\n\t\t\tif (match) {\n\t\t\t\treturn new vscode.EvaluatableExpression(new vscode.Range(line, position - match[2].length, line, content.length + 1));\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n}","import * as vscode from 'vscode';\nexport class MumpsFormattingHelpProvider {\n\tprovideDocumentFormattingEdits(document: vscode.TextDocument, options, token) {\n\t\tlet textEdits: vscode.TextEdit[] = []\n\t\tfor (let i = 0; i < document.lineCount; i++) {\n\t\t\tlet line = document.lineAt(i).text;\n\t\t\tformatDocumentLine(line, i, textEdits);\n\t\t}\n\t\treturn textEdits;\n\t}\n\tprovideDocumentRangeFormattingEdits(document, range, options, token) {\n\t\tlet textEdits: vscode.TextEdit[] = []\n\t\tfor (let i = range.start.line; i <= range.end.line; i++) {\n\t\t\tlet line = document.lineAt(i).text;\n\t\t\tformatDocumentLine(line, i, textEdits);\n\t\t}\n\t\treturn textEdits;\n\t}\n}\nfunction formatDocumentLine(line: string, lineNumber: number, textEdits) {\n\tlet emptyLine = line.replace(/(\\ |\\t)/ig, \"\");\n\tif (emptyLine.length === 0) {\n\t\ttextEdits.push(vscode.TextEdit.insert(new vscode.Position(lineNumber, 0), \"\\t;\"))\n\t}\n\tif (line.endsWith(\". \") || line.endsWith(\".\")) {\n\t\ttextEdits.push(vscode.TextEdit.insert(new vscode.Position(lineNumber, line.length), \";\"))\n\t}\n\tif (line.startsWith(\" \")) {\n\t\tlet endSpace: number;\n\t\tfor (endSpace = 0; endSpace < line.length; endSpace++) {\n\t\t\tif (line.charAt(endSpace) !== \" \") {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\ttextEdits.push(vscode.TextEdit.replace(new vscode.Range(new vscode.Position(lineNumber, 0), new vscode.Position(lineNumber, endSpace)), \"\\t\"));\n\t}\n\tif (line.match(/^([A-Za-z%][A-Za-z0-9]*(\\([A-Za-z%][A-Za-z0-9]*(,[A-Za-z%][A-Za-z0-9]*)*\\))?)?[\\t ]+\\./)) { //labeled or unlabeled Line with .\n\t\tlet replacementString = \". \";\n\t\tlet dotPosition = line.indexOf(\".\");\n\t\tlet dotCount = 1;\n\t\tlet spaceCount = 0;\n\t\tlet char = \"\";\n\t\tdo {\n\t\t\tchar = line.charAt(dotCount + spaceCount + dotPosition);\n\t\t\tif (char === \" \") {\n\t\t\t\tspaceCount++;\n\t\t\t} else if (char === \".\") {\n\t\t\t\tdotCount++;\n\t\t\t\treplacementString += \". \";\n\t\t\t}\n\t\t} while (char === \".\" || char === \" \")\n\t\tif (dotCount !== spaceCount) {\n\t\t\ttextEdits.push(vscode.TextEdit.replace(new vscode.Range(new vscode.Position(lineNumber, dotPosition), new vscode.Position(lineNumber, dotPosition + dotCount + spaceCount)), replacementString));\n\t\t}\n\t}\n}\n","import * as vscode from 'vscode';\r\nimport { TokenType, MumpsLineParser } from './mumpsLineParser'\r\nconst tokenModifiers = ['standard'];\r\nconst subtype = \"standard\";\r\nconst tokentypes: string[] = Object.keys(TokenType);\r\nconst SemanticTokens = new vscode.SemanticTokensLegend(tokentypes, tokenModifiers);\r\nconst parser = new MumpsLineParser();\r\n//type: \"global\" | \"local\" | \"exfunction\" | \"nonMfunction\" | \"entryref\" | \"operator\" |\r\n//      \"keyword\" | \"ifunction\" | \"label\" | \"comment\" | \"sysvariable\" | \"string\" | \"number\",\r\n\r\n\r\nconst MumpsHighlighter: vscode.DocumentSemanticTokensProvider = {\r\n\tprovideDocumentSemanticTokens(\r\n\t\tdocument: vscode.TextDocument\r\n\t): vscode.ProviderResult<vscode.SemanticTokens> {\r\n\t\t// analyze the document and return semantic tokens\r\n\t\tconst text = document.getText();\r\n\t\tconst result = parser.analyzeLines(text);\r\n\t\tconst tokensBuilder = new vscode.SemanticTokensBuilder(SemanticTokens);\r\n\t\tfor (let line = 0; line < result.length; line++) {\r\n\t\t\tlet tokens = result[line];\r\n\t\t\tfor (let tokenId = 0; tokenId < tokens.length; tokenId++) {\r\n\t\t\t\tlet t = tokens[tokenId];\r\n\t\t\t\tlet type = t.type;\r\n\t\t\t\tif (type === TokenType.exfunction) {\r\n\t\t\t\t\tt.position -= 2;\t\t\t//Correct Position because of leading $$\r\n\t\t\t\t\tt.name = \"$$\" + t.name;\r\n\t\t\t\t}\r\n\t\t\t\tif (t.position < 0) {\r\n\t\t\t\t\tconsole.log(tokens);\r\n\t\t\t\t}\r\n\t\t\t\ttokensBuilder.push(\r\n\t\t\t\t\tnew vscode.Range(new vscode.Position(line, t.position), new vscode.Position(line, t.position + t.name.length)),\r\n\t\t\t\t\ttype, [subtype]\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn tokensBuilder.build();\r\n\t}\r\n};\r\n\r\nexport { MumpsHighlighter, SemanticTokens }\r\n","import * as vscode from 'vscode';\r\nimport { MumpsTokenHelper } from './mumpsTokenData';\r\nclass MumpsHoverProvider {\r\n\tprovideHover(document: vscode.TextDocument, position: vscode.Position) {\r\n\t\tconst helper = new MumpsTokenHelper(document, position);\r\n\t\treturn helper.getTokenHoverInfo();\r\n\t}\r\n}\r\nexport { MumpsHoverProvider }\r\n","import * as vscode from 'vscode';\nimport { TokenType, MumpsLineParser } from './mumpsLineParser';\nconst fs = require('fs');\nconst parser = new MumpsLineParser();\nclass MumpsReferenceProvider {\n\tprovideReferences(document: vscode.TextDocument, position: vscode.Position): Promise<vscode.Location[] | null | undefined> {\n\t\tlet myToken = parser.getTokenAt(document.lineAt(position).text, position.character);\n\t\tlet result: vscode.Location[] = [];\n\t\tif (myToken !== undefined) {\n\t\t\tlet searchType: TokenType = myToken.type;\n\t\t\tlet searchToken = myToken?.name;\n\t\t\tif (searchType === TokenType.label) {\n\t\t\t\tlet routine = document.fileName.replace('\\\\', '/').split('/').pop();\n\t\t\t\troutine = routine!.split('.')[0].replace('_', '%');\n\t\t\t\tsearchType = TokenType.entryref\n\t\t\t\tlet externalLabel: string = searchToken + \"^\" + routine;\n\t\t\t\t// Check active document for entryrefs\n\t\t\t\tlet docLines: string[] = document.getText().split('\\n');\n\t\t\t\tfor (let i = 0; i < docLines.length; i++) {\n\t\t\t\t\tif (docLines[i].includes(externalLabel) || docLines[i].includes(searchToken)) {\n\t\t\t\t\t\tlet foundPosition = docLines[i].indexOf(externalLabel);\n\t\t\t\t\t\tif (foundPosition === -1) {\n\t\t\t\t\t\t\tfoundPosition = docLines[i].indexOf(searchToken);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet token = parser.getTokenAt(docLines[i], foundPosition + 1)\n\t\t\t\t\t\tif (token !== undefined && (token.name === externalLabel || token.name === searchToken) &&\n\t\t\t\t\t\t\t(token.type === TokenType.entryref || token.type === TokenType.exfunction)) {\n\t\t\t\t\t\t\tresult!.push(new vscode.Location(document.uri, new vscode.Range(i, foundPosition, i, foundPosition + token.name.length)));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Check all other documents and return result\n\t\t\t\treturn this.getallLabelReferences(result, externalLabel, searchType);\n\t\t\t} else {\n\t\t\t\tif (searchType === TokenType.local || searchType === TokenType.global) {\n\t\t\t\t\treturn this.getallLabelReferences(result, searchToken, searchType);\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(result);\n\t\t\t}\n\t\t} else {\n\t\t\treturn Promise.resolve(result);\n\t\t}\n\t}\n\tgetallLabelReferences(result: vscode.Location[], searchToken: string, searchType: TokenType): Promise<vscode.Location[]> {\n\t\t//result.push(new vscode.Location(vscode.Uri.file(\"X://AAFA02.m\"), new vscode.Position(1, 1)));\n\t\treturn new Promise(resolve => {\n\t\t\tvscode.workspace.findFiles('*.m').then((files) => {\n\t\t\t\tlet filesToCheck = files.length;\n\t\t\t\tfor (let i = 0; i < filesToCheck; i++) {\n\t\t\t\t\tlet path = files[i].fsPath;\n\t\t\t\t\tfs.readFile(path, 'utf8', (err, content: string) => {\n\t\t\t\t\t\tif (!err) {\n\t\t\t\t\t\t\tif (content.includes(searchToken)) {\n\t\t\t\t\t\t\t\tlet lines = content.split('\\n');\n\t\t\t\t\t\t\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\t\t\t\t\t\t\tif (lines[i].includes(searchToken)) {\n\t\t\t\t\t\t\t\t\t\tlet foundPosition = lines[i].indexOf(searchToken);\n\t\t\t\t\t\t\t\t\t\tlet token = parser.getTokenAt(lines[i], foundPosition + 1)\n\t\t\t\t\t\t\t\t\t\tif (token !== undefined && token.name === searchToken &&\n\t\t\t\t\t\t\t\t\t\t\t(token.type === searchType || (token.type === TokenType.exfunction && searchType === TokenType.entryref))) {\n\t\t\t\t\t\t\t\t\t\t\tresult!.push(new vscode.Location(vscode.Uri.file(path), new vscode.Range(i, foundPosition, i, foundPosition + token.name.length)));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i === filesToCheck - 1) {\n\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\nexport { MumpsReferenceProvider };","interface LineComment {\n\tcomment: string,\n\tposition: number\n}\ninterface LineObject {\n\tlineComment?: LineComment;\n\tlineIndentationArray?: string[];\n\tlineRoutines?: TmpFunction[];\n\tlineLeadSpace?: string,\n\tlineLabel?: string,\n\tlineExpression: string,\n\terrorText?: string,\n\terrorPosition?: number,\n\texpressionPosition: number\n}\ninterface TmpFunction {\n\tmCommand: string,\n\tmArguments: string,\n\tmPostCondition: string,\n\tcmdPosition: number,\n\targPosition: number,\n\tpcPosition: number\n}\n//Append Line Label and Lead Spacing.\nfunction appendLabel(inputObject: LineObject, inputLine: string): string {\n\tif (inputObject.lineLabel) {\n\t\tinputLine = inputLine + inputObject.lineLabel;\n\t}\n\tif (inputObject.lineLeadSpace) {\n\t\tinputLine = inputLine + inputObject.lineLeadSpace;\n\t}\n\treturn inputLine;\n}\n\n//Append Indentation to Label/Spacing.\nfunction appendIndentation(inputObject: LineObject, inputLine: string): string {\n\tlet tmpIndentation = \"\";\n\tif (inputObject.lineIndentationArray) {\n\t\tif (inputObject.lineIndentationArray.length > 0) {\n\t\t\tfor (let i in inputObject.lineIndentationArray) {\n\t\t\t\ttmpIndentation = tmpIndentation + \".\" + inputObject.lineIndentationArray[i];\n\t\t\t}\n\t\t\tinputLine = inputLine + tmpIndentation;\n\t\t}\n\t}\n\treturn inputLine;\n}\n\n//Append Routines to Label/Spacing/Indentation.\nfunction appendRoutines(inputObject: LineObject, inputLine: string): string {\n\tif (inputObject.lineRoutines) {\n\t\tfor (let i in inputObject.lineRoutines) {\n\t\t\tif (inputObject.lineRoutines[i].mCommand || inputObject.lineRoutines[i].mCommand === \"\") {\n\t\t\t\t//Leave off interval spacing for first Routine.\n\t\t\t\tif (i === \"0\") {\n\t\t\t\t\tinputLine = inputLine + inputObject.lineRoutines[i].mCommand;\n\t\t\t\t} else {\n\t\t\t\t\tinputLine = inputLine + \" \" + inputObject.lineRoutines[i].mCommand;\n\t\t\t\t}\n\t\t\t\t//Append Post-Conditional.\n\t\t\t\tif (inputObject.lineRoutines[i].mPostCondition) {\n\t\t\t\t\tinputLine = inputLine + \":\" + inputObject.lineRoutines[i].mPostCondition;\n\t\t\t\t}\n\t\t\t\t//Append Arguments.\n\t\t\t\tif (inputObject.lineRoutines[i].hasOwnProperty(\"mArguments\")) {\n\t\t\t\t\tinputLine = inputLine + \" \" + inputObject.lineRoutines[i].mArguments;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn inputLine;\n}\n\n//Append Comment.\nfunction appendComment(inputObject: LineObject, inputLine: string): string {\n\tif (inputObject.hasOwnProperty(\"lineComment\")) {\n\t\tinputLine = inputLine + \";\" + inputObject.lineComment!.comment;\n\t}\n\treturn inputLine;\n}\n\n//Export all Routines.\nmodule.exports.appendLabel = appendLabel;\nmodule.exports.appendIndentation = appendIndentation;\nmodule.exports.appendRoutines = appendRoutines;\nmodule.exports.appendComment = appendComment;","import * as vscode from 'vscode';\r\nimport { MumpsTokenHelper } from './mumpsTokenData';\r\nclass MumpsSignatureHelpProvider {\r\n\tprovideSignatureHelp(document: vscode.TextDocument, position: vscode.Position) {\r\n\t\tlet helper = new MumpsTokenHelper(document, position);\r\n\t\treturn helper.getTokenSignature();\r\n\t}\r\n}\r\nexport { MumpsSignatureHelpProvider };\r\n\r\n\r\n\r\n\r\n","import * as vscode from 'vscode';\nimport { MumpsLineParser } from './mumpsLineParser';\nconst parser = new MumpsLineParser;\nexport default function expandCompress(state: vscode.Memento) {\n\tlet doExpand = true;\n\tlet editor = vscode.window.activeTextEditor\n\tif (editor) {\n\t\tlet filename = editor.document.fileName;\n\t\tif (state.get(filename + \"_expandState\") === true) {\n\t\t\tdoExpand = false;\n\t\t\tstate.update(filename + \"_expandState\", false);\n\t\t} else {\n\t\t\tstate.update(filename + \"_expandState\", true);\n\t\t}\n\t\tlet document = editor.document.getText();\n\t\tlet lines = document.split(\"\\n\")\n\t\tlet lineCount = lines.length;\n\t\tif (lineCount) {\n\t\t\tlet lastLineLength = lines[lineCount - 1].length;\n\t\t\tfor (let i = 0; i < lineCount; i++) {\n\t\t\t\tlet info = parser.expandCompressLine(lines[i], doExpand);\n\t\t\t\tif (info.errorText === '') {\n\t\t\t\t\tlines[i] = info.lineText;\n\t\t\t\t}\n\t\t\t}\n\t\t\teditor.edit(editBuilder => {\n\t\t\t\teditBuilder.replace(new vscode.Range(0, 0, lineCount, lastLineLength), lines.join(\"\\n\"));\n\t\t\t})\n\t\t}\n\t}\n}\n","/*\r\n\tImplementation of DebugProtocol-Server for GT.M, Yottadb by Jens Wulf\r\n\tbased on Mock-Debug by Microsoft Corp.\r\n\tLicense: LGPL\r\n*/\r\n\r\nimport {\r\n\tDebugSession,\r\n\tInitializedEvent, TerminatedEvent, StoppedEvent, BreakpointEvent,\r\n\tThread, StackFrame, Scope, Source, Handles, Breakpoint\r\n} from 'vscode-debugadapter';\r\nimport { DebugProtocol } from 'vscode-debugprotocol';\r\nimport { basename } from 'path';\r\nconst { Subject } = require('await-notify');\r\nimport { MConnect, MumpsBreakpoint } from './mconnect';\r\nimport * as vscode from 'vscode';\r\nimport { readFileSync } from 'fs';\r\nconst MUMPSDIAGNOSTICS = vscode.languages.createDiagnosticCollection(\"mumps\");\r\n/**\r\n * This interface describes the mumps-debug specific launch attributes\r\n * The schema for these attributes lives in the package.json of the mumps-debug extension.\r\n * The interface should always match this schema.\r\n */\r\ninterface LaunchRequestArguments extends DebugProtocol.LaunchRequestArguments {\r\n\t/** An absolute path to the \"program\" to debug. */\r\n\tprogram: string;\r\n\t/** Automatically stop target after launch. If not specified, target does not stop. */\r\n\tstopOnEntry?: boolean;\r\n\t/** enable logging the Debug Adapter Protocol */\r\n\ttrace?: boolean;\r\n\t/** The Port on which MDEBUG listens */\r\n\tport: number;\r\n\t/**The Hostname of the MDEBUG-Server */\r\n\thostname: string;\r\n\t/**Map Local-Routines to Host-Routines */\r\n\tlocalRoutinesPath: string;\r\n\t/**Flag if internal Database for M-Labels should be build up */\r\n\tbuildLabelDb?: boolean;\r\n}\r\ninterface VarData {\r\n\tname: string,\r\n\tindexCount: number,\r\n\tbases: Array<string>,\r\n\tcontent: string\r\n}\r\nexport class MumpsDebugSession extends DebugSession {\r\n\r\n\t// we don't support multiple threads, so we can use a hardcoded ID for the default thread\r\n\tprivate static THREAD_ID = 1;\r\n\r\n\tprivate _variableHandles = new Handles<string>();\r\n\r\n\tprivate _configurationDone = new Subject();\r\n\r\n\tprivate _program: string;\r\n\r\n\tprivate _mconnect: MConnect;\r\n\t/**\r\n\t * Creates a new debug adapter that is used for one debug session.\r\n\t * We configure the default implementation of a debug adapter here.\r\n\t */\r\n\tpublic constructor() {\r\n\t\tsuper();\r\n\r\n\t\t// this debugger uses zero-based lines and columns\r\n\t\tthis.setDebuggerLinesStartAt1(false);\r\n\t\tthis.setDebuggerColumnsStartAt1(false);\r\n\t\tthis._program = \"\";\r\n\t\tthis._mconnect = new MConnect();\r\n\r\n\t\t// setup event handlers\r\n\t\tthis._mconnect.on('stopOnEntry', () => {\r\n\t\t\tthis.sendEvent(new StoppedEvent('entry', MumpsDebugSession.THREAD_ID));\r\n\t\t});\r\n\t\tthis._mconnect.on('stopOnStep', () => {\r\n\t\t\tthis.sendEvent(new StoppedEvent('step', MumpsDebugSession.THREAD_ID));\r\n\t\t});\r\n\t\tthis._mconnect.on('stopOnBreakpoint', () => {\r\n\t\t\tthis.sendEvent(new StoppedEvent('breakpoint', MumpsDebugSession.THREAD_ID));\r\n\t\t});\r\n\t\tthis._mconnect.on('stopOnDataBreakpoint', () => {\r\n\t\t\tthis.sendEvent(new StoppedEvent('data breakpoint', MumpsDebugSession.THREAD_ID));\r\n\t\t});\r\n\t\tthis._mconnect.on('stopOnException', () => {\r\n\t\t\tthis.sendEvent(new StoppedEvent('exception', MumpsDebugSession.THREAD_ID));\r\n\t\t});\r\n\t\tthis._mconnect.on('breakpointValidated', (bp: MumpsBreakpoint) => {\r\n\t\t\tthis.sendEvent(new BreakpointEvent('changed', <DebugProtocol.Breakpoint>{ verified: bp.verified, id: bp.id }));\r\n\t\t});\r\n\r\n\t\tthis._mconnect.on('end', () => {\r\n\t\t\tthis.sendEvent(new TerminatedEvent());\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * The 'initialize' request is the first request called by the frontend\r\n\t * to interrogate the features the debug adapter provides.\r\n\t */\r\n\tprotected initializeRequest(response: DebugProtocol.InitializeResponse, args: DebugProtocol.InitializeRequestArguments): void {\r\n\r\n\t\t// build and return the capabilities of this debug adapter:\r\n\t\tresponse.body = response.body || {};\r\n\r\n\t\t// the adapter implements the configurationDoneRequest.\r\n\t\tresponse.body.supportsConfigurationDoneRequest = true;\r\n\r\n\t\t// make VS Code to use 'evaluate' when hovering over source\r\n\t\tresponse.body.supportsEvaluateForHovers = true;\r\n\r\n\t\t// make VS Code to support data breakpoints\r\n\t\tresponse.body.supportsDataBreakpoints = false;\r\n\r\n\t\t// make VS Code to support completion in REPL\r\n\t\tresponse.body.supportsCompletionsRequest = false;\r\n\t\tresponse.body.completionTriggerCharacters = [\".\", \"[\"];\r\n\r\n\t\t// make VS Code to send cancelRequests\r\n\t\tresponse.body.supportsCancelRequest = false;\r\n\r\n\t\t// make VS Code send the breakpointLocations request\r\n\t\tresponse.body.supportsBreakpointLocationsRequest = true;\r\n\t\tresponse.body.supportsExceptionInfoRequest = true;\r\n\t\tresponse.body.supportsRestartRequest = true;\r\n\r\n\r\n\t\t// since this debug adapter can accept configuration requests like 'setBreakpoint' at any time,\r\n\t\t// we request them early by sending an 'initializeRequest' to the frontend.\r\n\t\t// The frontend will end the configuration sequence by calling 'configurationDone' request.\r\n\t\tthis.sendResponse(response);\r\n\t\tthis.sendEvent(new InitializedEvent());\r\n\t}\r\n\r\n\t/**\r\n\t * Called at the end of the configuration sequence.\r\n\t * Indicates that all breakpoints etc. have been sent to the DA and that the 'launch' can start.\r\n\t */\r\n\tprotected configurationDoneRequest(response: DebugProtocol.ConfigurationDoneResponse, args: DebugProtocol.ConfigurationDoneArguments): void {\r\n\t\tsuper.configurationDoneRequest(response, args);\r\n\r\n\t\t// notify the launchRequest that configuration has finished\r\n\r\n\t\tthis._configurationDone.notify();\r\n\t}\r\n\r\n\tprotected async launchRequest(response: DebugProtocol.LaunchResponse, args: LaunchRequestArguments) {\r\n\r\n\t\t// make sure to 'Stop' the buffered logging if 'trace' is not set\r\n\t\t//logger.setup(args.trace ? Logger.LogLevel.Verbose : Logger.LogLevel.Stop, false);\r\n\r\n\t\t// wait until configuration has finished (and configurationDoneRequest has been called)\r\n\t\tawait this._configurationDone.wait(1000);\r\n\r\n\t\t// start the program in the runtime\r\n\t\tthis._mconnect.init(args.hostname, args.port, args.localRoutinesPath).then(async () => {\r\n\t\t\tthis.refreshDiagnostics(vscode.window.activeTextEditor!.document, MUMPSDIAGNOSTICS);\r\n\t\t\tthis._mconnect.start(args.program, !!args.stopOnEntry);\r\n\t\t\tthis._program = args.program;\r\n\t\t\tthis.sendResponse(response);\r\n\t\t}).catch((error) => {\r\n\t\t\tvscode.window.showErrorMessage(\"Connection to MDEBUG failed. \\nPlease start MDEBUG first.\");\r\n\t\t})\r\n\t}\r\n\tprotected setBreakPointsRequest(response: DebugProtocol.SetBreakpointsResponse, args: DebugProtocol.SetBreakpointsArguments): void {\r\n\r\n\t\tconst path = <string>args.source.path;\r\n\t\tconst clientLines = args.lines || [];\r\n\r\n\t\tthis._mconnect.clearBreakpoints(path);\r\n\t\t// set and verify breakpoint locations\r\n\t\tconst actualBreakpoints = clientLines.map(l => {\r\n\t\t\tlet { verified, line, id } = this._mconnect.setBreakPoint(path, this.convertClientLineToDebugger(l));\r\n\t\t\tconst bp = <DebugProtocol.Breakpoint>new Breakpoint(verified, this.convertDebuggerLineToClient(line));\r\n\t\t\tbp.id = id;\r\n\t\t\treturn bp;\r\n\t\t});\r\n\t\t// send back the actual breakpoint positions\r\n\t\tresponse.body = {\r\n\t\t\tbreakpoints: actualBreakpoints\r\n\t\t};\r\n\t\tthis.sendResponse(response);\r\n\t\tthis._mconnect.requestBreakpoints();\r\n\t}\r\n\r\n\tprotected threadsRequest(response: DebugProtocol.ThreadsResponse): void {\r\n\r\n\t\t// runtime supports no threads so just return a default thread.\r\n\t\tresponse.body = {\r\n\t\t\tthreads: [\r\n\t\t\t\tnew Thread(MumpsDebugSession.THREAD_ID, \"thread 1\")\r\n\t\t\t]\r\n\t\t};\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected stackTraceRequest(response: DebugProtocol.StackTraceResponse, args: DebugProtocol.StackTraceArguments): void {\r\n\r\n\t\tconst startFrame = typeof args.startFrame === 'number' ? args.startFrame : 0;\r\n\t\tconst maxLevels = typeof args.levels === 'number' ? args.levels : 1000;\r\n\t\tconst endFrame = startFrame + maxLevels;\r\n\r\n\t\tconst stk = this._mconnect.stack(startFrame, endFrame);\r\n\t\tresponse.body = {\r\n\t\t\tstackFrames: stk.frames.map(f => new StackFrame(f.index, f.name, this.createSource(f.file), this.convertDebuggerLineToClient(f.line))),\r\n\t\t\ttotalFrames: stk.count\r\n\t\t};\r\n\t\tif (stk.count === 0) {\r\n\t\t\tthis.sendEvent(new TerminatedEvent());\r\n\t\t}\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected scopesRequest(response: DebugProtocol.ScopesResponse, args: DebugProtocol.ScopesArguments): void {\r\n\r\n\t\tresponse.body = {\r\n\t\t\tscopes: [\r\n\t\t\t\tnew Scope(\"Local\", this._variableHandles.create(\"local|0\"), true),\r\n\t\t\t\tnew Scope(\"System\", this._variableHandles.create(\"system\"), false)\r\n\t\t\t]\r\n\t\t};\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected async variablesRequest(response: DebugProtocol.VariablesResponse, args: DebugProtocol.VariablesArguments, request?: DebugProtocol.Request) {\r\n\r\n\t\tconst variables: DebugProtocol.Variable[] = [];\r\n\t\tlet insertVariable: DebugProtocol.Variable | undefined;\r\n\t\tconst varId = this._variableHandles.get(args.variablesReference);\r\n\t\tif (varId === \"system\") {\r\n\t\t\tlet varObject = this._mconnect.getVariables(\"system\");\r\n\t\t\tfor (let varname in varObject) {\r\n\t\t\t\tvariables.push({\r\n\t\t\t\t\tname: varname,\r\n\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\tvalue: varObject[varname],\r\n\t\t\t\t\tvariablesReference: 0\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst varparts: string[] = varId.split(\"|\");\r\n\t\t\tconst indexCount: number = parseInt(varparts.pop()!);\r\n\t\t\tconst varBase = varparts.join(\"|\");\r\n\t\t\tlet varObject = this._mconnect.getVariables(\"local\");\r\n\t\t\tlet lastVar: VarData;\r\n\t\t\tlet firstTime: boolean = true;\r\n\t\t\tlet lastRef: string = \"\";\r\n\t\t\tfor (let varname in varObject) {\r\n\t\t\t\tlet actualVar = this.varAnalyze(varname, varObject[varname]);\r\n\t\t\t\tif (firstTime) { //First Variable not processed\r\n\t\t\t\t\tlastVar = actualVar;\r\n\t\t\t\t\tfirstTime = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (insertVariable = this.checkVars(lastVar!, actualVar, indexCount, varBase, lastRef)) {\r\n\t\t\t\t\tif (insertVariable.variablesReference !== 0) { lastRef = lastVar!.bases[indexCount]; }\r\n\t\t\t\t\tvariables.push(insertVariable);\r\n\t\t\t\t}\r\n\t\t\t\tlastVar = actualVar;\r\n\t\t\t}\r\n\t\t\tif (!firstTime) { // process Last Variable if there was minimum one\r\n\t\t\t\tconst dummyVar: VarData = { name: \"\", \"indexCount\": 0, \"bases\": [], \"content\": \"\" }\r\n\t\t\t\tif (insertVariable = this.checkVars(lastVar!, dummyVar, indexCount, varBase, lastRef)) {\r\n\t\t\t\t\tvariables.push(insertVariable);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tresponse.body = {\r\n\t\t\tvariables: variables\r\n\t\t};\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\t//checkVars checks if Variable has to be inserted in Var-Display and if it has descendants\r\n\tprivate checkVars(lastVar: VarData, actualVar: VarData, indexCount: number, varBase: string, lastRef: string): DebugProtocol.Variable | undefined {\r\n\t\tlet returnVar: DebugProtocol.Variable | undefined = undefined;\r\n\t\tlet actualReference: number = 0;\r\n\t\tif (indexCount === 0 || (lastVar.bases[indexCount - 1] === varBase && lastVar.indexCount > indexCount)) {\r\n\t\t\tif (lastVar.indexCount > indexCount + 1) {\r\n\t\t\t\tif (lastRef !== lastVar.bases[indexCount]) {\r\n\t\t\t\t\tlet name = lastVar.bases[indexCount];\r\n\t\t\t\t\tif (indexCount > 0) { name += \")\"; }\r\n\t\t\t\t\treturnVar = {\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\t\tvalue: 'undefined',\r\n\t\t\t\t\t\tvariablesReference: this._variableHandles.create(lastVar.bases[indexCount] + \"|\" + (indexCount + 1))\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else { //lastVar.indexCount==indexCount+1\r\n\t\t\t\tif (lastVar.bases[indexCount] === actualVar.bases[indexCount]) {\r\n\t\t\t\t\tactualReference = this._variableHandles.create(lastVar.bases[indexCount] + \"|\" + (indexCount + 1));\r\n\t\t\t\t}\r\n\t\t\t\treturnVar = {\r\n\t\t\t\t\tname: lastVar.name,\r\n\t\t\t\t\ttype: 'string',\r\n\t\t\t\t\tvalue: lastVar.content,\r\n\t\t\t\t\tvariablesReference: actualReference\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn returnVar\r\n\t}\r\n\tprotected continueRequest(response: DebugProtocol.ContinueResponse, args: DebugProtocol.ContinueArguments): void {\r\n\t\tthis._mconnect.continue();\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected nextRequest(response: DebugProtocol.NextResponse, args: DebugProtocol.NextArguments): void {\r\n\t\tthis._mconnect.step(\"OVER\");\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected stepInRequest(response: DebugProtocol.StepInResponse, args: DebugProtocol.StepInArguments, request?: DebugProtocol.Request): void {\r\n\t\tthis._mconnect.step(\"INTO\");\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected stepOutRequest(response: DebugProtocol.StepOutResponse, args: DebugProtocol.StepOutArguments, request?: DebugProtocol.Request): void {\r\n\t\tthis._mconnect.step(\"OUTOF\");\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected async evaluateRequest(response: DebugProtocol.EvaluateResponse, args: DebugProtocol.EvaluateArguments) {\r\n\t\tif (args.context === \"hover\" || args.context === \"repl\") {\r\n\t\t\tthis._mconnect.getSingleVar(args.expression).then((varReply: VarData) => {\r\n\t\t\t\tresponse.body = {\r\n\t\t\t\t\tresult: varReply.name + \" := \" + varReply.content,\r\n\t\t\t\t\tvariablesReference: 0\r\n\t\t\t\t};\r\n\t\t\t\tthis.sendResponse(response);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprotected async restartRequest(response: DebugProtocol.RestartResponse, args: DebugProtocol.RestartArguments) {\r\n\t\tlet sourceLines = readFileSync(this._program).toString().split('\\n');\r\n\t\tthis._mconnect.checkRoutine(sourceLines).then((errorLines: string[]) => {\r\n\t\t\tif (errorLines.length) {\r\n\t\t\t\tvscode.window.showErrorMessage(\"File contains Problems - No Restart possible!\");\r\n\t\t\t} else {\r\n\t\t\t\tthis._mconnect.restart(this._program);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprotected disconnectRequest(response: DebugProtocol.DisconnectResponse, args: DebugProtocol.DisconnectArguments, request?: DebugProtocol.Request): void {\r\n\t\tthis._mconnect.disconnect();\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprivate createSource(filePath: string): Source {\r\n\t\treturn new Source(basename(filePath), this.convertDebuggerPathToClient(filePath), undefined, undefined, 'mumps-adapter-data');\r\n\t}\r\n\r\n\tprotected async exceptionInfoRequest(response: DebugProtocol.ExceptionInfoResponse, args: DebugProtocol.ExceptionInfoArguments) {\r\n\t\tconst statVariable: any = await this._mconnect.getSingleVar(\"$ZSTATUS\");\r\n\t\tconst status = statVariable.content.split(\",\");\r\n\t\tlet trashlength = status[0].length + status[1].length + status[2].length + 4;\r\n\t\tlet description = statVariable.content.substr(trashlength);\r\n\t\tresponse.body = {\r\n\t\t\texceptionId: status[2],\r\n\t\t\tdescription,\r\n\t\t\tbreakMode: 'always',\r\n\t\t\tdetails: {\r\n\t\t\t\tmessage: 'Line :' + status[1],\r\n\t\t\t\ttypeName: 'ErrorException',\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.sendResponse(response);\r\n\t}\r\n\r\n\tprivate varAnalyze(varname: string, content: string): VarData {\r\n\t\tlet indexcount = 1;\r\n\t\tlet bases: string[] = [];\r\n\t\tlet length = varname.length;\r\n\t\tlet klammerpos = varname.indexOf(\"(\");\r\n\t\tlet countKomma = true;\r\n\t\t//let lastKommaPos = varname.length;\r\n\t\tif (klammerpos > 0) {\r\n\t\t\tbases.push(varname.substring(0, klammerpos));\r\n\t\t\tindexcount++;\r\n\t\t\t//lastKommaPos = klammerpos;\r\n\t\t\tfor (let i = klammerpos; i < length; i++) {\r\n\t\t\t\tif (varname.substring(i, i + 1) === \",\" && countKomma) {\r\n\t\t\t\t\tbases.push(varname.substring(0, i));\r\n\t\t\t\t\tindexcount++;\r\n\t\t\t\t\t//lastKommaPos = i;\r\n\t\t\t\t}\r\n\t\t\t\tif (varname.substring(i, i + 1) === '\"') { countKomma = !countKomma; }\r\n\t\t\t}\r\n\t\t\tbases.push(varname.substring(0, varname.length - 1));\r\n\t\t} else {\r\n\t\t\tbases.push(varname);\r\n\t\t}\r\n\t\treturn { \"name\": varname, \"indexCount\": indexcount, \"bases\": bases, content };\r\n\t}\r\n\r\n\tprivate refreshDiagnostics(doc: vscode.TextDocument | undefined, mumpsDiagnostics: vscode.DiagnosticCollection): void {\r\n\t\tlet diagnostics: vscode.Diagnostic[] = [];\r\n\t\tif (doc) {\r\n\t\t\tlet lines: string[] = []\r\n\t\t\tfor (let lineIndex = 0; lineIndex < doc.lineCount; lineIndex++) {\r\n\t\t\t\tconst lineOfText = doc.lineAt(lineIndex);\r\n\t\t\t\tlines.push(lineOfText.text);\r\n\t\t\t}\r\n\t\t\tthis._mconnect.checkRoutine(lines).then((errLines: string[]) => {\r\n\t\t\t\tfor (let i = 0; i < errLines.length; i++) {\r\n\t\t\t\t\tlet errData = errLines[i].split(\";\");\r\n\t\t\t\t\tlet column = parseInt(errData[0]) - 1;\r\n\t\t\t\t\tif (isNaN(column)) { column = 0 };\r\n\t\t\t\t\tlet line = parseInt(errData[1]) - 1;\r\n\t\t\t\t\tif (isNaN(line)) { line = 0 };\r\n\t\t\t\t\tlet endColumn = doc.lineAt(line).text.length\r\n\t\t\t\t\tif (line === 0 && column === 0) { endColumn = 0 };\r\n\t\t\t\t\tlet message = errData[2];\r\n\t\t\t\t\tlet range = new vscode.Range(line, column, line, endColumn);\r\n\t\t\t\t\tlet diagnostic = new vscode.Diagnostic(range, message, vscode.DiagnosticSeverity.Error);\r\n\t\t\t\t\tdiagnostic.code = message;\r\n\t\t\t\t\tdiagnostics.push(diagnostic);\r\n\t\t\t\t}\r\n\t\t\t\tmumpsDiagnostics.clear();\r\n\t\t\t\tmumpsDiagnostics.set(doc.uri, diagnostics);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n","let fs = require('fs');\r\nlet renderer = require('./mumps-render');\r\ninterface ErrorInformation {\r\n\ttext: string,\r\n\tposition: number,\r\n\tline?: number,\r\n\tindexFound?: boolean,\r\n\tglobalFound?: boolean,\r\n\tindirectionFound?: boolean\r\n}\r\nexport enum TokenType {\r\n\t\"global\" = \"global\", \"local\" = \"local\", \"exfunction\" = \"exfunction\", \"nonMfunction\" = \"nonMfunction\", \"entryref\" = \"entryref\",\r\n\t\"operator\" = \"operator\", \"keyword\" = \"keyword\", \"ifunction\" = \"ifunction\", \"label\" = \"label\", \"comment\" = \"comment\",\r\n\t\"sysvariable\" = \"sysvariable\", \"string\" = \"string\", \"number\" = \"number\", \"intendation\" = \"intendation\", \"argPostcondition\" = \"argPostcondition\"\r\n}\r\nexport interface LineToken {\r\n\ttype: TokenType,\r\n\tname: string,\r\n\tlongName?: string,\r\n\tisPostconditioned?: boolean,\r\n\tisExcludedVariable?: boolean,\r\n\tposition: number\r\n}\r\ninterface LineComand {\r\n\tcommand: string,\r\n\tposition: number\r\n}\r\ninterface LineComment {\r\n\tcomment: string,\r\n\tposition: number\r\n}\r\ninterface LineObject {\r\n\tlineComment?: LineComment;\r\n\tlineIndentationArray?: string[];\r\n\tlineRoutines?: TmpFunction[];\r\n\tlineLeadSpace?: string,\r\n\tlineLabel?: string,\r\n\tlineExpression: string,\r\n\terrorText?: string,\r\n\terrorPosition?: number,\r\n\texpressionPosition: number\r\n}\r\ninterface TmpFunction {\r\n\tmCommand: string,\r\n\tmArguments: string,\r\n\tmPostCondition: string,\r\n\tcmdPosition: number,\r\n\targPosition: number,\r\n\tpcPosition: number\r\n}\r\ninterface ModifiedLine {\r\n\tlineText: string,\r\n\terrorText: string\r\n}\r\n\r\nconst label = /^[A-Za-z%][A-Za-z0-9]*(\\([A-Za-z%][A-Za-z0-9]*(,[A-Za-z%][A-Za-z0-9]*)*\\))?/\r\nconst lvn = /^[A-Za-z%][A-Za-z0-9]*/\r\nconst gvn = /^\\^[A-Za-z%][A-Za-z0-9]*/\r\nconst isv = /^\\$(DEVICE|ECODE|EC|ESTACK|ES|ETRAP|ET|HALT|HOROLOG|H|IO|I|JOB|J|KEY|K|NAMESPACE|PRINCIPAL|P|QUIT|Q|REFERENCE|R|STACK|ST|STORAGE|S|SYSTEM|TEST|THIS|TLEVEL|TL|T|USERNAME|X|Y|ZALLOCSTOR|ZA|ZB|ZCHSET|ZCLOSE|ZCMDLINE|ZCM|ZCOMPILE|ZCO|ZCSTATUS|ZCH[A-Z]*|ZC|ZDATEFORM|ZDA|ZDIRECTORY|ZD|ZEDITOR|ZED|ZEOF|ZEO|ZE[A-Z]*|ZGBLDIR|ZG|ZHRORLOG|ZH|ZININTERRUPT|ZINI|ZINTERRUPT|ZINT|ZIO|ZJOB|ZJ|ZKEY|ZLEVEL|ZL|ZMAXTPTIME|ZMAXTPTI|ZMODE|ZMO|ZONLNRLBK|ZPATNUMERIC|ZPATN|ZPIN|ZPOSITION|ZPOS|ZPOUT|ZPROMPT|ZQUIT|ZREALSTOR|ZRELDATE|ZRO[A-Z]*|ZSOURCE|ZSO|ZSTA[A-Z]*|ZSTEP|ZSTRP|ZSTRPLLIM|ZST|ZSYSTEM|ZSY|ZS|ZTEXIT|ZTE|ZTIMEOUT|ZTIM|ZTRAP|ZT|ZUSEDSTOR|ZUT|ZVERSION|ZV[A-Z]*|ZYERROR|ZYRELEASE|ZTDATA|ZTDELIM|ZTLEVEL|ZTNAME|ZTOLDVAL|ZTRIGGEROP|ZTSLATE|ZTUPDATE|ZTVALUE|ZTWORMHOLE)/i\r\nconst ifunction = /^\\$(ASCII|A|CHAR|C|DATA|D|EXTRACT|E|FIND|F|FNUMBER|FN|GET|G|INCREMENT|INCR|I|JUSTIFY|J|LENGTH|L|NAME|NA|NEXT|N|ORDER|O|PIECE|P|QLENGTH|QL|QSUBSCRIPT|QS|QUERY|Q|RANDOM|R|REVERSE|RE|SELECT|S|STACK|ST|TEXT|T|TRANSLATE|TR|VIEW|V|ZAHANDLE|ZAH|ZASCII|ZATRANSFORM|ZAT|ZBITAND|ZBITCOUNT|ZBITFIND|ZBITGET|ZBITLEN|ZBITNOT|ZBITOR|ZBITSET|ZBITSTR|ZBITXOR|ZCHAR|ZCH|ZCOLLATE|ZCONVERT|ZCO|ZDATE|ZDATA|ZD|ZEXTRACT|ZE|ZFIND|ZF|ZGETJPI|ZG|ZINCREMENT|ZINCR|ZJOBEXAM|ZJUSTIFY|ZJ|ZLENGTH|ZL|ZMESSAGE|ZPARSE|ZPEEK|ZPIECE|ZPI|ZPREVIOUS|ZP|ZQGBLMOD|ZSEARCH|ZSIGPROC|ZSOCKET|ZSUBSTR|ZSUB|ZSYSLOG|ZTRANSLATE|ZTRIGGER|ZTRI|ZTRNLNM|ZTR|ZWIDTH|ZWRITE|ZW)(?=\\()/i;\r\nconst nonMfunction = /^\\$\\&([A-Za-z%0-9][A-Za-z0-9]*\\.)?([A-Za-z%0-9][A-Za-z0-9]*)(\\^[A-Za-z%][A-Za-z0-9]*)?/\r\nconst entryref = /^(\\&[A-Za-z0-9]*\\.?)?@?([A-Za-z%0-9][A-Za-z0-9]*)?(\\^@?[A-Za-z%][A-Za-z0-9]*)?/\r\nconst routineref = /^\\^@?[A-Za-z%][A-Za-z0-9]*/\r\nconst numlit = /^(\\d*\\.?\\d*(E-?\\d+)?)/\r\nconst strlit = /^\"([^\"]*(\"\")*)*\"/\r\nconst command = /^[B|BREAK|C|CLOSE|D|DO|E|ELSE|F|FOR|G|GOTO|H|HALT|HANG|I|IF|J|JOB|K|KILL|L|LOCK|M|MERGE|N|NEW|O|OPEN|Q|QUIT|R|READ|S|SET|U|USE|V|VIEW|W|WRITE|X|XECUTE|ZA|ZALLOCATE|ZBR|ZBREAK|ZC|ZCONTINUE|ZD|ZDEALLOCATE|ZE|ZEDIT|ZG|ZGOTO|ZHALT|ZH|ZHELP|ZK|ZKILL|ZL|ZLINK|ZM|ZMESSAGE|ZP|ZPRINT|ZRUPDATE|ZSH|ZSHOW|ZST|ZSTEP|ZSY|ZSYSTEM|ZTC|ZTCOMMIT|ZTR|ZTRIGGER|ZTS|ZTSTART|ZWI|ZWITHDRAW|ZWR|ZWRITE]/i\r\nconst binoperator = /^('=|'>|'<|<=|>=|'&|'!|'\\?|'\\[|'\\]|\\*\\*|\\+|\\-|\\*|\\/|\\\\|#|'|&|!|_|<|>|=|\\[|\\]|\\?|@)/\r\nconst unaryoperator = /(\\-|'|\\+|@)/\r\nconst patcode = /^([A|C|E|L|N|P|U]|^(\"([^\"](\"\")*)*\"))+/i\r\nconst repititionCount = /^\\d*\\.?\\d*/\r\nconst openkeywords = /^APPEND|ATTACH=|BLOCK(SIZE)?=|COMMAND=|CONNECT=|(NO)?DELIM(ITER)?=?|EXC(EPTION)?=|FIFO|(NO)?FIXED|GROUP=|[IO]?CHSET=|KEY|IKEY|INDEPENDANT|IOERROR=|NEW[A-Z]*|MOREREADTIME=|OKEY|OWNER=|(NO)?RCHK|(NO)?READ(ONLY)?|RECORD(SIZE)?=|(NO)?RETRY|REWIND|SEEK=|SHELL=|STDERR=|(NO)?STREAM|SYSTEM=|(NO)?TRUNCATE|UIC=|VARIABLE|WORLD=|Z?(NO)?WRAP|WRITE(ONLY)?|ZBFSIZE|Z(NO)?DELAY|Z(NO)?FF|ZIBFSIZE|Z?LISTEN=/i\r\nconst usekeywords = /^ATTACH|(NO)?CENABLE|[IO]?CHSET=|CLEAR(SCREEN)?|CONNECT|(NO)?CONVERT|CTRAP=|(NO)?DELIM(ITER)?=?|DETACH|DOWNSCROLL|(NO)?ECHO|(NO)?EDITING|ERASELINE|(NO)?ESC(APE)?|EXC(EPTION)?=|(NO)?FILTER=?|FLUSH|GROUP=|KEY|IKEY|IOERROR=|OKEY|OWNER=|(NO)?PASTHRU|(NO)?RCHK|(NO)?RETRY|REWIND|SEEK=|SKIPFILE=|SOCKET=|SPACE=|TERM(INATOR)?=|(NO)?TRUNCATE|(NO)?TTSNYC|(NO)?TYPEAHEAD|UPSCROLL|Z?LENGTH=|Z?WIDTH=|Z?(NO)?WRAP|WRITELB=|X=|Y=|ZBFSIZE|Z(NO)?DELAY|Z(NO)?FF|ZIBFSIZE|LISTEN=/i\r\nconst closekeywords = /^DELETE|(NO)?DESTROY|EXCEPTION=|GROUP=|OWNER=|RENAME=|SOCKET=|TIMEOUT=|UIC=|WORLD=/i\r\nconst jobkeywords = /^CMD=|CMDLINE=|DEF=|DEFAULT=|ERR=|ERROR=|GBL=|GBLDIR=|IN=|INPUT=|OUT=|OUTPUT=|PASS|PASSCURLVN|STA=|STARTUP=/i\r\nconst tstartkeywords = /^SERIAL|S|T=|TRANSACTIONID=/i\r\nconst cmdExpansions = {\r\n\t'B': 'BREAK', 'C': 'CLOSE', 'D': 'DO', 'E': 'ELSE', 'F': 'FOR', 'G': 'GOTO', 'H': 'HALT', 'I': 'IF', 'J': 'JOB', 'K': 'KILL', 'L': 'LOCK', 'M': 'MERGE', 'N': 'NEW',\r\n\t'O': 'OPEN', 'Q': 'QUIT', 'R': 'READ', 'S': 'SET', 'U': 'USE', 'V': 'VIEW', 'W': 'WRITE', 'X': 'XECUTE', 'ZA': 'ZALLOCATE', 'ZB': 'ZBREAK', 'ZC': 'ZCONTINUE',\r\n\t'ZD': 'ZDEALLOCATE', 'ZED': 'ZEDIT', 'ZG': 'ZGOTO', 'ZH': 'ZHELP', 'ZK': 'ZKILL', 'ZL': 'ZLINK', 'ZM': 'ZMESSAGE', 'ZP': 'ZPRINT', 'ZSH': 'ZSHOW',\r\n\t'ZST': 'ZSTEP', 'ZSY': 'ZSYSTEM', 'ZTC': 'ZTCOMMIT', 'ZTR': 'ZTRIGGER', 'ZTS': 'ZTSTART', 'ZWI': 'ZWITHDRAW', 'ZWR': 'ZWRITE'\r\n}\r\nconst funcExpansions = {\r\n\t'A': 'ASCII', 'C': 'CHAR', 'D': 'DATA', 'E': 'EXTRACT', 'F': 'FIND', 'FN': 'FNUMBER', 'G': 'GET', 'I': 'INCREMENT', 'J': 'JUSTIFY', 'L': 'LENGTH', 'NA': 'NAME', 'N': 'NEXT', 'O': 'ORDER',\r\n\t'P': 'PIECE', 'QL': 'QLENGTH', 'QS': 'QSUBSCRIPT', 'Q': 'QUERY', 'R': 'RANDOM', 'RE': 'REVERSE', 'S': 'SELECT', 'ST': 'STACK', 'T': 'TEXT', 'TR': 'TRANSLATE', 'V': 'VIEW',\r\n\t'ZA': 'ZASCII', 'ZAH': 'ZAHANDLE', 'ZCO': 'ZCONVERT', 'ZD': 'ZDATE', 'ZE': 'ZEXTRACT', 'ZF': 'ZFIND', 'ZG': 'ZGETJPI', 'ZJ': 'ZJUSTIFY', 'ZL': 'ZLENGTH', 'ZM': 'ZMESSAGE', 'ZPI': 'ZPIECE', 'ZP': 'ZPREVIOUS',\r\n\t'ZSUB': 'ZSUBSTR', 'ZTR': 'ZTRANSLATE', 'ZTRI': 'ZTRIGGER', 'ZW': 'ZWIDTH'\r\n}\r\nconst isvExpansions = {\r\n\t'D': 'DEVICE', 'EC': 'ECODE', 'ES': 'ESTACK', 'ET': 'ETRAP', 'H': 'HOROLOG', 'I': 'IO', 'J': 'JOB', 'K': 'KEY', 'P': 'PRINCIPAL', 'Q': 'QUIT', 'R': 'REFERENCE', 'ST': 'STACK',\r\n\t'S': 'STORAGE', 'SY': 'SYSTEM', 'T': 'TEST', 'TL': 'TLEVEL', 'TR': 'TRESTART', 'ZC': 'ZCSTATUS', 'ZDA': 'ZDATEFORM', 'ZD': 'ZDIRECTORY', 'ZED': 'ZEDITOR', 'ZEO': 'ZEOF', 'ZE': 'ZERROR',\r\n\t'ZG': 'ZGBLDIR', 'ZH': 'ZHRORLOG', 'ZINI': 'ZININTERRUPT', 'ZINT': 'ZINTERRUPT', 'ZJ': 'ZJOB', 'ZL': 'ZLEVEL', 'ZMAXPTI': 'ZMAXTPTIME', 'ZMO': 'ZMODE', 'ZPOS': 'ZPOSITION',\r\n\t'ZPROM': 'ZPROMPT', 'ZRO': 'ZROUTINES', 'ZSO': 'ZSOURCE', 'ZS': 'ZSTATUS', 'ZST': 'ZSTEP', 'ZSTRP': 'ZSTRPLLIM', 'ZSY': 'ZSYSTEM', 'ZTE': 'ZTEXIT', 'ZTIM': 'ZTIMEOUT', 'ZT': 'ZTRAP',\r\n\t'ZV': 'ZVERSION', 'ZYER': 'ZYERROR', 'ZYRE': 'ZYRELEASE', 'ZTDE': 'ZTDELIM'\r\n\r\n}\r\nconst cmdParams = {\r\n\t'BREAK': {\r\n\t\t'abbreviation': 'B',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr[:tvexpr][,...]]'\r\n\t},\r\n\t'CLOSE': {\r\n\t\t'abbreviation': 'C',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr[:(keyword[=expr][:...])][,...]'\r\n\t},\r\n\t'DO': {\r\n\t\t'abbreviation': 'D',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[entryref[(expr:.lvn[,...])][:tvexpr][,...]]'\r\n\t},\r\n\t'ELSE':\r\n\t{\r\n\t\t'abbreviation': 'E',\r\n\t\t'postcondition': false,\r\n\t\t'parameter': ''\r\n\t},\r\n\t'FOR': {\r\n\t\t'abbreviation': 'F',\r\n\t\t'postcondition': false,\r\n\t\t'parameter': '[lvn=expr[:numexpr1[:numexpr2]][,...]]]'\r\n\t},\r\n\t'GOTO': {\r\n\t\t'abbreviation': 'G',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'entryref[:tvexpr][,...]'\r\n\t},\r\n\t'HALT': {\r\n\t\t'abbreviation': 'H',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': ''\r\n\t},\r\n\t'HANG': {\r\n\t\t'abbreviation': 'H',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'numexpr[,...]'\r\n\t},\r\n\t'IF': {\r\n\t\t'abbreviation': 'I',\r\n\t\t'postcondition': false,\r\n\t\t'parameter': '[tvexpr[,...]]'\r\n\t},\r\n\t'JOB': {\r\n\t\t'abbreviation': 'J',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'entryref[(expr[,...])][:[(keyword[=value][:...])][:numexpr]][,...]'\r\n\t},\r\n\t'KILL': {\r\n\t\t'abbreviation': 'K',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[glvn | (lvn[,...]) | *lname | *lvn ]'\r\n\t},\r\n\t'LOCK': {\r\n\t\t'abbreviation': 'L',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[[-|+]nref|(nref[,...])[:numexpr] [,...]]'\r\n\t},\r\n\t'MERGE': {\r\n\t\t'abbreviation': 'M',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'glvn=glvn[,...]'\r\n\t},\r\n\t'NEW': {\r\n\t\t'abbreviation': 'N',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[[(]lvn[,...][)][,...]]'\r\n\t},\r\n\t'OPEN': {\r\n\t\t'abbreviation': 'O',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr[:[(keyword[=expr][:...])] [:numexpr]][,...]'\r\n\t},\r\n\t'QUIT': {\r\n\t\t'abbreviation': 'Q',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr | *lname | *lvn]'\r\n\t},\r\n\t'READ': {\r\n\t\t'abbreviation': 'R',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '(glvn|*glvn|glvn#intexpr)[:numexpr]|strlit|fcc[,...]'\r\n\t},\r\n\t'SET': {\r\n\t\t'abbreviation': 'S',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'setleft=expr | (setleft[,...])=expr | *lvn=lname | aliascontainer[,...]'\r\n\t},\r\n\t'TCOMMIT': {\r\n\t\t'abbreviation': 'TC',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': ''\r\n\t},\r\n\t'TRESTART': {\r\n\t\t'abbreviation': 'TRE',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': ''\r\n\t},\r\n\t'TROLLBACK': {\r\n\t\t'abbreviation': 'TRO',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[intexpr]'\r\n\t},\r\n\t'TSTART': {\r\n\t\t'abbreviation': 'TS',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[([lvn...])|lvn|*|][:keyword|(keyword...)]'\r\n\t},\r\n\t'USE': {\r\n\t\t'abbreviation': 'U',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr[:(keyword[=expr][:...])][,...]'\r\n\t},\r\n\t'VIEW': {\r\n\t\t'abbreviation': 'V',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'keyword[:expr[:...]][,...]'\r\n\t},\r\n\t'WRITE': {\r\n\t\t'abbreviation': 'W',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr|*intexpr|fcc[,...]'\r\n\t},\r\n\t'XECUTE': {\r\n\t\t'abbreviation': 'X',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr[:tvexpr][,...]'\r\n\t},\r\n\t'ZALLOCATE': {\r\n\t\t'abbreviation': 'ZA',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[(]nref[,...][)][:intexpr][,...]'\r\n\t},\r\n\t'ZBREAK': {\r\n\t\t'abbreviation': 'ZB',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[-]entryref[:[expr][:intexpr]][,...]'\r\n\t},\r\n\t'ZCOMPILE': {\r\n\t\t'abbreviation': 'ZCOM',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr[,...]'\r\n\t},\r\n\t'ZCONTINUE': {\r\n\t\t'abbreviation': 'ZC',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': ''\r\n\t},\r\n\t'ZDEALLOCATE': {\r\n\t\t'abbreviation': 'ZD',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[nref[,...]]'\r\n\t},\r\n\t'ZEDIT': {\r\n\t\t'abbreviation': 'ZED',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr[,...]]'\r\n\t},\r\n\t'ZGOTO': {\r\n\t\t'abbreviation': 'ZG',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[[intexpr][:entryref[:tvexpr]],...]'\r\n\t},\r\n\t'ZHALT': {\r\n\t\t'abbreviation': 'ZHALT',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[intexpr]'\r\n\t},\r\n\t'ZHELP': {\r\n\t\t'abbreviation': 'ZH',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr1[:expr2],...]'\r\n\t},\r\n\t'ZKILL': {\r\n\t\t'abbreviation': 'ZK',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'glvn'\r\n\t},\r\n\t'ZLINK': {\r\n\t\t'abbreviation': 'ZL',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr1[:expr2][,...]]'\r\n\t},\r\n\t'ZMESSAGE': {\r\n\t\t'abbreviation': 'ZM',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'intexpr[:expr2][:...]'\r\n\t},\r\n\t'ZPRINT': {\r\n\t\t'abbreviation': 'ZP',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[entryref[:label[+intexpr]][,...]'\r\n\t},\r\n\t'ZRUPDATE': {\r\n\t\t'abbreviation': 'ZRUP',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'expr[,...]'\r\n\t},\r\n\t'ZSHOW': {\r\n\t\t'abbreviation': 'ZSH',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr[:glvn][,...]]'\r\n\t},\r\n\t'ZSTEP': {\r\n\t\t'abbreviation': 'ZST',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[keyword[:expr]][,...]'\r\n\t},\r\n\t'ZSYSTEM': {\r\n\t\t'abbreviation': 'ZSY',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[expr][,...]]'\r\n\t},\r\n\t'ZTCOMMIT': {\r\n\t\t'abbreviation': 'ZTC',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[intexpr]'\r\n\t},\r\n\t'ZTRIGGER': {\r\n\t\t'abbreviation': 'ZTR',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'gvn'\r\n\t},\r\n\t'ZTSTART': {\r\n\t\t'abbreviation': 'ZTS',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': ''\r\n\t},\r\n\t'ZWITHDRAW': {\r\n\t\t'abbreviation': 'ZWI',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': 'glvn'\r\n\t},\r\n\t'ZWRITE': {\r\n\t\t'abbreviation': 'ZWR',\r\n\t\t'postcondition': true,\r\n\t\t'parameter': '[zwrglvn[,...]]'\r\n\t}\r\n}\r\nconst funcParams = {\r\n\t'ASCII': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'CHAR': {\r\n\t\t'maxparams': 99\r\n\t},\r\n\t'DATA': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'glvn'\r\n\t},\r\n\t'EXTRACT': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'FIND': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'FNUMBER': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'GET': {\r\n\t\t'maxparams': 2,\r\n\t\t'format': 'glvn,expr'\r\n\t},\r\n\t'INCREMENT': {\r\n\t\t'maxparams': 2,\r\n\t\t'format': 'glvn,expr'\r\n\t},\r\n\t'JUSTIFY': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'LENGTH': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'NAME': {\r\n\t\t'maxparams': 2,\r\n\t\t'format': 'glvn,expr'\r\n\t},\r\n\t'NEXT': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'glvn('\r\n\t},\r\n\t'ORDER': {\r\n\t\t'maxparams': 2,\r\n\t\t'format': 'glvn,expr'\r\n\t},\r\n\t'PIECE': {\r\n\t\t'maxparams': 4\r\n\t},\r\n\t'QLENGTH': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'expr'\r\n\t},\r\n\t'QSUBSCRIPT': {\r\n\t\t'maxparams': 2,\r\n\t\t'format': 'expr,expr'\r\n\t},\r\n\t'QUERY': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'glvn'\r\n\t},\r\n\t'RANDOM': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'REVERSE': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'SELECT': {\r\n\t\t'maxparams': 99,\r\n\t\t'format': 'special'\r\n\t},\r\n\t'STACK': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'TEXT': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'entryref'\r\n\t},\r\n\t'TRANSLATE': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'VIEW': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZASCII': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZATRANSFORM': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 4,\r\n\t\t'format': 'expr,expr,bool,bool'\r\n\t},\r\n\t'ZBITAND': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZBITCOUNT': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZBITFIND': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZBITGET': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZBITLEN': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZBITNOT': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZBITOR': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZBITSET': {\r\n\t\t'minparams': 3,\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZBITSTR': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZBITXOR': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZCHAR': {\r\n\t\t'maxparams': 99\r\n\t},\r\n\t'ZCOLLATE': {\r\n\t\t'maxparams': 3,\r\n\t\t'format': 'glvn,expr,bool'\r\n\t},\r\n\t'ZCONVERT': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZDATA': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'lvn'\r\n\t},\r\n\t'ZDATE': {\r\n\t\t'maxparams': 4\r\n\t},\r\n\t'ZEXTRACT': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZFIND': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZGETJPI': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZJOBEXAM': {\r\n\t\t'minparams': 0,\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZJUSTIFY': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZLENGTH': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZMESSAGE': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZPARSE': {\r\n\t\t'maxparams': 5\r\n\t},\r\n\t'ZPEEK': {\r\n\t\t'maxparams': 4\r\n\t},\r\n\t'ZPIECE': {\r\n\t\t'maxparams': 4\r\n\t},\r\n\t'ZPREVIOUS': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'glvn'\r\n\t},\r\n\t'ZQGBLMOD': {\r\n\t\t'maxparams': 1,\r\n\t\t'format': 'gvn'\r\n\t},\r\n\t'ZSEARCH': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZSIGPROC': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZSOCKET': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 4\r\n\t},\r\n\t'ZSUBSTR': {\r\n\t\t'minparams': 2,\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZSYSLOG': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZTRANSLATE': {\r\n\t\t'maxparams': 3\r\n\t},\r\n\t'ZTRIGGER': {\r\n\t\t'maxparams': 2\r\n\t},\r\n\t'ZTRNLNM': {\r\n\t\t'maxparams': 6\r\n\t},\r\n\t'ZWIDTH': {\r\n\t\t'maxparams': 1\r\n\t},\r\n\t'ZWRITE': {\r\n\t\t'maxparams': 2\r\n\t}\r\n}\r\nconst expressiontype = {\r\n\t\"Standard\": 0,\r\n\t\"Index\": 1,\r\n\t\"eArgument\": 2,\r\n\t\"iArgument\": 3,\r\n\t\"Atom\": 4\r\n}\r\n\r\nclass MumpsLineParser {\r\n\tprivate _tokens: LineToken[] = [];\r\n\tprivate cmdCompressions: object;\r\n\tprivate funcCompressions: object;\r\n\tprivate isvCompressions: object;\r\n\tprivate linePosition: number = 0;\r\n\t/**\r\n\t * Checks Mumps-patterns, throws error when error found in pattern\r\n\t * @param line: Line to be analyzed\r\n\t * @param position: startposition\r\n\t * @param level: is used for nested Patterns\r\n\t * @returns ErrorInformation, text empty when no error found, position is set behind pattern\r\n\t */\r\n\tprivate _evaluatePattern(line: string, position: number, level?: number): ErrorInformation {\r\n\t\tlet result = { text: '', position }\r\n\t\tlet patternComplete = false;\r\n\t\tif (level === undefined) {\r\n\t\t\tlevel = 0;\r\n\t\t}\r\n\t\tdo {\r\n\t\t\tif (line[position] === '@') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++position);\r\n\t\t\t\tpatternComplete = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (line.substring(result.position).match(repititionCount)) {\r\n\t\t\t\tlet repCount = line.substring(result.position).match(repititionCount)![0];\r\n\t\t\t\tif (repCount !== '') {\r\n\t\t\t\t\tpatternComplete = false;\r\n\t\t\t\t\tresult.position += repCount.length;\r\n\t\t\t\t\tif (line.substring(result.position).match(patcode)) {\r\n\t\t\t\t\t\tpatternComplete = true;\r\n\t\t\t\t\t\tresult.position += line.substring(result.position).match(patcode)![0].length;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t} else if (line[result.position] === '(') {\r\n\t\t\t\t\t\tresult = this._evaluatePattern(line, ++result.position, level + 1);\r\n\t\t\t\t\t\tpatternComplete = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (line[result.position] === ')') {\r\n\t\t\t\t\tif (!patternComplete) {\r\n\t\t\t\t\t\tresult.text = 'Incomplete pattern';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (level > 0) {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else if (line[result.position] === ',' && level > 0) {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else if (line[result.position] === ')') {\r\n\t\t\t\tif (!patternComplete) {\r\n\t\t\t\t\tresult.text = 'Incomplete pattern';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t} else if (line[result.position] === ',' && level > 0) {\r\n\t\t\t\tif (!patternComplete) {\r\n\t\t\t\t\tresult.text = 'Incomplete pattern';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t} while (position < line.length)\r\n\t\tif (!patternComplete) {\r\n\t\t\tresult.text = 'Incomplete pattern';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\tif (level > 0) {\r\n\t\t\tresult.text = 'Missing \")\"';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tpublic evaluateExpression(exType: number, line: string, position: number, level?: number | undefined): ErrorInformation {\r\n\t\tlet expressionComplete = false;\r\n\t\tlet startposition = position;\r\n\t\tif (level === undefined) {\r\n\t\t\tlevel = 0;\r\n\t\t}\r\n\t\tlet lastExpression = '';\r\n\t\twhile (position < line.length) {\r\n\t\t\tlet char = line.charAt(position);\r\n\t\t\tif (char === '(') {\r\n\t\t\t\tlet subExType = expressiontype.Standard\r\n\t\t\t\tswitch (lastExpression) {\r\n\t\t\t\t\tcase 'ifunction':\r\n\t\t\t\t\t\tsubExType = expressiontype.iArgument;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'exfunction':\r\n\t\t\t\t\t\tsubExType = expressiontype.eArgument;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'pattern':\r\n\t\t\t\t\t\tthrow { text: 'Unecpected \"(\"', position };\r\n\t\t\t\t}\r\n\t\t\t\tlet result = this.evaluateExpression(subExType, line, ++position, level + 1);\r\n\t\t\t\tif (exType === expressiontype.Atom) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\texpressionComplete = true;\r\n\t\t\t\tposition = result.position;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlastExpression = '';\r\n\t\t\tif (char === ')') {\r\n\t\t\t\tif (!expressionComplete) {\r\n\t\t\t\t\tif (position === startposition && exType === expressiontype.eArgument) {\r\n\t\t\t\t\t\treturn { text: '', position: ++position }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow { text: 'Incomplete Expression', position };\r\n\t\t\t\t}\r\n\t\t\t\tif (level > 0) {\r\n\t\t\t\t\tposition++;\r\n\t\t\t\t}\r\n\t\t\t\treturn { text: '', position: position };\r\n\t\t\t}\r\n\t\t\tif (char === '.' && exType === expressiontype.eArgument) {\r\n\t\t\t\tposition++;\r\n\t\t\t\tlet evalString = line.substring(position);\r\n\t\t\t\tif (evalString.match(lvn)) {\r\n\t\t\t\t\tlet localname = evalString.match(lvn)![0];\r\n\t\t\t\t\tthis._tokens.push({ type: TokenType.local, name: localname, position: position + this.linePosition });\r\n\t\t\t\t\tposition += localname.length;\r\n\t\t\t\t\tchar = line.charAt(position);\r\n\t\t\t\t\tif (char !== ',' && char !== ')') {\r\n\t\t\t\t\t\tthrow { text: 'Variablereference must stand alone', position }\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (char === ',') {\r\n\t\t\t\tif (!expressionComplete) {\r\n\t\t\t\t\tif (position === startposition && exType === expressiontype.eArgument) {\r\n\t\t\t\t\t\tif (level === 0) {\r\n\t\t\t\t\t\t\treturn { text: '', position: ++position }\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tposition++\r\n\t\t\t\t\t\t\texpressionComplete = false;\r\n\t\t\t\t\t\t\tstartposition = position;\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow { text: 'Incomplete Expression', position };\r\n\t\t\t\t}\r\n\t\t\t\tif (exType === expressiontype.Standard || exType === expressiontype.Atom) {\r\n\t\t\t\t\treturn { text: '', position }\r\n\t\t\t\t}\r\n\t\t\t\tposition++\r\n\t\t\t\texpressionComplete = false;\r\n\t\t\t\tstartposition = position;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (expressionComplete) {\r\n\t\t\t\tif (exType === expressiontype.Atom) {\r\n\t\t\t\t\treturn { text: '', position }\r\n\t\t\t\t}\r\n\t\t\t\tif (line.substring(position).match(binoperator)) {\r\n\t\t\t\t\tlet operator = line.substring(position).match(binoperator)![0];\r\n\t\t\t\t\tthis._tokens.push({ name: operator, position: position + this.linePosition, type: TokenType.operator });\r\n\t\t\t\t\tposition += operator.length;\r\n\t\t\t\t\texpressionComplete = false;\r\n\t\t\t\t\tif (operator === '?' || operator === \"'?\") {\r\n\t\t\t\t\t\tlet result = this._evaluatePattern(line, position);\r\n\t\t\t\t\t\tposition = result.position;\r\n\t\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t\t\tlastExpression = 'pattern';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn { text: '', position }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet evalString = line.substring(position);\r\n\t\t\ttry {\r\n\t\t\t\tlet provResult = this._checkVar(line, position);\r\n\t\t\t\texpressionComplete = true;\r\n\t\t\t\tposition = provResult.position;\r\n\t\t\t} catch (provResult) {\r\n\t\t\t\tif (evalString.substring(0, 2) === '$$') {\r\n\t\t\t\t\tposition += 2;\r\n\t\t\t\t\tprovResult = this._checkEntryRef(line, position, true, true);\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t\tposition = provResult.position;\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t} else if (evalString.match(nonMfunction)) {\r\n\t\t\t\t\tlet functionname = evalString.match(nonMfunction)![0];\r\n\t\t\t\t\tthis._tokens.push({ type: TokenType.nonMfunction, name: functionname, position });\r\n\t\t\t\t\tposition += functionname.length;\r\n\t\t\t\t\tlastExpression = 'exfunction'\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t} else if (evalString.match(ifunction)) {\r\n\t\t\t\t\tlet functionname = evalString.match(ifunction)![0].substring(1).toUpperCase();\r\n\t\t\t\t\tposition += functionname.length + 2\r\n\t\t\t\t\tlet longName = functionname;\r\n\t\t\t\t\tif (funcExpansions[functionname] !== undefined) {\r\n\t\t\t\t\t\tlongName = funcExpansions[functionname];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._tokens.push({ name: \"$\" + functionname, position: position - functionname.length - 2, type: TokenType.ifunction, longName: \"$\" + longName });\r\n\t\t\t\t\tlet result = this._checkFunction(longName, line, position);\r\n\t\t\t\t\tposition = result.position;\r\n\t\t\t\t\tlastExpression = '';\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t} else if (evalString.match(isv)) {\r\n\t\t\t\t\tlet specialvarname = evalString.match(isv)![0];\r\n\t\t\t\t\tlet longName = specialvarname.toUpperCase();\r\n\t\t\t\t\tif (isvExpansions[longName.substring(1)] !== undefined) {\r\n\t\t\t\t\t\tlongName = \"$\" + isvExpansions[longName.substring(1)];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._tokens.push({ name: specialvarname, position: position + this.linePosition, type: TokenType.sysvariable, longName });\r\n\t\t\t\t\tposition += specialvarname.length\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t} else if (evalString.match(numlit) && evalString.match(numlit)![0] !== '') {\r\n\t\t\t\t\tlet numericliteral = evalString.match(numlit)![0];\r\n\t\t\t\t\tthis._tokens.push({ name: numericliteral, type: TokenType.number, position: position + this.linePosition });\r\n\t\t\t\t\tposition += numericliteral.length;\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t} else if (evalString.match(strlit)) {\r\n\t\t\t\t\tlet stringlit = evalString.match(strlit)![0];\r\n\t\t\t\t\tthis._tokens.push({ name: stringlit, type: TokenType.string, position: position + this.linePosition });\r\n\t\t\t\t\tposition += stringlit.length;\r\n\t\t\t\t\texpressionComplete = true;\r\n\t\t\t\t} else if (char.match(unaryoperator)) {\r\n\t\t\t\t\tthis._tokens.push({ name: char, type: TokenType.operator, position: position + this.linePosition });\r\n\t\t\t\t\tposition++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow { text: 'Unexpected Character ' + char, position }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (expressionComplete) {\r\n\t\t\tif (level > 0) {\r\n\t\t\t\tthrow { text: 'Missing \")\"', position }\r\n\t\t\t}\r\n\t\t\treturn { text: '', position }\r\n\t\t} else {\r\n\t\t\tthrow { text: 'Incomplete Expression', position };\r\n\t\t}\r\n\t}\r\n\tprivate _extractLabel(inputObject: LineObject): LineObject {\r\n\t\tinputObject.lineLabel = '';\r\n\t\tlet inputLine = inputObject.lineExpression;\r\n\t\tinputObject.lineExpression = '';\r\n\t\tif (inputLine.match(label)) {\r\n\t\t\tinputObject.lineLabel = inputLine.match(label)![0];\r\n\t\t}\r\n\t\tlet position = inputObject.lineLabel.length;\r\n\t\tif (position === inputLine.length) {\r\n\t\t\treturn inputObject\r\n\t\t}\r\n\t\tif (!inputLine.charAt(position).match(/[\\s|;]/)) {\r\n\t\t\tinputObject.errorText = 'Unexpected Character' + inputLine.charAt(position);\r\n\t\t\tinputObject.errorPosition = position;\r\n\t\t\treturn inputObject;\r\n\t\t}\r\n\t\tlet i = 0;\r\n\t\tfor (i = position; i <= inputLine.length; i++) {\r\n\t\t\tif (inputLine[i] !== \" \" && inputLine[i] !== \"\\t\") {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tinputObject.lineLeadSpace = inputLine.substring(position, i);\r\n\t\tif (i !== (inputLine.length)) {\r\n\t\t\tinputObject.lineExpression = inputLine.substring(i);\r\n\t\t\tinputObject.expressionPosition = i;\r\n\t\t}\r\n\t\treturn inputObject;\r\n\t}\r\n\r\n\t//Extract Comments.\r\n\tprivate _extractComment(inputObject: LineObject): LineObject {\r\n\t\tlet inputLine = inputObject.lineExpression!;\r\n\t\t//Semicolon identifies comments.\r\n\t\tif (inputLine.search(\";\") >= 0) {\r\n\t\t\tlet isInsideString = false;\r\n\t\t\tfor (let i = 0; i < inputLine.length; i++) {\r\n\t\t\t\tif (inputLine[i] === \";\") {\r\n\t\t\t\t\tif (!isInsideString) {\r\n\t\t\t\t\t\tinputObject.lineExpression = inputLine.substring(0, i);\r\n\t\t\t\t\t\tinputObject.lineComment = { comment: inputLine.substring(i).substring(1), position: i + inputObject.expressionPosition };\r\n\t\t\t\t\t\treturn inputObject;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (inputLine[i] === '\"') {\r\n\t\t\t\t\tisInsideString = !isInsideString;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn inputObject;\r\n\t}\r\n\r\n\t//Extract Indentation.\r\n\t//Assumes inputLine has extracted comments/spacing.\r\n\tprivate _extractIndentation(inputObject: LineObject): LineObject {\r\n\r\n\t\tlet lineIndentationArray: string[] = [];\r\n\t\tlet lineIndentation = 0;\r\n\t\tlet inputLine = inputObject.lineExpression!;\r\n\t\tlet spacer = '';\r\n\t\tlet i = 0;\r\n\t\tfor (i = 0; i <= inputLine.length; i++) {\r\n\t\t\tlet char = inputLine[i];\r\n\t\t\tif (char === \".\") {\r\n\t\t\t\tif (lineIndentation > 0) {\r\n\t\t\t\t\tlineIndentationArray.push(spacer);\r\n\t\t\t\t}\r\n\t\t\t\tlineIndentation++;\r\n\t\t\t\tspacer = '';\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (char === \" \" || char === \"\\t\") {\r\n\t\t\t\tspacer += char;\r\n\t\t\t} else {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (lineIndentation > 0) {\r\n\t\t\tlineIndentationArray.push(spacer);\r\n\t\t\tinputObject.lineExpression = inputLine.substring(i);\r\n\t\t\tinputObject.expressionPosition! += i;\r\n\t\t\tinputObject.lineIndentationArray = lineIndentationArray;\r\n\t\t}\r\n\t\treturn inputObject;\r\n\t}\r\n\r\n\t//Extract M-Commands.\r\n\t//Assumes inputLine has extracted comments/spacing/indentation.\r\n\tprivate _extractCommands(inputObject: LineObject): LineObject {\r\n\r\n\t\tlet tmpFunction: TmpFunction;\r\n\t\tlet tmpFunctionArray: Array<TmpFunction> = [];\r\n\t\t//Divide Routines and Arguments.\r\n\t\tlet splitLine = this._splitCommandsAndArguments(inputObject);\r\n\t\t//Loop, even is function, odd is arguments.\r\n\t\tlet i = 0;\r\n\t\ttmpFunction = { mCommand: '', mPostCondition: '', mArguments: '', cmdPosition: 0, argPosition: 0, pcPosition: 0 }\r\n\t\twhile (i < splitLine.length) {\r\n\t\t\tif (i % 2 === 0) {\r\n\t\t\t\ttmpFunction.mCommand = splitLine[i].command;\r\n\t\t\t\ttmpFunction.cmdPosition = splitLine[i].position;\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttmpFunction.mArguments = splitLine[i].command;\r\n\t\t\t\ttmpFunction.argPosition = splitLine[i].position;\r\n\r\n\t\t\t\t//Custom handler for trailing argument spacing.\r\n\t\t\t\t//Go until splitline hits a non empty val.\r\n\t\t\t\tlet ii = i + 1;\r\n\t\t\t\twhile (ii < splitLine.length) {\r\n\t\t\t\t\tif (splitLine[ii].command === \"\") {\r\n\t\t\t\t\t\tsplitLine.splice(ii, 1);\r\n\t\t\t\t\t\t//tmpFunction.mArguments = tmpFunction.mArguments + \" \";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttmpFunctionArray.push(tmpFunction);\r\n\t\t\t\ttmpFunction = { mCommand: '', mPostCondition: '', mArguments: '', cmdPosition: 0, argPosition: 0, pcPosition: 0 }\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t\t//Last command doesn't always require parameter, so if odd number of pairs, push it.\r\n\t\tif (splitLine.length % 2 !== 0) {\r\n\t\t\ttmpFunction.mCommand = splitLine[splitLine.length - 1].command;\r\n\t\t\ttmpFunction.cmdPosition = splitLine[splitLine.length - 1].position;\r\n\t\t\ttmpFunction.mArguments = '';\r\n\t\t\ttmpFunction.argPosition = inputObject.lineExpression!.length;\r\n\t\t\ttmpFunctionArray.push(tmpFunction);\r\n\t\t}\r\n\r\n\r\n\t\t//Extract and output Post Conditionals.\r\n\t\tlet postConditionFunctionArray = this._extractPostConditional(tmpFunctionArray);\r\n\t\tif (postConditionFunctionArray.length > 0) {\r\n\t\t\tinputObject.lineRoutines = postConditionFunctionArray;\r\n\t\t}\r\n\t\treturn inputObject;\r\n\t}\r\n\t//Divide commands and arguments into array, used by extractRoutines.\r\n\tprivate _splitCommandsAndArguments(inputObject: LineObject): LineComand[] {\r\n\r\n\t\tlet lineCommands: LineComand[] = [];\r\n\t\tlet tmpCursor = 0;\r\n\t\tlet isInsideString = false;\r\n\t\tlet inputLine = inputObject.lineExpression!;\r\n\t\tlet start = inputObject.expressionPosition!;\r\n\t\tfor (let i = 0; i < inputLine.length; i++) {\r\n\r\n\t\t\t//Ensure space isn't quoted.\r\n\t\t\tif (inputLine[i] === '\"') {\r\n\t\t\t\tisInsideString = !isInsideString;\r\n\t\t\t}\r\n\t\t\t//Flag spaces/tabs as dividers.\r\n\t\t\tif ((inputLine[i] === \" \" || inputLine[i] === \"\\t\") && !isInsideString) {\r\n\t\t\t\t//If has content, push.\r\n\t\t\t\tif (inputLine.substring(tmpCursor, i).length > 0) {\r\n\t\t\t\t\tlineCommands.push({ command: inputLine.substring(tmpCursor, i), position: start + tmpCursor });\r\n\t\t\t\t\t//Otherwise, push empty commands.\r\n\t\t\t\t} else if (inputLine.substring(tmpCursor, i).length === 0 && (inputLine.substring(tmpCursor - 1, tmpCursor) === \" \" || inputLine.substring(tmpCursor - 1, tmpCursor) === \"\\t\")) {\r\n\t\t\t\t\tlineCommands.push({ command: inputLine.substring(tmpCursor, i), position: start + tmpCursor });\r\n\t\t\t\t}\r\n\t\t\t\ttmpCursor = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet i = inputLine.length;\r\n\t\tif (inputLine.substring(tmpCursor, i).length > 0) {\r\n\t\t\tlineCommands.push({ command: inputLine.substring(tmpCursor, i), position: start + tmpCursor });\r\n\t\t\t//Gather empty commands from end of line.\r\n\t\t} else if (i === tmpCursor && (inputLine.substring(i - 1, i) === \" \" || inputLine.substring(i - 1, i) === \"/t\")) {\r\n\t\t\tlineCommands.push({ command: '', position: start + tmpCursor });\r\n\t\t}\r\n\t\treturn lineCommands;\r\n\t}\r\n\t//Extracts Post-Conditionals from Routines, used by extractRoutines.\r\n\tprivate _extractPostConditional(tmpFunctionArray: TmpFunction[]): TmpFunction[] {\r\n\r\n\t\t//Assign to new variable to truncate Routines.\r\n\t\tlet tmpObject = tmpFunctionArray;\r\n\t\tfor (let i = 0; i < tmpObject.length; i++) {\r\n\t\t\t//Colon indicates Post-Conditionals.\r\n\t\t\tlet tmpIndex = tmpObject[i].mCommand!.indexOf(\":\");\r\n\t\t\tif (tmpIndex > -1) {\r\n\t\t\t\ttmpObject[i].mPostCondition = tmpObject[i].mCommand.substring(tmpIndex + 1);\r\n\t\t\t\ttmpObject[i].mCommand = tmpObject[i].mCommand.substring(0, tmpIndex);\r\n\t\t\t\ttmpObject[i].pcPosition = tmpObject[i].cmdPosition + tmpIndex + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn tmpObject;\r\n\t}\r\n\t/**\r\n\t * Divde inputString into Label, commands and comments and return corresponding LineObject\r\n\t * @param inputString\r\n\t * @returns LineObject\r\n\t */\r\n\tpublic parseLine(inputString: string): LineObject {\r\n\r\n\t\tlet tmpObject: LineObject = { lineExpression: inputString, expressionPosition: 0 };\r\n\r\n\t\t//Parsing must be performed sequentially.\r\n\t\ttmpObject = this._extractLabel(tmpObject);\r\n\t\tif (tmpObject.errorText) {\r\n\t\t\treturn tmpObject;\r\n\t\t}\r\n\t\ttmpObject = this._extractComment(tmpObject);\r\n\t\ttmpObject = this._extractIndentation(tmpObject);\r\n\t\ttmpObject = this._extractCommands(tmpObject);\r\n\r\n\t\t//Line Expression is no longer needed.\r\n\t\ttmpObject.lineExpression = '';\r\n\t\treturn tmpObject;\r\n\t}\r\n\t/**\r\n\t *\r\n\t * @param filename\r\n\t * @returns Array with list of errors or an empty array if no errors found in file\r\n\t */\r\n\tpublic checkFile(filename: string): ErrorInformation[] {\r\n\t\tlet errlist: ErrorInformation[] = [];\r\n\t\tlet content: string;\r\n\t\ttry {\r\n\t\t\tcontent = fs.readFileSync(filename, \"utf8\");\r\n\t\t} catch (err) {\r\n\t\t\terrlist.push({ text: 'File read error: ' + filename, position: 0, line: 0 });\r\n\t\t\treturn errlist;\r\n\t\t}\r\n\t\tlet lines = content.split('\\n');\r\n\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\tlines[i] = lines[i].replace('\\r', '');\r\n\t\t\tlet info = this.checkLine(lines[i]);\r\n\t\t\tif (info.text !== '') {\r\n\t\t\t\tinfo.line = i + 1;\r\n\t\t\t\terrlist.push(info);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn errlist;\r\n\t}\r\n\tpublic analyzeLines(input: string): Array<Array<LineToken>> {\r\n\t\tlet lines = input.split('\\n');\r\n\t\tlet linetokens: Array<Array<LineToken>> = [];\r\n\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\tlines[i] = lines[i].replace('\\r', '');\r\n\t\t\tthis.checkLine(lines[i]);\r\n\t\t\tlinetokens[i] = this._tokens;\r\n\t\t}\r\n\t\treturn linetokens;\r\n\t}\r\n\tprivate _splitLabelAndParameters(label: string) {\r\n\t\tif (label.indexOf('(') === -1) {\r\n\t\t\tthis._tokens.push({ name: label, position: 0, type: TokenType.label });\r\n\t\t} else {\r\n\t\t\tlet labelparts = label.split('(');\r\n\t\t\tlet labeltext = labelparts[0];\r\n\t\t\tthis._tokens.push({ name: labeltext, position: 0, type: TokenType.label });\r\n\t\t\tlet parameters = labelparts[1].split(')')[0];\r\n\t\t\tlet parameterVars = parameters.split(',');\r\n\t\t\tlet position = labeltext.length + 1\t\t// Position = lengths of Label + trailing \"(\"\r\n\t\t\tfor (let i = 0; i < parameterVars.length; i++) {\r\n\t\t\t\tthis._tokens.push({ name: parameterVars[i], position, type: TokenType.local });\r\n\t\t\t\tposition += parameterVars[i].length + 1\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tpublic constructLine(inputObject: LineObject): string {\r\n\t\tlet line: string = \"\";\r\n\t\tline = renderer.appendLabel(inputObject, line);\r\n\t\tline = renderer.appendIndentation(inputObject, line);\r\n\t\tline = renderer.appendRoutines(inputObject, line);\r\n\t\tline = renderer.appendComment(inputObject, line);\r\n\t\treturn line;\r\n\t}\r\n\tpublic expandCompressFile(filename: string, doExpand: boolean): string {\r\n\t\tif (doExpand === undefined) { doExpand = false; }\r\n\t\tlet content: string;\r\n\t\tlet lines: string[] = [];\r\n\t\ttry {\r\n\t\t\tcontent = fs.readFileSync(filename, \"utf8\");\r\n\t\t} catch (err) {\r\n\t\t\tlines[0] = 'File read error: ';\r\n\t\t\treturn lines[0];\r\n\t\t}\r\n\t\tlines = content.split('\\n');\r\n\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\tlines[i] = lines[i].replace('\\r', '');\r\n\t\t\tlet info = this.expandCompressLine(lines[i], doExpand);\r\n\t\t\tif (info.errorText !== '') {\r\n\t\t\t\tlines = [];\r\n\t\t\t\tlines[0] = \"Error in Line \" + i + \" : \" + info.errorText;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tlines[i] = info.lineText;\r\n\t\t}\r\n\t\treturn lines.join(\"\\n\");\r\n\t}\r\n\tpublic expandCompressLine(line: string, doExpand: boolean): ModifiedLine {\r\n\t\tif (doExpand === false && this.cmdCompressions === undefined) {\r\n\t\t\tthis.cmdCompressions = {};\r\n\t\t\tObject.keys(cmdExpansions).forEach(shortCommand => {\r\n\t\t\t\tthis.cmdCompressions[cmdExpansions[shortCommand]] = shortCommand;\r\n\t\t\t});\r\n\t\t\tthis.funcCompressions = {};\r\n\t\t\tObject.keys(funcExpansions).forEach(shortFunction => {\r\n\t\t\t\tthis.funcCompressions[funcExpansions[shortFunction]] = shortFunction;\r\n\t\t\t});\r\n\t\t\tthis.isvCompressions = {};\r\n\t\t\tObject.keys(isvExpansions).forEach(shortIsv => {\r\n\t\t\t\tthis.isvCompressions[isvExpansions[shortIsv]] = shortIsv;\r\n\t\t\t});\r\n\t\t}\r\n\t\tlet outline: ModifiedLine = { lineText: line, errorText: '' }\r\n\t\tlet errorinfo = this.checkLine(line);\r\n\t\tlet outText = line;\r\n\t\tif (errorinfo.text !== \"\") {\r\n\t\t\toutline.errorText = errorinfo.text;\r\n\t\t} else {\r\n\t\t\tlet posCorrector = 0;\r\n\t\t\tfor (let i = 0; i < this._tokens.length; i++) {\r\n\t\t\t\tlet token = this._tokens[i];\r\n\t\t\t\tif (token.hasOwnProperty(\"longName\")) {\r\n\t\t\t\t\tlet name = token.name;\r\n\t\t\t\t\tlet longName = name;\r\n\t\t\t\t\tlet position = token.position;\r\n\t\t\t\t\tif (doExpand) {\r\n\t\t\t\t\t\tlongName = token.longName!.toLowerCase();\r\n\t\t\t\t\t\tif (longName[0] === \"$\") {\r\n\t\t\t\t\t\t\tlongName = \"$\" + longName[1].toUpperCase() + longName.substring(2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlongName = longName[0].toUpperCase() + longName.substring(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet checkName = name.toUpperCase();\r\n\t\t\t\t\t\tif (name[0] === \"$\") { checkName = name.substring(1); }\r\n\t\t\t\t\t\tif (token.type === TokenType.keyword) {\r\n\t\t\t\t\t\t\tif (this.cmdCompressions[checkName] !== undefined) {\r\n\t\t\t\t\t\t\t\tlongName = this.cmdCompressions[checkName];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (token.type === TokenType.ifunction) {\r\n\t\t\t\t\t\t\tif (this.funcCompressions[checkName] !== undefined) {\r\n\t\t\t\t\t\t\t\tlongName = \"$\" + this.funcCompressions[checkName];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (token.type === TokenType.sysvariable) {\r\n\t\t\t\t\t\t\tif (this.isvCompressions[checkName] !== undefined) {\r\n\t\t\t\t\t\t\t\tlongName = \"$\" + this.isvCompressions[checkName];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (name.length !== longName.length) {\r\n\t\t\t\t\t\toutText = outText.substring(0, posCorrector + position) + longName + outText.substring(posCorrector + position + name.length);\r\n\t\t\t\t\t\tposCorrector += longName.length - name.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\toutline.lineText = outText;\r\n\t\treturn outline;\r\n\t}\r\n\tpublic checkLine(line: string): ErrorInformation {\r\n\t\tthis._tokens = [];\r\n\t\tthis.linePosition = 0;\r\n\t\tlet parsed = this.parseLine(line);\r\n\t\tif (parsed.lineLabel) {\r\n\t\t\tthis._splitLabelAndParameters(parsed.lineLabel);\r\n\t\t}\r\n\t\tif (parsed.lineIndentationArray) {\r\n\t\t\tlet position = 0;\r\n\t\t\tif (parsed.lineLeadSpace) {\r\n\t\t\t\tposition += parsed.lineLeadSpace.length;\r\n\t\t\t}\r\n\t\t\tif (parsed.lineLabel) {\r\n\t\t\t\tposition += parsed.lineLabel.length;\r\n\t\t\t}\r\n\t\t\tthis._tokens.push({ name: \".\".repeat(parsed.lineIndentationArray.length), type: TokenType.intendation, position });\r\n\t\t}\r\n\t\tif (parsed.lineComment) {\r\n\t\t\tthis._tokens.push({ name: parsed.lineComment.comment, position: parsed.lineComment.position, type: TokenType.comment });\r\n\t\t}\r\n\t\tlet result: ErrorInformation = { text: '', position: 0 }\r\n\t\tif (parsed.lineRoutines) {\r\n\t\t\tfor (let i = 0; i < parsed.lineRoutines.length; i++) {\r\n\t\t\t\tlet code = parsed.lineRoutines[i];\r\n\t\t\t\tif (code.mCommand.length > 0) {\r\n\t\t\t\t\tlet cmd = code.mCommand.toUpperCase();\r\n\t\t\t\t\tif (cmd === 'H') {\r\n\t\t\t\t\t\tif (code.mArguments === '') {\r\n\t\t\t\t\t\t\tcmd = 'HALT';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcmd = 'HANG';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (cmd.match(command)) {\r\n\t\t\t\t\t\tlet longcmd = cmd;\r\n\t\t\t\t\t\tif (cmdParams[cmd] === undefined) {\r\n\t\t\t\t\t\t\tlongcmd = cmdExpansions[cmd];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._tokens.push({\r\n\t\t\t\t\t\t\tname: code.mCommand,\r\n\t\t\t\t\t\t\ttype: TokenType.keyword,\r\n\t\t\t\t\t\t\tposition: code.cmdPosition,\r\n\t\t\t\t\t\t\tlongName: longcmd,\r\n\t\t\t\t\t\t\tisPostconditioned: code.mPostCondition !== \"\"\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (longcmd === undefined) {\r\n\t\t\t\t\t\t\tresult.text = 'Unknown Command';\r\n\t\t\t\t\t\t\tresult.position = code.cmdPosition;\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresult = this._checkCommand(line, longcmd, code);\r\n\t\t\t\t\t\t} catch (result) {\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn { text: 'Invalid Command', position: code.cmdPosition }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tpublic getTokenAt(line: string, position: number): LineToken | undefined {\r\n\t\tthis.checkLine(line);\r\n\t\tlet memPosition = 0\r\n\t\tlet tokenId = -1\r\n\t\tfor (let i = 0; i < this._tokens.length; i++) {\r\n\t\t\tlet token = this._tokens[i];\r\n\t\t\tif (token.position >= memPosition && token.position < position) {\r\n\t\t\t\tmemPosition = token.position;\r\n\t\t\t\ttokenId = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tokenId === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn this._tokens[tokenId];\r\n\t}\r\n\tprivate _checkEntryRefAndPostcondition(line: string, position: number, withParams: boolean): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tresult = this._checkEntryRef(line, result.position, withParams);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tthis._tokens.push({ type: TokenType.argPostcondition, name: \":\", position });\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkEntryRef(line: string, position: number, withParams: boolean, isUserfunction?: boolean): ErrorInformation {\r\n\t\tif (isUserfunction === undefined) {\r\n\t\t\tisUserfunction = false;\r\n\t\t}\r\n\t\tlet tokentype: TokenType = TokenType.entryref;\r\n\t\tif (isUserfunction) {\r\n\t\t\ttokentype = TokenType.exfunction;\r\n\t\t}\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line[result.position] === '@') { //Check Indirection\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Atom, line, ++result.position);\r\n\t\t\tif (line[result.position] === '+') { //Check Label+Offset\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t}\r\n\t\t\tif (line[result.position] === '^') { //Check if it's a Label like xxx^yyy\r\n\t\t\t\tif (line[result.position + 1] === '@') { // or a Label xxx^@expr\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Atom, line, ++result.position);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (line.substring(result.position).match(entryref)) {\r\n\t\t\t\t\t\tlet ref = line.substring(result.position).match(entryref)![0];\r\n\t\t\t\t\t\tresult.position += ref.length;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.text = 'Invalid EntryRef';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (line.substring(result.position, result.position + 2) === '@(') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t}\r\n\t\t} else if (line.substring(result.position).match(entryref)) { //No Indirection and a valid entryref\r\n\t\t\tlet ref = line.substring(result.position).match(entryref)![0];\r\n\t\t\tlet merkpos = result.position;\r\n\t\t\tresult.position += ref.length;\r\n\t\t\tlet char = line[result.position];\r\n\t\t\tif (result.position >= line.length) {\r\n\t\t\t\tif (ref.length > 0) {\r\n\t\t\t\t\tif (ref[0] === '&') {\r\n\t\t\t\t\t\ttokentype = TokenType.nonMfunction;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._tokens.push({ 'type': tokentype, name: ref, position: merkpos + this.linePosition });\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.text = 'Missing Entryref';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (ref.indexOf('^') === -1 && char === '+') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\t//ref += \"+X\";\r\n\t\t\t\tif (result.position >= line.length) {\r\n\t\t\t\t\tthis._tokens.push({ 'type': tokentype, name: ref, position: merkpos + this.linePosition });\r\n\t\t\t\t\treturn result\r\n\t\t\t\t}\r\n\t\t\t\tif (line.substring(result.position).match(routineref)) {\r\n\t\t\t\t\tlet routine = line.substring(result.position).match(routineref)![0];\r\n\t\t\t\t\tref += routine;\r\n\t\t\t\t\tresult.position += routine.length;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._tokens.push({ 'type': tokentype, name: ref, position: merkpos + this.linePosition });\r\n\t\t} else {\r\n\t\t\tresult.text = 'Invalid Entryref';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\tif (line[result.position] === '(' && withParams) {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.eArgument, line, ++result.position, 1);\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\tprivate _checkVar(line: string, position: number, globalOk?: boolean, indexOk?: boolean, isExluded?: boolean): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position, indexFound: false, globalFound: false, indirectionFound: false };\r\n\t\tlet varFound = false;\r\n\t\tif (globalOk === undefined) {\r\n\t\t\tglobalOk = true;\r\n\t\t}\r\n\t\tif (indexOk === undefined) {\r\n\t\t\tindexOk = true;\r\n\t\t}\r\n\t\tif (isExluded === undefined) {\r\n\t\t\tisExluded = false;\r\n\t\t}\r\n\t\tif (line[result.position] === '@') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Atom, line, ++result.position);\r\n\t\t\tresult.indirectionFound = true;\r\n\t\t\tvarFound = true;\r\n\t\t\tif (line.substring(result.position, result.position + 2) === '@(') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (line.substring(result.position).match(gvn) || line.substring(result.position, result.position + 2) === '^|') {\r\n\t\t\t\tif (!globalOk) {\r\n\t\t\t\t\tresult.text = 'Global not allowed here';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\tresult.globalFound = true;\r\n\t\t\t\tif (line.substring(result.position, result.position + 2) === '^|') {\r\n\t\t\t\t\tresult.position += 2\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tresult.globalFound = true;\r\n\t\t\t\t\tif (line[result.position] === ',') {\r\n\t\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\t\t\tresult.globalFound = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line[result.position] !== '|') {\r\n\t\t\t\t\t\tresult.text = 'Missing \"|\"';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t\tif (line.substring(result.position).match(lvn)) {\r\n\t\t\t\t\t\tlet global = line.substring(result.position).match(lvn)![0];\r\n\t\t\t\t\t\tthis._tokens.push({ name: global, type: TokenType.global, position: result.position + this.linePosition });\r\n\t\t\t\t\t\tvarFound = true;\r\n\t\t\t\t\t\tresult.position += global.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet global = line.substring(result.position).match(gvn)![0];\r\n\t\t\t\t\tthis._tokens.push({ name: global, type: TokenType.global, position: result.position + this.linePosition });\r\n\t\t\t\t\tvarFound = true;\r\n\t\t\t\t\tresult.position += global.length;\r\n\t\t\t\t}\r\n\t\t\t} else if (line.substring(result.position).match(lvn)) {  // local variable found\r\n\t\t\t\tlet local = line.substring(result.position).match(lvn)![0];\r\n\t\t\t\tthis._tokens.push({ name: local, type: TokenType.local, position: result.position + this.linePosition, isExcludedVariable: isExluded });\r\n\t\t\t\tvarFound = true;\r\n\t\t\t\tresult.position += local.length;\r\n\t\t\t} else if (line.substring(result.position, result.position + 2) === '^(') {\r\n\t\t\t\tresult.globalFound = true;\r\n\t\t\t\tif (!globalOk) {\r\n\t\t\t\t\tresult.text = 'Global not allowed here';\r\n\t\t\t\t\tvarFound = false;\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\tvarFound = true;\r\n\t\t\t\tresult.position++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (varFound && line[result.position] === '(') {\r\n\t\t\tif (!indexOk) {\r\n\t\t\t\tresult.text = 'Index not allowed here';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t\tlet provResult = this.evaluateExpression(expressiontype.Index, line, ++result.position, 1);\r\n\t\t\tresult.position = provResult.position;\r\n\t\t\tresult.indexFound = true;\r\n\t\t}\r\n\t\tif (!varFound) {\r\n\t\t\tresult.text = 'Name missing';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkBreak(line: string, position: number): ErrorInformation {\r\n\t\t//[expr[:tvexpr][,...]]\r\n\t\tlet result = this.evaluateExpression(expressiontype.Standard, line, position);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkKeyword(keywords: RegExp, line: string, position: number): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line.substring(result.position).match(keywords)) {\r\n\t\t\tlet keyword = line.substring(result.position).match(keywords)![0];\r\n\t\t\tresult.position += keyword.length;\r\n\t\t\tif (keyword.slice(-1) === '=') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult.text = 'No valid Keyword for command found';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkOUC(keywords: RegExp, line: string, position: number): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\t//expr[:(keyword[=expr][:...])][,...]\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] === '(') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tlet braceComplete = false;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tresult = this._checkKeyword(keywords, line, result.position);\r\n\t\t\t\t\tbraceComplete = true;\r\n\t\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbraceComplete = false;\r\n\t\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\t\tif (!braceComplete) {\r\n\t\t\t\t\tresult.text = 'Missing \")\" or Keyword';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\t\tresult = this._checkKeyword(keywords, line, result.position);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (keywords === openkeywords && line[result.position] === ':') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (keywords === openkeywords && line[result.position] === ':') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkFor(line: string, position: number, argNumber: number): ErrorInformation {\r\n\t\t//[lvn=expr[:numexpr1[:numexpr2]][,...]]]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (argNumber > 1) { //If it's not the first Argument the Options are possible: F I=1:2:3,4 or F I=1:2:3,I=4:1:6\r\n\t\t\ttry {\r\n\t\t\t\tlet provResult = this._checkVar(line, result.position, false);\r\n\t\t\t\tif (line[provResult.position] === '\"') {\r\n\t\t\t\t\tresult.position = provResult.position + 1;\r\n\t\t\t\t}\r\n\t\t\t} catch (provResult) {\r\n\t\t\t\tif (provResult.text !== \"Name missing\") {\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult = this._checkVar(line, result.position, false);\r\n\t\t\tif (line[result.position] !== '=') {\r\n\t\t\t\tresult.text = 'Missing equal-sign';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t\tresult.position++;\r\n\t\t}\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\tif (line[result.position] !== ':') {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\tif (line[result.position] !== ':') {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkJobKeyword(line: string, position: number): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line.substring(result.position).match(jobkeywords)) {\r\n\t\t\tlet keyword = line.substring(result.position).match(jobkeywords)![0];\r\n\t\t\tresult.position += keyword.length;\r\n\t\t\tif (keyword[keyword.length - 1] === '=') {\r\n\t\t\t\tif (line.substring(result.position).match(strlit)) {\r\n\t\t\t\t\tlet stringlit = line.substring(result.position).match(strlit)![0];\r\n\t\t\t\t\tresult.position += stringlit.length;\r\n\t\t\t\t\tif (stringlit.length === 0) {\r\n\t\t\t\t\t\tresult.text = 'String literal expected';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.text = 'String literal expected';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult.text = 'No valid Keyword for JOB Command';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkJob(line: string, position: number): ErrorInformation {\r\n\t\t//entryref[(expr[,...])][:[(keyword[=value][:...])][:numexpr]][,...]\r\n\t\tlet result = this._checkEntryRef(line, position, true);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] === '(') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tlet braceComplete = false;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tresult = this._checkJobKeyword(line, result.position);\r\n\t\t\t\t\tbraceComplete = true;\r\n\t\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbraceComplete = false;\r\n\t\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\t\tif (!braceComplete) {\r\n\t\t\t\t\tresult.text = 'Missing \")\" or Keyword';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\t\tresult = this._checkJobKeyword(line, result.position);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (line[result.position] === ':') { //Numeric expression for Job-Timeout\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkKill(line: string, position: number): ErrorInformation {\r\n\t\t//[glvn | (lvn[,...]) | *lname | *lvn ]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line[result.position] === '(') {\r\n\t\t\tresult.position++;\r\n\t\t\tlet braceComplete = false;\r\n\t\t\tdo {\r\n\t\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t\t\tbraceComplete = true;\r\n\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line[result.position] !== ',') {\r\n\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t}\r\n\t\t\t\tbraceComplete = false;\r\n\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\tif (!braceComplete) {\r\n\t\t\t\tresult.text = 'Missing \")\" or Name';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkLock(line: string, position: number, isLock: boolean): ErrorInformation {\r\n\t\t//[[-|+]nref|(nref[,...])[:numexpr] [,...]]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif ((line[result.position] === '+' || line[result.position] === '-') && isLock) {\r\n\t\t\tresult.position++;\r\n\t\t}\r\n\t\tif (line[result.position] === '(') {\r\n\t\t\tresult.position++;\r\n\t\t\tlet braceComplete = false;\r\n\t\t\tdo {\r\n\t\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t\t\tbraceComplete = true;\r\n\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line[result.position] !== ',') {\r\n\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t}\r\n\t\t\t\tbraceComplete = false;\r\n\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\tif (!braceComplete) {\r\n\t\t\t\tresult.text = 'Missing \")\" or Name';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t}\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkMerge(line: string, position: number): ErrorInformation {\r\n\t\t//glvn=glvn[,...]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tresult = this._checkVar(line, result.position);\r\n\t\tif (line[result.position] !== '=') {\r\n\t\t\tresult.text = 'Equal-Sign expected';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\tresult = this._checkVar(line, ++result.position);\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkNew(line: string, position: number): ErrorInformation {\r\n\t\t//[[(]lvn[,...][)][,...]]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line[result.position] === '(') {\r\n\t\t\tresult.position++;\r\n\t\t\tlet braceComplete = false;\r\n\t\t\tdo {\r\n\t\t\t\tif (line.substring(result.position).match(isv)) {\r\n\t\t\t\t\tlet sysvariable = line.substring(result.position).match(isv)![0];\r\n\t\t\t\t\tlet longName = sysvariable.toUpperCase();\r\n\t\t\t\t\tif (isvExpansions[longName.substring(1)] !== undefined) {\r\n\t\t\t\t\t\tlongName = \"$\" + isvExpansions[longName.substring(1)];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._tokens.push({ name: sysvariable, position: position + this.linePosition, type: TokenType.sysvariable, longName, isExcludedVariable: true });\r\n\t\t\t\t\tresult.position += sysvariable.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this._checkVar(line, result.position, false, false, true);\r\n\t\t\t\t}\r\n\t\t\t\tbraceComplete = true;\r\n\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (line[result.position] !== ',') {\r\n\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t}\r\n\t\t\t\tbraceComplete = false;\r\n\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\tif (!braceComplete) {\r\n\t\t\t\tresult.text = 'Missing \")\" or Name';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (line.substring(result.position).match(isv)) {\r\n\t\t\t\tlet sysvariable = line.substring(result.position).match(isv)![0];\r\n\t\t\t\tlet longName = sysvariable.toUpperCase();\r\n\t\t\t\tif (isvExpansions[longName.substring(1)] !== undefined) {\r\n\t\t\t\t\tlongName = \"$\" + isvExpansions[longName.substring(1)];\r\n\t\t\t\t}\r\n\t\t\t\tthis._tokens.push({ name: sysvariable, position: position + this.linePosition, type: TokenType.sysvariable, longName, isExcludedVariable: false });\r\n\t\t\t\tresult.position += sysvariable.length;\r\n\t\t\t} else {\r\n\t\t\t\tresult = this._checkVar(line, result.position, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkRead(line: string, position: number): ErrorInformation {\r\n\t\t//(glvn|*glvn|glvn#intexpr)[:numexpr]|strlit|fcc[,...]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tlet starDetected = false;\r\n\t\tlet mat: string[] | null;\r\n\t\tif (line[result.position] === '*') {\r\n\t\t\tresult.position++;\r\n\t\t\tstarDetected = true;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tlet provResult = this._checkVar(line, result.position);\r\n\t\t\tresult.position = provResult.position;\r\n\t\t\tif (line[result.position] === '#') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\tif (result.text !== '') {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t} catch {\r\n\t\t\tif (starDetected) {\r\n\t\t\t\tresult.text = 'Variable expected';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t\tif (mat = line.substring(result.position).match(strlit)) {\r\n\t\t\t\tresult.position += mat[0].length;\r\n\t\t\t\treturn result;\r\n\t\t\t} else if (mat = line.substring(result.position).match(/^(#|!)+/)) {\r\n\t\t\t\tresult.position += mat[0].length;\r\n\t\t\t}\r\n\t\t\tif (line[result.position] === '?') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkSet(line: string, position: number): ErrorInformation {\r\n\t\t//setleft=expr | (setleft[,...])=expr | *lvn=lname | aliascontainer[,...]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tlet mat: string[] | null;\r\n\t\tlet isBraced = false;\r\n\t\tif (line[result.position] === '*') { //*lvn=lname\r\n\t\t\tresult = this._checkVar(line, ++result.position, false);\r\n\t\t\tif (line[result.position] !== '=') {\r\n\t\t\t\tresult.text = 'Equal-Sign expected';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t\tresult = this._checkVar(line, ++result.position, false);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tif (line[result.position] === '(') {\r\n\t\t\tisBraced = true;\r\n\t\t\tresult.position++;\r\n\t\t}\r\n\t\tdo {\r\n\t\t\tif (line[result.position] === '@') {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet provResult = this._checkVar(line, result.position);\r\n\t\t\t\t\tresult.position = provResult.position;\r\n\t\t\t\t\tif (this._isEndOfArgument(line, result.position) || line[result.position] === ',') {\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch {\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Atom, line, ++result.position);\r\n\t\t\t\t\tif (this._isEndOfArgument(line, result.position) || line[result.position] === ',') {\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (mat = line.substring(result.position).match(/^\\$Z?(PIECE|P|EXTRACT|E)\\(/i)) {\r\n\t\t\t\tlet functionname = mat[0].substring(1, mat[0].length - 1).toUpperCase();\r\n\t\t\t\tresult.position += functionname.length + 2\r\n\t\t\t\tif (funcExpansions[functionname] !== undefined) {\r\n\t\t\t\t\tthis._tokens.push({ name: \"$\" + functionname, position: result.position - functionname.length - 2, type: TokenType.ifunction, longName: \"$\" + funcExpansions[functionname] });\r\n\t\t\t\t\tfunctionname = funcExpansions[functionname];\r\n\t\t\t\t}\r\n\t\t\t\tresult = this._checkFunction(functionname, line, result.position);\r\n\t\t\t} else if (mat = line.substring(result.position).match(isv)) {\r\n\t\t\t\tresult.position += mat[0].length;\r\n\t\t\t} else {\r\n\t\t\t\tresult = this._checkVar(line, result.position, true);\r\n\t\t\t}\r\n\t\t\tif (line[result.position] === ',' && isBraced) {\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (line[result.position] === ')' && isBraced) {\r\n\t\t\t\tisBraced = false;\r\n\t\t\t\tresult.position++;\r\n\t\t\t}\r\n\t\t} while (!this._isEndOfArgument(line, result.position) && isBraced);\r\n\t\tif (line[result.position] !== '=') {\r\n\t\t\tresult.text = 'Equal-Sign expected';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkTstart(line: string, position: number): ErrorInformation {\r\n\t\t//[([lvn...])|lvn|*|][:keyword|(keyword...)]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line[result.position] === '(') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] !== ')') {\r\n\t\t\t\tlet braceComplete = false;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tbraceComplete = true;\r\n\t\t\t\t\tresult = this._checkVar(line, result.position, false, false);\r\n\t\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line[result.position] !== ',') {\r\n\t\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbraceComplete = false;\r\n\t\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\t\tif (!braceComplete) {\r\n\t\t\t\t\tresult.text = 'Missing \")\" or Name';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (line[result.position] !== '*') {\r\n\t\t\t\tresult = this._checkVar(line, result.position, false, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] === '(') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tlet braceComplete = false;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tresult = this._checkKeyword(tstartkeywords, line, result.position);\r\n\t\t\t\t\tbraceComplete = true;\r\n\t\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\t\t\tresult.text = 'Unecpected Character';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.position++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbraceComplete = false;\r\n\t\t\t\t} while (result.position < line.length)\r\n\t\t\t\tif (!braceComplete) {\r\n\t\t\t\t\tresult.text = 'Missing \")\" or Keyword';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult = this._checkKeyword(tstartkeywords, line, result.position);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkView(line: string, position: number): ErrorInformation {\r\n\t\t//keyword[:expr[:...]][,...]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\twhile (line[result.position] === ':') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkWrite(line: string, position: number): ErrorInformation {\r\n\t\t//expr|*intexpr|fcc[,...]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tlet mat: string[] | null;\r\n\t\tif (line[result.position] === '*') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tif (line.substring(result.position).match(/^\\/(EOF|PASS|ACCEPT|LISTEN|L|TLS|WAIT|W)/i)) {\r\n\t\t\tresult = this._checkWriteSocket(line, result.position);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tif (mat = line.substring(result.position).match(/^(#|!)+/)) {\r\n\t\t\tresult.position += mat[0].length;\r\n\t\t\tif (line[result.position] === '?') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tif (line[result.position] === '?') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkWriteSocket(line: string, position: number): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tlet mat: string[] | null;\r\n\t\tif (mat = line.substring(result.position).match(/^\\/(EOF|PASS|ACCEPT|LISTEN|L|TLS|WAIT|W)/i)) {\r\n\t\t\tresult.position += mat[0].length;\r\n\t\t\tlet fname = mat![0].toUpperCase();\r\n\t\t\tif (fname === '/EOF') {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tif (line[result.position] !== '(') {\r\n\t\t\t\tif (!fname.match(/^\\/(LISTEN|L|WAIT|W)/)) {\r\n\t\t\t\t\tresult.text = fname + ' needs Parameter(s)';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tresult.position++;\r\n\t\t\tlet maxparams = 99;\r\n\t\t\tif (fname === '/LISTEN' || fname === '/L' || fname === '/WAIT' || fname === '/W') {\r\n\t\t\t\tmaxparams = 1;\r\n\t\t\t} else if (fname === '/TLS') {\r\n\t\t\t\tmaxparams = 4;\r\n\t\t\t}\r\n\t\t\tlet paramCount = 0;\r\n\t\t\tlet braceComplete = false;\r\n\t\t\tdo {\r\n\t\t\t\tparamCount++;\r\n\t\t\t\tif (paramCount > maxparams) {\r\n\t\t\t\t\tresult.text = 'More Parameters than expected';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\tif (fname === '/ACCEPT' && paramCount === 1) {\r\n\t\t\t\t\tif (line[result.position] !== '.') {\r\n\t\t\t\t\t\tresult.text = 'Local Variablereference expected (.lvn)';\r\n\t\t\t\t\t\tthrow result\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult = this._checkVar(line, ++result.position, false, false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t}\r\n\t\t\t\tbraceComplete = true;\r\n\t\t\t\tif (line[result.position] === ',') {\r\n\t\t\t\t\tbraceComplete = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (line[result.position] === ')') {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} while (!this._isEndOfArgument(line, result.position))\r\n\t\t\tif (!braceComplete) {\r\n\t\t\t\tresult.text = 'Missing Parameter or \")\"';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkXecute(line: string, position: number): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkZbreak(line: string, position: number): ErrorInformation {\r\n\t\t//[-]entryref[:[expr][:intexpr]][,...]\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tif (line[result.position] === '-') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] === '*') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t\tresult = this._checkEntryRef(line, result.position, false);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult.position++;\r\n\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t} else {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkZprint(line: string, position: number): ErrorInformation {\r\n\t\t// 'parameter': '[entryref[:label[+intexpr]][,...]'\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tresult = this._checkEntryRef(line, result.position, false);\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult = this._checkEntryRef(line, ++result.position, false);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkZstep(line: string, position: number): ErrorInformation {\r\n\t\t// 'parameter': '[keyword[:expr]][,...]'\r\n\t\tlet result: ErrorInformation = { text: '', position };\r\n\t\tlet mat: string[] | null;\r\n\r\n\t\tif (mat = line.substring(result.position).match(/^(INTO|OUTOF|OU|OVER|OV)/i)) {\r\n\t\t\tresult.position += mat.length;\r\n\t\t} else {\r\n\t\t\tresult.text = 'Invalid ZSTEP Qualifier';\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\tif (line[result.position] === ':') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkCommand(line: string, longcmd: string, code: TmpFunction): ErrorInformation {\r\n\t\tlet para = cmdParams[longcmd];\r\n\t\tlet position = code.pcPosition\r\n\t\tlet postcondPossible = para.postcondition;\r\n\t\tlet argFormat = para.parameter;\r\n\t\tlet result: ErrorInformation = { text: '', position: 0 }\r\n\t\tif (!postcondPossible && code.mPostCondition !== '') {\r\n\t\t\tthrow { text: 'Poscondition not allowed', position }\r\n\t\t} else if (code.mPostCondition !== '') {\r\n\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, position);\r\n\t\t}\r\n\t\tposition = code.argPosition;\r\n\t\tif (code.mArguments === '') {\r\n\t\t\tif (argFormat === '' || argFormat[0] === '[') {\r\n\t\t\t\treturn { text: '', position }\r\n\t\t\t} else {\r\n\t\t\t\tthrow { text: 'Argument for command ' + code.mCommand + \" required\", position }\r\n\t\t\t}\r\n\t\t}\r\n\t\tresult.position = position;\r\n\t\tlet argCount = 0;\r\n\t\tdo {\r\n\t\t\targCount++;\r\n\t\t\tswitch (longcmd) {\r\n\t\t\t\tcase 'BREAK':\r\n\t\t\t\t\tresult = this._checkBreak(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'CLOSE':\r\n\t\t\t\t\tresult = this._checkOUC(closekeywords, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'DO':\r\n\t\t\t\t\tresult = this._checkEntryRefAndPostcondition(line, result.position, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ELSE':\r\n\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\tthrow { text: 'No Argument expected', position }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'FOR':\r\n\t\t\t\t\tresult = this._checkFor(line, result.position, argCount);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'GOTO':\r\n\t\t\t\t\tresult = this._checkEntryRefAndPostcondition(line, result.position, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'HANG':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'IF':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'JOB':\r\n\t\t\t\t\tresult = this._checkJob(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'KILL':\r\n\t\t\t\t\tresult = this._checkKill(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'LOCK':\r\n\t\t\t\t\tresult = this._checkLock(line, result.position, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'MERGE':\r\n\t\t\t\t\tresult = this._checkMerge(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'NEW':\r\n\t\t\t\t\tresult = this._checkNew(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'OPEN':\r\n\t\t\t\t\tresult = this._checkOUC(openkeywords, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'QUIT':\r\n\t\t\t\t\tif (argCount > 1) {\r\n\t\t\t\t\t\tresult.text = 'Quit allows only one Argument'\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (line[result.position] === '*') {\r\n\t\t\t\t\t\t\tresult = this._checkVar(line, ++result.position, false);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'READ':\r\n\t\t\t\t\tresult = this._checkRead(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'SET':\r\n\t\t\t\t\tresult = this._checkSet(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'TROLLBACK':\r\n\t\t\t\t\tif (argCount > 1) {\r\n\t\t\t\t\t\tresult.text = 'TROLLBACK allows only one Argument'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'TSTART':\r\n\t\t\t\t\tresult = this._checkTstart(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'USE':\r\n\t\t\t\t\tresult = this._checkOUC(usekeywords, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'VIEW':\r\n\t\t\t\t\tresult = this._checkView(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'WRITE':\r\n\t\t\t\t\tresult = this._checkWrite(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'XECUTE':\r\n\t\t\t\t\tresult = this._checkXecute(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZALLOCATE':\r\n\t\t\t\t\tresult = this._checkLock(line, result.position, false);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZBREAK':\r\n\t\t\t\t\tresult = this._checkZbreak(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZCOMPILE':\r\n\t\t\t\t\t// 'abbreviation': 'ZCOM',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': 'expr[,...]'\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZDEALLOCATE':\r\n\t\t\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t\t\t\t// 'abbreviation': 'ZD',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[nref[,...]]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZEDIT':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\t// 'abbreviation': 'ZED',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[expr[,...]]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZGOTO':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\t\t\tresult = this._checkEntryRefAndPostcondition(line, ++result.position, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 'abbreviation': 'ZG',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[[intexpr][:entryref[:tvexpr]],...]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZHALT':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\t// 'abbreviation': 'ZHALT',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[intexpr]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZHELP':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 'abbreviation': 'ZH',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[expr1[:expr2],...]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZKILL':\r\n\t\t\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t\t\t\t// 'abbreviation': 'ZK',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': 'glvn'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZLINK':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 'abbreviation': 'ZL',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[expr1[:expr2][,...]]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZMESSAGE':\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\twhile (line[result.position] === ':') {\r\n\t\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, ++result.position);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 'abbreviation': 'ZM',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': 'intexpr[:expr2][:...]'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZPRINT':\r\n\t\t\t\t\t// 'abbreviation': 'ZP',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[entryref[:label[+intexpr]][,...]'\r\n\t\t\t\t\tresult = this._checkZprint(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZRUPDATE':\r\n\t\t\t\t\t// 'abbreviation': 'ZRUP',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': 'expr[,...]'\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZSHOW':\r\n\t\t\t\t\t// 'abbreviation': 'ZSH',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[expr[:glvn][,...]]'\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tif (line[result.position] === ':') {\r\n\t\t\t\t\t\tresult = this._checkVar(line, ++result.position);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZSTEP':\r\n\t\t\t\t\t// 'abbreviation': 'ZST',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[keyword[:expr]][,...]'\r\n\t\t\t\t\tresult = this._checkZstep(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZSYSTEM':\r\n\t\t\t\t\t// 'abbreviation': 'ZSY',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[expr][,...]]'\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZTCOMMIT':\r\n\t\t\t\t\t// 'abbreviation': 'ZTC',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': '[intexpr]'\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZTRIGGER':\r\n\t\t\t\t\t// 'abbreviation': 'ZTR',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': 'gvn'\r\n\t\t\t\t\tresult = this._checkVar(line, result.position, true, false);\r\n\t\t\t\t\tif (!result.globalFound) {\r\n\t\t\t\t\t\tresult.text = 'Global Variable expected';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZWITHDRAW':\r\n\t\t\t\t\t// 'abbreviation': 'ZWI',\r\n\t\t\t\t\t// 'postcondition': true,\r\n\t\t\t\t\t// 'parameter': 'glvn'\r\n\t\t\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ZWRITE':\r\n\t\t\t\t\t//'abbreviation': 'ZWR',\r\n\t\t\t\t\t//'postcondition': true,\r\n\t\t\t\t\t//'parameter': '[zwrglvn[,...]]'\r\n\t\t\t\t\t//not separately tested because ZWRITE is for debugging and should not appear in normal code\r\n\t\t\t\t\tresult.position += line.length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tresult.position = line.length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (line[result.position] === ',') {\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tif (result.position === line.length) {\r\n\t\t\t\t\tif (argFormat !== '' && argFormat[0] !== '[') {\r\n\t\t\t\t\t\tthrow { text: 'Argument for command ' + code.mCommand + \" required\", position: result.position }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (line[result.position] !== undefined) {\r\n\t\t\t\tlet char = line[result.position];\r\n\t\t\t\tif (char === \" \" || char === \"\\t\" || char === \";\") { break; }\r\n\t\t\t\tresult.text = 'Unexpected Character \"' + line[result.position] + '\"';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t} while (result.position < line.length)\r\n\t\treturn result;\r\n\t}\r\n\tprivate _checkFunction(longfunc: string, line: string, position: number): ErrorInformation {\r\n\t\tlet result: ErrorInformation = { text: '', position: position };\r\n\t\tlet params = funcParams[longfunc];\r\n\t\tif (params === undefined) {\r\n\t\t\tresult.text = \"Unknown Function \" + longfunc;\r\n\t\t\tthrow result;\r\n\t\t}\r\n\t\tlet minArguments = params.minparams !== undefined ? params.minparams : 1;\r\n\t\tlet formats = params.format !== undefined ? params.format.split(',') : undefined;\r\n\t\tlet argCount = 0;\r\n\t\tlongfunc = '$' + longfunc;\r\n\t\tif (minArguments === 0 && line[result.position] === ')') {\r\n\t\t\tresult.position++;\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tdo {\r\n\t\t\tlet format = (formats !== undefined && formats[argCount] !== undefined) ? formats[argCount] : 'expr';\r\n\t\t\tif (longfunc === '$SELECT') {\r\n\t\t\t\tformat = 'special';\r\n\t\t\t}\r\n\t\t\tif (format === 'glvn' || format === 'gvn' || format === 'glvn(' || format === 'lvn') {\r\n\t\t\t\tresult = this._checkVar(line, result.position);\r\n\t\t\t\tif (format === 'glvn(' && (!result.indexFound && !result.indirectionFound)) {\r\n\t\t\t\t\tresult.text = 'Variable with Index expected for ' + longfunc;\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\tif (format === 'lvn' && result.globalFound) {\r\n\t\t\t\t\tresult.text = 'Local variable expected';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t} else if (format === 'entryref') {\r\n\t\t\t\tresult = this._checkEntryRef(line, result.position, false);\r\n\t\t\t} else if (format === 'expr') {\r\n\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t} else if (format === 'bool') {\r\n\t\t\t\tif (line[result.position] !== '0' && line[result.position] !== '1') {\r\n\t\t\t\t\tresult.text = '0/1 expected';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.position++;\r\n\t\t\t\t}\r\n\t\t\t} else if (format === 'special') {\r\n\t\t\t\tif (longfunc === '$SELECT') {\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t\tif (line[result.position] !== ':') {\r\n\t\t\t\t\t\tresult.text = 'Missing Expression';\r\n\t\t\t\t\t\tthrow result;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.position++\r\n\t\t\t\t\tresult = this.evaluateExpression(expressiontype.Standard, line, result.position);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\targCount++;\r\n\t\t\tlet char = line[result.position];\r\n\t\t\tif (char === ',') {\r\n\t\t\t\tif (argCount > params.maxparams) {\r\n\t\t\t\t\tresult.text = 'More Arguments for ' + longfunc + ' than expected';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if (char === ')') {\r\n\t\t\t\tif (argCount < minArguments) {\r\n\t\t\t\t\tresult.text = 'Less Arguments for ' + longfunc + ' than expected';\r\n\t\t\t\t\tthrow result;\r\n\t\t\t\t}\r\n\t\t\t\tresult.position++;\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tresult.text = 'Unxepected character ';\r\n\t\t\t\tthrow result;\r\n\t\t\t}\r\n\t\t} while (!this._isEndOfArgument(line, result.position));\r\n\r\n\t\treturn result;\r\n\t}\r\n\tprivate _isEndOfArgument(line: string, position: number): boolean {\r\n\t\tlet isEndOfArgument = false;\r\n\t\tlet char = line[position];\r\n\t\tif (char === undefined || char === \" \" || char === \"\\t\" || char === \";\") { isEndOfArgument = true; }\r\n\t\treturn isEndOfArgument;\r\n\t}\r\n}\r\n/*\r\nlet dir = \"t:\\\\\";\r\nlet test = new MumpsLineParser();\r\nlet erg: Array<ErrorInformation> = [];\r\nfs.readdir(dir, function (err, files) {\r\n\t//handling error\r\n\tif (err) {\r\n\t\treturn console.log('Unable to scan directory: ' + err);\r\n\t}\r\n\t//listing all files using forEach\r\n\tfiles.forEach(function (file: string) {\r\n\t\tif (file.substring(file.length - 2, file.length) === \".m\")\r\n\t\t\terg = test.checkFile(dir + file);\r\n\t\tif (erg.length) {\r\n\t\t\tconsole.log(file);\r\n\t\t\tconsole.log(erg);\r\n\t\t}\r\n\t});\r\n});\r\nlet test = new MumpsLineParser();\r\nlet expanded = test.expandCompressFile(\"t:\\\\KTEST93.m\", true);\r\nconsole.log(expanded);\r\nlet lines = expanded.split(\"\\n\");\r\nfor (let i = 0; i < lines.length; i++) {\r\n\tconsole.log(test.expandCompressLine(lines[i], false).lineText);\r\n}\r\n*/\r\n//let result = test.checkLine('\tS VGZR=$E(YDL(2),5,6)-1 S:VGZR=0 VGZR=12_($E(YDL(2),1,4)-1)');\r\n//console.log(result);\r\n//console.log(test.tokens);\r\nexport { ifunction, isv, MumpsLineParser }","import * as vscode from 'vscode';\nimport { TokenType, MumpsLineParser } from './mumpsLineParser';\nconst parser = new MumpsLineParser();\nconst definitionsArray = require('./../language-definitions.json');\nconst definitions = {};\nlet fs = require('fs');\nlet path = require('path');\nlet Uri = vscode.Uri;\nconst EXTENSIONS = ['.m', '.int', '.zwr', '.M', '.INT', '.ZWR'];\nlet cache: any = {};\ninterface LocationInfo { location: vscode.Location, commentText: string, labelLine: string }\ninterface ParameterDefinition {\n\tname: string,\n\ttype: string,\n\tdescription?: string\n\toptional?: boolean\n}\ninterface TokenDefinition {\n\tname: string,\n\ttype: string,\n\tabbreviation?: string,\n\tcommentText?: string,\n\tdescription: string,\n\tparameters?: ParameterDefinition[],\n\treturns: string\n\tlocation?: vscode.Location\n}\ninterface TokenData {\n\tname: string,\n\tparameters: vscode.ParameterInformation[],\n\tdescription: string\n}\nfunction addDefinition(name: string, definition: TokenDefinition) {\n\tif (!definitions[name]) {\n\t\tdefinitions[name] = [definition];\n\t} else {\n\t\tdefinitions[name].push(definition);\n\t}\n}\nif (Object.keys(definitions).length === 0) {\n\tfor (let definition of definitionsArray) {\n\t\taddDefinition(definition.name, definition);\n\t\tif (definition.abbreviation) {\n\t\t\taddDefinition(definition.abbreviation, definition);\n\t\t}\n\t}\n}\nexport class MumpsTokenHelper {\n\tprivate _document: vscode.TextDocument;\n\tprivate _position: vscode.Position;\n\tconstructor(document: vscode.TextDocument, position: vscode.Position) {\n\t\tthis._document = document;\n\t\tthis._position = position;\n\t}\n\tprivate _getText(uri: vscode.Uri) {\n\t\tif (uri === this._document.uri) {\n\t\t\treturn this._document.getText();\n\t\t}\n\t\tif (uri.fsPath === cache.fsPath) {\n\t\t\treturn cache.text;\n\t\t}\n\t\ttry {\n\t\t\tcache.text = fs.readFileSync(uri.fsPath, 'utf8');\n\t\t\tcache.fsPath = uri.fsPath;\n\t\t\treturn cache.text;\n\t\t} catch (e) {\n\t\t\treturn '';\n\t\t}\n\t}\n\tpublic getTokenSignature(): vscode.SignatureHelp | undefined {\n\t\tlet line = this._document.lineAt(this._position);\n\t\tif (!line) {\n\t\t\treturn;\n\t\t}\n\t\tlet text = line.text;\n\t\tlet myToken = this._getFunctionToken(text);\n\t\tif (myToken === undefined || (myToken.type !== TokenType.ifunction && myToken.type !== TokenType.exfunction)) {\n\t\t\treturn;\n\t\t}\n\t\tlet definition = this.getTokenData(myToken.name, myToken.type);\n\t\tif (!definition) {\n\t\t\treturn;\n\t\t}\n\t\tlet help = new vscode.SignatureHelp();\n\t\thelp.signatures = [this.convertDefinition(definition)];\n\t\thelp.activeSignature = 0;\n\t\thelp.activeParameter = this._calculateActiveParameter(line.text, myToken.position + myToken.name.length, this._position.character);\n\t\treturn help;\n\t}\n\tpublic getTokenHoverInfo(): vscode.Hover | undefined {\n\t\tlet myToken = parser.getTokenAt(this._document.lineAt(this._position).text, this._position.character);\n\t\tif (myToken === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (myToken.type === TokenType.exfunction || myToken.type === TokenType.ifunction ||\n\t\t\tmyToken.type === TokenType.entryref || myToken.type === TokenType.keyword) {\n\t\t\tlet definition = this.getTokenData(myToken.name, myToken.type);\n\t\t\tif (!definition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (definition.parameters) {\n\t\t\t\tdefinition.name += \"(\";\n\t\t\t\tfor (let i = 0; i < definition.parameters.length; i++) {\n\t\t\t\t\tif (i !== 0) {\n\t\t\t\t\t\tdefinition.name += \",\";\n\t\t\t\t\t}\n\t\t\t\t\tdefinition.name += definition.parameters[i].name;\n\t\t\t\t}\n\t\t\t\tdefinition.name += \")\";\n\t\t\t}\n\t\t\tlet snippet = { language: 'mumps', value: definition.name };\n\t\t\treturn new vscode.Hover([snippet, definition.commentText || definition.description]);\n\t\t}\n\t}\n\tprivate _calculateActiveParameter(lineText: string, parametersStartIndex: number, insertIndex: number) {\n\t\tlet active = 0;\n\t\tlet depth = 0;\n\t\tlet isInsideString = false;\n\t\tfor (let i = parametersStartIndex + 1; i < insertIndex; i++) {\n\t\t\tlet char = lineText.charAt(i);\n\t\t\tif (char === '(' && !isInsideString) {\n\t\t\t\tdepth++;\n\t\t\t} else if (char === ')' && !isInsideString) {\n\t\t\t\tdepth--;\n\t\t\t} else if (char === '\"') {\n\t\t\t\tisInsideString = !isInsideString;\n\t\t\t} else if (char === ',' && depth === 0 && !isInsideString) {\n\t\t\t\tactive++;\n\t\t\t}\n\t\t}\n\t\treturn active;\n\t}\n\tpublic getTokenRefLocation(): vscode.Location | undefined {\n\t\tlet myToken = parser.getTokenAt(this._document.lineAt(this._position).text, this._position.character);\n\t\tif (myToken === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (myToken.type === TokenType.entryref || myToken.type === TokenType.exfunction) {\n\t\t\tlet tokendata = this.getTokenData(myToken.name, myToken.type);\n\t\t\tif (tokendata) {\n\t\t\t\treturn tokendata.location;\n\t\t\t}\n\t\t}\n\t}\n\n\t// get Information for given function or keyword\n\tpublic getTokenData(functionName: string, functionType: TokenType): TokenDefinition | undefined {\n\t\tif (functionType === TokenType.ifunction || functionType === TokenType.keyword) {\n\t\t\tlet matches = definitions[functionName.toUpperCase()];\n\t\t\tif (matches) {\n\t\t\t\tfor (let definition of matches) {\n\t\t\t\t\tif (definition.type !== 'function' && definition.type !== \"command\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\treturn Object.assign({}, definition);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (functionType === TokenType.exfunction || functionType === TokenType.entryref) {\n\t\t\tlet locationInfo = this.getPositionForLabel(functionName);\n\t\t\tif (locationInfo) {\n\t\t\t\treturn this._extractDefinition(locationInfo);\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n\tpublic convertDefinition(definition: TokenDefinition): vscode.SignatureInformation {\n\t\tlet data: TokenData = {\n\t\t\tname: \"\",\n\t\t\tdescription: \"\",\n\t\t\tparameters: []\n\t\t}\n\t\tdata.description = definition.description;\n\t\tif (definition.parameters) {\n\t\t\tdata.name = definition.name + '(';\n\t\t\tfor (let i = 0; i < definition.parameters.length; i++) {\n\t\t\t\tlet parameter = definition.parameters[i];\n\t\t\t\tlet description = parameter.optional ? '(optional) ' : '';\n\t\t\t\tdescription += parameter.description || parameter.name;\n\t\t\t\tdata.parameters.push(new vscode.ParameterInformation(parameter.name, description));\n\t\t\t\tif (parameter.optional) {\n\t\t\t\t\tdata.name += '[';\n\t\t\t\t}\n\t\t\t\tdata.name += (i === 0 ? '' : ',');\n\t\t\t\tdata.name += parameter.name + ':' + parameter.type;\n\t\t\t\tif (parameter.optional) {\n\t\t\t\t\tdata.name += ']';\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.name += ')';\n\t\t\tif (definition.returns) {\n\t\t\t\tdata.name += ':' + definition.returns;\n\t\t\t}\n\t\t}\n\t\tlet signature = new vscode.SignatureInformation(data.name, data.description);\n\t\tsignature.parameters = data.parameters;\n\t\treturn signature;\n\t}\n\tpublic getPositionForLabel(label: string): LocationInfo | undefined {\n\t\tlet fileUri = this._document.uri;\n\t\tlet nakedLabel = label.split(\"^\")[0];\n\t\tlet offset = 0;\n\t\tlet labelLine = \"\";\n\t\tif (nakedLabel.split(\"+\")[1] !== undefined) {\n\t\t\toffset = parseInt(label.split(\"+\")[1]);\n\t\t\tnakedLabel = nakedLabel.split(\"+\")[0];\n\t\t}\n\t\tif (label.indexOf(\"^\") !== -1) {\n\t\t\tlet fileName = label.split(\"^\")[1];\n\t\t\tif (fileName.charAt(0) === '%') {\n\t\t\t\tfileName = '_' + fileName.substring(1);\n\t\t\t}\n\t\t\tlet fullPath = path.resolve(this._document.uri.fsPath, '../' + fileName);\n\t\t\tfor (let extension of EXTENSIONS) {\n\t\t\t\tlet extendedPath = fullPath + extension;\n\t\t\t\tif (fs.existsSync(extendedPath)) {\n\t\t\t\t\tfullPath = extendedPath;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfileUri = Uri.file(fullPath);\n\t\t}\n\t\tlet lines: string[] = this._getText(fileUri).split(\"\\n\");\n\t\tlet commentText = \"\";\n\t\tlet i = 0;\n\t\tlet labelLength = nakedLabel.length;\n\t\tfor (i = 0; i < lines.length; i++) {\n\t\t\tif (lines[i].substr(0, labelLength) === nakedLabel && lines[i].substr(labelLength, 1).match(/(;|\\s|\\()/) !== null) {\n\t\t\t\tlabelLine = lines[i];\n\t\t\t\tcommentText += lines[i] + \"\\n\";\n\t\t\t\tfor (let j = i - 1; j > 0; j--) {\n\t\t\t\t\tif (lines[j].length === 0 || lines[j].match(/^\\s*;/)) {\n\t\t\t\t\t\tcommentText += lines[j] + \"\\n\"\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (commentText.length > 0) {\n\t\t\tcommentText = commentText.split(\"\\n\").reverse().join(\"\\n\")\n\t\t\treturn {\n\t\t\t\tcommentText,\n\t\t\t\tlocation: new vscode.Location(fileUri, new vscode.Position(i + offset, 0)),\n\t\t\t\tlabelLine\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}\n\tprivate _extractDefinition(locationInfo: LocationInfo): TokenDefinition | undefined {\n\t\tlet definition: TokenDefinition = {\n\t\t\tname: '',\n\t\t\ttype: 'function',\n\t\t\tcommentText: '',\n\t\t\tdescription: '',\n\t\t\treturns: '',\n\t\t\tlocation: locationInfo.location\n\t\t};\n\t\tlet labelLines = locationInfo.commentText;\n\t\tdefinition.commentText = labelLines\n\t\tlet definitionRegex = /^([%A-Z][A-Z0-9]*)(\\((,?[%A-Z][A-Z0-9]*)+\\))?/i;\n\t\tlet result = definitionRegex.exec(locationInfo.labelLine);\n\t\tif (!result) {\n\t\t\treturn;\n\t\t}\n\t\tdefinition.name = result[1];\n\t\tif (labelLines.indexOf(';')) {\n\t\t\tdefinition.commentText = labelLines.substring(labelLines.indexOf(';') + 1);\n\t\t}\n\t\tlet parameterNames: string[] = [];\n\t\tlet parametersByName = {};\n\t\tif (result[2] !== undefined) {\n\t\t\tparameterNames = result[2].substring(1, result[2].length - 1).split(',')\n\t\t\tdefinition.parameters = [];\n\t\t\tfor (let i = 0; i < parameterNames.length; i++) {\n\t\t\t\tdefinition.parameters.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: parameterNames[i],\n\t\t\t\t\t\ttype: 'any'\n\t\t\t\t\t});\n\t\t\t\tparametersByName[parameterNames[i]] = definition.parameters.length - 1;\n\t\t\t}\n\t\t}\n\t\tif (labelLines !== \"\") {\n\t\t\tlet description = labelLines.match(/DESCRIPTION:.*/i)\n\t\t\tif (description !== null) { definition.description = description[0]; }\n\n\t\t\tfor (let param in parametersByName) {\n\t\t\t\tlet paramDescription = labelLines.match(new RegExp(\"\\\\s\" + param + \"(\\\\(.*\\\\))?:.*\", 'i'))\n\t\t\t\tif (paramDescription !== null) { definition.parameters![parametersByName[param]].description = paramDescription[0] }\n\t\t\t};\n\t\t}\n\t\treturn definition;\n\t}\n\tprivate _getFunctionToken(lineText: string) {\n\t\tlet depth = 1;\n\t\tlet index: number;\n\t\tlet linePosition = this._position.character;\n\t\tfor (index = linePosition - 1; index > 0 && depth > 0; index--) {\n\t\t\tlet char = lineText.charAt(index);\n\t\t\tif (char === ')') {\n\t\t\t\tdepth++;\n\t\t\t} else if (char === '(') {\n\t\t\t\tdepth--;\n\t\t\t}\n\t\t}\n\t\tif (depth > 0 || index <= 0) {\n\t\t\treturn;\n\t\t}\n\t\treturn parser.getTokenAt(lineText, index);\n\t}\n}\n\n","import * as vscode from 'vscode';\nimport { LineToken, TokenType, MumpsLineParser } from './mumpsLineParser'\nconst parser = new MumpsLineParser();\ninterface Parameter {\n\tname: string,\n\tposition: number\n}\ninterface Subroutine {\n\tstartLine: number,\n\tendLine: number\n\tparameters: Parameter[]\n}\ninterface VariableState {\n\tnewedAtLine?: number[],\n\tnewedAtPostion?: number[],\n\tnewedAtLevel?: number[],\n\tisExcluded?: boolean,\n\tisParameter?: boolean,\n\tisUsed?: boolean\n\tparameterPosition?: number\n}\ninterface VariableStates {\n\tname: VariableState\n}\n\n//const currentValue = configuration.get<{}>('conf.resource.insertEmptyLastLine');\n/**\n * Checks if mumps routines NEWs variables correctly\n *\n */\nexport default class MumpsVariableCheck {\n\tprivate _linetokens: LineToken[][];\n\tprivate _warnings: vscode.Diagnostic[];\n\tprivate _variablesToBeIgnored: string[] = [];\n\tprivate _enableVariableCheck: boolean = true;\n\tprivate _varStates: VariableStates;\n\tprivate _levelExclusiveNew: number[];\n\tprivate _subroutines: Subroutine[];\n\tconstructor(document: vscode.TextDocument) {\n\t\tthis._linetokens = parser.analyzeLines(document.getText());\n\t\tconst configuration = vscode.workspace.getConfiguration();\n\t\tif (configuration.mumps.variablesToBeIgnoredAtNewCheck !== undefined) {\n\t\t\tthis._variablesToBeIgnored = configuration.mumps.variablesToBeIgnoredAtNewCheck.split(\",\");\n\t\t}\n\t\tif (configuration.mumps.enableVariableCheck !== undefined) {\n\t\t\tthis._enableVariableCheck = configuration.mumps.enableVariableCheck;\n\t\t}\n\t}\n\t/**\n\t * Check all subroutines with parameters in actual document\n\t * @returns Array of diagnostic messages if problems found, else an empty array\n\t */\n\tpublic scanSubroutines(): vscode.Diagnostic[] {\n\t\t//let start = 0;\n\t\tthis._warnings = [];\n\t\tthis._subroutines = [];\n\t\tthis._checkFile();\n\t\tfor (let i = 0; i < this._subroutines.length; i++) {\n\t\t\tthis.analyzeSubroutine(this._subroutines[i]);\n\t\t}\n\t\treturn this._warnings;\n\t}\n\t/**\n\t * Checks a single subroutine if variables are NEWed correctly\n\t * sets found problems in this._warnings\n\t * @param routine subroutine to be checked\n\t */\n\tpublic analyzeSubroutine(routine: Subroutine): void {\n\t\tif (this._enableVariableCheck) {\n\t\t\tthis._varStates = {} as VariableStates;\n\t\t\tthis._levelExclusiveNew = [];\n\t\t\tlet level = 0; //intendation-level\n\t\t\tfor (let i = 0; i < routine.parameters.length; i++) {\n\t\t\t\tthis._varStates[routine.parameters[i].name] = { isParameter: true, parameterPosition: routine.parameters[i].position }\n\t\t\t}\n\t\t\tfor (let i = routine.startLine; i <= routine.endLine; i++) {\n\t\t\t\tlet intendationFound = false;\n\t\t\t\tfor (let j = 0; j < this._linetokens[i].length; j++) {\n\t\t\t\t\tlet token = this._linetokens[i][j];\n\t\t\t\t\tif (i === routine.startLine && j === 0) { // skip parameters\n\t\t\t\t\t\twhile (++j < this._linetokens[i].length && this._linetokens[i][j].type === TokenType.local) {\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j < this._linetokens[i].length) {\n\t\t\t\t\t\t\ttoken = this._linetokens[i][j];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (token.type === TokenType.intendation) {\n\t\t\t\t\t\tintendationFound = true;\n\t\t\t\t\t\tlet newLevel = token.name.length\n\t\t\t\t\t\tif (newLevel < level) {\n\t\t\t\t\t\t\tthis._reduceIntendationLevel(level, newLevel);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlevel = newLevel;\n\t\t\t\t\t} else if (token.type === TokenType.comment) {\n\t\t\t\t\t\tif (!intendationFound && level > 0) {\n\t\t\t\t\t\t\tthis._reduceIntendationLevel(level, 0);\n\t\t\t\t\t\t\tlevel = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (token.type === TokenType.keyword) {\n\t\t\t\t\t\tif (!intendationFound && level > 0) {\n\t\t\t\t\t\t\tthis._reduceIntendationLevel(level, 0);\n\t\t\t\t\t\t\tlevel = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (token.longName === \"NEW\") {\n\t\t\t\t\t\t\tlet anyVariablesNewed: boolean = false;\n\t\t\t\t\t\t\tlet containsExclusions = false;\n\t\t\t\t\t\t\twhile (++j < this._linetokens[i].length &&\n\t\t\t\t\t\t\t\t(this._linetokens[i][j].type === TokenType.local ||\n\t\t\t\t\t\t\t\t\tthis._linetokens[i][j].type === TokenType.sysvariable)) {\n\t\t\t\t\t\t\t\tanyVariablesNewed = true;\n\t\t\t\t\t\t\t\ttoken = this._linetokens[i][j];\n\t\t\t\t\t\t\t\tif (token.isExcludedVariable) {\n\t\t\t\t\t\t\t\t\tcontainsExclusions = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (token.type === TokenType.local) {\n\t\t\t\t\t\t\t\t\tlet varName = token.name;\n\t\t\t\t\t\t\t\t\tlet message = '';\n\t\t\t\t\t\t\t\t\tlet varState: VariableState = this._varStates[varName] ? this._varStates[varName] : { isExcluded: token.isExcludedVariable }\n\t\t\t\t\t\t\t\t\t// Variable is already NEWed or used\n\t\t\t\t\t\t\t\t\tif (varState.isParameter) {\n\t\t\t\t\t\t\t\t\t\tif (token.isExcludedVariable) {\n\t\t\t\t\t\t\t\t\t\t\tvarState.isExcluded = true;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif (level === 0) { //NEW inside higher intendation-level should be possible\n\t\t\t\t\t\t\t\t\t\t\t\tmessage = \"NEW hides formal parameter \" + varName;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (!varState.newedAtLevel) { // Variable not NEWed yet - New is OK\n\t\t\t\t\t\t\t\t\t\t\tvarState.newedAtLevel = [level];\n\t\t\t\t\t\t\t\t\t\t\tvarState.newedAtLine = [i];\n\t\t\t\t\t\t\t\t\t\t\tvarState.newedAtPostion = [token.position];\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tif (varState.newedAtLevel.indexOf(level) > -1) {\n\t\t\t\t\t\t\t\t\t\t\t\tmessage = \"Variable \" + varName + \" already mentioned in NEW command\"\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tvarState.newedAtLevel.push(level);\n\t\t\t\t\t\t\t\t\t\t\t\tvarState.newedAtLine!.push(i);\n\t\t\t\t\t\t\t\t\t\t\t\tvarState.newedAtPostion!.push(token.position);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (message !== \"\") {\n\t\t\t\t\t\t\t\t\t\tthis._addWarning(message, i, token.position, token.name.length);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthis._varStates[varName] = varState;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (anyVariablesNewed === false) {\n\t\t\t\t\t\t\t\tcontainsExclusions = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (containsExclusions) {\n\t\t\t\t\t\t\t\tthis._levelExclusiveNew.push(level);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//Check if parameters are hidden by NEW-exclusion\n\t\t\t\t\t\t\tif (routine.parameters.length > 0 && containsExclusions && level === 0) {\n\t\t\t\t\t\t\t\tfor (let k = 0; k < routine.parameters.length; k++) {\n\t\t\t\t\t\t\t\t\tif (!this._varStates[routine.parameters[k].name].isExcluded) {\n\t\t\t\t\t\t\t\t\t\tthis._addWarning(\"NEW hides formal parameters\", i, token.position, token.name.length);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (token.type === TokenType.local) {  // local variable found at a non NEW command\n\t\t\t\t\t\tlet varName = token.name;\n\t\t\t\t\t\tthis._checkNewed(varName, level, i, token.position);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._checkVariableUsage(routine)\n\t\t}\n\t}\n\t/**\n\t * Check if Variables are formal parameters but not used, or NEWed but not used\n\t * @param routine Subroutine to check\n\t * @param varStates array of found variable-states\n\t */\n\tprivate _checkVariableUsage(routine: Subroutine): void {\n\t\tfor (let key in this._varStates) {\n\t\t\tlet state: VariableState = this._varStates[key];\n\t\t\tif (state.isParameter && !state.isUsed && !this._isIgnoredVariable(key)) {\n\t\t\t\tthis._addWarning(\"Variable \" + key + \" is a formal parameter but not used\", routine.startLine,\n\t\t\t\t\tstate.parameterPosition!,\n\t\t\t\t\tkey.length);\n\t\t\t} else if (state.newedAtLine && state.newedAtLine.length > 0 && !state.isUsed && !this._isIgnoredVariable(key)) {\n\t\t\t\tthis._addWarning(\"Variable \" + key + \" is NEWed but not used\",\n\t\t\t\t\tstate.newedAtLine[0],\n\t\t\t\t\tstate.newedAtPostion![0],\n\t\t\t\t\tkey.length);\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * Check if a local Variable is correctly NEWed or generate Warning\n\t * @param varName Variable to be checked\n\t * @param level intendation-level on which Variable is found\n\t * @param line Line where variable is found\n\t * @param position Position inside Line\n\t */\n\tprivate _checkNewed(varName: string, level: number, line: number, position: number): void {\n\t\t//Check Variable-Ignore-List\n\t\tlet varState = this._varStates[varName];\n\t\tif (!this._isIgnoredVariable(varName)) {\n\t\t\tlet isNewed = false;\n\t\t\tfor (let k = 0; k < this._levelExclusiveNew.length; k++) {\n\t\t\t\tif (this._levelExclusiveNew[k] <= level) {\n\t\t\t\t\tisNewed = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isNewed) {\n\t\t\t\tif (varState) {\n\t\t\t\t\tif (!varState.isParameter) {\n\t\t\t\t\t\tif (varState.newedAtLevel) {\n\t\t\t\t\t\t\tfor (let i = 0; i < varState.newedAtLevel.length; i++) {\n\t\t\t\t\t\t\t\tif (varState.newedAtLevel[i] <= level) {\n\t\t\t\t\t\t\t\t\tisNewed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisNewed = true;\n\t\t\t\t\t}\n\t\t\t\t\tvarState.isUsed = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isNewed) {\n\t\t\t\tthis._addWarning(\"Variable \" + varName + \" not NEWed\", line, position, varName.length);\n\t\t\t}\n\t\t}\n\t\tif (varState) {\n\t\t\tvarState.isUsed = true;\n\t\t} else {\n\t\t\tvarState = { isUsed: true }\n\t\t}\n\t\tthis._varStates[varName] = varState;\n\t}\n\t/**\n\t * Remember a new Warning in this._warnings\n\t * @param message Warning message\n\t * @param line Line where th problem was found\n\t * @param startPosition Position inside Line where the problem was found\n\t * @param len Length of variable-name\n\t */\n\tprivate _addWarning(message: string, line: number, startPosition: number, len: number) {\n\t\tthis._warnings.push({\n\t\t\tcode: '',\n\t\t\tmessage,\n\t\t\trange: new vscode.Range(new vscode.Position(line, startPosition), new vscode.Position(line, startPosition + len)),\n\t\t\tseverity: vscode.DiagnosticSeverity.Warning,\n\t\t\tsource: ''\n\t\t});\n\t}\n\t/**\n\t * Scans the given File for subroutines with paramters and save their parameters in this._subroutines\n\t * Looks for unreachable Code and saves error messages if this is the case\n\t */\n\tprivate _checkFile() {\n\t\tlet routine: Subroutine = { startLine: -1, endLine: -1, parameters: [] };\n\t\tlet level: number = 0;\n\t\tlet isBehindQuit: boolean = false;\n\t\tlet startUnreachable: vscode.Position | false = false;\n\t\tfor (let line = 0; line < this._linetokens.length; line++) {\n\t\t\tlet ifFlag = false;\n\t\t\tlet intendationFound = false;\n\t\t\tfor (let j = 0; j < this._linetokens[line].length; j++) {\n\t\t\t\tlet token: LineToken = this._linetokens[line][j];\n\t\t\t\tif (token.type === TokenType.comment && token.name.match(/ignoreVars:/)) { //Check for IgnoreVars-directive\n\t\t\t\t\tthis._variablesToBeIgnored = this._variablesToBeIgnored.concat(token.name.split(\"ignoreVars:\")[1].split(\",\"));\n\t\t\t\t}\n\t\t\t\tif (j === 0 && token.type === TokenType.label) {\n\t\t\t\t\tisBehindQuit = false;\n\t\t\t\t\tif (startUnreachable) {\n\t\t\t\t\t\tthis._warnings.push({\n\t\t\t\t\t\t\tcode: '',\n\t\t\t\t\t\t\tmessage: \"Unreachable Code\",\n\t\t\t\t\t\t\trange: new vscode.Range(startUnreachable, new vscode.Position(line, 0)),\n\t\t\t\t\t\t\tseverity: vscode.DiagnosticSeverity.Warning,\n\t\t\t\t\t\t\tsource: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t\tstartUnreachable = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (this._linetokens[line][1] !== undefined &&\n\t\t\t\t\t\tthis._linetokens[line][1].type === TokenType.local) { //Begin of a parametrized subroutine\n\t\t\t\t\t\troutine.startLine = line;\n\t\t\t\t\t\twhile (++j < this._linetokens[line].length && this._linetokens[line][j].type === TokenType.local) {\n\t\t\t\t\t\t\troutine.parameters.push({ name: this._linetokens[line][j].name, position: this._linetokens[line][j].position });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j >= this._linetokens[line].length) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoken = this._linetokens[line][j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (token.type === TokenType.keyword) {\n\t\t\t\t\tif (isBehindQuit && startUnreachable === false) {\n\t\t\t\t\t\tstartUnreachable = new vscode.Position(line, token.position);\n\t\t\t\t\t}\n\t\t\t\t\tif (intendationFound === false) {\n\t\t\t\t\t\tlevel = 0;\n\t\t\t\t\t}\n\t\t\t\t\tlet command = token.longName;\n\t\t\t\t\tif (command === \"IF\" || command === \"ELSE\") {\n\t\t\t\t\t\tifFlag = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (!ifFlag && (command === \"QUIT\" || command === \"GOTO\") && !token.isPostconditioned && level === 0) {\n\t\t\t\t\t\tlet hasPostcondition = false;\n\t\t\t\t\t\tif (command === \"GOTO\") {\n\t\t\t\t\t\t\tfor (let k = j + 1; k < this._linetokens[line].length; k++) {\n\t\t\t\t\t\t\t\tif (this._linetokens[line][k].type === TokenType.argPostcondition) {\n\t\t\t\t\t\t\t\t\thasPostcondition = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t} else if (this._linetokens[line][k].type === TokenType.keyword) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!hasPostcondition) {\n\t\t\t\t\t\t\troutine.endLine = line;\n\t\t\t\t\t\t\tif (routine.startLine !== -1) {\n\t\t\t\t\t\t\t\tthis._subroutines.push(routine);\n\t\t\t\t\t\t\t\troutine = { startLine: -1, endLine: -1, parameters: [] };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisBehindQuit = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (token.type === TokenType.intendation) {\n\t\t\t\t\tlevel = token.name.length;\n\t\t\t\t\tintendationFound = true;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\tprivate _isIgnoredVariable(variable: string): boolean {\n\t\tlet isIgnoredVariable = false;\n\t\tfor (let k = 0; k < this._variablesToBeIgnored.length; k++) {\n\t\t\tif (new RegExp(\"^\" + this._variablesToBeIgnored[k] + \"$\").test(variable)) {\n\t\t\t\tisIgnoredVariable = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn isIgnoredVariable;\n\t}\n\t/**\n\t * Clears all NEWs that were started above the new intendation-level\n\t * @param level old intendation-level\n\t * @param newLevel new-intendation-level\n\t */\n\tprivate _reduceIntendationLevel(level: number, newLevel: number) {\n\t\tfor (let k = newLevel + 1; k <= level; k++) {\n\t\t\tlet index = this._levelExclusiveNew.indexOf(k);\n\t\t\tif (index > -1) {\n\t\t\t\tthis._levelExclusiveNew.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\tfor (let key in this._varStates) {\n\t\t\tlet state = this._varStates[key];\n\t\t\tlet found = false;\n\t\t\tlet memLine = 0;\n\t\t\tlet memPosition = 0;\n\t\t\tif (state.newedAtLevel) {\n\t\t\t\tfor (let k = newLevel + 1; k <= level; k++) {\n\t\t\t\t\tlet index = state.newedAtLevel?.indexOf(k)\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\tmemLine = state.newedAtLine![index];\n\t\t\t\t\t\tmemPosition = state.newedAtPostion![index];\n\t\t\t\t\t\tstate.newedAtLevel.splice(index, 1);\n\t\t\t\t\t\tstate.newedAtLine!.splice(index, 1);\n\t\t\t\t\t\tstate.newedAtPostion!.splice(index, 1);\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tthis._varStates[key] = state;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (found && !state.isUsed) {\n\t\t\t\t\tthis._addWarning(\"Variable \" + key + \" is NEWed but not used\",\n\t\t\t\t\t\tmemLine,\n\t\t\t\t\t\tmemPosition,\n\t\t\t\t\t\tkey.length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import { getTokens, Token, Type } from './tokenizer';\r\n\r\n// Code adapted from the vscode-psl extension by ing-bank\r\n\r\n/**\r\n * Used for checking the type of Member at runtime\r\n */\r\nexport enum MemberClass {\r\n\tmethod = 1,\r\n\tparameter = 2,\r\n\t// property = 3,\r\n\tdeclaration = 4,\r\n\tcolumn = 5,\r\n\ttable = 6,\r\n\tproc = 7,\r\n}\r\n\r\n/**\r\n * A generic type that abstracts Method, Parameter, Declaration, etc\r\n */\r\nexport interface IMember {\r\n\r\n\t/**\r\n\t * The Token representing the name of the member.\r\n\t */\r\n\tid: Token\r\n\r\n\tdocumentation?: string;\r\n}\r\n\r\n/**\r\n * Contains information about a Method\r\n */\r\nexport interface IMethod extends IMember {\r\n\r\n\t/**\r\n\t * The Token of the closing parenthesis after the declaration of all the Method's parameters.\r\n\t */\r\n\tcloseParen: Token\r\n\r\n\t/**\r\n\t * The parameters of the Method, each with their own typing and comment information.\r\n\t */\r\n\tparameters: IParameter[]\r\n\r\n\t/**\r\n\t * The zero-based line where the Method begins\r\n\t */\r\n\tline: number\r\n\r\n\t/**\r\n\t * The last line of the Method, right before the start of a new Method\r\n\t */\r\n\tendLine: number\r\n\r\n\t/**\r\n\t * Next Line of a method implementation\r\n\t */\r\n\tnextLine: number\r\n\r\n\t/**\r\n\t * Previous Line of a method implementation\r\n\t */\r\n\tprevLine: number;\r\n\r\n}\r\n\r\n/**\r\n * Represents a parameter, always belonging to a Method\r\n */\r\nexport interface IParameter extends IMember {\r\n\t/**\r\n\t * The contents of the comment for the parameter, i.e.\r\n\t * ```\r\n\t * public String name(\r\n\t * \t\tString p1 // a comment\r\n\t * \t\t)\r\n\t * ```\r\n\t */\r\n\tcomment: Token\r\n}\r\n\r\n/**\r\n * A type declaration, typically found within a method.\r\n */\r\nexport interface IDeclaration extends IMember {\r\n}\r\n\r\n\r\n/**\r\n * An abstract syntax tree of a PSL document\r\n */\r\nexport interface IParsedDocument {\r\n\r\n\t/**\r\n\t * An array of Declarations that are not contained within a method.\r\n\t * This will be empty for valid Profile 7.6 code but is maintained for compatibility.\r\n\t */\r\n\tdeclarations: IDeclaration[]\r\n\r\n\t/**\r\n\t * An array of the methods in the document\r\n\t */\r\n\tmethods: IMethod[]\r\n\r\n\t/**\r\n\t * All the tokens in the document, for reference.\r\n\t */\r\n\ttokens: Token[]\r\n}\r\n\r\nclass Method implements IMethod {\r\n\r\n\tnextLine: number;\r\n\tprevLine: number;\r\n\tcloseParen: Token;\r\n\tid: Token;\r\n\tparameters: Parameter[]\r\n\tdeclarations: IDeclaration[];\r\n\tline: number;\r\n\tendLine: number;\r\n\tmemberClass: MemberClass;\r\n\tdocumentation: string;\r\n\r\n\tconstructor() {\r\n\t\tthis.parameters = [];\r\n\t\tthis.line = -1;\r\n\t\tthis.declarations = [];\r\n\t\tthis.endLine = -1;\r\n\t\tthis.memberClass = MemberClass.method;\r\n\t\tthis.documentation = '';\r\n\t}\r\n}\r\n\r\nclass Parameter implements IParameter {\r\n\tid: Token\r\n\tcomment: Token\r\n\r\n\tconstructor() { }\r\n}\r\n\r\nexport function parseText(sourceText: string): IParsedDocument {\r\n\tlet parser = new Parser();\r\n\treturn parser.parseDocument(sourceText);\r\n}\r\n\r\nclass Parser {\r\n\r\n\tprivate tokenizer: IterableIterator<Token>;\r\n\tprivate activeToken: Token;\r\n\tprivate methods: Method[];\r\n\tprivate declarations: IDeclaration[];\r\n\tprivate activeMethod: Method;\r\n\tprivate tokens: Token[];\r\n\r\n\tconstructor(tokenizer?: IterableIterator<Token>) {\r\n\t\tthis.methods = [];\r\n\t\tthis.declarations = [];\r\n\t\tthis.tokens = [];\r\n\t\tif (tokenizer) { this.tokenizer = tokenizer; }\r\n\t}\r\n\r\n\tprivate next(): boolean {\r\n\t\tthis.activeToken = this.tokenizer.next().value;\r\n\t\tif (this.activeToken) { this.tokens.push(this.activeToken); }\r\n\t\treturn this.activeToken !== undefined;\r\n\t}\r\n\r\n\tparseDocument(documentText: string): IParsedDocument {\r\n\t\tthis.tokenizer = getTokens(documentText);\r\n\t\twhile (this.next()) {\r\n\t\t\tif (this.activeToken.isAlphanumeric()) {\r\n\t\t\t\tlet method = this.parseMethod();\r\n\t\t\t\tif (!method) { continue; }\r\n\t\t\t\tthis.methods.push(method);\r\n\t\t\t\tthis.activeMethod = method;\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isTab() || this.activeToken.isSpace()) {\r\n\t\t\t\tlet lineNumber = this.activeToken.position.line;\r\n\t\t\t\tlet tokenBuffer = this.loadTokenBuffer();\r\n\t\t\t\tif (this.activeMethod && this.activeMethod.nextLine === lineNumber) {\r\n\t\t\t\t\tlet documentation = this.checkForDocumentation(tokenBuffer);\r\n\t\t\t\t\tif (documentation) { this.activeMethod.documentation = documentation; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isNewLine()) { continue; }\r\n\t\t\telse { this.throwAwayTokensTil(Type.NewLine); }\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tdeclarations: this.declarations,\r\n\t\t\tmethods: this.methods,\r\n\t\t\ttokens: this.tokens\r\n\t\t}\r\n\t}\r\n\r\n\tprivate checkForDocumentation(tokenBuffer: Token[]): string {\r\n\t\tlet i = 0;\r\n\t\twhile (i < tokenBuffer.length) {\r\n\t\t\tlet token = tokenBuffer[i];\r\n\t\t\tif (token.isSpace() || token.isTab()) {\r\n\t\t\t\ti++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (token.isLineCommentInit() && tokenBuffer[i + 1] && tokenBuffer[i + 1].isLineComment()) {\r\n\t\t\t\treturn tokenBuffer[i + 1].value;\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tprivate loadTokenBuffer() {\r\n\t\tlet tokenBuffer: Token[] = []\r\n\t\twhile (this.next() && this.activeToken.type !== Type.NewLine) {\r\n\t\t\ttokenBuffer.push(this.activeToken);\r\n\t\t}\r\n\t\treturn tokenBuffer;\r\n\t}\r\n\r\n\tprivate parseMethod(): Method | undefined {\r\n\t\tlet method: Method = new Method();\r\n\t\tdo {\r\n\t\t\tif (!this.activeToken) { continue; }\r\n\t\t\tif (this.activeToken.isTab() || this.activeToken.isSpace()) { continue; }\r\n\t\t\telse if (this.activeToken.isNewLine()) { break; }\r\n\t\t\telse if (this.activeToken.isOpenParen()) {\r\n\t\t\t\tlet processed = this.processParameters(method);\r\n\t\t\t\tif (!processed) { return undefined; }\r\n\t\t\t\tmethod.parameters = processed;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isAlphanumeric()) {\r\n\t\t\t\tif (method.line === -1) {\r\n\t\t\t\t\tmethod.line = this.activeToken.position.line;\r\n\t\t\t\t\tmethod.prevLine = this.activeToken.position.line - 1;\r\n\t\t\t\t\tmethod.nextLine = this.activeToken.position.line + 1;\r\n\t\t\t\t\tmethod.id = this.activeToken;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isLineCommentInit() || this.activeToken.isLineComment()) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.value === '\\r') { continue; }\r\n\t\t\telse if (this.activeToken.isCloseParen()) {\r\n\t\t\t\tif (!method.closeParen) {\r\n\t\t\t\t\tmethod.closeParen = this.activeToken;\r\n\t\t\t\t\tmethod.nextLine = this.activeToken.position.line + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.throwAwayTokensTil(Type.NewLine);\r\n\t\t\t\tif (method.id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined\r\n\t\t\t}\r\n\t\t} while (this.next());\r\n\r\n\t\tif (this.activeMethod) {\r\n\t\t\tthis.activeMethod.endLine = method.id.position.line - 1;\r\n\t\t}\r\n\t\tthis.activeMethod = method;\r\n\t\treturn method;\r\n\t}\r\n\r\n\tprivate processParameters(method: Method): Parameter[] | undefined {\r\n\t\tlet args: Parameter[] = [];\r\n\t\tlet param: Parameter | undefined;\r\n\t\tlet open = false;\r\n\t\twhile (this.next()) {\r\n\t\t\tif (this.activeToken.isTab() || this.activeToken.isSpace() || this.activeToken.isNewLine()) { continue; }\r\n\t\t\telse if (this.activeToken.isOpenParen()) {\r\n\t\t\t\topen = true;\r\n\t\t\t\tif (!param) { return undefined; }\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isCloseParen()) {\r\n\t\t\t\topen = false;\r\n\t\t\t\tmethod.closeParen = this.activeToken;\r\n\t\t\t\tmethod.nextLine = this.activeToken.position.line + 1;\r\n\t\t\t\tif (!param) { break; }\r\n\t\t\t\targs.push(param);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isAlphanumeric()) {\r\n\t\t\t\tif (!param) { param = new Parameter(); }\r\n\t\t\t\tparam.id = this.activeToken;\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isLineComment()) {\r\n\t\t\t\tif (param) {\r\n\t\t\t\t\tparam.comment = this.activeToken\r\n\t\t\t\t}\r\n\t\t\t\telse if (args.length >= 1) {\r\n\t\t\t\t\targs[args.length - 1].comment = this.activeToken;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.activeToken.isComma()) {\r\n\t\t\t\tif (!param) { return undefined; }\r\n\t\t\t\targs.push(param)\r\n\t\t\t\tparam = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (open) { return undefined; }\r\n\t\treturn args;\r\n\t}\r\n\r\n\tprivate throwAwayTokensTil(type: Type) {\r\n\t\tdo { } while (this.next() && this.activeToken.type !== type)\r\n\t}\r\n\r\n}","import { Position, Range } from \"vscode\";\r\n\r\n// Code adapted from the vscode-psl extension by ing-bank\r\n\r\nexport function* getTokens(documentContents: string): IterableIterator<Token> {\r\n\tlet tokenizer: Tokenizer = new Tokenizer()\r\n\r\n\tfor (let char of documentContents) {\r\n\t\ttokenizer.charType = getType(char);\r\n\t\tif (tokenizer.tokenType === 0) {\r\n\t\t\ttokenizer.tokenType = tokenizer.charType;\r\n\t\t}\r\n\t\twhile (!tokenizer.parsed) {\r\n\t\t\tif (tokenizer.parseCharacter(char)) {\r\n\t\t\t\tyield tokenizer.finalizedToken;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttokenizer.parsed = false;\r\n\t}\r\n\r\n\t// if there is an unfinished token left\r\n\tif (tokenizer.tokenType !== 0) {\r\n\t\ttokenizer.finalizeToken(0);\r\n\t\tyield tokenizer.finalizedToken;\r\n\t}\r\n}\r\n\r\nexport class Token {\r\n\ttype: Type;\r\n\tvalue: string;\r\n\tposition: Position;\r\n\r\n\tconstructor(type: Type, value: string, position: Position) {\r\n\t\tthis.type = type;\r\n\t\tthis.value = value;\r\n\t\tthis.position = position;\r\n\t}\r\n\r\n\tgetRange() {\r\n\t\tlet start: Position = this.position;\r\n\t\tlet end: Position = new Position(this.position.line, this.position.character + this.value.length);\r\n\t\treturn new Range(start, end);\r\n\t}\r\n\r\n\tisAlphanumeric() {\r\n\t\treturn this.type === Type.Alphanumeric;\r\n\t}\r\n\r\n\tisCloseParen() {\r\n\t\treturn this.type === Type.CloseParen;\r\n\t}\r\n\r\n\tisComma() {\r\n\t\treturn this.type === Type.Comma;\r\n\t}\r\n\r\n\tisLineComment() {\r\n\t\treturn this.type === Type.LineComment;\r\n\t}\r\n\r\n\tisLineCommentInit() {\r\n\t\treturn this.type === Type.LineCommentInit;\r\n\t}\r\n\r\n\tisNewLine() {\r\n\t\treturn this.type === Type.NewLine;\r\n\t}\r\n\r\n\tisNumeric() {\r\n\t\treturn this.type === Type.Numeric;\r\n\t}\r\n\r\n\tisOpenParen() {\r\n\t\treturn this.type === Type.OpenParen;\r\n\t}\r\n\r\n\tisSpace() {\r\n\t\treturn this.type === Type.Space;\r\n\t}\r\n\r\n\tisTab() {\r\n\t\treturn this.type === Type.Tab;\r\n\t}\r\n\r\n\tisWhiteSpace() {\r\n\t\treturn this.type === Type.Space || this.type === Type.Tab || this.type === Type.NewLine || this.type === Type.Undefined;\r\n\t}\r\n}\r\n\r\nclass Tokenizer {\r\n\tdocumentLine: number;\r\n\tdocumentColumn: number;\r\n\r\n\tcharType: number;\r\n\ttokenType: number;\r\n\ttokenValue: string;\r\n\ttokenPosition: Position;\r\n\tfinalizedToken: Token;\r\n\r\n\tparsed: boolean\r\n\tstringOpen: boolean;\r\n\tfirstSlash: boolean;\r\n\tasterisk: boolean;\r\n\r\n\tconstructor() {\r\n\t\tthis.documentLine = 0;\r\n\t\tthis.documentColumn = 0;\r\n\r\n\t\tthis.charType = 0;\r\n\t\tthis.tokenType = 0;\r\n\t\tthis.tokenValue = '';\r\n\t\tthis.tokenPosition = new Position(this.documentLine, this.documentColumn);\r\n\r\n\t\tthis.parsed = false;\r\n\t\tthis.stringOpen = false;\r\n\t\tthis.firstSlash = false;\r\n\t\tthis.asterisk = false;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param char current character being parsed\r\n\t * @returns true if token is finalized\r\n\t */\r\n\tparseCharacter(char: string): boolean {\r\n\t\tif (this.tokenType === Type.Alphanumeric) {\r\n\t\t\tif (this.charType === Type.Alphanumeric || this.charType === Type.Numeric) {\r\n\t\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.finalizeToken(this.charType);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (this.tokenType === Type.Numeric) {\r\n\t\t\tif (this.charType === Type.Numeric) {\r\n\t\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.finalizeToken(this.charType);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (this.tokenType === Type.LineComment) {\r\n\t\t\tif (this.charType !== Type.NewLine) {\r\n\t\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.finalizeToken(Type.NewLine);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (this.tokenType === Type.String) {\r\n\t\t\tif (this.charType !== Type.DoubleQuotes) {\r\n\t\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.finalizeToken(Type.DoubleQuotes);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (this.tokenType === Type.LineCommentInit) {\r\n\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\tthis.finalizeToken(Type.LineComment);\r\n\t\t\treturn true;\r\n\t\t} else if (this.tokenType === Type.SemiColon) {\r\n\t\t\tthis.tokenType = Type.LineCommentInit;\r\n\t\t\treturn true;\r\n\t\t} else if (this.tokenType === Type.DoubleQuotes) {\r\n\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\tif (this.stringOpen) {\r\n\t\t\t\tthis.stringOpen = false;\r\n\t\t\t\tthis.finalizeToken(0);\r\n\t\t\t} else {\r\n\t\t\t\tthis.stringOpen = true;\r\n\t\t\t\tthis.finalizeToken(Type.String);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else if (this.tokenType === Type.NewLine) {\r\n\t\t\tthis.tokenValue = this.tokenValue + char;\r\n\t\t\tthis.parsed = true;\r\n\t\t\tthis.documentLine++;\r\n\t\t\tthis.documentColumn = 0;\r\n\t\t\tthis.finalizeToken(0);\r\n\t\t\treturn true;\r\n\t\t} else if ((this.tokenType > 10) || (this.tokenType === -1)) {\r\n\t\t\tthis.updateTokenAndAdvanceCursor(char);\r\n\t\t\tthis.finalizeToken(0);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tupdateTokenAndAdvanceCursor(char: string) {\r\n\t\tthis.tokenValue = this.tokenValue + char;\r\n\t\tthis.parsed = true;\r\n\t\tthis.documentColumn++;\r\n\t}\r\n\r\n\tfinalizeToken(newType: number): void {\r\n\t\tthis.finalizedToken = new Token(this.tokenType, this.tokenValue, this.tokenPosition);\r\n\t\tthis.tokenType = newType;\r\n\t\tthis.tokenValue = '';\r\n\t\tthis.tokenPosition = new Position(this.documentLine, this.documentColumn);\r\n\t}\r\n}\r\n\r\nfunction getType(c: string): Type {\r\n\tlet charCode: number = c.charCodeAt(0);\r\n\tif (charCode >= 65 && charCode <= 90 || charCode >= 97 && charCode <= 122 || charCode === 37) {\r\n\t\treturn Type.Alphanumeric;\r\n\t} else if (charCode >= 48 && charCode <= 57) {\r\n\t\treturn Type.Numeric;\r\n\t} else if (charCode === 34) {\r\n\t\treturn Type.DoubleQuotes;\r\n\t} else if (charCode === 9) {\r\n\t\treturn Type.Tab;\r\n\t} else if (charCode === 10) {\r\n\t\treturn Type.NewLine;\r\n\t} else if (charCode === 32) {\r\n\t\treturn Type.Space;\r\n\t} else if (charCode === 33) {\r\n\t\treturn Type.ExclamationMark;\r\n\t} else if (charCode === 35) {\r\n\t\treturn Type.NumberSign;\r\n\t} else if (charCode === 36) {\r\n\t\treturn Type.DollarSign;\r\n\t\t// } else if (charCode === 37) {\r\n\t\t// \treturn Type.PercentSign;\r\n\t} else if (charCode === 38) {\r\n\t\treturn Type.Ampersand;\r\n\t} else if (charCode === 39) {\r\n\t\treturn Type.SingleQuote;\r\n\t} else if (charCode === 40) {\r\n\t\treturn Type.OpenParen;\r\n\t} else if (charCode === 41) {\r\n\t\treturn Type.CloseParen;\r\n\t} else if (charCode === 42) {\r\n\t\treturn Type.Asterisk;\r\n\t} else if (charCode === 43) {\r\n\t\treturn Type.PlusSign;\r\n\t} else if (charCode === 44) {\r\n\t\treturn Type.Comma;\r\n\t} else if (charCode === 45) {\r\n\t\treturn Type.MinusSign;\r\n\t} else if (charCode === 46) {\r\n\t\treturn Type.Period;\r\n\t} else if (charCode === 58) {\r\n\t\treturn Type.Colon;\r\n\t} else if (charCode === 59) {\r\n\t\treturn Type.SemiColon;\r\n\t} else if (charCode === 60) {\r\n\t\treturn Type.LessThan;\r\n\t} else if (charCode === 61) {\r\n\t\treturn Type.EqualSign;\r\n\t} else if (charCode === 62) {\r\n\t\treturn Type.GreaterThan;\r\n\t} else if (charCode === 63) {\r\n\t\treturn Type.QuestionMark;\r\n\t} else if (charCode === 64) {\r\n\t\treturn Type.AtSymbol;\r\n\t} else if (charCode === 91) {\r\n\t\treturn Type.OpenBracket;\r\n\t} else if (charCode === 92) {\r\n\t\treturn Type.Backslash;\r\n\t} else if (charCode === 93) {\r\n\t\treturn Type.CloseBracket;\r\n\t} else if (charCode === 94) {\r\n\t\treturn Type.Caret;\r\n\t} else if (charCode === 95) {\r\n\t\treturn Type.Underscore;\r\n\t} else if (charCode === 96) {\r\n\t\treturn Type.BackQuote;\r\n\t} else if (charCode === 123) {\r\n\t\treturn Type.OpenBrace;\r\n\t} else if (charCode === 124) {\r\n\t\treturn Type.Pipe;\r\n\t} else if (charCode === 125) {\r\n\t\treturn Type.CloseBrace;\r\n\t} else if (charCode === 126) {\r\n\t\treturn Type.Tilde;\r\n\t}\r\n\r\n\telse {\r\n\t\treturn -1;\r\n\t}\r\n}\r\n\r\nexport const enum Type {\r\n\tAlphanumeric = 1,\r\n\tNumeric = 2,\r\n\tLineComment = 3,\r\n\tBlockComment = 4,\r\n\tString = 5,\r\n\tLineCommentInit = 6,\r\n\tDoubleQuotes = 9,\r\n\r\n\tTab = 11,\r\n\tNewLine = 13,\r\n\tSpace = 32,\r\n\r\n\tExclamationMark = 33,\r\n\tNumberSign = 35,\r\n\tDollarSign = 36,\r\n\tAmpersand = 38,\r\n\tSingleQuote = 39,\r\n\tOpenParen = 40,\r\n\tCloseParen = 41,\r\n\tAsterisk = 42,\r\n\tPlusSign = 43,\r\n\tComma = 44,\r\n\tMinusSign = 45,\r\n\tPeriod = 46,\r\n\tColon = 58,\r\n\tSemiColon = 59,\r\n\tLessThan = 60,\r\n\tEqualSign = 61,\r\n\tGreaterThan = 62,\r\n\tQuestionMark = 63,\r\n\tAtSymbol = 64,\r\n\tOpenBracket = 91,\r\n\tBackslash = 92,\r\n\tCloseBracket = 93,\r\n\tCaret = 94,\r\n\tUnderscore = 95,\r\n\tBackQuote = 96,\r\n\tOpenBrace = 123,\r\n\tPipe = 124,\r\n\tCloseBrace = 125,\r\n\tTilde = 126,\r\n\r\n\tUndefined = -1\r\n}","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DebugSession = exports.ErrorDestination = exports.InvalidatedEvent = exports.ProgressEndEvent = exports.ProgressUpdateEvent = exports.ProgressStartEvent = exports.CapabilitiesEvent = exports.LoadedSourceEvent = exports.ModuleEvent = exports.BreakpointEvent = exports.ThreadEvent = exports.OutputEvent = exports.TerminatedEvent = exports.InitializedEvent = exports.ContinuedEvent = exports.StoppedEvent = exports.CompletionItem = exports.Module = exports.Breakpoint = exports.Variable = exports.Thread = exports.StackFrame = exports.Scope = exports.Source = void 0;\nconst protocol_1 = require(\"./protocol\");\nconst messages_1 = require(\"./messages\");\nconst runDebugAdapter_1 = require(\"./runDebugAdapter\");\nconst url_1 = require(\"url\");\nclass Source {\n    constructor(name, path, id = 0, origin, data) {\n        this.name = name;\n        this.path = path;\n        this.sourceReference = id;\n        if (origin) {\n            this.origin = origin;\n        }\n        if (data) {\n            this.adapterData = data;\n        }\n    }\n}\nexports.Source = Source;\nclass Scope {\n    constructor(name, reference, expensive = false) {\n        this.name = name;\n        this.variablesReference = reference;\n        this.expensive = expensive;\n    }\n}\nexports.Scope = Scope;\nclass StackFrame {\n    constructor(i, nm, src, ln = 0, col = 0) {\n        this.id = i;\n        this.source = src;\n        this.line = ln;\n        this.column = col;\n        this.name = nm;\n    }\n}\nexports.StackFrame = StackFrame;\nclass Thread {\n    constructor(id, name) {\n        this.id = id;\n        if (name) {\n            this.name = name;\n        }\n        else {\n            this.name = 'Thread #' + id;\n        }\n    }\n}\nexports.Thread = Thread;\nclass Variable {\n    constructor(name, value, ref = 0, indexedVariables, namedVariables) {\n        this.name = name;\n        this.value = value;\n        this.variablesReference = ref;\n        if (typeof namedVariables === 'number') {\n            this.namedVariables = namedVariables;\n        }\n        if (typeof indexedVariables === 'number') {\n            this.indexedVariables = indexedVariables;\n        }\n    }\n}\nexports.Variable = Variable;\nclass Breakpoint {\n    constructor(verified, line, column, source) {\n        this.verified = verified;\n        const e = this;\n        if (typeof line === 'number') {\n            e.line = line;\n        }\n        if (typeof column === 'number') {\n            e.column = column;\n        }\n        if (source) {\n            e.source = source;\n        }\n    }\n}\nexports.Breakpoint = Breakpoint;\nclass Module {\n    constructor(id, name) {\n        this.id = id;\n        this.name = name;\n    }\n}\nexports.Module = Module;\nclass CompletionItem {\n    constructor(label, start, length = 0) {\n        this.label = label;\n        this.start = start;\n        this.length = length;\n    }\n}\nexports.CompletionItem = CompletionItem;\nclass StoppedEvent extends messages_1.Event {\n    constructor(reason, threadId, exceptionText) {\n        super('stopped');\n        this.body = {\n            reason: reason\n        };\n        if (typeof threadId === 'number') {\n            this.body.threadId = threadId;\n        }\n        if (typeof exceptionText === 'string') {\n            this.body.text = exceptionText;\n        }\n    }\n}\nexports.StoppedEvent = StoppedEvent;\nclass ContinuedEvent extends messages_1.Event {\n    constructor(threadId, allThreadsContinued) {\n        super('continued');\n        this.body = {\n            threadId: threadId\n        };\n        if (typeof allThreadsContinued === 'boolean') {\n            this.body.allThreadsContinued = allThreadsContinued;\n        }\n    }\n}\nexports.ContinuedEvent = ContinuedEvent;\nclass InitializedEvent extends messages_1.Event {\n    constructor() {\n        super('initialized');\n    }\n}\nexports.InitializedEvent = InitializedEvent;\nclass TerminatedEvent extends messages_1.Event {\n    constructor(restart) {\n        super('terminated');\n        if (typeof restart === 'boolean' || restart) {\n            const e = this;\n            e.body = {\n                restart: restart\n            };\n        }\n    }\n}\nexports.TerminatedEvent = TerminatedEvent;\nclass OutputEvent extends messages_1.Event {\n    constructor(output, category = 'console', data) {\n        super('output');\n        this.body = {\n            category: category,\n            output: output\n        };\n        if (data !== undefined) {\n            this.body.data = data;\n        }\n    }\n}\nexports.OutputEvent = OutputEvent;\nclass ThreadEvent extends messages_1.Event {\n    constructor(reason, threadId) {\n        super('thread');\n        this.body = {\n            reason: reason,\n            threadId: threadId\n        };\n    }\n}\nexports.ThreadEvent = ThreadEvent;\nclass BreakpointEvent extends messages_1.Event {\n    constructor(reason, breakpoint) {\n        super('breakpoint');\n        this.body = {\n            reason: reason,\n            breakpoint: breakpoint\n        };\n    }\n}\nexports.BreakpointEvent = BreakpointEvent;\nclass ModuleEvent extends messages_1.Event {\n    constructor(reason, module) {\n        super('module');\n        this.body = {\n            reason: reason,\n            module: module\n        };\n    }\n}\nexports.ModuleEvent = ModuleEvent;\nclass LoadedSourceEvent extends messages_1.Event {\n    constructor(reason, source) {\n        super('loadedSource');\n        this.body = {\n            reason: reason,\n            source: source\n        };\n    }\n}\nexports.LoadedSourceEvent = LoadedSourceEvent;\nclass CapabilitiesEvent extends messages_1.Event {\n    constructor(capabilities) {\n        super('capabilities');\n        this.body = {\n            capabilities: capabilities\n        };\n    }\n}\nexports.CapabilitiesEvent = CapabilitiesEvent;\nclass ProgressStartEvent extends messages_1.Event {\n    constructor(progressId, title, message) {\n        super('progressStart');\n        this.body = {\n            progressId: progressId,\n            title: title\n        };\n        if (typeof message === 'string') {\n            this.body.message = message;\n        }\n    }\n}\nexports.ProgressStartEvent = ProgressStartEvent;\nclass ProgressUpdateEvent extends messages_1.Event {\n    constructor(progressId, message) {\n        super('progressUpdate');\n        this.body = {\n            progressId: progressId\n        };\n        if (typeof message === 'string') {\n            this.body.message = message;\n        }\n    }\n}\nexports.ProgressUpdateEvent = ProgressUpdateEvent;\nclass ProgressEndEvent extends messages_1.Event {\n    constructor(progressId, message) {\n        super('progressEnd');\n        this.body = {\n            progressId: progressId\n        };\n        if (typeof message === 'string') {\n            this.body.message = message;\n        }\n    }\n}\nexports.ProgressEndEvent = ProgressEndEvent;\nclass InvalidatedEvent extends messages_1.Event {\n    constructor(areas, threadId, stackFrameId) {\n        super('invalidated');\n        this.body = {};\n        if (areas) {\n            this.body.areas = areas;\n        }\n        if (threadId) {\n            this.body.threadId = threadId;\n        }\n        if (stackFrameId) {\n            this.body.stackFrameId = stackFrameId;\n        }\n    }\n}\nexports.InvalidatedEvent = InvalidatedEvent;\nvar ErrorDestination;\n(function (ErrorDestination) {\n    ErrorDestination[ErrorDestination[\"User\"] = 1] = \"User\";\n    ErrorDestination[ErrorDestination[\"Telemetry\"] = 2] = \"Telemetry\";\n})(ErrorDestination = exports.ErrorDestination || (exports.ErrorDestination = {}));\n;\nclass DebugSession extends protocol_1.ProtocolServer {\n    constructor(obsolete_debuggerLinesAndColumnsStartAt1, obsolete_isServer) {\n        super();\n        const linesAndColumnsStartAt1 = typeof obsolete_debuggerLinesAndColumnsStartAt1 === 'boolean' ? obsolete_debuggerLinesAndColumnsStartAt1 : false;\n        this._debuggerLinesStartAt1 = linesAndColumnsStartAt1;\n        this._debuggerColumnsStartAt1 = linesAndColumnsStartAt1;\n        this._debuggerPathsAreURIs = false;\n        this._clientLinesStartAt1 = true;\n        this._clientColumnsStartAt1 = true;\n        this._clientPathsAreURIs = false;\n        this._isServer = typeof obsolete_isServer === 'boolean' ? obsolete_isServer : false;\n        this.on('close', () => {\n            this.shutdown();\n        });\n        this.on('error', (error) => {\n            this.shutdown();\n        });\n    }\n    setDebuggerPathFormat(format) {\n        this._debuggerPathsAreURIs = format !== 'path';\n    }\n    setDebuggerLinesStartAt1(enable) {\n        this._debuggerLinesStartAt1 = enable;\n    }\n    setDebuggerColumnsStartAt1(enable) {\n        this._debuggerColumnsStartAt1 = enable;\n    }\n    setRunAsServer(enable) {\n        this._isServer = enable;\n    }\n    /**\n     * A virtual constructor...\n     */\n    static run(debugSession) {\n        runDebugAdapter_1.runDebugAdapter(debugSession);\n    }\n    shutdown() {\n        if (this._isServer || this._isRunningInline()) {\n            // shutdown ignored in server mode\n        }\n        else {\n            // wait a bit before shutting down\n            setTimeout(() => {\n                process.exit(0);\n            }, 100);\n        }\n    }\n    sendErrorResponse(response, codeOrMessage, format, variables, dest = ErrorDestination.User) {\n        let msg;\n        if (typeof codeOrMessage === 'number') {\n            msg = {\n                id: codeOrMessage,\n                format: format\n            };\n            if (variables) {\n                msg.variables = variables;\n            }\n            if (dest & ErrorDestination.User) {\n                msg.showUser = true;\n            }\n            if (dest & ErrorDestination.Telemetry) {\n                msg.sendTelemetry = true;\n            }\n        }\n        else {\n            msg = codeOrMessage;\n        }\n        response.success = false;\n        response.message = DebugSession.formatPII(msg.format, true, msg.variables);\n        if (!response.body) {\n            response.body = {};\n        }\n        response.body.error = msg;\n        this.sendResponse(response);\n    }\n    runInTerminalRequest(args, timeout, cb) {\n        this.sendRequest('runInTerminal', args, timeout, cb);\n    }\n    dispatchRequest(request) {\n        const response = new messages_1.Response(request);\n        try {\n            if (request.command === 'initialize') {\n                var args = request.arguments;\n                if (typeof args.linesStartAt1 === 'boolean') {\n                    this._clientLinesStartAt1 = args.linesStartAt1;\n                }\n                if (typeof args.columnsStartAt1 === 'boolean') {\n                    this._clientColumnsStartAt1 = args.columnsStartAt1;\n                }\n                if (args.pathFormat !== 'path') {\n                    this.sendErrorResponse(response, 2018, 'debug adapter only supports native paths', null, ErrorDestination.Telemetry);\n                }\n                else {\n                    const initializeResponse = response;\n                    initializeResponse.body = {};\n                    this.initializeRequest(initializeResponse, args);\n                }\n            }\n            else if (request.command === 'launch') {\n                this.launchRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'attach') {\n                this.attachRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'disconnect') {\n                this.disconnectRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'terminate') {\n                this.terminateRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'restart') {\n                this.restartRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setBreakpoints') {\n                this.setBreakPointsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setFunctionBreakpoints') {\n                this.setFunctionBreakPointsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setExceptionBreakpoints') {\n                this.setExceptionBreakPointsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'configurationDone') {\n                this.configurationDoneRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'continue') {\n                this.continueRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'next') {\n                this.nextRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'stepIn') {\n                this.stepInRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'stepOut') {\n                this.stepOutRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'stepBack') {\n                this.stepBackRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'reverseContinue') {\n                this.reverseContinueRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'restartFrame') {\n                this.restartFrameRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'goto') {\n                this.gotoRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'pause') {\n                this.pauseRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'stackTrace') {\n                this.stackTraceRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'scopes') {\n                this.scopesRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'variables') {\n                this.variablesRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setVariable') {\n                this.setVariableRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setExpression') {\n                this.setExpressionRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'source') {\n                this.sourceRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'threads') {\n                this.threadsRequest(response, request);\n            }\n            else if (request.command === 'terminateThreads') {\n                this.terminateThreadsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'evaluate') {\n                this.evaluateRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'stepInTargets') {\n                this.stepInTargetsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'gotoTargets') {\n                this.gotoTargetsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'completions') {\n                this.completionsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'exceptionInfo') {\n                this.exceptionInfoRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'loadedSources') {\n                this.loadedSourcesRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'dataBreakpointInfo') {\n                this.dataBreakpointInfoRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setDataBreakpoints') {\n                this.setDataBreakpointsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'readMemory') {\n                this.readMemoryRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'writeMemory') {\n                this.writeMemoryRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'disassemble') {\n                this.disassembleRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'cancel') {\n                this.cancelRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'breakpointLocations') {\n                this.breakpointLocationsRequest(response, request.arguments, request);\n            }\n            else if (request.command === 'setInstructionBreakpoints') {\n                this.setInstructionBreakpointsRequest(response, request.arguments, request);\n            }\n            else {\n                this.customRequest(request.command, response, request.arguments, request);\n            }\n        }\n        catch (e) {\n            this.sendErrorResponse(response, 1104, '{_stack}', { _exception: e.message, _stack: e.stack }, ErrorDestination.Telemetry);\n        }\n    }\n    initializeRequest(response, args) {\n        // This default debug adapter does not support conditional breakpoints.\n        response.body.supportsConditionalBreakpoints = false;\n        // This default debug adapter does not support hit conditional breakpoints.\n        response.body.supportsHitConditionalBreakpoints = false;\n        // This default debug adapter does not support function breakpoints.\n        response.body.supportsFunctionBreakpoints = false;\n        // This default debug adapter implements the 'configurationDone' request.\n        response.body.supportsConfigurationDoneRequest = true;\n        // This default debug adapter does not support hovers based on the 'evaluate' request.\n        response.body.supportsEvaluateForHovers = false;\n        // This default debug adapter does not support the 'stepBack' request.\n        response.body.supportsStepBack = false;\n        // This default debug adapter does not support the 'setVariable' request.\n        response.body.supportsSetVariable = false;\n        // This default debug adapter does not support the 'restartFrame' request.\n        response.body.supportsRestartFrame = false;\n        // This default debug adapter does not support the 'stepInTargets' request.\n        response.body.supportsStepInTargetsRequest = false;\n        // This default debug adapter does not support the 'gotoTargets' request.\n        response.body.supportsGotoTargetsRequest = false;\n        // This default debug adapter does not support the 'completions' request.\n        response.body.supportsCompletionsRequest = false;\n        // This default debug adapter does not support the 'restart' request.\n        response.body.supportsRestartRequest = false;\n        // This default debug adapter does not support the 'exceptionOptions' attribute on the 'setExceptionBreakpoints' request.\n        response.body.supportsExceptionOptions = false;\n        // This default debug adapter does not support the 'format' attribute on the 'variables', 'evaluate', and 'stackTrace' request.\n        response.body.supportsValueFormattingOptions = false;\n        // This debug adapter does not support the 'exceptionInfo' request.\n        response.body.supportsExceptionInfoRequest = false;\n        // This debug adapter does not support the 'TerminateDebuggee' attribute on the 'disconnect' request.\n        response.body.supportTerminateDebuggee = false;\n        // This debug adapter does not support delayed loading of stack frames.\n        response.body.supportsDelayedStackTraceLoading = false;\n        // This debug adapter does not support the 'loadedSources' request.\n        response.body.supportsLoadedSourcesRequest = false;\n        // This debug adapter does not support the 'logMessage' attribute of the SourceBreakpoint.\n        response.body.supportsLogPoints = false;\n        // This debug adapter does not support the 'terminateThreads' request.\n        response.body.supportsTerminateThreadsRequest = false;\n        // This debug adapter does not support the 'setExpression' request.\n        response.body.supportsSetExpression = false;\n        // This debug adapter does not support the 'terminate' request.\n        response.body.supportsTerminateRequest = false;\n        // This debug adapter does not support data breakpoints.\n        response.body.supportsDataBreakpoints = false;\n        /** This debug adapter does not support the 'readMemory' request. */\n        response.body.supportsReadMemoryRequest = false;\n        /** The debug adapter does not support the 'disassemble' request. */\n        response.body.supportsDisassembleRequest = false;\n        /** The debug adapter does not support the 'cancel' request. */\n        response.body.supportsCancelRequest = false;\n        /** The debug adapter does not support the 'breakpointLocations' request. */\n        response.body.supportsBreakpointLocationsRequest = false;\n        /** The debug adapter does not support the 'clipboard' context value in the 'evaluate' request. */\n        response.body.supportsClipboardContext = false;\n        /** The debug adapter does not support stepping granularities for the stepping requests. */\n        response.body.supportsSteppingGranularity = false;\n        /** The debug adapter does not support the 'setInstructionBreakpoints' request. */\n        response.body.supportsInstructionBreakpoints = false;\n        /** The debug adapter does not support 'filterOptions' on the 'setExceptionBreakpoints' request. */\n        response.body.supportsExceptionFilterOptions = false;\n        this.sendResponse(response);\n    }\n    disconnectRequest(response, args, request) {\n        this.sendResponse(response);\n        this.shutdown();\n    }\n    launchRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    attachRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    terminateRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    restartRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setBreakPointsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setFunctionBreakPointsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setExceptionBreakPointsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    configurationDoneRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    continueRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    nextRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    stepInRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    stepOutRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    stepBackRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    reverseContinueRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    restartFrameRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    gotoRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    pauseRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    sourceRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    threadsRequest(response, request) {\n        this.sendResponse(response);\n    }\n    terminateThreadsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    stackTraceRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    scopesRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    variablesRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setVariableRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setExpressionRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    evaluateRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    stepInTargetsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    gotoTargetsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    completionsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    exceptionInfoRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    loadedSourcesRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    dataBreakpointInfoRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setDataBreakpointsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    readMemoryRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    writeMemoryRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    disassembleRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    cancelRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    breakpointLocationsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    setInstructionBreakpointsRequest(response, args, request) {\n        this.sendResponse(response);\n    }\n    /**\n     * Override this hook to implement custom requests.\n     */\n    customRequest(command, response, args, request) {\n        this.sendErrorResponse(response, 1014, 'unrecognized request', null, ErrorDestination.Telemetry);\n    }\n    //---- protected -------------------------------------------------------------------------------------------------\n    convertClientLineToDebugger(line) {\n        if (this._debuggerLinesStartAt1) {\n            return this._clientLinesStartAt1 ? line : line + 1;\n        }\n        return this._clientLinesStartAt1 ? line - 1 : line;\n    }\n    convertDebuggerLineToClient(line) {\n        if (this._debuggerLinesStartAt1) {\n            return this._clientLinesStartAt1 ? line : line - 1;\n        }\n        return this._clientLinesStartAt1 ? line + 1 : line;\n    }\n    convertClientColumnToDebugger(column) {\n        if (this._debuggerColumnsStartAt1) {\n            return this._clientColumnsStartAt1 ? column : column + 1;\n        }\n        return this._clientColumnsStartAt1 ? column - 1 : column;\n    }\n    convertDebuggerColumnToClient(column) {\n        if (this._debuggerColumnsStartAt1) {\n            return this._clientColumnsStartAt1 ? column : column - 1;\n        }\n        return this._clientColumnsStartAt1 ? column + 1 : column;\n    }\n    convertClientPathToDebugger(clientPath) {\n        if (this._clientPathsAreURIs !== this._debuggerPathsAreURIs) {\n            if (this._clientPathsAreURIs) {\n                return DebugSession.uri2path(clientPath);\n            }\n            else {\n                return DebugSession.path2uri(clientPath);\n            }\n        }\n        return clientPath;\n    }\n    convertDebuggerPathToClient(debuggerPath) {\n        if (this._debuggerPathsAreURIs !== this._clientPathsAreURIs) {\n            if (this._debuggerPathsAreURIs) {\n                return DebugSession.uri2path(debuggerPath);\n            }\n            else {\n                return DebugSession.path2uri(debuggerPath);\n            }\n        }\n        return debuggerPath;\n    }\n    //---- private -------------------------------------------------------------------------------\n    static path2uri(path) {\n        if (process.platform === 'win32') {\n            if (/^[A-Z]:/.test(path)) {\n                path = path[0].toLowerCase() + path.substr(1);\n            }\n            path = path.replace(/\\\\/g, '/');\n        }\n        path = encodeURI(path);\n        let uri = new url_1.URL(`file:`); // ignore 'path' for now\n        uri.pathname = path; // now use 'path' to get the correct percent encoding (see https://url.spec.whatwg.org)\n        return uri.toString();\n    }\n    static uri2path(sourceUri) {\n        let uri = new url_1.URL(sourceUri);\n        let s = decodeURIComponent(uri.pathname);\n        if (process.platform === 'win32') {\n            if (/^\\/[a-zA-Z]:/.test(s)) {\n                s = s[1].toLowerCase() + s.substr(2);\n            }\n            s = s.replace(/\\//g, '\\\\');\n        }\n        return s;\n    }\n    /*\n    * If argument starts with '_' it is OK to send its value to telemetry.\n    */\n    static formatPII(format, excludePII, args) {\n        return format.replace(DebugSession._formatPIIRegexp, function (match, paramName) {\n            if (excludePII && paramName.length > 0 && paramName[0] !== '_') {\n                return match;\n            }\n            return args[paramName] && args.hasOwnProperty(paramName) ?\n                args[paramName] :\n                match;\n        });\n    }\n}\nexports.DebugSession = DebugSession;\nDebugSession._formatPIIRegexp = /{([^}]+)}/g;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVidWdTZXNzaW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2RlYnVnU2Vzc2lvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztnR0FHZ0c7OztBQUdoRyx5Q0FBNEM7QUFDNUMseUNBQTZDO0FBQzdDLHVEQUFvRDtBQUNwRCw2QkFBMEI7QUFHMUIsTUFBYSxNQUFNO0lBS2xCLFlBQW1CLElBQVksRUFBRSxJQUFhLEVBQUUsS0FBYSxDQUFDLEVBQUUsTUFBZSxFQUFFLElBQVU7UUFDMUYsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDMUIsSUFBSSxNQUFNLEVBQUU7WUFDTCxJQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztTQUM1QjtRQUNELElBQUksSUFBSSxFQUFFO1lBQ0gsSUFBSyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FDL0I7SUFDRixDQUFDO0NBQ0Q7QUFoQkQsd0JBZ0JDO0FBRUQsTUFBYSxLQUFLO0lBS2pCLFlBQW1CLElBQVksRUFBRSxTQUFpQixFQUFFLFlBQXFCLEtBQUs7UUFDN0UsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLFNBQVMsQ0FBQztRQUNwQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM1QixDQUFDO0NBQ0Q7QUFWRCxzQkFVQztBQUVELE1BQWEsVUFBVTtJQU90QixZQUFtQixDQUFTLEVBQUUsRUFBVSxFQUFFLEdBQVksRUFBRSxLQUFhLENBQUMsRUFBRSxNQUFjLENBQUM7UUFDdEYsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDWixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztRQUNsQixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUs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QUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pELElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUNqQixLQUFLLENBQUM7UUFDUixDQUFDLENBQUMsQ0FBQTtJQUNILENBQUM7O0FBeG1CRixvQ0F5bUJDO0FBZmUsNkJBQWdCLEdBQUcsWUFBWSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IERlYnVnUHJvdG9jb2wgfSBmcm9tICd2c2NvZGUtZGVidWdwcm90b2NvbCc7XG5pbXBvcnQgeyBQcm90b2NvbFNlcnZlciB9IGZyb20gJy4vcHJvdG9jb2wnO1xuaW1wb3J0IHsgUmVzcG9uc2UsIEV2ZW50IH0gZnJvbSAnLi9tZXNzYWdlcyc7XG5pbXBvcnQgeyBydW5EZWJ1Z0FkYXB0ZXIgfSBmcm9tICcuL3J1bkRlYnVnQWRhcHRlcic7XG5pbXBvcnQgeyBVUkwgfSBmcm9tICd1cmwnO1xuXG5cbmV4cG9ydCBjbGFzcyBTb3VyY2UgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlNvdXJjZSB7XG5cdG5hbWU6IHN0cmluZztcblx0cGF0aDogc3RyaW5nO1xuXHRzb3VyY2VSZWZlcmVuY2U6IG51bWJlcjtcblxuXHRwdWJsaWMgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBwYXRoPzogc3RyaW5nLCBpZDogbnVtYmVyID0gMCwgb3JpZ2luPzogc3RyaW5nLCBkYXRhPzogYW55KSB7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLnBhdGggPSBwYXRoO1xuXHRcdHRoaXMuc291cmNlUmVmZXJlbmNlID0gaWQ7XG5cdFx0aWYgKG9yaWdpbikge1xuXHRcdFx0KDxhbnk+dGhpcykub3JpZ2luID0gb3JpZ2luO1xuXHRcdH1cblx0XHRpZiAoZGF0YSkge1xuXHRcdFx0KDxhbnk+dGhpcykuYWRhcHRlckRhdGEgPSBkYXRhO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgU2NvcGUgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlNjb3BlIHtcblx0bmFtZTogc3RyaW5nO1xuXHR2YXJpYWJsZXNSZWZlcmVuY2U6IG51bWJlcjtcblx0ZXhwZW5zaXZlOiBib29sZWFuO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHJlZmVyZW5jZTogbnVtYmVyLCBleHBlbnNpdmU6IGJvb2xlYW4gPSBmYWxzZSkge1xuXHRcdHRoaXMubmFtZSA9IG5hbWU7XG5cdFx0dGhpcy52YXJpYWJsZXNSZWZlcmVuY2UgPSByZWZlcmVuY2U7XG5cdFx0dGhpcy5leHBlbnNpdmUgPSBleHBlbnNpdmU7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0YWNrRnJhbWUgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlN0YWNrRnJhbWUge1xuXHRpZDogbnVtYmVyO1xuXHRzb3VyY2U6IFNvdXJjZTtcblx0bGluZTogbnVtYmVyO1xuXHRjb2x1bW46IG51bWJlcjtcblx0bmFtZTogc3RyaW5nO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihpOiBudW1iZXIsIG5tOiBzdHJpbmcsIHNyYz86IFNvdXJjZSwgbG46IG51bWJlciA9IDAsIGNvbDogbnVtYmVyID0gMCkge1xuXHRcdHRoaXMuaWQgPSBpO1xuXHRcdHRoaXMuc291cmNlID0gc3JjO1xuXHRcdHRoaXMubGluZSA9IGxuO1xuXHRcdHRoaXMuY29sdW1uID0gY29sO1xuXHRcdHRoaXMubmFtZSA9IG5tO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBUaHJlYWQgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlRocmVhZCB7XG5cdGlkOiBudW1iZXI7XG5cdG5hbWU6IHN0cmluZztcblxuXHRwdWJsaWMgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgbmFtZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5pZCA9IGlkO1xuXHRcdGlmIChuYW1lKSB7XG5cdFx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm5hbWUgPSAnVGhyZWFkICMnICsgaWQ7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBWYXJpYWJsZSBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuVmFyaWFibGUge1xuXHRuYW1lOiBzdHJpbmc7XG5cdHZhbHVlOiBzdHJpbmc7XG5cdHZhcmlhYmxlc1JlZmVyZW5jZTogbnVtYmVyO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHJlZjogbnVtYmVyID0gMCwgaW5kZXhlZFZhcmlhYmxlcz86IG51bWJlciwgbmFtZWRWYXJpYWJsZXM/OiBudW1iZXIpIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0XHR0aGlzLnZhcmlhYmxlc1JlZmVyZW5jZSA9IHJlZjtcblx0XHRpZiAodHlwZW9mIG5hbWVkVmFyaWFibGVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0KDxEZWJ1Z1Byb3RvY29sLlZhcmlhYmxlPnRoaXMpLm5hbWVkVmFyaWFibGVzID0gbmFtZWRWYXJpYWJsZXM7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgaW5kZXhlZFZhcmlhYmxlcyA9PT0gJ251bWJlcicpIHtcblx0XHRcdCg8RGVidWdQcm90b2NvbC5WYXJpYWJsZT50aGlzKS5pbmRleGVkVmFyaWFibGVzID0gaW5kZXhlZFZhcmlhYmxlcztcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEJyZWFrcG9pbnQgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLkJyZWFrcG9pbnQge1xuXHR2ZXJpZmllZDogYm9vbGVhbjtcblxuXHRwdWJsaWMgY29uc3RydWN0b3IodmVyaWZpZWQ6IGJvb2xlYW4sIGxpbmU/OiBudW1iZXIsIGNvbHVtbj86IG51bWJlciwgc291cmNlPzogU291cmNlKSB7XG5cdFx0dGhpcy52ZXJpZmllZCA9IHZlcmlmaWVkO1xuXHRcdGNvbnN0IGU6IERlYnVnUHJvdG9jb2wuQnJlYWtwb2ludCA9IHRoaXM7XG5cdFx0aWYgKHR5cGVvZiBsaW5lID09PSAnbnVtYmVyJykge1xuXHRcdFx0ZS5saW5lID0gbGluZTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBjb2x1bW4gPT09ICdudW1iZXInKSB7XG5cdFx0XHRlLmNvbHVtbiA9IGNvbHVtbjtcblx0XHR9XG5cdFx0aWYgKHNvdXJjZSkge1xuXHRcdFx0ZS5zb3VyY2UgPSBzb3VyY2U7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBNb2R1bGUgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLk1vZHVsZSB7XG5cdGlkOiBudW1iZXIgfCBzdHJpbmc7XG5cdG5hbWU6IHN0cmluZztcblxuXHRwdWJsaWMgY29uc3RydWN0b3IoaWQ6IG51bWJlciB8IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5pZCA9IGlkO1xuXHRcdHRoaXMubmFtZSA9IG5hbWU7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25JdGVtIGltcGxlbWVudHMgRGVidWdQcm90b2NvbC5Db21wbGV0aW9uSXRlbSB7XG5cdGxhYmVsOiBzdHJpbmc7XG5cdHN0YXJ0OiBudW1iZXI7XG5cdGxlbmd0aDogbnVtYmVyO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihsYWJlbDogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciA9IDApIHtcblx0XHR0aGlzLmxhYmVsID0gbGFiZWw7XG5cdFx0dGhpcy5zdGFydCA9IHN0YXJ0O1xuXHRcdHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTdG9wcGVkRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuU3RvcHBlZEV2ZW50IHtcblx0Ym9keToge1xuXHRcdHJlYXNvbjogc3RyaW5nO1xuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihyZWFzb246IHN0cmluZywgdGhyZWFkSWQ/OiBudW1iZXIsIGV4Y2VwdGlvblRleHQ/OiBzdHJpbmcpIHtcblx0XHRzdXBlcignc3RvcHBlZCcpO1xuXHRcdHRoaXMuYm9keSA9IHtcblx0XHRcdHJlYXNvbjogcmVhc29uXG5cdFx0fTtcblx0XHRpZiAodHlwZW9mIHRocmVhZElkID09PSAnbnVtYmVyJykge1xuXHRcdFx0KHRoaXMgYXMgRGVidWdQcm90b2NvbC5TdG9wcGVkRXZlbnQpLmJvZHkudGhyZWFkSWQgPSB0aHJlYWRJZDtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBleGNlcHRpb25UZXh0ID09PSAnc3RyaW5nJykge1xuXHRcdFx0KHRoaXMgYXMgRGVidWdQcm90b2NvbC5TdG9wcGVkRXZlbnQpLmJvZHkudGV4dCA9IGV4Y2VwdGlvblRleHQ7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBDb250aW51ZWRFdmVudCBleHRlbmRzIEV2ZW50IGltcGxlbWVudHMgRGVidWdQcm90b2NvbC5Db250aW51ZWRFdmVudCB7XG5cdGJvZHk6IHtcblx0XHR0aHJlYWRJZDogbnVtYmVyO1xuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcih0aHJlYWRJZDogbnVtYmVyLCBhbGxUaHJlYWRzQ29udGludWVkPzogYm9vbGVhbikge1xuXHRcdHN1cGVyKCdjb250aW51ZWQnKTtcblx0XHR0aGlzLmJvZHkgPSB7XG5cdFx0XHR0aHJlYWRJZDogdGhyZWFkSWRcblx0XHR9O1xuXG5cdFx0aWYgKHR5cGVvZiBhbGxUaHJlYWRzQ29udGludWVkID09PSAnYm9vbGVhbicpIHtcblx0XHRcdCg8RGVidWdQcm90b2NvbC5Db250aW51ZWRFdmVudD50aGlzKS5ib2R5LmFsbFRocmVhZHNDb250aW51ZWQgPSBhbGxUaHJlYWRzQ29udGludWVkO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgSW5pdGlhbGl6ZWRFdmVudCBleHRlbmRzIEV2ZW50IGltcGxlbWVudHMgRGVidWdQcm90b2NvbC5Jbml0aWFsaXplZEV2ZW50IHtcblx0cHVibGljIGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKCdpbml0aWFsaXplZCcpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hdGVkRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuVGVybWluYXRlZEV2ZW50IHtcblx0cHVibGljIGNvbnN0cnVjdG9yKHJlc3RhcnQ/OiBhbnkpIHtcblx0XHRzdXBlcigndGVybWluYXRlZCcpO1xuXHRcdGlmICh0eXBlb2YgcmVzdGFydCA9PT0gJ2Jvb2xlYW4nIHx8IHJlc3RhcnQpIHtcblx0XHRcdGNvbnN0IGU6IERlYnVnUHJvdG9jb2wuVGVybWluYXRlZEV2ZW50ID0gdGhpcztcblx0XHRcdGUuYm9keSA9IHtcblx0XHRcdFx0cmVzdGFydDogcmVzdGFydFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIE91dHB1dEV2ZW50IGV4dGVuZHMgRXZlbnQgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLk91dHB1dEV2ZW50IHtcblx0Ym9keToge1xuXHRcdGNhdGVnb3J5OiBzdHJpbmcsXG5cdFx0b3V0cHV0OiBzdHJpbmcsXG5cdFx0ZGF0YT86IGFueVxuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihvdXRwdXQ6IHN0cmluZywgY2F0ZWdvcnk6IHN0cmluZyA9ICdjb25zb2xlJywgZGF0YT86IGFueSkge1xuXHRcdHN1cGVyKCdvdXRwdXQnKTtcblx0XHR0aGlzLmJvZHkgPSB7XG5cdFx0XHRjYXRlZ29yeTogY2F0ZWdvcnksXG5cdFx0XHRvdXRwdXQ6IG91dHB1dFxuXHRcdH07XG5cdFx0aWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhpcy5ib2R5LmRhdGEgPSBkYXRhO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVGhyZWFkRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuVGhyZWFkRXZlbnQge1xuXHRib2R5OiB7XG5cdFx0cmVhc29uOiBzdHJpbmcsXG5cdFx0dGhyZWFkSWQ6IG51bWJlclxuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihyZWFzb246IHN0cmluZywgdGhyZWFkSWQ6IG51bWJlcikge1xuXHRcdHN1cGVyKCd0aHJlYWQnKTtcblx0XHR0aGlzLmJvZHkgPSB7XG5cdFx0XHRyZWFzb246IHJlYXNvbixcblx0XHRcdHRocmVhZElkOiB0aHJlYWRJZFxuXHRcdH07XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEJyZWFrcG9pbnRFdmVudCBleHRlbmRzIEV2ZW50IGltcGxlbWVudHMgRGVidWdQcm90b2NvbC5CcmVha3BvaW50RXZlbnQge1xuXHRib2R5OiB7XG5cdFx0cmVhc29uOiBzdHJpbmcsXG5cdFx0YnJlYWtwb2ludDogQnJlYWtwb2ludFxuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihyZWFzb246IHN0cmluZywgYnJlYWtwb2ludDogQnJlYWtwb2ludCkge1xuXHRcdHN1cGVyKCdicmVha3BvaW50Jyk7XG5cdFx0dGhpcy5ib2R5ID0ge1xuXHRcdFx0cmVhc29uOiByZWFzb24sXG5cdFx0XHRicmVha3BvaW50OiBicmVha3BvaW50XG5cdFx0fTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTW9kdWxlRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuTW9kdWxlRXZlbnQge1xuXHRib2R5OiB7XG5cdFx0cmVhc29uOiAnbmV3JyB8ICdjaGFuZ2VkJyB8ICdyZW1vdmVkJyxcblx0XHRtb2R1bGU6IE1vZHVsZVxuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihyZWFzb246ICduZXcnIHwgJ2NoYW5nZWQnIHwgJ3JlbW92ZWQnLCBtb2R1bGU6IE1vZHVsZSkge1xuXHRcdHN1cGVyKCdtb2R1bGUnKTtcblx0XHR0aGlzLmJvZHkgPSB7XG5cdFx0XHRyZWFzb246IHJlYXNvbixcblx0XHRcdG1vZHVsZTogbW9kdWxlXG5cdFx0fTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTG9hZGVkU291cmNlRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuTG9hZGVkU291cmNlRXZlbnQge1xuXHRib2R5OiB7XG5cdFx0cmVhc29uOiAnbmV3JyB8ICdjaGFuZ2VkJyB8ICdyZW1vdmVkJyxcblx0XHRzb3VyY2U6IFNvdXJjZVxuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihyZWFzb246ICduZXcnIHwgJ2NoYW5nZWQnIHwgJ3JlbW92ZWQnLCBzb3VyY2U6IFNvdXJjZSkge1xuXHRcdHN1cGVyKCdsb2FkZWRTb3VyY2UnKTtcblx0XHR0aGlzLmJvZHkgPSB7XG5cdFx0XHRyZWFzb246IHJlYXNvbixcblx0XHRcdHNvdXJjZTogc291cmNlXG5cdFx0fTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgQ2FwYWJpbGl0aWVzRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuQ2FwYWJpbGl0aWVzRXZlbnQge1xuXHRib2R5OiB7XG5cdFx0Y2FwYWJpbGl0aWVzOiBEZWJ1Z1Byb3RvY29sLkNhcGFiaWxpdGllc1xuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihjYXBhYmlsaXRpZXM6IERlYnVnUHJvdG9jb2wuQ2FwYWJpbGl0aWVzKSB7XG5cdFx0c3VwZXIoJ2NhcGFiaWxpdGllcycpO1xuXHRcdHRoaXMuYm9keSA9IHtcblx0XHRcdGNhcGFiaWxpdGllczogY2FwYWJpbGl0aWVzXG5cdFx0fTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NTdGFydEV2ZW50IGV4dGVuZHMgRXZlbnQgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlByb2dyZXNzU3RhcnRFdmVudCB7XG5cdGJvZHk6IHtcblx0XHRwcm9ncmVzc0lkOiBzdHJpbmcsXG5cdFx0dGl0bGU6IHN0cmluZ1xuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm9ncmVzc0lkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcblx0XHRzdXBlcigncHJvZ3Jlc3NTdGFydCcpO1xuXHRcdHRoaXMuYm9keSA9IHtcblx0XHRcdHByb2dyZXNzSWQ6IHByb2dyZXNzSWQsXG5cdFx0XHR0aXRsZTogdGl0bGVcblx0XHR9O1xuXHRcdGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdCh0aGlzIGFzIERlYnVnUHJvdG9jb2wuUHJvZ3Jlc3NTdGFydEV2ZW50KS5ib2R5Lm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NVcGRhdGVFdmVudCBleHRlbmRzIEV2ZW50IGltcGxlbWVudHMgRGVidWdQcm90b2NvbC5Qcm9ncmVzc1VwZGF0ZUV2ZW50IHtcblx0Ym9keToge1xuXHRcdHByb2dyZXNzSWQ6IHN0cmluZ1xuXHR9O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm9ncmVzc0lkOiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcblx0XHRzdXBlcigncHJvZ3Jlc3NVcGRhdGUnKTtcblx0XHR0aGlzLmJvZHkgPSB7XG5cdFx0XHRwcm9ncmVzc0lkOiBwcm9ncmVzc0lkXG5cdFx0fTtcblx0XHRpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHQodGhpcyBhcyBEZWJ1Z1Byb3RvY29sLlByb2dyZXNzVXBkYXRlRXZlbnQpLmJvZHkubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc0VuZEV2ZW50IGV4dGVuZHMgRXZlbnQgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlByb2dyZXNzRW5kRXZlbnQge1xuXHRib2R5OiB7XG5cdFx0cHJvZ3Jlc3NJZDogc3RyaW5nXG5cdH07XG5cblx0cHVibGljIGNvbnN0cnVjdG9yKHByb2dyZXNzSWQ6IHN0cmluZywgbWVzc2FnZT86IHN0cmluZykge1xuXHRcdHN1cGVyKCdwcm9ncmVzc0VuZCcpO1xuXHRcdHRoaXMuYm9keSA9IHtcblx0XHRcdHByb2dyZXNzSWQ6IHByb2dyZXNzSWRcblx0XHR9O1xuXHRcdGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdCh0aGlzIGFzIERlYnVnUHJvdG9jb2wuUHJvZ3Jlc3NFbmRFdmVudCkuYm9keS5tZXNzYWdlID0gbWVzc2FnZTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEludmFsaWRhdGVkRXZlbnQgZXh0ZW5kcyBFdmVudCBpbXBsZW1lbnRzIERlYnVnUHJvdG9jb2wuSW52YWxpZGF0ZWRFdmVudCB7XG5cdGJvZHk6IHtcblx0XHRhcmVhcz86IERlYnVnUHJvdG9jb2wuSW52YWxpZGF0ZWRBcmVhc1tdO1xuXHRcdHRocmVhZElkPzogbnVtYmVyO1xuXHRcdHN0YWNrRnJhbWVJZD86IG51bWJlcjtcblx0fTtcblxuXHRwdWJsaWMgY29uc3RydWN0b3IoYXJlYXM/OiBEZWJ1Z1Byb3RvY29sLkludmFsaWRhdGVkQXJlYXNbXSwgdGhyZWFkSWQ/OiBudW1iZXIsIHN0YWNrRnJhbWVJZD86IG51bWJlcikge1xuXHRcdHN1cGVyKCdpbnZhbGlkYXRlZCcpO1xuXHRcdHRoaXMuYm9keSA9IHtcblx0XHR9O1xuXHRcdGlmIChhcmVhcykge1xuXHRcdFx0dGhpcy5ib2R5LmFyZWFzID0gYXJlYXM7XG5cdFx0fVxuXHRcdGlmICh0aHJlYWRJZCkge1xuXHRcdFx0dGhpcy5ib2R5LnRocmVhZElkID0gdGhyZWFkSWQ7XG5cdFx0fVxuXHRcdGlmIChzdGFja0ZyYW1lSWQpIHtcblx0XHRcdHRoaXMuYm9keS5zdGFja0ZyYW1lSWQgPSBzdGFja0ZyYW1lSWQ7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBlbnVtIEVycm9yRGVzdGluYXRpb24ge1xuXHRVc2VyID0gMSxcblx0VGVsZW1ldHJ5ID0gMlxufTtcblxuZXhwb3J0IGNsYXNzIERlYnVnU2Vzc2lvbiBleHRlbmRzIFByb3RvY29sU2VydmVyIHtcblxuXHRwcml2YXRlIF9kZWJ1Z2dlckxpbmVzU3RhcnRBdDE6IGJvb2xlYW47XG5cdHByaXZhdGUgX2RlYnVnZ2VyQ29sdW1uc1N0YXJ0QXQxOiBib29sZWFuO1xuXHRwcml2YXRlIF9kZWJ1Z2dlclBhdGhzQXJlVVJJczogYm9vbGVhbjtcblxuXHRwcml2YXRlIF9jbGllbnRMaW5lc1N0YXJ0QXQxOiBib29sZWFuO1xuXHRwcml2YXRlIF9jbGllbnRDb2x1bW5zU3RhcnRBdDE6IGJvb2xlYW47XG5cdHByaXZhdGUgX2NsaWVudFBhdGhzQXJlVVJJczogYm9vbGVhbjtcblxuXHRwcm90ZWN0ZWQgX2lzU2VydmVyOiBib29sZWFuO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihvYnNvbGV0ZV9kZWJ1Z2dlckxpbmVzQW5kQ29sdW1uc1N0YXJ0QXQxPzogYm9vbGVhbiwgb2Jzb2xldGVfaXNTZXJ2ZXI/OiBib29sZWFuKSB7XG5cdFx0c3VwZXIoKTtcblxuXHRcdGNvbnN0IGxpbmVzQW5kQ29sdW1uc1N0YXJ0QXQxID0gdHlwZW9mIG9ic29sZXRlX2RlYnVnZ2VyTGluZXNBbmRDb2x1bW5zU3RhcnRBdDEgPT09ICdib29sZWFuJyA/IG9ic29sZXRlX2RlYnVnZ2VyTGluZXNBbmRDb2x1bW5zU3RhcnRBdDEgOiBmYWxzZTtcblx0XHR0aGlzLl9kZWJ1Z2dlckxpbmVzU3RhcnRBdDEgPSBsaW5lc0FuZENvbHVtbnNTdGFydEF0MTtcblx0XHR0aGlzLl9kZWJ1Z2dlckNvbHVtbnNTdGFydEF0MSA9IGxpbmVzQW5kQ29sdW1uc1N0YXJ0QXQxO1xuXHRcdHRoaXMuX2RlYnVnZ2VyUGF0aHNBcmVVUklzID0gZmFsc2U7XG5cblx0XHR0aGlzLl9jbGllbnRMaW5lc1N0YXJ0QXQxID0gdHJ1ZTtcblx0XHR0aGlzLl9jbGllbnRDb2x1bW5zU3RhcnRBdDEgPSB0cnVlO1xuXHRcdHRoaXMuX2NsaWVudFBhdGhzQXJlVVJJcyA9IGZhbHNlO1xuXG5cdFx0dGhpcy5faXNTZXJ2ZXIgPSB0eXBlb2Ygb2Jzb2xldGVfaXNTZXJ2ZXIgPT09ICdib29sZWFuJyA/IG9ic29sZXRlX2lzU2VydmVyIDogZmFsc2U7XG5cblx0XHR0aGlzLm9uKCdjbG9zZScsICgpID0+IHtcblx0XHRcdHRoaXMuc2h1dGRvd24oKTtcblx0XHR9KTtcblx0XHR0aGlzLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuXHRcdFx0dGhpcy5zaHV0ZG93bigpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHNldERlYnVnZ2VyUGF0aEZvcm1hdChmb3JtYXQ6IHN0cmluZykge1xuXHRcdHRoaXMuX2RlYnVnZ2VyUGF0aHNBcmVVUklzID0gZm9ybWF0ICE9PSAncGF0aCc7XG5cdH1cblxuXHRwdWJsaWMgc2V0RGVidWdnZXJMaW5lc1N0YXJ0QXQxKGVuYWJsZTogYm9vbGVhbikge1xuXHRcdHRoaXMuX2RlYnVnZ2VyTGluZXNTdGFydEF0MSA9IGVuYWJsZTtcblx0fVxuXG5cdHB1YmxpYyBzZXREZWJ1Z2dlckNvbHVtbnNTdGFydEF0MShlbmFibGU6IGJvb2xlYW4pIHtcblx0XHR0aGlzLl9kZWJ1Z2dlckNvbHVtbnNTdGFydEF0MSA9IGVuYWJsZTtcblx0fVxuXG5cdHB1YmxpYyBzZXRSdW5Bc1NlcnZlcihlbmFibGU6IGJvb2xlYW4pIHtcblx0XHR0aGlzLl9pc1NlcnZlciA9IGVuYWJsZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIHZpcnR1YWwgY29uc3RydWN0b3IuLi5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcnVuKGRlYnVnU2Vzc2lvbjogdHlwZW9mIERlYnVnU2Vzc2lvbikge1xuXHRcdHJ1bkRlYnVnQWRhcHRlcihkZWJ1Z1Nlc3Npb24pO1xuXHR9XG5cblx0cHVibGljIHNodXRkb3duKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9pc1NlcnZlciB8fCB0aGlzLl9pc1J1bm5pbmdJbmxpbmUoKSkge1xuXHRcdFx0Ly8gc2h1dGRvd24gaWdub3JlZCBpbiBzZXJ2ZXIgbW9kZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyB3YWl0IGEgYml0IGJlZm9yZSBzaHV0dGluZyBkb3duXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0cHJvY2Vzcy5leGl0KDApO1xuXHRcdFx0fSwgMTAwKTtcblx0XHR9XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2VuZEVycm9yUmVzcG9uc2UocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUmVzcG9uc2UsIGNvZGVPck1lc3NhZ2U6IG51bWJlciB8IERlYnVnUHJvdG9jb2wuTWVzc2FnZSwgZm9ybWF0Pzogc3RyaW5nLCB2YXJpYWJsZXM/OiBhbnksIGRlc3Q6IEVycm9yRGVzdGluYXRpb24gPSBFcnJvckRlc3RpbmF0aW9uLlVzZXIpOiB2b2lkIHtcblxuXHRcdGxldCBtc2cgOiBEZWJ1Z1Byb3RvY29sLk1lc3NhZ2U7XG5cdFx0aWYgKHR5cGVvZiBjb2RlT3JNZXNzYWdlID09PSAnbnVtYmVyJykge1xuXHRcdFx0bXNnID0gPERlYnVnUHJvdG9jb2wuTWVzc2FnZT4ge1xuXHRcdFx0XHRpZDogPG51bWJlcj4gY29kZU9yTWVzc2FnZSxcblx0XHRcdFx0Zm9ybWF0OiBmb3JtYXRcblx0XHRcdH07XG5cdFx0XHRpZiAodmFyaWFibGVzKSB7XG5cdFx0XHRcdG1zZy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZGVzdCAmIEVycm9yRGVzdGluYXRpb24uVXNlcikge1xuXHRcdFx0XHRtc2cuc2hvd1VzZXIgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGRlc3QgJiBFcnJvckRlc3RpbmF0aW9uLlRlbGVtZXRyeSkge1xuXHRcdFx0XHRtc2cuc2VuZFRlbGVtZXRyeSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1zZyA9IGNvZGVPck1lc3NhZ2U7XG5cdFx0fVxuXG5cdFx0cmVzcG9uc2Uuc3VjY2VzcyA9IGZhbHNlO1xuXHRcdHJlc3BvbnNlLm1lc3NhZ2UgPSBEZWJ1Z1Nlc3Npb24uZm9ybWF0UElJKG1zZy5mb3JtYXQsIHRydWUsIG1zZy52YXJpYWJsZXMpO1xuXHRcdGlmICghcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0cmVzcG9uc2UuYm9keSA9IHsgfTtcblx0XHR9XG5cdFx0cmVzcG9uc2UuYm9keS5lcnJvciA9IG1zZztcblxuXHRcdHRoaXMuc2VuZFJlc3BvbnNlKHJlc3BvbnNlKTtcblx0fVxuXG5cdHB1YmxpYyBydW5JblRlcm1pbmFsUmVxdWVzdChhcmdzOiBEZWJ1Z1Byb3RvY29sLlJ1bkluVGVybWluYWxSZXF1ZXN0QXJndW1lbnRzLCB0aW1lb3V0OiBudW1iZXIsIGNiOiAocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUnVuSW5UZXJtaW5hbFJlc3BvbnNlKSA9PiB2b2lkKSB7XG5cdFx0dGhpcy5zZW5kUmVxdWVzdCgncnVuSW5UZXJtaW5hbCcsIGFyZ3MsIHRpbWVvdXQsIGNiKTtcblx0fVxuXG5cdHByb3RlY3RlZCBkaXNwYXRjaFJlcXVlc3QocmVxdWVzdDogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cblx0XHRjb25zdCByZXNwb25zZSA9IG5ldyBSZXNwb25zZShyZXF1ZXN0KTtcblxuXHRcdHRyeSB7XG5cdFx0XHRpZiAocmVxdWVzdC5jb21tYW5kID09PSAnaW5pdGlhbGl6ZScpIHtcblx0XHRcdFx0dmFyIGFyZ3MgPSA8RGVidWdQcm90b2NvbC5Jbml0aWFsaXplUmVxdWVzdEFyZ3VtZW50cz4gcmVxdWVzdC5hcmd1bWVudHM7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBhcmdzLmxpbmVzU3RhcnRBdDEgPT09ICdib29sZWFuJykge1xuXHRcdFx0XHRcdHRoaXMuX2NsaWVudExpbmVzU3RhcnRBdDEgPSBhcmdzLmxpbmVzU3RhcnRBdDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR5cGVvZiBhcmdzLmNvbHVtbnNTdGFydEF0MSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdFx0dGhpcy5fY2xpZW50Q29sdW1uc1N0YXJ0QXQxID0gYXJncy5jb2x1bW5zU3RhcnRBdDE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYXJncy5wYXRoRm9ybWF0ICE9PSAncGF0aCcpIHtcblx0XHRcdFx0XHR0aGlzLnNlbmRFcnJvclJlc3BvbnNlKHJlc3BvbnNlLCAyMDE4LCAnZGVidWcgYWRhcHRlciBvbmx5IHN1cHBvcnRzIG5hdGl2ZSBwYXRocycsIG51bGwsIEVycm9yRGVzdGluYXRpb24uVGVsZW1ldHJ5KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBpbml0aWFsaXplUmVzcG9uc2UgPSA8RGVidWdQcm90b2NvbC5Jbml0aWFsaXplUmVzcG9uc2U+IHJlc3BvbnNlO1xuXHRcdFx0XHRcdGluaXRpYWxpemVSZXNwb25zZS5ib2R5ID0ge307XG5cdFx0XHRcdFx0dGhpcy5pbml0aWFsaXplUmVxdWVzdChpbml0aWFsaXplUmVzcG9uc2UsIGFyZ3MpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnbGF1bmNoJykge1xuXHRcdFx0XHR0aGlzLmxhdW5jaFJlcXVlc3QoPERlYnVnUHJvdG9jb2wuTGF1bmNoUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnYXR0YWNoJykge1xuXHRcdFx0XHR0aGlzLmF0dGFjaFJlcXVlc3QoPERlYnVnUHJvdG9jb2wuQXR0YWNoUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnZGlzY29ubmVjdCcpIHtcblx0XHRcdFx0dGhpcy5kaXNjb25uZWN0UmVxdWVzdCg8RGVidWdQcm90b2NvbC5EaXNjb25uZWN0UmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAndGVybWluYXRlJykge1xuXHRcdFx0XHR0aGlzLnRlcm1pbmF0ZVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuVGVybWluYXRlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAncmVzdGFydCcpIHtcblx0XHRcdFx0dGhpcy5yZXN0YXJ0UmVxdWVzdCg8RGVidWdQcm90b2NvbC5SZXN0YXJ0UmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc2V0QnJlYWtwb2ludHMnKSB7XG5cdFx0XHRcdHRoaXMuc2V0QnJlYWtQb2ludHNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlNldEJyZWFrcG9pbnRzUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc2V0RnVuY3Rpb25CcmVha3BvaW50cycpIHtcblx0XHRcdFx0dGhpcy5zZXRGdW5jdGlvbkJyZWFrUG9pbnRzUmVxdWVzdCg8RGVidWdQcm90b2NvbC5TZXRGdW5jdGlvbkJyZWFrcG9pbnRzUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc2V0RXhjZXB0aW9uQnJlYWtwb2ludHMnKSB7XG5cdFx0XHRcdHRoaXMuc2V0RXhjZXB0aW9uQnJlYWtQb2ludHNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlNldEV4Y2VwdGlvbkJyZWFrcG9pbnRzUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnY29uZmlndXJhdGlvbkRvbmUnKSB7XG5cdFx0XHRcdHRoaXMuY29uZmlndXJhdGlvbkRvbmVSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLkNvbmZpZ3VyYXRpb25Eb25lUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnY29udGludWUnKSB7XG5cdFx0XHRcdHRoaXMuY29udGludWVSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnbmV4dCcpIHtcblx0XHRcdFx0dGhpcy5uZXh0UmVxdWVzdCg8RGVidWdQcm90b2NvbC5OZXh0UmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc3RlcEluJykge1xuXHRcdFx0XHR0aGlzLnN0ZXBJblJlcXVlc3QoPERlYnVnUHJvdG9jb2wuU3RlcEluUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc3RlcE91dCcpIHtcblx0XHRcdFx0dGhpcy5zdGVwT3V0UmVxdWVzdCg8RGVidWdQcm90b2NvbC5TdGVwT3V0UmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc3RlcEJhY2snKSB7XG5cdFx0XHRcdHRoaXMuc3RlcEJhY2tSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlN0ZXBCYWNrUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAncmV2ZXJzZUNvbnRpbnVlJykge1xuXHRcdFx0XHR0aGlzLnJldmVyc2VDb250aW51ZVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuUmV2ZXJzZUNvbnRpbnVlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAncmVzdGFydEZyYW1lJykge1xuXHRcdFx0XHR0aGlzLnJlc3RhcnRGcmFtZVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuUmVzdGFydEZyYW1lUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnZ290bycpIHtcblx0XHRcdFx0dGhpcy5nb3RvUmVxdWVzdCg8RGVidWdQcm90b2NvbC5Hb3RvUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAncGF1c2UnKSB7XG5cdFx0XHRcdHRoaXMucGF1c2VSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlBhdXNlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc3RhY2tUcmFjZScpIHtcblx0XHRcdFx0dGhpcy5zdGFja1RyYWNlUmVxdWVzdCg8RGVidWdQcm90b2NvbC5TdGFja1RyYWNlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc2NvcGVzJykge1xuXHRcdFx0XHR0aGlzLnNjb3Blc1JlcXVlc3QoPERlYnVnUHJvdG9jb2wuU2NvcGVzUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAndmFyaWFibGVzJykge1xuXHRcdFx0XHR0aGlzLnZhcmlhYmxlc1JlcXVlc3QoPERlYnVnUHJvdG9jb2wuVmFyaWFibGVzUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc2V0VmFyaWFibGUnKSB7XG5cdFx0XHRcdHRoaXMuc2V0VmFyaWFibGVSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlNldFZhcmlhYmxlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc2V0RXhwcmVzc2lvbicpIHtcblx0XHRcdFx0dGhpcy5zZXRFeHByZXNzaW9uUmVxdWVzdCg8RGVidWdQcm90b2NvbC5TZXRFeHByZXNzaW9uUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAnc291cmNlJykge1xuXHRcdFx0XHR0aGlzLnNvdXJjZVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuU291cmNlUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cblx0XHRcdH0gZWxzZSBpZiAocmVxdWVzdC5jb21tYW5kID09PSAndGhyZWFkcycpIHtcblx0XHRcdFx0dGhpcy50aHJlYWRzUmVxdWVzdCg8RGVidWdQcm90b2NvbC5UaHJlYWRzUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICd0ZXJtaW5hdGVUaHJlYWRzJykge1xuXHRcdFx0XHR0aGlzLnRlcm1pbmF0ZVRocmVhZHNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlRlcm1pbmF0ZVRocmVhZHNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdldmFsdWF0ZScpIHtcblx0XHRcdFx0dGhpcy5ldmFsdWF0ZVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuRXZhbHVhdGVSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdzdGVwSW5UYXJnZXRzJykge1xuXHRcdFx0XHR0aGlzLnN0ZXBJblRhcmdldHNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlN0ZXBJblRhcmdldHNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdnb3RvVGFyZ2V0cycpIHtcblx0XHRcdFx0dGhpcy5nb3RvVGFyZ2V0c1JlcXVlc3QoPERlYnVnUHJvdG9jb2wuR290b1RhcmdldHNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdjb21wbGV0aW9ucycpIHtcblx0XHRcdFx0dGhpcy5jb21wbGV0aW9uc1JlcXVlc3QoPERlYnVnUHJvdG9jb2wuQ29tcGxldGlvbnNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdleGNlcHRpb25JbmZvJykge1xuXHRcdFx0XHR0aGlzLmV4Y2VwdGlvbkluZm9SZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLkV4Y2VwdGlvbkluZm9SZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdsb2FkZWRTb3VyY2VzJykge1xuXHRcdFx0XHR0aGlzLmxvYWRlZFNvdXJjZXNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLkxvYWRlZFNvdXJjZXNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdkYXRhQnJlYWtwb2ludEluZm8nKSB7XG5cdFx0XHRcdHRoaXMuZGF0YUJyZWFrcG9pbnRJbmZvUmVxdWVzdCg8RGVidWdQcm90b2NvbC5EYXRhQnJlYWtwb2ludEluZm9SZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdzZXREYXRhQnJlYWtwb2ludHMnKSB7XG5cdFx0XHRcdHRoaXMuc2V0RGF0YUJyZWFrcG9pbnRzUmVxdWVzdCg8RGVidWdQcm90b2NvbC5TZXREYXRhQnJlYWtwb2ludHNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdyZWFkTWVtb3J5Jykge1xuXHRcdFx0XHR0aGlzLnJlYWRNZW1vcnlSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlJlYWRNZW1vcnlSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICd3cml0ZU1lbW9yeScpIHtcblx0XHRcdFx0dGhpcy53cml0ZU1lbW9yeVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuV3JpdGVNZW1vcnlSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdkaXNhc3NlbWJsZScpIHtcblx0XHRcdFx0dGhpcy5kaXNhc3NlbWJsZVJlcXVlc3QoPERlYnVnUHJvdG9jb2wuRGlzYXNzZW1ibGVSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdjYW5jZWwnKSB7XG5cdFx0XHRcdHRoaXMuY2FuY2VsUmVxdWVzdCg8RGVidWdQcm90b2NvbC5DYW5jZWxSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdicmVha3BvaW50TG9jYXRpb25zJykge1xuXHRcdFx0XHR0aGlzLmJyZWFrcG9pbnRMb2NhdGlvbnNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLkJyZWFrcG9pbnRMb2NhdGlvbnNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChyZXF1ZXN0LmNvbW1hbmQgPT09ICdzZXRJbnN0cnVjdGlvbkJyZWFrcG9pbnRzJykge1xuXHRcdFx0XHR0aGlzLnNldEluc3RydWN0aW9uQnJlYWtwb2ludHNSZXF1ZXN0KDxEZWJ1Z1Byb3RvY29sLlNldEluc3RydWN0aW9uQnJlYWtwb2ludHNSZXNwb25zZT4gcmVzcG9uc2UsIHJlcXVlc3QuYXJndW1lbnRzLCByZXF1ZXN0KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jdXN0b21SZXF1ZXN0KHJlcXVlc3QuY29tbWFuZCwgPERlYnVnUHJvdG9jb2wuUmVzcG9uc2U+IHJlc3BvbnNlLCByZXF1ZXN0LmFyZ3VtZW50cywgcmVxdWVzdCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhpcy5zZW5kRXJyb3JSZXNwb25zZShyZXNwb25zZSwgMTEwNCwgJ3tfc3RhY2t9JywgeyBfZXhjZXB0aW9uOiBlLm1lc3NhZ2UsIF9zdGFjazogZS5zdGFjayB9LCBFcnJvckRlc3RpbmF0aW9uLlRlbGVtZXRyeSk7XG5cdFx0fVxuXHR9XG5cblx0cHJvdGVjdGVkIGluaXRpYWxpemVSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkluaXRpYWxpemVSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5Jbml0aWFsaXplUmVxdWVzdEFyZ3VtZW50cyk6IHZvaWQge1xuXG5cdFx0Ly8gVGhpcyBkZWZhdWx0IGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCBjb25kaXRpb25hbCBicmVha3BvaW50cy5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzQ29uZGl0aW9uYWxCcmVha3BvaW50cyA9IGZhbHNlO1xuXG5cdFx0Ly8gVGhpcyBkZWZhdWx0IGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCBoaXQgY29uZGl0aW9uYWwgYnJlYWtwb2ludHMuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0hpdENvbmRpdGlvbmFsQnJlYWtwb2ludHMgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVmYXVsdCBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgZnVuY3Rpb24gYnJlYWtwb2ludHMuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0Z1bmN0aW9uQnJlYWtwb2ludHMgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVmYXVsdCBkZWJ1ZyBhZGFwdGVyIGltcGxlbWVudHMgdGhlICdjb25maWd1cmF0aW9uRG9uZScgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzQ29uZmlndXJhdGlvbkRvbmVSZXF1ZXN0ID0gdHJ1ZTtcblxuXHRcdC8vIFRoaXMgZGVmYXVsdCBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgaG92ZXJzIGJhc2VkIG9uIHRoZSAnZXZhbHVhdGUnIHJlcXVlc3QuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0V2YWx1YXRlRm9ySG92ZXJzID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlZmF1bHQgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnc3RlcEJhY2snIHJlcXVlc3QuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c1N0ZXBCYWNrID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlZmF1bHQgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnc2V0VmFyaWFibGUnIHJlcXVlc3QuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c1NldFZhcmlhYmxlID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlZmF1bHQgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAncmVzdGFydEZyYW1lJyByZXF1ZXN0LlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNSZXN0YXJ0RnJhbWUgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVmYXVsdCBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlICdzdGVwSW5UYXJnZXRzJyByZXF1ZXN0LlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNTdGVwSW5UYXJnZXRzUmVxdWVzdCA9IGZhbHNlO1xuXG5cdFx0Ly8gVGhpcyBkZWZhdWx0IGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgJ2dvdG9UYXJnZXRzJyByZXF1ZXN0LlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNHb3RvVGFyZ2V0c1JlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVmYXVsdCBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlICdjb21wbGV0aW9ucycgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzQ29tcGxldGlvbnNSZXF1ZXN0ID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlZmF1bHQgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAncmVzdGFydCcgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzUmVzdGFydFJlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVmYXVsdCBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlICdleGNlcHRpb25PcHRpb25zJyBhdHRyaWJ1dGUgb24gdGhlICdzZXRFeGNlcHRpb25CcmVha3BvaW50cycgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzRXhjZXB0aW9uT3B0aW9ucyA9IGZhbHNlO1xuXG5cdFx0Ly8gVGhpcyBkZWZhdWx0IGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgJ2Zvcm1hdCcgYXR0cmlidXRlIG9uIHRoZSAndmFyaWFibGVzJywgJ2V2YWx1YXRlJywgYW5kICdzdGFja1RyYWNlJyByZXF1ZXN0LlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNWYWx1ZUZvcm1hdHRpbmdPcHRpb25zID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgJ2V4Y2VwdGlvbkluZm8nIHJlcXVlc3QuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0V4Y2VwdGlvbkluZm9SZXF1ZXN0ID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgJ1Rlcm1pbmF0ZURlYnVnZ2VlJyBhdHRyaWJ1dGUgb24gdGhlICdkaXNjb25uZWN0JyByZXF1ZXN0LlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydFRlcm1pbmF0ZURlYnVnZ2VlID0gZmFsc2U7XG5cblx0XHQvLyBUaGlzIGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCBkZWxheWVkIGxvYWRpbmcgb2Ygc3RhY2sgZnJhbWVzLlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNEZWxheWVkU3RhY2tUcmFjZUxvYWRpbmcgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnbG9hZGVkU291cmNlcycgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzTG9hZGVkU291cmNlc1JlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnbG9nTWVzc2FnZScgYXR0cmlidXRlIG9mIHRoZSBTb3VyY2VCcmVha3BvaW50LlxuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNMb2dQb2ludHMgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAndGVybWluYXRlVGhyZWFkcycgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzVGVybWluYXRlVGhyZWFkc1JlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnc2V0RXhwcmVzc2lvbicgcmVxdWVzdC5cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzU2V0RXhwcmVzc2lvbiA9IGZhbHNlO1xuXG5cdFx0Ly8gVGhpcyBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlICd0ZXJtaW5hdGUnIHJlcXVlc3QuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c1Rlcm1pbmF0ZVJlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8vIFRoaXMgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IGRhdGEgYnJlYWtwb2ludHMuXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0RhdGFCcmVha3BvaW50cyA9IGZhbHNlO1xuXG5cdFx0LyoqIFRoaXMgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAncmVhZE1lbW9yeScgcmVxdWVzdC4gKi9cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzUmVhZE1lbW9yeVJlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8qKiBUaGUgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnZGlzYXNzZW1ibGUnIHJlcXVlc3QuICovXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0Rpc2Fzc2VtYmxlUmVxdWVzdCA9IGZhbHNlO1xuXG5cdFx0LyoqIFRoZSBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlICdjYW5jZWwnIHJlcXVlc3QuICovXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0NhbmNlbFJlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8qKiBUaGUgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnYnJlYWtwb2ludExvY2F0aW9ucycgcmVxdWVzdC4gKi9cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzQnJlYWtwb2ludExvY2F0aW9uc1JlcXVlc3QgPSBmYWxzZTtcblxuXHRcdC8qKiBUaGUgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSAnY2xpcGJvYXJkJyBjb250ZXh0IHZhbHVlIGluIHRoZSAnZXZhbHVhdGUnIHJlcXVlc3QuICovXG5cdFx0cmVzcG9uc2UuYm9keS5zdXBwb3J0c0NsaXBib2FyZENvbnRleHQgPSBmYWxzZTtcblxuXHRcdC8qKiBUaGUgZGVidWcgYWRhcHRlciBkb2VzIG5vdCBzdXBwb3J0IHN0ZXBwaW5nIGdyYW51bGFyaXRpZXMgZm9yIHRoZSBzdGVwcGluZyByZXF1ZXN0cy4gKi9cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzU3RlcHBpbmdHcmFudWxhcml0eSA9IGZhbHNlO1xuXG5cdFx0LyoqIFRoZSBkZWJ1ZyBhZGFwdGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlICdzZXRJbnN0cnVjdGlvbkJyZWFrcG9pbnRzJyByZXF1ZXN0LiAqL1xuXHRcdHJlc3BvbnNlLmJvZHkuc3VwcG9ydHNJbnN0cnVjdGlvbkJyZWFrcG9pbnRzID0gZmFsc2U7XG5cblx0XHQvKiogVGhlIGRlYnVnIGFkYXB0ZXIgZG9lcyBub3Qgc3VwcG9ydCAnZmlsdGVyT3B0aW9ucycgb24gdGhlICdzZXRFeGNlcHRpb25CcmVha3BvaW50cycgcmVxdWVzdC4gKi9cblx0XHRyZXNwb25zZS5ib2R5LnN1cHBvcnRzRXhjZXB0aW9uRmlsdGVyT3B0aW9ucyA9IGZhbHNlO1xuXG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIGRpc2Nvbm5lY3RSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkRpc2Nvbm5lY3RSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5EaXNjb25uZWN0QXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHRcdHRoaXMuc2h1dGRvd24oKTtcblx0fVxuXG5cdHByb3RlY3RlZCBsYXVuY2hSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkxhdW5jaFJlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLkxhdW5jaFJlcXVlc3RBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgYXR0YWNoUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5BdHRhY2hSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5BdHRhY2hSZXF1ZXN0QXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHRlcm1pbmF0ZVJlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuVGVybWluYXRlUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuVGVybWluYXRlQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHJlc3RhcnRSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlJlc3RhcnRSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5SZXN0YXJ0QXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHNldEJyZWFrUG9pbnRzUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5TZXRCcmVha3BvaW50c1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEJyZWFrcG9pbnRzQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHNldEZ1bmN0aW9uQnJlYWtQb2ludHNSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlNldEZ1bmN0aW9uQnJlYWtwb2ludHNSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5TZXRGdW5jdGlvbkJyZWFrcG9pbnRzQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHNldEV4Y2VwdGlvbkJyZWFrUG9pbnRzUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5TZXRFeGNlcHRpb25CcmVha3BvaW50c1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEV4Y2VwdGlvbkJyZWFrcG9pbnRzQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIGNvbmZpZ3VyYXRpb25Eb25lUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5Db25maWd1cmF0aW9uRG9uZVJlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLkNvbmZpZ3VyYXRpb25Eb25lQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KTogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIGNvbnRpbnVlUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5Db250aW51ZVJlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KSA6IHZvaWQge1xuXHRcdHRoaXMuc2VuZFJlc3BvbnNlKHJlc3BvbnNlKTtcblx0fVxuXG5cdHByb3RlY3RlZCBuZXh0UmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5OZXh0UmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuTmV4dEFyZ3VtZW50cywgcmVxdWVzdD86IERlYnVnUHJvdG9jb2wuUmVxdWVzdCkgOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc3RlcEluUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5TdGVwSW5SZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5TdGVwSW5Bcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpIDogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHN0ZXBPdXRSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlN0ZXBPdXRSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5TdGVwT3V0QXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KSA6IHZvaWQge1xuXHRcdHRoaXMuc2VuZFJlc3BvbnNlKHJlc3BvbnNlKTtcblx0fVxuXG5cdHByb3RlY3RlZCBzdGVwQmFja1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuU3RlcEJhY2tSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5TdGVwQmFja0FyZ3VtZW50cywgcmVxdWVzdD86IERlYnVnUHJvdG9jb2wuUmVxdWVzdCkgOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgcmV2ZXJzZUNvbnRpbnVlUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5SZXZlcnNlQ29udGludWVSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5SZXZlcnNlQ29udGludWVBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpIDogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHJlc3RhcnRGcmFtZVJlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUmVzdGFydEZyYW1lUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuUmVzdGFydEZyYW1lQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KSA6IHZvaWQge1xuXHRcdHRoaXMuc2VuZFJlc3BvbnNlKHJlc3BvbnNlKTtcblx0fVxuXG5cdHByb3RlY3RlZCBnb3RvUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5Hb3RvUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuR290b0FyZ3VtZW50cywgcmVxdWVzdD86IERlYnVnUHJvdG9jb2wuUmVxdWVzdCkgOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgcGF1c2VSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlBhdXNlUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuUGF1c2VBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpIDogdm9pZCB7XG5cdFx0dGhpcy5zZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xuXHR9XG5cblx0cHJvdGVjdGVkIHNvdXJjZVJlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuU291cmNlUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuU291cmNlQXJndW1lbnRzLCByZXF1ZXN0PzogRGVidWdQcm90b2NvbC5SZXF1ZXN0KSA6IHZvaWQge1xuXHRcdHRoaXMuc2VuZFJlc3BvbnNlKHJlc3BvbnNlKTtcblx0fVxuXG5cdHByb3RlY3RlZCB0aHJlYWRzUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5UaHJlYWRzUmVzcG9uc2UsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgdGVybWluYXRlVGhyZWFkc1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuVGVybWluYXRlVGhyZWFkc1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlRlcm1pbmF0ZVRocmVhZHNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc3RhY2tUcmFjZVJlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuU3RhY2tUcmFjZVJlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlN0YWNrVHJhY2VBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2NvcGVzUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5TY29wZXNSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5TY29wZXNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgdmFyaWFibGVzUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5WYXJpYWJsZXNSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5WYXJpYWJsZXNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2V0VmFyaWFibGVSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlNldFZhcmlhYmxlUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuU2V0VmFyaWFibGVBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2V0RXhwcmVzc2lvblJlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuU2V0RXhwcmVzc2lvblJlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEV4cHJlc3Npb25Bcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZXZhbHVhdGVSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkV2YWx1YXRlUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuRXZhbHVhdGVBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc3RlcEluVGFyZ2V0c1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuU3RlcEluVGFyZ2V0c1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlN0ZXBJblRhcmdldHNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZ290b1RhcmdldHNSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkdvdG9UYXJnZXRzUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuR290b1RhcmdldHNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgY29tcGxldGlvbnNSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkNvbXBsZXRpb25zUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuQ29tcGxldGlvbnNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZXhjZXB0aW9uSW5mb1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuRXhjZXB0aW9uSW5mb1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLkV4Y2VwdGlvbkluZm9Bcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgbG9hZGVkU291cmNlc1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuTG9hZGVkU291cmNlc1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLkxvYWRlZFNvdXJjZXNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZGF0YUJyZWFrcG9pbnRJbmZvUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5EYXRhQnJlYWtwb2ludEluZm9SZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5EYXRhQnJlYWtwb2ludEluZm9Bcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2V0RGF0YUJyZWFrcG9pbnRzUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5TZXREYXRhQnJlYWtwb2ludHNSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5TZXREYXRhQnJlYWtwb2ludHNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgcmVhZE1lbW9yeVJlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUmVhZE1lbW9yeVJlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlJlYWRNZW1vcnlBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgd3JpdGVNZW1vcnlSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLldyaXRlTWVtb3J5UmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuV3JpdGVNZW1vcnlBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZGlzYXNzZW1ibGVSZXF1ZXN0KHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLkRpc2Fzc2VtYmxlUmVzcG9uc2UsIGFyZ3M6IERlYnVnUHJvdG9jb2wuRGlzYXNzZW1ibGVBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgY2FuY2VsUmVxdWVzdChyZXNwb25zZTogRGVidWdQcm90b2NvbC5DYW5jZWxSZXNwb25zZSwgYXJnczogRGVidWdQcm90b2NvbC5DYW5jZWxBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgYnJlYWtwb2ludExvY2F0aW9uc1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuQnJlYWtwb2ludExvY2F0aW9uc1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLkJyZWFrcG9pbnRMb2NhdGlvbnNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2V0SW5zdHJ1Y3Rpb25CcmVha3BvaW50c1JlcXVlc3QocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuU2V0SW5zdHJ1Y3Rpb25CcmVha3BvaW50c1Jlc3BvbnNlLCBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEluc3RydWN0aW9uQnJlYWtwb2ludHNBcmd1bWVudHMsIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHQvKipcblx0ICogT3ZlcnJpZGUgdGhpcyBob29rIHRvIGltcGxlbWVudCBjdXN0b20gcmVxdWVzdHMuXG5cdCAqL1xuXHRwcm90ZWN0ZWQgY3VzdG9tUmVxdWVzdChjb21tYW5kOiBzdHJpbmcsIHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlJlc3BvbnNlLCBhcmdzOiBhbnksIHJlcXVlc3Q/OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0XHR0aGlzLnNlbmRFcnJvclJlc3BvbnNlKHJlc3BvbnNlLCAxMDE0LCAndW5yZWNvZ25pemVkIHJlcXVlc3QnLCBudWxsLCBFcnJvckRlc3RpbmF0aW9uLlRlbGVtZXRyeSk7XG5cdH1cblxuXHQvLy0tLS0gcHJvdGVjdGVkIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRwcm90ZWN0ZWQgY29udmVydENsaWVudExpbmVUb0RlYnVnZ2VyKGxpbmU6IG51bWJlcik6IG51bWJlciB7XG5cdFx0aWYgKHRoaXMuX2RlYnVnZ2VyTGluZXNTdGFydEF0MSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2NsaWVudExpbmVzU3RhcnRBdDEgPyBsaW5lIDogbGluZSArIDE7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9jbGllbnRMaW5lc1N0YXJ0QXQxID8gbGluZSAtIDEgOiBsaW5lO1xuXHR9XG5cblx0cHJvdGVjdGVkIGNvbnZlcnREZWJ1Z2dlckxpbmVUb0NsaWVudChsaW5lOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdGlmICh0aGlzLl9kZWJ1Z2dlckxpbmVzU3RhcnRBdDEpIHtcblx0XHRcdHJldHVybiB0aGlzLl9jbGllbnRMaW5lc1N0YXJ0QXQxID8gbGluZSA6IGxpbmUgLSAxO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fY2xpZW50TGluZXNTdGFydEF0MSA/IGxpbmUgKyAxIDogbGluZTtcblx0fVxuXG5cdHByb3RlY3RlZCBjb252ZXJ0Q2xpZW50Q29sdW1uVG9EZWJ1Z2dlcihjb2x1bW46IG51bWJlcik6IG51bWJlciB7XG5cdFx0aWYgKHRoaXMuX2RlYnVnZ2VyQ29sdW1uc1N0YXJ0QXQxKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fY2xpZW50Q29sdW1uc1N0YXJ0QXQxID8gY29sdW1uIDogY29sdW1uICsgMTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2NsaWVudENvbHVtbnNTdGFydEF0MSA/IGNvbHVtbiAtIDEgOiBjb2x1bW47XG5cdH1cblxuXHRwcm90ZWN0ZWQgY29udmVydERlYnVnZ2VyQ29sdW1uVG9DbGllbnQoY29sdW1uOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdGlmICh0aGlzLl9kZWJ1Z2dlckNvbHVtbnNTdGFydEF0MSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2NsaWVudENvbHVtbnNTdGFydEF0MSA/IGNvbHVtbiA6IGNvbHVtbiAtIDE7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9jbGllbnRDb2x1bW5zU3RhcnRBdDEgPyBjb2x1bW4gKyAxIDogY29sdW1uO1xuXHR9XG5cblx0cHJvdGVjdGVkIGNvbnZlcnRDbGllbnRQYXRoVG9EZWJ1Z2dlcihjbGllbnRQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLl9jbGllbnRQYXRoc0FyZVVSSXMgIT09IHRoaXMuX2RlYnVnZ2VyUGF0aHNBcmVVUklzKSB7XG5cdFx0XHRpZiAodGhpcy5fY2xpZW50UGF0aHNBcmVVUklzKSB7XG5cdFx0XHRcdHJldHVybiBEZWJ1Z1Nlc3Npb24udXJpMnBhdGgoY2xpZW50UGF0aCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gRGVidWdTZXNzaW9uLnBhdGgydXJpKGNsaWVudFBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2xpZW50UGF0aDtcblx0fVxuXG5cdHByb3RlY3RlZCBjb252ZXJ0RGVidWdnZXJQYXRoVG9DbGllbnQoZGVidWdnZXJQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLl9kZWJ1Z2dlclBhdGhzQXJlVVJJcyAhPT0gdGhpcy5fY2xpZW50UGF0aHNBcmVVUklzKSB7XG5cdFx0XHRpZiAodGhpcy5fZGVidWdnZXJQYXRoc0FyZVVSSXMpIHtcblx0XHRcdFx0cmV0dXJuIERlYnVnU2Vzc2lvbi51cmkycGF0aChkZWJ1Z2dlclBhdGgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIERlYnVnU2Vzc2lvbi5wYXRoMnVyaShkZWJ1Z2dlclBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZGVidWdnZXJQYXRoO1xuXHR9XG5cblx0Ly8tLS0tIHByaXZhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdHByaXZhdGUgc3RhdGljIHBhdGgydXJpKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG5cblx0XHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xuXHRcdFx0aWYgKC9eW0EtWl06Ly50ZXN0KHBhdGgpKSB7XG5cdFx0XHRcdHBhdGggPSBwYXRoWzBdLnRvTG93ZXJDYXNlKCkgKyBwYXRoLnN1YnN0cigxKTtcblx0XHRcdH1cblx0XHRcdHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcblx0XHR9XG5cdFx0cGF0aCA9IGVuY29kZVVSSShwYXRoKTtcblxuXHRcdGxldCB1cmkgPSBuZXcgVVJMKGBmaWxlOmApO1x0Ly8gaWdub3JlICdwYXRoJyBmb3Igbm93XG5cdFx0dXJpLnBhdGhuYW1lID0gcGF0aDtcdC8vIG5vdyB1c2UgJ3BhdGgnIHRvIGdldCB0aGUgY29ycmVjdCBwZXJjZW50IGVuY29kaW5nIChzZWUgaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnKVxuXHRcdHJldHVybiB1cmkudG9TdHJpbmcoKTtcblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIHVyaTJwYXRoKHNvdXJjZVVyaTogc3RyaW5nKTogc3RyaW5nIHtcblxuXHRcdGxldCB1cmkgPSBuZXcgVVJMKHNvdXJjZVVyaSk7XG5cdFx0bGV0IHMgPSBkZWNvZGVVUklDb21wb25lbnQodXJpLnBhdGhuYW1lKTtcblx0XHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xuXHRcdFx0aWYgKC9eXFwvW2EtekEtWl06Ly50ZXN0KHMpKSB7XG5cdFx0XHRcdHMgPSBzWzFdLnRvTG93ZXJDYXNlKCkgKyBzLnN1YnN0cigyKTtcblx0XHRcdH1cblx0XHRcdHMgPSBzLnJlcGxhY2UoL1xcLy9nLCAnXFxcXCcpO1xuXHRcdH1cblx0XHRyZXR1cm4gcztcblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIF9mb3JtYXRQSUlSZWdleHAgPSAveyhbXn1dKyl9L2c7XG5cblx0Lypcblx0KiBJZiBhcmd1bWVudCBzdGFydHMgd2l0aCAnXycgaXQgaXMgT0sgdG8gc2VuZCBpdHMgdmFsdWUgdG8gdGVsZW1ldHJ5LlxuXHQqL1xuXHRwcml2YXRlIHN0YXRpYyBmb3JtYXRQSUkoZm9ybWF0OnN0cmluZywgZXhjbHVkZVBJSTogYm9vbGVhbiwgYXJnczoge1trZXk6IHN0cmluZ106IHN0cmluZ30pOiBzdHJpbmcge1xuXHRcdHJldHVybiBmb3JtYXQucmVwbGFjZShEZWJ1Z1Nlc3Npb24uX2Zvcm1hdFBJSVJlZ2V4cCwgZnVuY3Rpb24obWF0Y2gsIHBhcmFtTmFtZSkge1xuXHRcdFx0aWYgKGV4Y2x1ZGVQSUkgJiYgcGFyYW1OYW1lLmxlbmd0aCA+IDAgJiYgcGFyYW1OYW1lWzBdICE9PSAnXycpIHtcblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGFyZ3NbcGFyYW1OYW1lXSAmJiBhcmdzLmhhc093blByb3BlcnR5KHBhcmFtTmFtZSkgP1xuXHRcdFx0XHRhcmdzW3BhcmFtTmFtZV0gOlxuXHRcdFx0XHRtYXRjaDtcblx0XHR9KVxuXHR9XG59XG4iXX0=","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Handles = void 0;\nclass Handles {\n    constructor(startHandle) {\n        this.START_HANDLE = 1000;\n        this._handleMap = new Map();\n        this._nextHandle = typeof startHandle === 'number' ? startHandle : this.START_HANDLE;\n    }\n    reset() {\n        this._nextHandle = this.START_HANDLE;\n        this._handleMap = new Map();\n    }\n    create(value) {\n        var handle = this._nextHandle++;\n        this._handleMap.set(handle, value);\n        return handle;\n    }\n    get(handle, dflt) {\n        return this._handleMap.get(handle) || dflt;\n    }\n}\nexports.Handles = Handles;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFuZGxlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9oYW5kbGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O2dHQUdnRzs7O0FBRWhHLE1BQWEsT0FBTztJQU9uQixZQUFtQixXQUFvQjtRQUwvQixpQkFBWSxHQUFHLElBQUksQ0FBQztRQUdwQixlQUFVLEdBQUcsSUFBSSxHQUFHLEVBQWEsQ0FBQztRQUd6QyxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sV0FBVyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQ3RGLENBQUM7SUFFTSxLQUFLO1FBQ1gsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxHQUFHLEVBQWEsQ0FBQztJQUN4QyxDQUFDO0lBRU0sTUFBTSxDQUFDLEtBQVE7UUFDckIsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNuQyxPQUFPLE1BQU0sQ0FBQztJQUNmLENBQUM7SUFFTSxHQUFHLENBQUMsTUFBYyxFQUFFLElBQVE7UUFDbEMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUM7SUFDNUMsQ0FBQztDQUNEO0FBekJELDBCQXlCQyIsInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgY2xhc3MgSGFuZGxlczxUPiB7XG5cblx0cHJpdmF0ZSBTVEFSVF9IQU5ETEUgPSAxMDAwO1xuXG5cdHByaXZhdGUgX25leHRIYW5kbGUgOiBudW1iZXI7XG5cdHByaXZhdGUgX2hhbmRsZU1hcCA9IG5ldyBNYXA8bnVtYmVyLCBUPigpO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihzdGFydEhhbmRsZT86IG51bWJlcikge1xuXHRcdHRoaXMuX25leHRIYW5kbGUgPSB0eXBlb2Ygc3RhcnRIYW5kbGUgPT09ICdudW1iZXInID8gc3RhcnRIYW5kbGUgOiB0aGlzLlNUQVJUX0hBTkRMRTtcblx0fVxuXG5cdHB1YmxpYyByZXNldCgpOiB2b2lkIHtcblx0XHR0aGlzLl9uZXh0SGFuZGxlID0gdGhpcy5TVEFSVF9IQU5ETEU7XG5cdFx0dGhpcy5faGFuZGxlTWFwID0gbmV3IE1hcDxudW1iZXIsIFQ+KCk7XG5cdH1cblxuXHRwdWJsaWMgY3JlYXRlKHZhbHVlOiBUKTogbnVtYmVyIHtcblx0XHR2YXIgaGFuZGxlID0gdGhpcy5fbmV4dEhhbmRsZSsrO1xuXHRcdHRoaXMuX2hhbmRsZU1hcC5zZXQoaGFuZGxlLCB2YWx1ZSk7XG5cdFx0cmV0dXJuIGhhbmRsZTtcblx0fVxuXG5cdHB1YmxpYyBnZXQoaGFuZGxlOiBudW1iZXIsIGRmbHQ/OiBUKTogVCB7XG5cdFx0cmV0dXJuIHRoaXMuX2hhbmRsZU1hcC5nZXQoaGFuZGxlKSB8fCBkZmx0O1xuXHR9XG59XG4iXX0=","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InternalLogger = void 0;\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst mkdirp = require(\"mkdirp\");\nconst logger_1 = require(\"./logger\");\n/**\n * Manages logging, whether to console.log, file, or VS Code console.\n * Encapsulates the state specific to each logging session\n */\nclass InternalLogger {\n    constructor(logCallback, isServer) {\n        /** Dispose and allow exit to continue normally */\n        this.beforeExitCallback = () => this.dispose();\n        this._logCallback = logCallback;\n        this._logToConsole = isServer;\n        this._minLogLevel = logger_1.LogLevel.Warn;\n        this.disposeCallback = (signal, code) => {\n            this.dispose();\n            // Exit with 128 + value of the signal code.\n            // https://nodejs.org/api/process.html#process_exit_codes\n            code = code || 2; // SIGINT\n            code += 128;\n            process.exit(code);\n        };\n    }\n    setup(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._minLogLevel = options.consoleMinLogLevel;\n            this._prependTimestamp = options.prependTimestamp;\n            // Open a log file in the specified location. Overwritten on each run.\n            if (options.logFilePath) {\n                if (!path.isAbsolute(options.logFilePath)) {\n                    this.log(`logFilePath must be an absolute path: ${options.logFilePath}`, logger_1.LogLevel.Error);\n                }\n                else {\n                    const handleError = err => this.sendLog(`Error creating log file at path: ${options.logFilePath}. Error: ${err.toString()}\\n`, logger_1.LogLevel.Error);\n                    try {\n                        yield mkdirp(path.dirname(options.logFilePath));\n                        this.log(`Verbose logs are written to:\\n`, logger_1.LogLevel.Warn);\n                        this.log(options.logFilePath + '\\n', logger_1.LogLevel.Warn);\n                        this._logFileStream = fs.createWriteStream(options.logFilePath);\n                        this.logDateTime();\n                        this.setupShutdownListeners();\n                        this._logFileStream.on('error', err => {\n                            handleError(err);\n                        });\n                    }\n                    catch (err) {\n                        handleError(err);\n                    }\n                }\n            }\n        });\n    }\n    logDateTime() {\n        let d = new Date();\n        let dateString = d.getUTCFullYear() + '-' + `${d.getUTCMonth() + 1}` + '-' + d.getUTCDate();\n        const timeAndDateStamp = dateString + ', ' + getFormattedTimeString();\n        this.log(timeAndDateStamp + '\\n', logger_1.LogLevel.Verbose, false);\n    }\n    setupShutdownListeners() {\n        process.addListener('beforeExit', this.beforeExitCallback);\n        process.addListener('SIGTERM', this.disposeCallback);\n        process.addListener('SIGINT', this.disposeCallback);\n    }\n    removeShutdownListeners() {\n        process.removeListener('beforeExit', this.beforeExitCallback);\n        process.removeListener('SIGTERM', this.disposeCallback);\n        process.removeListener('SIGINT', this.disposeCallback);\n    }\n    dispose() {\n        return new Promise(resolve => {\n            this.removeShutdownListeners();\n            if (this._logFileStream) {\n                this._logFileStream.end(resolve);\n                this._logFileStream = null;\n            }\n            else {\n                resolve();\n            }\n        });\n    }\n    log(msg, level, prependTimestamp = true) {\n        if (this._minLogLevel === logger_1.LogLevel.Stop) {\n            return;\n        }\n        if (level >= this._minLogLevel) {\n            this.sendLog(msg, level);\n        }\n        if (this._logToConsole) {\n            const logFn = level === logger_1.LogLevel.Error ? console.error :\n                level === logger_1.LogLevel.Warn ? console.warn :\n                    null;\n            if (logFn) {\n                logFn(logger_1.trimLastNewline(msg));\n            }\n        }\n        // If an error, prepend with '[Error]'\n        if (level === logger_1.LogLevel.Error) {\n            msg = `[${logger_1.LogLevel[level]}] ${msg}`;\n        }\n        if (this._prependTimestamp && prependTimestamp) {\n            msg = '[' + getFormattedTimeString() + '] ' + msg;\n        }\n        if (this._logFileStream) {\n            this._logFileStream.write(msg);\n        }\n    }\n    sendLog(msg, level) {\n        // Truncate long messages, they can hang VS Code\n        if (msg.length > 1500) {\n            const endsInNewline = !!msg.match(/(\\n|\\r\\n)$/);\n            msg = msg.substr(0, 1500) + '[...]';\n            if (endsInNewline) {\n                msg = msg + '\\n';\n            }\n        }\n        if (this._logCallback) {\n            const event = new logger_1.LogOutputEvent(msg, level);\n            this._logCallback(event);\n        }\n    }\n}\nexports.InternalLogger = InternalLogger;\nfunction getFormattedTimeString() {\n    let d = new Date();\n    let hourString = _padZeroes(2, String(d.getUTCHours()));\n    let minuteString = _padZeroes(2, String(d.getUTCMinutes()));\n    let secondString = _padZeroes(2, String(d.getUTCSeconds()));\n    let millisecondString = _padZeroes(3, String(d.getUTCMilliseconds()));\n    return hourString + ':' + minuteString + ':' + secondString + '.' + millisecondString + ' UTC';\n}\nfunction _padZeroes(minDesiredLength, numberToPad) {\n    if (numberToPad.length >= minDesiredLength) {\n        return numberToPad;\n    }\n    else {\n        return String('0'.repeat(minDesiredLength) + numberToPad).slice(-minDesiredLength);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJuYWxMb2dnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW50ZXJuYWxMb2dnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Z0dBR2dHOzs7Ozs7Ozs7Ozs7QUFFaEcseUJBQXlCO0FBQ3pCLDZCQUE2QjtBQUM3QixpQ0FBaUM7QUFFakMscUNBQTRIO0FBRTVIOzs7R0FHRztBQUNILE1BQWEsY0FBYztJQW1CMUIsWUFBWSxXQUF5QixFQUFFLFFBQWtCO1FBVHpELGtEQUFrRDtRQUMxQyx1QkFBa0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFTakQsSUFBSSxDQUFDLFlBQVksR0FBRyxXQUFXLENBQUM7UUFDaEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUM7UUFFOUIsSUFBSSxDQUFDLFlBQVksR0FBRyxpQkFBUSxDQUFDLElBQUksQ0FBQztRQUVsQyxJQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsTUFBYyxFQUFFLElBQVksRUFBRSxFQUFFO1lBQ3ZELElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUVmLDRDQUE0QztZQUM1Qyx5REFBeUQ7WUFDekQsSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQzNCLElBQUksSUFBSSxHQUFHLENBQUM7WUFFWixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BCLENBQUMsQ0FBQztJQUNILENBQUM7SUFFWSxLQUFLLENBQUMsT0FBK0I7O1lBQ2pELElBQUksQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDO1lBQy9DLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7WUFFbEQsc0VBQXNFO1lBQ3RFLElBQUksT0FBTyxDQUFDLFdBQVcsRUFBRTtnQkFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxD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LEdBQUcsR0FBRyxHQUFHLFlBQVksR0FBRyxHQUFHLEdBQUcsaUJBQWlCLEdBQUcsTUFBTSxDQUFDO0FBQ2hHLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxnQkFBd0IsRUFBRSxXQUFtQjtJQUNoRSxJQUFJLFdBQVcsQ0FBQyxNQUFNLElBQUksZ0JBQWdCLEVBQUU7UUFDM0MsT0FBTyxXQUFXLENBQUM7S0FDbkI7U0FBTTtRQUNOLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0tBQ25GO0FBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0ICogYXMgbWtkaXJwIGZyb20gJ21rZGlycCc7XG5cbmltcG9ydCB7IExvZ0xldmVsLCBJTG9nQ2FsbGJhY2ssIHRyaW1MYXN0TmV3bGluZSwgTG9nT3V0cHV0RXZlbnQsIElJbnRlcm5hbExvZ2dlck9wdGlvbnMsIElJbnRlcm5hbExvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcblxuLyoqXG4gKiBNYW5hZ2VzIGxvZ2dpbmcsIHdoZXRoZXIgdG8gY29uc29sZS5sb2csIGZpbGUsIG9yIFZTIENvZGUgY29uc29sZS5cbiAqIEVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgc3BlY2lmaWMgdG8gZWFjaCBsb2dnaW5nIHNlc3Npb25cbiAqL1xuZXhwb3J0IGNsYXNzIEludGVybmFsTG9nZ2VyIGltcGxlbWVudHMgSUludGVybmFsTG9nZ2VyIHtcblx0cHJpdmF0ZSBfbWluTG9nTGV2ZWw6IExvZ0xldmVsO1xuXHRwcml2YXRlIF9sb2dUb0NvbnNvbGU6IGJvb2xlYW47XG5cblx0LyoqIExvZyBpbmZvIHRoYXQgbWVldHMgbWluTG9nTGV2ZWwgaXMgc2VudCB0byB0aGlzIGNhbGxiYWNrLiAqL1xuXHRwcml2YXRlIF9sb2dDYWxsYmFjazogSUxvZ0NhbGxiYWNrO1xuXG5cdC8qKiBXcml0ZSBzdGVhbSBmb3IgbG9nIGZpbGUgKi9cblx0cHJpdmF0ZSBfbG9nRmlsZVN0cmVhbTogZnMuV3JpdGVTdHJlYW07XG5cblx0LyoqIERpc3Bvc2UgYW5kIGFsbG93IGV4aXQgdG8gY29udGludWUgbm9ybWFsbHkgKi9cblx0cHJpdmF0ZSBiZWZvcmVFeGl0Q2FsbGJhY2sgPSAoKSA9PiB0aGlzLmRpc3Bvc2UoKTtcblxuXHQvKiogRGlzcG9zZSBhbmQgZXhpdCAqL1xuXHRwcml2YXRlIGRpc3Bvc2VDYWxsYmFjaztcblxuXHQvKiogV2hldGhlciB0byBhZGQgYSB0aW1lc3RhbXAgdG8gbWVzc2FnZXMgaW4gdGhlIGxvZ2ZpbGUgKi9cblx0cHJpdmF0ZSBfcHJlcGVuZFRpbWVzdGFtcDogYm9vbGVhbjtcblxuXHRjb25zdHJ1Y3Rvcihsb2dDYWxsYmFjazogSUxvZ0NhbGxiYWNrLCBpc1NlcnZlcj86IGJvb2xlYW4pIHtcblx0XHR0aGlzLl9sb2dDYWxsYmFjayA9IGxvZ0NhbGxiYWNrO1xuXHRcdHRoaXMuX2xvZ1RvQ29uc29sZSA9IGlzU2VydmVyO1xuXG5cdFx0dGhpcy5fbWluTG9nTGV2ZWwgPSBMb2dMZXZlbC5XYXJuO1xuXG5cdFx0dGhpcy5kaXNwb3NlQ2FsbGJhY2sgPSAoc2lnbmFsOiBzdHJpbmcsIGNvZGU6IG51bWJlcikgPT4ge1xuXHRcdFx0dGhpcy5kaXNwb3NlKCk7XG5cblx0XHRcdC8vIEV4aXQgd2l0aCAxMjggKyB2YWx1ZSBvZiB0aGUgc2lnbmFsIGNvZGUuXG5cdFx0XHQvLyBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzX2V4aXRfY29kZXNcblx0XHRcdGNvZGUgPSBjb2RlIHx8IDI7IC8vIFNJR0lOVFxuXHRcdFx0Y29kZSArPSAxMjg7XG5cblx0XHRcdHByb2Nlc3MuZXhpdChjb2RlKTtcblx0XHR9O1xuXHR9XG5cblx0cHVibGljIGFzeW5jIHNldHVwKG9wdGlvbnM6IElJbnRlcm5hbExvZ2dlck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLl9taW5Mb2dMZXZlbCA9IG9wdGlvbnMuY29uc29sZU1pbkxvZ0xldmVsO1xuXHRcdHRoaXMuX3ByZXBlbmRUaW1lc3RhbXAgPSBvcHRpb25zLnByZXBlbmRUaW1lc3RhbXA7XG5cblx0XHQvLyBPcGVuIGEgbG9nIGZpbGUgaW4gdGhlIHNwZWNpZmllZCBsb2NhdGlvbi4gT3ZlcndyaXR0ZW4gb24gZWFjaCBydW4uXG5cdFx0aWYgKG9wdGlvbnMubG9nRmlsZVBhdGgpIHtcblx0XHRcdGlmICghcGF0aC5pc0Fic29sdXRlKG9wdGlvbnMubG9nRmlsZVBhdGgpKSB7XG5cdFx0XHRcdHRoaXMubG9nKGBsb2dGaWxlUGF0aCBtdXN0IGJlIGFuIGFic29sdXRlIHBhdGg6ICR7b3B0aW9ucy5sb2dGaWxlUGF0aH1gLCBMb2dMZXZlbC5FcnJvcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBoYW5kbGVFcnJvciA9IGVyciA9PiB0aGlzLnNlbmRMb2coYEVycm9yIGNyZWF0aW5nIGxvZyBmaWxlIGF0IHBhdGg6ICR7b3B0aW9ucy5sb2dGaWxlUGF0aH0uIEVycm9yOiAke2Vyci50b1N0cmluZygpfVxcbmAsIExvZ0xldmVsLkVycm9yKTtcblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IG1rZGlycChwYXRoLmRpcm5hbWUob3B0aW9ucy5sb2dGaWxlUGF0aCkpO1xuXHRcdFx0XHRcdHRoaXMubG9nKGBWZXJib3NlIGxvZ3MgYXJlIHdyaXR0ZW4gdG86XFxuYCwgTG9nTGV2ZWwuV2Fybik7XG5cdFx0XHRcdFx0dGhpcy5sb2cob3B0aW9ucy5sb2dGaWxlUGF0aCArICdcXG4nLCBMb2dMZXZlbC5XYXJuKTtcblxuXHRcdFx0XHRcdHRoaXMuX2xvZ0ZpbGVTdHJlYW0gPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShvcHRpb25zLmxvZ0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR0aGlzLmxvZ0RhdGVUaW1lKCk7XG5cdFx0XHRcdFx0dGhpcy5zZXR1cFNodXRkb3duTGlzdGVuZXJzKCk7XG5cdFx0XHRcdFx0dGhpcy5fbG9nRmlsZVN0cmVhbS5vbignZXJyb3InLCBlcnIgPT4ge1xuXHRcdFx0XHRcdFx0aGFuZGxlRXJyb3IoZXJyKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0aGFuZGxlRXJyb3IoZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgbG9nRGF0ZVRpbWUoKTogdm9pZCB7XG5cdFx0bGV0IGQgPSBuZXcgRGF0ZSgpO1xuXHRcdGxldCBkYXRlU3RyaW5nID0gZC5nZXRVVENGdWxsWWVhcigpICsgJy0nICsgYCR7ZC5nZXRVVENNb250aCgpICsgMX1gICsgJy0nICsgZC5nZXRVVENEYXRlKCk7XG5cdFx0Y29uc3QgdGltZUFuZERhdGVTdGFtcCA9IGRhdGVTdHJpbmcgKyAnLCAnICsgZ2V0Rm9ybWF0dGVkVGltZVN0cmluZygpO1xuXHRcdHRoaXMubG9nKHRpbWVBbmREYXRlU3RhbXAgKyAnXFxuJywgTG9nTGV2ZWwuVmVyYm9zZSwgZmFsc2UpO1xuXHR9XG5cblx0cHJpdmF0ZSBzZXR1cFNodXRkb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuXHRcdHByb2Nlc3MuYWRkTGlzdGVuZXIoJ2JlZm9yZUV4aXQnLCB0aGlzLmJlZm9yZUV4aXRDYWxsYmFjayk7XG5cdFx0cHJvY2Vzcy5hZGRMaXN0ZW5lcignU0lHVEVSTScsIHRoaXMuZGlzcG9zZUNhbGxiYWNrKTtcblx0XHRwcm9jZXNzLmFkZExpc3RlbmVyKCdTSUdJTlQnLCB0aGlzLmRpc3Bvc2VDYWxsYmFjayk7XG5cdH1cblxuXHRwcml2YXRlIHJlbW92ZVNodXRkb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuXHRcdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIoJ2JlZm9yZUV4aXQnLCB0aGlzLmJlZm9yZUV4aXRDYWxsYmFjayk7XG5cdFx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lcignU0lHVEVSTScsIHRoaXMuZGlzcG9zZUNhbGxiYWNrKTtcblx0XHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyKCdTSUdJTlQnLCB0aGlzLmRpc3Bvc2VDYWxsYmFjayk7XG5cdH1cblxuXHRwdWJsaWMgZGlzcG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG5cdFx0XHR0aGlzLnJlbW92ZVNodXRkb3duTGlzdGVuZXJzKCk7XG5cdFx0XHRpZiAodGhpcy5fbG9nRmlsZVN0cmVhbSkge1xuXHRcdFx0XHR0aGlzLl9sb2dGaWxlU3RyZWFtLmVuZChyZXNvbHZlKTtcblx0XHRcdFx0dGhpcy5fbG9nRmlsZVN0cmVhbSA9IG51bGw7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgbG9nKG1zZzogc3RyaW5nLCBsZXZlbDogTG9nTGV2ZWwsIHByZXBlbmRUaW1lc3RhbXAgPSB0cnVlKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX21pbkxvZ0xldmVsID09PSBMb2dMZXZlbC5TdG9wKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGxldmVsID49IHRoaXMuX21pbkxvZ0xldmVsKSB7XG5cdFx0XHR0aGlzLnNlbmRMb2cobXNnLCBsZXZlbCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2xvZ1RvQ29uc29sZSkge1xuXHRcdFx0Y29uc3QgbG9nRm4gPVxuXHRcdFx0XHRsZXZlbCA9PT0gTG9nTGV2ZWwuRXJyb3IgPyBjb25zb2xlLmVycm9yIDpcblx0XHRcdFx0bGV2ZWwgPT09IExvZ0xldmVsLldhcm4gPyBjb25zb2xlLndhcm4gOlxuXHRcdFx0XHRudWxsO1xuXG5cdFx0XHRpZiAobG9nRm4pIHtcblx0XHRcdFx0bG9nRm4odHJpbUxhc3ROZXdsaW5lKG1zZykpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIGFuIGVycm9yLCBwcmVwZW5kIHdpdGggJ1tFcnJvcl0nXG5cdFx0aWYgKGxldmVsID09PSBMb2dMZXZlbC5FcnJvcikge1xuXHRcdFx0bXNnID0gYFske0xvZ0xldmVsW2xldmVsXX1dICR7bXNnfWA7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX3ByZXBlbmRUaW1lc3RhbXAgJiYgcHJlcGVuZFRpbWVzdGFtcCkge1xuXHRcdFx0bXNnID0gJ1snICsgZ2V0Rm9ybWF0dGVkVGltZVN0cmluZygpICsgJ10gJyArIG1zZztcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fbG9nRmlsZVN0cmVhbSkge1xuXHRcdFx0dGhpcy5fbG9nRmlsZVN0cmVhbS53cml0ZShtc2cpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2VuZExvZyhtc2c6IHN0cmluZywgbGV2ZWw6IExvZ0xldmVsKTogdm9pZCB7XG5cdFx0Ly8gVHJ1bmNhdGUgbG9uZyBtZXNzYWdlcywgdGhleSBjYW4gaGFuZyBWUyBDb2RlXG5cdFx0aWYgKG1zZy5sZW5ndGggPiAxNTAwKSB7XG5cdFx0XHRjb25zdCBlbmRzSW5OZXdsaW5lID0gISFtc2cubWF0Y2goLyhcXG58XFxyXFxuKSQvKTtcblx0XHRcdG1zZyA9IG1zZy5zdWJzdHIoMCwgMTUwMCkgKyAnWy4uLl0nO1xuXHRcdFx0aWYgKGVuZHNJbk5ld2xpbmUpIHtcblx0XHRcdFx0bXNnID0gbXNnICsgJ1xcbic7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2xvZ0NhbGxiYWNrKSB7XG5cdFx0XHRjb25zdCBldmVudCA9IG5ldyBMb2dPdXRwdXRFdmVudChtc2csIGxldmVsKTtcblx0XHRcdHRoaXMuX2xvZ0NhbGxiYWNrKGV2ZW50KTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkVGltZVN0cmluZygpOiBzdHJpbmcge1xuXHRsZXQgZCA9IG5ldyBEYXRlKCk7XG5cdGxldCBob3VyU3RyaW5nID0gX3BhZFplcm9lcygyLCBTdHJpbmcoZC5nZXRVVENIb3VycygpKSk7XG5cdGxldCBtaW51dGVTdHJpbmcgPSBfcGFkWmVyb2VzKDIsIFN0cmluZyhkLmdldFVUQ01pbnV0ZXMoKSkpO1xuXHRsZXQgc2Vjb25kU3RyaW5nID0gX3BhZFplcm9lcygyLCBTdHJpbmcoZC5nZXRVVENTZWNvbmRzKCkpKTtcblx0bGV0IG1pbGxpc2Vjb25kU3RyaW5nID0gX3BhZFplcm9lcygzLCBTdHJpbmcoZC5nZXRVVENNaWxsaXNlY29uZHMoKSkpO1xuXHRyZXR1cm4gaG91clN0cmluZyArICc6JyArIG1pbnV0ZVN0cmluZyArICc6JyArIHNlY29uZFN0cmluZyArICcuJyArIG1pbGxpc2Vjb25kU3RyaW5nICsgJyBVVEMnO1xufVxuXG5mdW5jdGlvbiBfcGFkWmVyb2VzKG1pbkRlc2lyZWRMZW5ndGg6IG51bWJlciwgbnVtYmVyVG9QYWQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdGlmIChudW1iZXJUb1BhZC5sZW5ndGggPj0gbWluRGVzaXJlZExlbmd0aCkge1xuXHRcdHJldHVybiBudW1iZXJUb1BhZDtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gU3RyaW5nKCcwJy5yZXBlYXQobWluRGVzaXJlZExlbmd0aCkgKyBudW1iZXJUb1BhZCkuc2xpY2UoLW1pbkRlc2lyZWRMZW5ndGgpO1xuXHR9XG59XG4iXX0=","\"use strict\";\n/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trimLastNewline = exports.LogOutputEvent = exports.logger = exports.Logger = exports.LogLevel = void 0;\nconst internalLogger_1 = require(\"./internalLogger\");\nconst debugSession_1 = require(\"./debugSession\");\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\n    LogLevel[LogLevel[\"Log\"] = 1] = \"Log\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n    LogLevel[LogLevel[\"Stop\"] = 4] = \"Stop\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nclass Logger {\n    constructor() {\n        this._pendingLogQ = [];\n    }\n    log(msg, level = LogLevel.Log) {\n        msg = msg + '\\n';\n        this._write(msg, level);\n    }\n    verbose(msg) {\n        this.log(msg, LogLevel.Verbose);\n    }\n    warn(msg) {\n        this.log(msg, LogLevel.Warn);\n    }\n    error(msg) {\n        this.log(msg, LogLevel.Error);\n    }\n    dispose() {\n        if (this._currentLogger) {\n            const disposeP = this._currentLogger.dispose();\n            this._currentLogger = null;\n            return disposeP;\n        }\n        else {\n            return Promise.resolve();\n        }\n    }\n    /**\n     * `log` adds a newline, `write` doesn't\n     */\n    _write(msg, level = LogLevel.Log) {\n        // [null, undefined] => string\n        msg = msg + '';\n        if (this._pendingLogQ) {\n            this._pendingLogQ.push({ msg, level });\n        }\n        else if (this._currentLogger) {\n            this._currentLogger.log(msg, level);\n        }\n    }\n    /**\n     * Set the logger's minimum level to log in the console, and whether to log to the file. Log messages are queued before this is\n     * called the first time, because minLogLevel defaults to Warn.\n     */\n    setup(consoleMinLogLevel, _logFilePath, prependTimestamp = true) {\n        const logFilePath = typeof _logFilePath === 'string' ?\n            _logFilePath :\n            (_logFilePath && this._logFilePathFromInit);\n        if (this._currentLogger) {\n            const options = {\n                consoleMinLogLevel,\n                logFilePath,\n                prependTimestamp\n            };\n            this._currentLogger.setup(options).then(() => {\n                // Now that we have a minimum logLevel, we can clear out the queue of pending messages\n                if (this._pendingLogQ) {\n                    const logQ = this._pendingLogQ;\n                    this._pendingLogQ = null;\n                    logQ.forEach(item => this._write(item.msg, item.level));\n                }\n            });\n        }\n    }\n    init(logCallback, logFilePath, logToConsole) {\n        // Re-init, create new global Logger\n        this._pendingLogQ = this._pendingLogQ || [];\n        this._currentLogger = new internalLogger_1.InternalLogger(logCallback, logToConsole);\n        this._logFilePathFromInit = logFilePath;\n    }\n}\nexports.Logger = Logger;\nexports.logger = new Logger();\nclass LogOutputEvent extends debugSession_1.OutputEvent {\n    constructor(msg, level) {\n        const category = level === LogLevel.Error ? 'stderr' :\n            level === LogLevel.Warn ? 'console' :\n                'stdout';\n        super(msg, category);\n    }\n}\nexports.LogOutputEvent = LogOutputEvent;\nfunction trimLastNewline(str) {\n    return str.replace(/(\\n|\\r\\n)$/, '');\n}\nexports.trimLastNewline = trimLastNewline;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2xvZ2dlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OzREQUU0RDs7O0FBRTVELHFEQUFrRDtBQUNsRCxpREFBNkM7QUFFN0MsSUFBWSxRQU1YO0FBTkQsV0FBWSxRQUFRO0lBQ25CLDZDQUFXLENBQUE7SUFDWCxxQ0FBTyxDQUFBO0lBQ1AsdUNBQVEsQ0FBQTtJQUNSLHlDQUFTLENBQUE7SUFDVCx1Q0FBUSxDQUFBO0FBQ1QsQ0FBQyxFQU5XLFFBQVEsR0FBUixnQkFBUSxLQUFSLGdCQUFRLFFBTW5CO0FBNEJELE1BQWEsTUFBTTtJQUFuQjtRQUlTLGlCQUFZLEdBQWUsRUFBRSxDQUFDO0lBMkV2QyxDQUFDO0lBekVBLEdBQUcsQ0FBQyxHQUFXLEVBQUUsS0FBSyxHQUFHLFFBQVEsQ0FBQyxHQUFHO1FBQ3BDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxPQUFPLENBQUMsR0FBVztRQUNsQixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVELElBQUksQ0FBQyxHQUFXO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxLQUFLLENBQUMsR0FBVztRQUNoQixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE9BQU87UUFDTixJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDeEIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUMvQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztZQUMzQixPQUFPLFFBQVEsQ0FBQztTQUNoQjthQUFNO1lBQ04sT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDekI7SUFDRixDQUFDO0lBRUQ7O09BRUc7SUFDSyxNQUFNLENBQUMsR0FBVyxFQUFFLEtBQUssR0FBRyxRQUFRLENBQUMsR0FBRztRQUMvQyw4QkFBOEI7UUFDOUIsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDZixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDdEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztTQUN2QzthQUFNLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUMvQixJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDcEM7SUFDRixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLGtCQUE0QixFQUFFLFlBQTZCLEVBQUUsbUJBQTRCLElBQUk7UUFDbEcsTUFBTSxXQUFXLEdBQUcsT0FBTyxZQUFZLEtBQUssUUFBUSxDQUFDLENBQUM7WUFDckQsWUFBWSxDQUFDLENBQUM7WUFDZCxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUU3QyxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDeEIsTUFBTSxPQUFPLEdBQUc7Z0JBQ2Ysa0JBQWtCO2dCQUNsQixXQUFXO2dCQUNYLGdCQUFnQjthQUNoQixDQUFDO1lBQ0YsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDNUMsc0ZBQXNGO2dCQUN0RixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7b0JBQ3RCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7b0JBQy9CLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO29CQUN6QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2lCQUN4RDtZQUNGLENBQUMsQ0FBQyxDQUFDO1NBRUg7SUFDRixDQUFDO0lBRUQsSUFBSSxDQUFDLFdBQXlCLEVBQUUsV0FBb0IsRUFBRSxZQUFzQjtRQUMzRSxvQ0FBb0M7UUFDcEMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxJQUFJLEVBQUUsQ0FBQztRQUM1QyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLFdBQVcsQ0FBQztJQUN6QyxDQUFDO0NBQ0Q7QUEvRUQsd0JBK0VDO0FBRVksUUFBQSxNQUFNLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztBQUVuQyxNQUFhLGNBQWUsU0FBUSwwQkFBVztJQUM5QyxZQUFZLEdBQVcsRUFBRSxLQUFlO1FBQ3ZDLE1BQU0sUUFBUSxHQUNiLEtBQUssS0FBSyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNyQyxLQUFLLEtBQUssUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ3JDLFFBQVEsQ0FBQztRQUNWLEtBQUssQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDdEIsQ0FBQztDQUNEO0FBUkQsd0NBUUM7QUFFRCxTQUFnQixlQUFlLENBQUMsR0FBVztJQUMxQyxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3RDLENBQUM7QUFGRCwwQ0FFQyIsInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBDb3B5cmlnaHQgKEMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBJbnRlcm5hbExvZ2dlciB9IGZyb20gJy4vaW50ZXJuYWxMb2dnZXInO1xuaW1wb3J0IHsgT3V0cHV0RXZlbnQgfSBmcm9tICcuL2RlYnVnU2Vzc2lvbic7XG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcblx0VmVyYm9zZSA9IDAsXG5cdExvZyA9IDEsXG5cdFdhcm4gPSAyLFxuXHRFcnJvciA9IDMsXG5cdFN0b3AgPSA0XG59XG5cbmV4cG9ydCB0eXBlIElMb2dDYWxsYmFjayA9IChvdXRwdXRFdmVudDogT3V0cHV0RXZlbnQpID0+IHZvaWQ7XG5cbmludGVyZmFjZSBJTG9nSXRlbSB7XG5cdG1zZzogc3RyaW5nO1xuXHRsZXZlbDogTG9nTGV2ZWw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxvZ2dlciB7XG5cdGxvZyhtc2c6IHN0cmluZywgbGV2ZWw/OiBMb2dMZXZlbCk6IHZvaWQ7XG5cdHZlcmJvc2UobXNnOiBzdHJpbmcpOiB2b2lkO1xuXHR3YXJuKG1zZzogc3RyaW5nKTogdm9pZDtcblx0ZXJyb3IobXNnOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElJbnRlcm5hbExvZ2dlciB7XG5cdGRpc3Bvc2UoKTogUHJvbWlzZTx2b2lkPjtcblx0bG9nKG1zZzogc3RyaW5nLCBsZXZlbDogTG9nTGV2ZWwsIHByZXBlbmRUaW1lc3RhbXA/OiBib29sZWFuKSA6IHZvaWQ7XG5cdHNldHVwKG9wdGlvbnM6IElJbnRlcm5hbExvZ2dlck9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElJbnRlcm5hbExvZ2dlck9wdGlvbnMge1xuXHRjb25zb2xlTWluTG9nTGV2ZWw6IExvZ0xldmVsO1xuXHRsb2dGaWxlUGF0aD86IHN0cmluZztcblx0cHJlcGVuZFRpbWVzdGFtcD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuXHRwcml2YXRlIF9sb2dGaWxlUGF0aEZyb21Jbml0OiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBfY3VycmVudExvZ2dlcjogSUludGVybmFsTG9nZ2VyO1xuXHRwcml2YXRlIF9wZW5kaW5nTG9nUTogSUxvZ0l0ZW1bXSA9IFtdO1xuXG5cdGxvZyhtc2c6IHN0cmluZywgbGV2ZWwgPSBMb2dMZXZlbC5Mb2cpOiB2b2lkIHtcblx0XHRtc2cgPSBtc2cgKyAnXFxuJztcblx0XHR0aGlzLl93cml0ZShtc2csIGxldmVsKTtcblx0fVxuXG5cdHZlcmJvc2UobXNnOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLmxvZyhtc2csIExvZ0xldmVsLlZlcmJvc2UpO1xuXHR9XG5cblx0d2Fybihtc2c6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMubG9nKG1zZywgTG9nTGV2ZWwuV2Fybik7XG5cdH1cblxuXHRlcnJvcihtc2c6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMubG9nKG1zZywgTG9nTGV2ZWwuRXJyb3IpO1xuXHR9XG5cblx0ZGlzcG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAodGhpcy5fY3VycmVudExvZ2dlcikge1xuXHRcdFx0Y29uc3QgZGlzcG9zZVAgPSB0aGlzLl9jdXJyZW50TG9nZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuX2N1cnJlbnRMb2dnZXIgPSBudWxsO1xuXHRcdFx0cmV0dXJuIGRpc3Bvc2VQO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIGBsb2dgIGFkZHMgYSBuZXdsaW5lLCBgd3JpdGVgIGRvZXNuJ3Rcblx0ICovXG5cdHByaXZhdGUgX3dyaXRlKG1zZzogc3RyaW5nLCBsZXZlbCA9IExvZ0xldmVsLkxvZyk6IHZvaWQge1xuXHRcdC8vIFtudWxsLCB1bmRlZmluZWRdID0+IHN0cmluZ1xuXHRcdG1zZyA9IG1zZyArICcnO1xuXHRcdGlmICh0aGlzLl9wZW5kaW5nTG9nUSkge1xuXHRcdFx0dGhpcy5fcGVuZGluZ0xvZ1EucHVzaCh7IG1zZywgbGV2ZWwgfSk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLl9jdXJyZW50TG9nZ2VyKSB7XG5cdFx0XHR0aGlzLl9jdXJyZW50TG9nZ2VyLmxvZyhtc2csIGxldmVsKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHRoZSBsb2dnZXIncyBtaW5pbXVtIGxldmVsIHRvIGxvZyBpbiB0aGUgY29uc29sZSwgYW5kIHdoZXRoZXIgdG8gbG9nIHRvIHRoZSBmaWxlLiBMb2cgbWVzc2FnZXMgYXJlIHF1ZXVlZCBiZWZvcmUgdGhpcyBpc1xuXHQgKiBjYWxsZWQgdGhlIGZpcnN0IHRpbWUsIGJlY2F1c2UgbWluTG9nTGV2ZWwgZGVmYXVsdHMgdG8gV2Fybi5cblx0ICovXG5cdHNldHVwKGNvbnNvbGVNaW5Mb2dMZXZlbDogTG9nTGV2ZWwsIF9sb2dGaWxlUGF0aD86IHN0cmluZ3xib29sZWFuLCBwcmVwZW5kVGltZXN0YW1wOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuXHRcdGNvbnN0IGxvZ0ZpbGVQYXRoID0gdHlwZW9mIF9sb2dGaWxlUGF0aCA9PT0gJ3N0cmluZycgP1xuXHRcdFx0X2xvZ0ZpbGVQYXRoIDpcblx0XHRcdChfbG9nRmlsZVBhdGggJiYgdGhpcy5fbG9nRmlsZVBhdGhGcm9tSW5pdCk7XG5cblx0XHRpZiAodGhpcy5fY3VycmVudExvZ2dlcikge1xuXHRcdFx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRcdFx0Y29uc29sZU1pbkxvZ0xldmVsLFxuXHRcdFx0XHRsb2dGaWxlUGF0aCxcblx0XHRcdFx0cHJlcGVuZFRpbWVzdGFtcFxuXHRcdFx0fTtcblx0XHRcdHRoaXMuX2N1cnJlbnRMb2dnZXIuc2V0dXAob3B0aW9ucykudGhlbigoKSA9PiB7XG5cdFx0XHRcdC8vIE5vdyB0aGF0IHdlIGhhdmUgYSBtaW5pbXVtIGxvZ0xldmVsLCB3ZSBjYW4gY2xlYXIgb3V0IHRoZSBxdWV1ZSBvZiBwZW5kaW5nIG1lc3NhZ2VzXG5cdFx0XHRcdGlmICh0aGlzLl9wZW5kaW5nTG9nUSkge1xuXHRcdFx0XHRcdGNvbnN0IGxvZ1EgPSB0aGlzLl9wZW5kaW5nTG9nUTtcblx0XHRcdFx0XHR0aGlzLl9wZW5kaW5nTG9nUSA9IG51bGw7XG5cdFx0XHRcdFx0bG9nUS5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fd3JpdGUoaXRlbS5tc2csIGl0ZW0ubGV2ZWwpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cdH1cblxuXHRpbml0KGxvZ0NhbGxiYWNrOiBJTG9nQ2FsbGJhY2ssIGxvZ0ZpbGVQYXRoPzogc3RyaW5nLCBsb2dUb0NvbnNvbGU/OiBib29sZWFuKTogdm9pZCB7XG5cdFx0Ly8gUmUtaW5pdCwgY3JlYXRlIG5ldyBnbG9iYWwgTG9nZ2VyXG5cdFx0dGhpcy5fcGVuZGluZ0xvZ1EgPSB0aGlzLl9wZW5kaW5nTG9nUSB8fCBbXTtcblx0XHR0aGlzLl9jdXJyZW50TG9nZ2VyID0gbmV3IEludGVybmFsTG9nZ2VyKGxvZ0NhbGxiYWNrLCBsb2dUb0NvbnNvbGUpO1xuXHRcdHRoaXMuX2xvZ0ZpbGVQYXRoRnJvbUluaXQgPSBsb2dGaWxlUGF0aDtcblx0fVxufVxuXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG5leHBvcnQgY2xhc3MgTG9nT3V0cHV0RXZlbnQgZXh0ZW5kcyBPdXRwdXRFdmVudCB7XG5cdGNvbnN0cnVjdG9yKG1zZzogc3RyaW5nLCBsZXZlbDogTG9nTGV2ZWwpIHtcblx0XHRjb25zdCBjYXRlZ29yeSA9XG5cdFx0XHRsZXZlbCA9PT0gTG9nTGV2ZWwuRXJyb3IgPyAnc3RkZXJyJyA6XG5cdFx0XHRsZXZlbCA9PT0gTG9nTGV2ZWwuV2FybiA/ICdjb25zb2xlJyA6XG5cdFx0XHQnc3Rkb3V0Jztcblx0XHRzdXBlcihtc2csIGNhdGVnb3J5KTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJpbUxhc3ROZXdsaW5lKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcblx0cmV0dXJuIHN0ci5yZXBsYWNlKC8oXFxufFxcclxcbikkLywgJycpO1xufVxuXG5cbiJdfQ==","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LoggingDebugSession = void 0;\nconst Logger = require(\"./logger\");\nconst logger = Logger.logger;\nconst debugSession_1 = require(\"./debugSession\");\nclass LoggingDebugSession extends debugSession_1.DebugSession {\n    constructor(obsolete_logFilePath, obsolete_debuggerLinesAndColumnsStartAt1, obsolete_isServer) {\n        super(obsolete_debuggerLinesAndColumnsStartAt1, obsolete_isServer);\n        this.obsolete_logFilePath = obsolete_logFilePath;\n        this.on('error', (event) => {\n            logger.error(event.body);\n        });\n    }\n    start(inStream, outStream) {\n        super.start(inStream, outStream);\n        logger.init(e => this.sendEvent(e), this.obsolete_logFilePath, this._isServer);\n    }\n    /**\n     * Overload sendEvent to log\n     */\n    sendEvent(event) {\n        if (!(event instanceof Logger.LogOutputEvent)) {\n            // Don't create an infinite loop...\n            let objectToLog = event;\n            if (event instanceof debugSession_1.OutputEvent && event.body && event.body.data && event.body.data.doNotLogOutput) {\n                delete event.body.data.doNotLogOutput;\n                objectToLog = Object.assign({}, event);\n                objectToLog.body = Object.assign(Object.assign({}, event.body), { output: '<output not logged>' });\n            }\n            logger.verbose(`To client: ${JSON.stringify(objectToLog)}`);\n        }\n        super.sendEvent(event);\n    }\n    /**\n     * Overload sendRequest to log\n     */\n    sendRequest(command, args, timeout, cb) {\n        logger.verbose(`To client: ${JSON.stringify(command)}(${JSON.stringify(args)}), timeout: ${timeout}`);\n        super.sendRequest(command, args, timeout, cb);\n    }\n    /**\n     * Overload sendResponse to log\n     */\n    sendResponse(response) {\n        logger.verbose(`To client: ${JSON.stringify(response)}`);\n        super.sendResponse(response);\n    }\n    dispatchRequest(request) {\n        logger.verbose(`From client: ${request.command}(${JSON.stringify(request.arguments)})`);\n        super.dispatchRequest(request);\n    }\n}\nexports.LoggingDebugSession = LoggingDebugSession;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2luZ0RlYnVnU2Vzc2lvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9sb2dnaW5nRGVidWdTZXNzaW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O2dHQUdnRzs7O0FBSWhHLG1DQUFtQztBQUNuQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQzdCLGlEQUF5RDtBQUV6RCxNQUFhLG1CQUFvQixTQUFRLDJCQUFZO0lBQ3BELFlBQTJCLG9CQUE2QixFQUFFLHdDQUFrRCxFQUFFLGlCQUEyQjtRQUN4SSxLQUFLLENBQUMsd0NBQXdDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQUR6Qyx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQVM7UUFHdkQsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUEwQixFQUFFLEVBQUU7WUFDL0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBRU0sS0FBSyxDQUFDLFFBQStCLEVBQUUsU0FBZ0M7UUFDN0UsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDakMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNoRixDQUFDO0lBRUQ7O09BRUc7SUFDSSxTQUFTLENBQUMsS0FBMEI7UUFDMUMsSUFBSSxDQUFDLENBQUMsS0FBSyxZQUFZLE1BQU0sQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUM5QyxtQ0FBbUM7WUFFbkMsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDO1lBQ3hCLElBQUksS0FBSyxZQUFZLDBCQUFXLElBQUksS0FBSyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQ3BHLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDO2dCQUN0QyxXQUFXLHFCQUFRLEtBQUssQ0FBRSxDQUFDO2dCQUMzQixXQUFXLENBQUMsSUFBSSxtQ0FBUSxLQUFLLENBQUMsSUFBSSxLQUFFLE1BQU0sRUFBRSxxQkFBcUIsR0FBRSxDQUFBO2FBQ25FO1lBRUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzVEO1FBRUQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBRUQ7O09BRUc7SUFDSSxXQUFXLENBQUMsT0FBZSxFQUFFLElBQVMsRUFBRSxPQUFlLEVBQUUsRUFBOEM7UUFDN0csTUFBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsZUFBZSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3RHLEtBQUssQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOztPQUVHO0lBQ0ksWUFBWSxDQUFDLFFBQWdDO1FBQ25ELE1BQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6RCxLQUFLLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFUyxlQUFlLENBQUMsT0FBOEI7UUFDdkQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsT0FBTyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUUsR0FBRyxDQUFDLENBQUM7UUFDekYsS0FBSyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNoQyxDQUFDO0NBQ0Q7QUF0REQsa0RBc0RDIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7RGVidWdQcm90b2NvbH0gZnJvbSAndnNjb2RlLWRlYnVncHJvdG9jb2wnO1xuXG5pbXBvcnQgKiBhcyBMb2dnZXIgZnJvbSAnLi9sb2dnZXInO1xuY29uc3QgbG9nZ2VyID0gTG9nZ2VyLmxvZ2dlcjtcbmltcG9ydCB7RGVidWdTZXNzaW9uLCBPdXRwdXRFdmVudH0gZnJvbSAnLi9kZWJ1Z1Nlc3Npb24nO1xuXG5leHBvcnQgY2xhc3MgTG9nZ2luZ0RlYnVnU2Vzc2lvbiBleHRlbmRzIERlYnVnU2Vzc2lvbiB7XG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIG9ic29sZXRlX2xvZ0ZpbGVQYXRoPzogc3RyaW5nLCBvYnNvbGV0ZV9kZWJ1Z2dlckxpbmVzQW5kQ29sdW1uc1N0YXJ0QXQxPzogYm9vbGVhbiwgb2Jzb2xldGVfaXNTZXJ2ZXI/OiBib29sZWFuKSB7XG5cdFx0c3VwZXIob2Jzb2xldGVfZGVidWdnZXJMaW5lc0FuZENvbHVtbnNTdGFydEF0MSwgb2Jzb2xldGVfaXNTZXJ2ZXIpO1xuXG5cdFx0dGhpcy5vbignZXJyb3InLCAoZXZlbnQ6IERlYnVnUHJvdG9jb2wuRXZlbnQpID0+IHtcblx0XHRcdGxvZ2dlci5lcnJvcihldmVudC5ib2R5KTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBzdGFydChpblN0cmVhbTogTm9kZUpTLlJlYWRhYmxlU3RyZWFtLCBvdXRTdHJlYW06IE5vZGVKUy5Xcml0YWJsZVN0cmVhbSk6IHZvaWQge1xuXHRcdHN1cGVyLnN0YXJ0KGluU3RyZWFtLCBvdXRTdHJlYW0pO1xuXHRcdGxvZ2dlci5pbml0KGUgPT4gdGhpcy5zZW5kRXZlbnQoZSksIHRoaXMub2Jzb2xldGVfbG9nRmlsZVBhdGgsIHRoaXMuX2lzU2VydmVyKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBPdmVybG9hZCBzZW5kRXZlbnQgdG8gbG9nXG5cdCAqL1xuXHRwdWJsaWMgc2VuZEV2ZW50KGV2ZW50OiBEZWJ1Z1Byb3RvY29sLkV2ZW50KTogdm9pZCB7XG5cdFx0aWYgKCEoZXZlbnQgaW5zdGFuY2VvZiBMb2dnZXIuTG9nT3V0cHV0RXZlbnQpKSB7XG5cdFx0XHQvLyBEb24ndCBjcmVhdGUgYW4gaW5maW5pdGUgbG9vcC4uLlxuXG5cdFx0XHRsZXQgb2JqZWN0VG9Mb2cgPSBldmVudDtcblx0XHRcdGlmIChldmVudCBpbnN0YW5jZW9mIE91dHB1dEV2ZW50ICYmIGV2ZW50LmJvZHkgJiYgZXZlbnQuYm9keS5kYXRhICYmIGV2ZW50LmJvZHkuZGF0YS5kb05vdExvZ091dHB1dCkge1xuXHRcdFx0XHRkZWxldGUgZXZlbnQuYm9keS5kYXRhLmRvTm90TG9nT3V0cHV0O1xuXHRcdFx0XHRvYmplY3RUb0xvZyA9IHsgLi4uZXZlbnQgfTtcblx0XHRcdFx0b2JqZWN0VG9Mb2cuYm9keSA9IHsgLi4uZXZlbnQuYm9keSwgb3V0cHV0OiAnPG91dHB1dCBub3QgbG9nZ2VkPicgfVxuXHRcdFx0fVxuXG5cdFx0XHRsb2dnZXIudmVyYm9zZShgVG8gY2xpZW50OiAke0pTT04uc3RyaW5naWZ5KG9iamVjdFRvTG9nKX1gKTtcblx0XHR9XG5cblx0XHRzdXBlci5zZW5kRXZlbnQoZXZlbnQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIE92ZXJsb2FkIHNlbmRSZXF1ZXN0IHRvIGxvZ1xuXHQgKi9cblx0cHVibGljIHNlbmRSZXF1ZXN0KGNvbW1hbmQ6IHN0cmluZywgYXJnczogYW55LCB0aW1lb3V0OiBudW1iZXIsIGNiOiAocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUmVzcG9uc2UpID0+IHZvaWQpOiB2b2lkIHtcblx0XHRsb2dnZXIudmVyYm9zZShgVG8gY2xpZW50OiAke0pTT04uc3RyaW5naWZ5KGNvbW1hbmQpfSgke0pTT04uc3RyaW5naWZ5KGFyZ3MpfSksIHRpbWVvdXQ6ICR7dGltZW91dH1gKTtcblx0XHRzdXBlci5zZW5kUmVxdWVzdChjb21tYW5kLCBhcmdzLCB0aW1lb3V0LCBjYik7XG5cdH1cblxuXHQvKipcblx0ICogT3ZlcmxvYWQgc2VuZFJlc3BvbnNlIHRvIGxvZ1xuXHQgKi9cblx0cHVibGljIHNlbmRSZXNwb25zZShyZXNwb25zZTogRGVidWdQcm90b2NvbC5SZXNwb25zZSk6IHZvaWQge1xuXHRcdGxvZ2dlci52ZXJib3NlKGBUbyBjbGllbnQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpfWApO1xuXHRcdHN1cGVyLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgZGlzcGF0Y2hSZXF1ZXN0KHJlcXVlc3Q6IERlYnVnUHJvdG9jb2wuUmVxdWVzdCk6IHZvaWQge1xuXHRcdGxvZ2dlci52ZXJib3NlKGBGcm9tIGNsaWVudDogJHtyZXF1ZXN0LmNvbW1hbmR9KCR7SlNPTi5zdHJpbmdpZnkocmVxdWVzdC5hcmd1bWVudHMpIH0pYCk7XG5cdFx0c3VwZXIuZGlzcGF0Y2hSZXF1ZXN0KHJlcXVlc3QpO1xuXHR9XG59XG4iXX0=","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Handles = exports.Response = exports.Event = exports.ErrorDestination = exports.CompletionItem = exports.Module = exports.Source = exports.Breakpoint = exports.Variable = exports.Scope = exports.StackFrame = exports.Thread = exports.InvalidatedEvent = exports.ProgressEndEvent = exports.ProgressUpdateEvent = exports.ProgressStartEvent = exports.CapabilitiesEvent = exports.LoadedSourceEvent = exports.ModuleEvent = exports.BreakpointEvent = exports.ThreadEvent = exports.OutputEvent = exports.ContinuedEvent = exports.StoppedEvent = exports.TerminatedEvent = exports.InitializedEvent = exports.logger = exports.Logger = exports.LoggingDebugSession = exports.DebugSession = void 0;\nconst debugSession_1 = require(\"./debugSession\");\nObject.defineProperty(exports, \"DebugSession\", { enumerable: true, get: function () { return debugSession_1.DebugSession; } });\nObject.defineProperty(exports, \"InitializedEvent\", { enumerable: true, get: function () { return debugSession_1.InitializedEvent; } });\nObject.defineProperty(exports, \"TerminatedEvent\", { enumerable: true, get: function () { return debugSession_1.TerminatedEvent; } });\nObject.defineProperty(exports, \"StoppedEvent\", { enumerable: true, get: function () { return debugSession_1.StoppedEvent; } });\nObject.defineProperty(exports, \"ContinuedEvent\", { enumerable: true, get: function () { return debugSession_1.ContinuedEvent; } });\nObject.defineProperty(exports, \"OutputEvent\", { enumerable: true, get: function () { return debugSession_1.OutputEvent; } });\nObject.defineProperty(exports, \"ThreadEvent\", { enumerable: true, get: function () { return debugSession_1.ThreadEvent; } });\nObject.defineProperty(exports, \"BreakpointEvent\", { enumerable: true, get: function () { return debugSession_1.BreakpointEvent; } });\nObject.defineProperty(exports, \"ModuleEvent\", { enumerable: true, get: function () { return debugSession_1.ModuleEvent; } });\nObject.defineProperty(exports, \"LoadedSourceEvent\", { enumerable: true, get: function () { return debugSession_1.LoadedSourceEvent; } });\nObject.defineProperty(exports, \"CapabilitiesEvent\", { enumerable: true, get: function () { return debugSession_1.CapabilitiesEvent; } });\nObject.defineProperty(exports, \"ProgressStartEvent\", { enumerable: true, get: function () { return debugSession_1.ProgressStartEvent; } });\nObject.defineProperty(exports, \"ProgressUpdateEvent\", { enumerable: true, get: function () { return debugSession_1.ProgressUpdateEvent; } });\nObject.defineProperty(exports, \"ProgressEndEvent\", { enumerable: true, get: function () { return debugSession_1.ProgressEndEvent; } });\nObject.defineProperty(exports, \"InvalidatedEvent\", { enumerable: true, get: function () { return debugSession_1.InvalidatedEvent; } });\nObject.defineProperty(exports, \"Thread\", { enumerable: true, get: function () { return debugSession_1.Thread; } });\nObject.defineProperty(exports, \"StackFrame\", { enumerable: true, get: function () { return debugSession_1.StackFrame; } });\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return debugSession_1.Scope; } });\nObject.defineProperty(exports, \"Variable\", { enumerable: true, get: function () { return debugSession_1.Variable; } });\nObject.defineProperty(exports, \"Breakpoint\", { enumerable: true, get: function () { return debugSession_1.Breakpoint; } });\nObject.defineProperty(exports, \"Source\", { enumerable: true, get: function () { return debugSession_1.Source; } });\nObject.defineProperty(exports, \"Module\", { enumerable: true, get: function () { return debugSession_1.Module; } });\nObject.defineProperty(exports, \"CompletionItem\", { enumerable: true, get: function () { return debugSession_1.CompletionItem; } });\nObject.defineProperty(exports, \"ErrorDestination\", { enumerable: true, get: function () { return debugSession_1.ErrorDestination; } });\nconst loggingDebugSession_1 = require(\"./loggingDebugSession\");\nObject.defineProperty(exports, \"LoggingDebugSession\", { enumerable: true, get: function () { return loggingDebugSession_1.LoggingDebugSession; } });\nconst Logger = require(\"./logger\");\nexports.Logger = Logger;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return messages_1.Event; } });\nObject.defineProperty(exports, \"Response\", { enumerable: true, get: function () { return messages_1.Response; } });\nconst handles_1 = require(\"./handles\");\nObject.defineProperty(exports, \"Handles\", { enumerable: true, get: function () { return handles_1.Handles; } });\nconst logger = Logger.logger;\nexports.logger = logger;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Z0dBR2dHO0FBQ2hHLFlBQVksQ0FBQzs7O0FBRWIsaURBT3dCO0FBU3ZCLDZGQWZBLDJCQUFZLE9BZUE7QUFJWixpR0FsQkEsK0JBQWdCLE9Ba0JBO0FBQUUsZ0dBbEJBLDhCQUFlLE9Ba0JBO0FBQUUsNkZBbEJBLDJCQUFZLE9Ba0JBO0FBQUUsK0ZBbEJBLDZCQUFjLE9Ba0JBO0FBQUUsNEZBbEJBLDBCQUFXLE9Ba0JBO0FBQUUsNEZBbEJBLDBCQUFXLE9Ba0JBO0FBQUUsZ0dBbEJBLDhCQUFlLE9Ba0JBO0FBQUUsNEZBbEJBLDBCQUFXLE9Ba0JBO0FBQ3RILGtHQWxCQSxnQ0FBaUIsT0FrQkE7QUFBRSxrR0FsQkEsZ0NBQWlCLE9Ba0JBO0FBQUUsbUdBbEJBLGlDQUFrQixPQWtCQTtBQUFFLG9HQWxCQSxrQ0FBbUIsT0FrQkE7QUFBRSxpR0FsQkEsK0JBQWdCLE9Ba0JBO0FBQUUsaUdBbEJBLCtCQUFnQixPQWtCQTtBQUNsSCx1RkFsQkEscUJBQU0sT0FrQkE7QUFBRSwyRkFsQkEseUJBQVUsT0FrQkE7QUFBRSxzRkFsQkEsb0JBQUssT0FrQkE7QUFBRSx5RkFsQkEsdUJBQVEsT0FrQkE7QUFDbkMsMkZBbEJBLHlCQUFVLE9Ba0JBO0FBQUUsdUZBbEJBLHFCQUFNLE9Ba0JBO0FBQUUsdUZBbEJBLHFCQUFNLE9Ba0JBO0FBQUUsK0ZBbEJBLDZCQUFjLE9Ba0JBO0FBQzFDLGlHQWxCQSwrQkFBZ0IsT0FrQkE7QUFoQmpCLCtEQUEwRDtBQVN6RCxvR0FUTyx5Q0FBbUIsT0FTUDtBQVJwQixtQ0FBbUM7QUFTbEMsd0JBQU07QUFSUCx5Q0FBNkM7QUFlNUMsc0ZBZlEsZ0JBQUssT0FlUjtBQUFFLHlGQWZRLG1CQUFRLE9BZVI7QUFkaEIsdUNBQW9DO0FBZW5DLHdGQWZRLGlCQUFPLE9BZVI7QUFiUixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBTTVCLHdCQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge1xuXHREZWJ1Z1Nlc3Npb24sXG5cdEluaXRpYWxpemVkRXZlbnQsIFRlcm1pbmF0ZWRFdmVudCwgU3RvcHBlZEV2ZW50LCBDb250aW51ZWRFdmVudCwgT3V0cHV0RXZlbnQsIFRocmVhZEV2ZW50LCBCcmVha3BvaW50RXZlbnQsIE1vZHVsZUV2ZW50LFxuXHRcdExvYWRlZFNvdXJjZUV2ZW50LCBDYXBhYmlsaXRpZXNFdmVudCwgUHJvZ3Jlc3NTdGFydEV2ZW50LCBQcm9ncmVzc1VwZGF0ZUV2ZW50LCBQcm9ncmVzc0VuZEV2ZW50LCBJbnZhbGlkYXRlZEV2ZW50LFxuXHRUaHJlYWQsIFN0YWNrRnJhbWUsIFNjb3BlLCBWYXJpYWJsZSxcblx0QnJlYWtwb2ludCwgU291cmNlLCBNb2R1bGUsIENvbXBsZXRpb25JdGVtLFxuXHRFcnJvckRlc3RpbmF0aW9uXG59IGZyb20gJy4vZGVidWdTZXNzaW9uJztcbmltcG9ydCB7TG9nZ2luZ0RlYnVnU2Vzc2lvbn0gZnJvbSAnLi9sb2dnaW5nRGVidWdTZXNzaW9uJztcbmltcG9ydCAqIGFzIExvZ2dlciBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyBFdmVudCwgUmVzcG9uc2UgfSBmcm9tICcuL21lc3NhZ2VzJztcbmltcG9ydCB7IEhhbmRsZXMgfSBmcm9tICcuL2hhbmRsZXMnO1xuXG5jb25zdCBsb2dnZXIgPSBMb2dnZXIubG9nZ2VyO1xuXG5leHBvcnQge1xuXHREZWJ1Z1Nlc3Npb24sXG5cdExvZ2dpbmdEZWJ1Z1Nlc3Npb24sXG5cdExvZ2dlcixcblx0bG9nZ2VyLFxuXHRJbml0aWFsaXplZEV2ZW50LCBUZXJtaW5hdGVkRXZlbnQsIFN0b3BwZWRFdmVudCwgQ29udGludWVkRXZlbnQsIE91dHB1dEV2ZW50LCBUaHJlYWRFdmVudCwgQnJlYWtwb2ludEV2ZW50LCBNb2R1bGVFdmVudCxcblx0XHRMb2FkZWRTb3VyY2VFdmVudCwgQ2FwYWJpbGl0aWVzRXZlbnQsIFByb2dyZXNzU3RhcnRFdmVudCwgUHJvZ3Jlc3NVcGRhdGVFdmVudCwgUHJvZ3Jlc3NFbmRFdmVudCwgSW52YWxpZGF0ZWRFdmVudCxcblx0VGhyZWFkLCBTdGFja0ZyYW1lLCBTY29wZSwgVmFyaWFibGUsXG5cdEJyZWFrcG9pbnQsIFNvdXJjZSwgTW9kdWxlLCBDb21wbGV0aW9uSXRlbSxcblx0RXJyb3JEZXN0aW5hdGlvbixcblx0RXZlbnQsIFJlc3BvbnNlLFxuXHRIYW5kbGVzXG59XG4iXX0=","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Event = exports.Response = exports.Message = void 0;\nclass Message {\n    constructor(type) {\n        this.seq = 0;\n        this.type = type;\n    }\n}\nexports.Message = Message;\nclass Response extends Message {\n    constructor(request, message) {\n        super('response');\n        this.request_seq = request.seq;\n        this.command = request.command;\n        if (message) {\n            this.success = false;\n            this.message = message;\n        }\n        else {\n            this.success = true;\n        }\n    }\n}\nexports.Response = Response;\nclass Event extends Message {\n    constructor(event, body) {\n        super('event');\n        this.event = event;\n        if (body) {\n            this.body = body;\n        }\n    }\n}\nexports.Event = Event;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbWVzc2FnZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Z0dBR2dHOzs7QUFLaEcsTUFBYSxPQUFPO0lBSW5CLFlBQW1CLElBQVk7UUFDOUIsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDYixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNsQixDQUFDO0NBQ0Q7QUFSRCwwQkFRQztBQUVELE1BQWEsUUFBUyxTQUFRLE9BQU87SUFLcEMsWUFBbUIsT0FBOEIsRUFBRSxPQUFnQjtRQUNsRSxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQy9CLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUMvQixJQUFJLE9BQU8sRUFBRTtZQUNaLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQ2YsSUFBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7U0FDOUI7YUFBTTtZQUNOLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1NBQ3BCO0lBQ0YsQ0FBQztDQUNEO0FBaEJELDRCQWdCQztBQUVELE1BQWEsS0FBTSxTQUFRLE9BQU87SUFHakMsWUFBbUIsS0FBYSxFQUFFLElBQVU7UUFDM0MsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxJQUFJLEVBQUU7WUFDSCxJQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztTQUN4QjtJQUNGLENBQUM7Q0FDRDtBQVZELHNCQVVDIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IERlYnVnUHJvdG9jb2wgfSBmcm9tICd2c2NvZGUtZGVidWdwcm90b2NvbCc7XG5cblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2UgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlByb3RvY29sTWVzc2FnZSB7XG5cdHNlcTogbnVtYmVyO1xuXHR0eXBlOiBzdHJpbmc7XG5cblx0cHVibGljIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZykge1xuXHRcdHRoaXMuc2VxID0gMDtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBSZXNwb25zZSBleHRlbmRzIE1lc3NhZ2UgaW1wbGVtZW50cyBEZWJ1Z1Byb3RvY29sLlJlc3BvbnNlIHtcblx0cmVxdWVzdF9zZXE6IG51bWJlcjtcblx0c3VjY2VzczogYm9vbGVhbjtcblx0Y29tbWFuZDogc3RyaW5nO1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihyZXF1ZXN0OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcblx0XHRzdXBlcigncmVzcG9uc2UnKTtcblx0XHR0aGlzLnJlcXVlc3Rfc2VxID0gcmVxdWVzdC5zZXE7XG5cdFx0dGhpcy5jb21tYW5kID0gcmVxdWVzdC5jb21tYW5kO1xuXHRcdGlmIChtZXNzYWdlKSB7XG5cdFx0XHR0aGlzLnN1Y2Nlc3MgPSBmYWxzZTtcblx0XHRcdCg8YW55PnRoaXMpLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnN1Y2Nlc3MgPSB0cnVlO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgRXZlbnQgZXh0ZW5kcyBNZXNzYWdlIGltcGxlbWVudHMgRGVidWdQcm90b2NvbC5FdmVudCB7XG5cdGV2ZW50OiBzdHJpbmc7XG5cblx0cHVibGljIGNvbnN0cnVjdG9yKGV2ZW50OiBzdHJpbmcsIGJvZHk/OiBhbnkpIHtcblx0XHRzdXBlcignZXZlbnQnKTtcblx0XHR0aGlzLmV2ZW50ID0gZXZlbnQ7XG5cdFx0aWYgKGJvZHkpIHtcblx0XHRcdCg8YW55PnRoaXMpLmJvZHkgPSBib2R5O1xuXHRcdH1cblx0fVxufVxuIl19","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolServer = void 0;\nconst ee = require(\"events\");\nconst messages_1 = require(\"./messages\");\nclass Disposable0 {\n    dispose() {\n    }\n}\nclass Emitter {\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArg) => {\n                this._listener = listener;\n                this._this = thisArg;\n                let result;\n                result = {\n                    dispose: () => {\n                        this._listener = undefined;\n                        this._this = undefined;\n                    }\n                };\n                return result;\n            };\n        }\n        return this._event;\n    }\n    fire(event) {\n        if (this._listener) {\n            try {\n                this._listener.call(this._this, event);\n            }\n            catch (e) {\n            }\n        }\n    }\n    hasListener() {\n        return !!this._listener;\n    }\n    dispose() {\n        this._listener = undefined;\n        this._this = undefined;\n    }\n}\nclass ProtocolServer extends ee.EventEmitter {\n    constructor() {\n        super();\n        this._sendMessage = new Emitter();\n        this._pendingRequests = new Map();\n        this.onDidSendMessage = this._sendMessage.event;\n    }\n    // ---- implements vscode.Debugadapter interface ---------------------------\n    dispose() {\n    }\n    handleMessage(msg) {\n        if (msg.type === 'request') {\n            this.dispatchRequest(msg);\n        }\n        else if (msg.type === 'response') {\n            const response = msg;\n            const clb = this._pendingRequests.get(response.request_seq);\n            if (clb) {\n                this._pendingRequests.delete(response.request_seq);\n                clb(response);\n            }\n        }\n    }\n    _isRunningInline() {\n        return this._sendMessage && this._sendMessage.hasListener();\n    }\n    //--------------------------------------------------------------------------\n    start(inStream, outStream) {\n        this._sequence = 1;\n        this._writableStream = outStream;\n        this._rawData = Buffer.alloc(0);\n        inStream.on('data', (data) => this._handleData(data));\n        inStream.on('close', () => {\n            this._emitEvent(new messages_1.Event('close'));\n        });\n        inStream.on('error', (error) => {\n            this._emitEvent(new messages_1.Event('error', 'inStream error: ' + (error && error.message)));\n        });\n        outStream.on('error', (error) => {\n            this._emitEvent(new messages_1.Event('error', 'outStream error: ' + (error && error.message)));\n        });\n        inStream.resume();\n    }\n    stop() {\n        if (this._writableStream) {\n            this._writableStream.end();\n        }\n    }\n    sendEvent(event) {\n        this._send('event', event);\n    }\n    sendResponse(response) {\n        if (response.seq > 0) {\n            console.error(`attempt to send more than one response for command ${response.command}`);\n        }\n        else {\n            this._send('response', response);\n        }\n    }\n    sendRequest(command, args, timeout, cb) {\n        const request = {\n            command: command\n        };\n        if (args && Object.keys(args).length > 0) {\n            request.arguments = args;\n        }\n        this._send('request', request);\n        if (cb) {\n            this._pendingRequests.set(request.seq, cb);\n            const timer = setTimeout(() => {\n                clearTimeout(timer);\n                const clb = this._pendingRequests.get(request.seq);\n                if (clb) {\n                    this._pendingRequests.delete(request.seq);\n                    clb(new messages_1.Response(request, 'timeout'));\n                }\n            }, timeout);\n        }\n    }\n    // ---- protected ----------------------------------------------------------\n    dispatchRequest(request) {\n    }\n    // ---- private ------------------------------------------------------------\n    _emitEvent(event) {\n        this.emit(event.event, event);\n    }\n    _send(typ, message) {\n        message.type = typ;\n        message.seq = this._sequence++;\n        if (this._writableStream) {\n            const json = JSON.stringify(message);\n            this._writableStream.write(`Content-Length: ${Buffer.byteLength(json, 'utf8')}\\r\\n\\r\\n${json}`, 'utf8');\n        }\n        this._sendMessage.fire(message);\n    }\n    _handleData(data) {\n        this._rawData = Buffer.concat([this._rawData, data]);\n        while (true) {\n            if (this._contentLength >= 0) {\n                if (this._rawData.length >= this._contentLength) {\n                    const message = this._rawData.toString('utf8', 0, this._contentLength);\n                    this._rawData = this._rawData.slice(this._contentLength);\n                    this._contentLength = -1;\n                    if (message.length > 0) {\n                        try {\n                            let msg = JSON.parse(message);\n                            this.handleMessage(msg);\n                        }\n                        catch (e) {\n                            this._emitEvent(new messages_1.Event('error', 'Error handling data: ' + (e && e.message)));\n                        }\n                    }\n                    continue; // there may be more complete messages to process\n                }\n            }\n            else {\n                const idx = this._rawData.indexOf(ProtocolServer.TWO_CRLF);\n                if (idx !== -1) {\n                    const header = this._rawData.toString('utf8', 0, idx);\n                    const lines = header.split('\\r\\n');\n                    for (let i = 0; i < lines.length; i++) {\n                        const pair = lines[i].split(/: +/);\n                        if (pair[0] == 'Content-Length') {\n                            this._contentLength = +pair[1];\n                        }\n                    }\n                    this._rawData = this._rawData.slice(idx + ProtocolServer.TWO_CRLF.length);\n                    continue;\n                }\n            }\n            break;\n        }\n    }\n}\nexports.ProtocolServer = ProtocolServer;\nProtocolServer.TWO_CRLF = '\\r\\n\\r\\n';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdG9jb2wuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvcHJvdG9jb2wudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Z0dBR2dHOzs7QUFFaEcsNkJBQTZCO0FBRTdCLHlDQUE2QztBQVM3QyxNQUFNLFdBQVc7SUFDaEIsT0FBTztJQUNQLENBQUM7Q0FDRDtBQU1ELE1BQU0sT0FBTztJQU1aLElBQUksS0FBSztRQUNSLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxRQUF1QixFQUFFLE9BQWEsRUFBRSxFQUFFO2dCQUV4RCxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztnQkFDMUIsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7Z0JBRXJCLElBQUksTUFBbUIsQ0FBQztnQkFDeEIsTUFBTSxHQUFHO29CQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUU7d0JBQ2IsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7d0JBQzNCLElBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDO29CQUN4QixDQUFDO2lCQUNELENBQUM7Z0JBQ0YsT0FBTyxNQUFNLENBQUM7WUFDZixDQUFDLENBQUM7U0FDRjtRQUNELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNwQixDQUFDO0lBRUQsSUFBSSxDQUFDLEtBQVE7UUFDWixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbkIsSUFBSTtnQkFDSCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO2FBQ3ZDO1lBQUMsT0FBTyxDQUFDLEVBQUU7YUFDWDtTQUNEO0lBQ0YsQ0FBQztJQUVELFdBQVc7UUFDVixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3pCLENBQUM7SUFFRCxPQUFPO1FBQ04sSUFBSSxDQUFDLFNBQVMs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SSxnQkFBZ0IsRUFBRTs0QkFDaEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzt5QkFDL0I7cUJBQ0Q7b0JBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDMUUsU0FBUztpQkFDVDthQUNEO1lBQ0QsTUFBTTtTQUNOO0lBQ0YsQ0FBQzs7QUF2S0Ysd0NBd0tDO0FBdEtlLHVCQUFRLEdBQUcsVUFBVSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCAqIGFzIGVlIGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBEZWJ1Z1Byb3RvY29sIH0gZnJvbSAndnNjb2RlLWRlYnVncHJvdG9jb2wnO1xuaW1wb3J0IHsgUmVzcG9uc2UsIEV2ZW50IH0gZnJvbSAnLi9tZXNzYWdlcyc7XG5cbmludGVyZmFjZSBEZWJ1Z1Byb3RvY29sTWVzc2FnZSB7XG59XG5cbmludGVyZmFjZSBJRGlzcG9zYWJsZSB7XG5cdGRpc3Bvc2UoKTogdm9pZDtcbn1cblxuY2xhc3MgRGlzcG9zYWJsZTAgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG5cdGRpc3Bvc2UoKTogYW55IHtcblx0fVxufVxuXG5pbnRlcmZhY2UgRXZlbnQwPFQ+IHtcblx0KGxpc3RlbmVyOiAoZTogVCkgPT4gYW55LCB0aGlzQXJnPzogYW55KTogRGlzcG9zYWJsZTA7XG59XG5cbmNsYXNzIEVtaXR0ZXI8VD4ge1xuXG5cdHByaXZhdGUgX2V2ZW50PzogRXZlbnQwPFQ+O1xuXHRwcml2YXRlIF9saXN0ZW5lcj86IChlOiBUKSA9PiB2b2lkO1xuXHRwcml2YXRlIF90aGlzPzogYW55O1xuXG5cdGdldCBldmVudCgpOiBFdmVudDA8VD4ge1xuXHRcdGlmICghdGhpcy5fZXZlbnQpIHtcblx0XHRcdHRoaXMuX2V2ZW50ID0gKGxpc3RlbmVyOiAoZTogVCkgPT4gYW55LCB0aGlzQXJnPzogYW55KSA9PiB7XG5cblx0XHRcdFx0dGhpcy5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcblx0XHRcdFx0dGhpcy5fdGhpcyA9IHRoaXNBcmc7XG5cblx0XHRcdFx0bGV0IHJlc3VsdDogSURpc3Bvc2FibGU7XG5cdFx0XHRcdHJlc3VsdCA9IHtcblx0XHRcdFx0XHRkaXNwb3NlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLl9saXN0ZW5lciA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdHRoaXMuX3RoaXMgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2V2ZW50O1xuXHR9XG5cblx0ZmlyZShldmVudDogVCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9saXN0ZW5lcikge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5fbGlzdGVuZXIuY2FsbCh0aGlzLl90aGlzLCBldmVudCk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aGFzTGlzdGVuZXIoKSA6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhIXRoaXMuX2xpc3RlbmVyO1xuXHR9XG5cblx0ZGlzcG9zZSgpIHtcblx0XHR0aGlzLl9saXN0ZW5lciA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLl90aGlzID0gdW5kZWZpbmVkO1xuXHR9XG59XG5cbi8qKlxuICogQSBzdHJ1Y3R1cmFsbHkgZXF1aXZhbGVudCBjb3B5IG9mIHZzY29kZS5EZWJ1Z0FkYXB0ZXJcbiAqL1xuaW50ZXJmYWNlIFZTQ29kZURlYnVnQWRhcHRlciBleHRlbmRzIERpc3Bvc2FibGUwIHtcblxuXHRyZWFkb25seSBvbkRpZFNlbmRNZXNzYWdlOiBFdmVudDA8RGVidWdQcm90b2NvbE1lc3NhZ2U+O1xuXG5cdGhhbmRsZU1lc3NhZ2UobWVzc2FnZTogRGVidWdQcm90b2NvbC5Qcm90b2NvbE1lc3NhZ2UpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgUHJvdG9jb2xTZXJ2ZXIgZXh0ZW5kcyBlZS5FdmVudEVtaXR0ZXIgaW1wbGVtZW50cyBWU0NvZGVEZWJ1Z0FkYXB0ZXIge1xuXG5cdHByaXZhdGUgc3RhdGljIFRXT19DUkxGID0gJ1xcclxcblxcclxcbic7XG5cblx0cHJpdmF0ZSBfc2VuZE1lc3NhZ2UgPSBuZXcgRW1pdHRlcjxEZWJ1Z1Byb3RvY29sTWVzc2FnZT4oKTtcblxuXHRwcml2YXRlIF9yYXdEYXRhOiBCdWZmZXI7XG5cdHByaXZhdGUgX2NvbnRlbnRMZW5ndGg6IG51bWJlcjtcblx0cHJpdmF0ZSBfc2VxdWVuY2U6IG51bWJlcjtcblx0cHJpdmF0ZSBfd3JpdGFibGVTdHJlYW06IE5vZGVKUy5Xcml0YWJsZVN0cmVhbTtcblx0cHJpdmF0ZSBfcGVuZGluZ1JlcXVlc3RzID0gbmV3IE1hcDxudW1iZXIsIChyZXNwb25zZTogRGVidWdQcm90b2NvbC5SZXNwb25zZSkgPT4gdm9pZD4oKTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cblx0Ly8gLS0tLSBpbXBsZW1lbnRzIHZzY29kZS5EZWJ1Z2FkYXB0ZXIgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdHB1YmxpYyBkaXNwb3NlKCk6IGFueSB7XG5cdH1cblxuXHRwdWJsaWMgb25EaWRTZW5kTWVzc2FnZTogRXZlbnQwPERlYnVnUHJvdG9jb2xNZXNzYWdlPiA9IHRoaXMuX3NlbmRNZXNzYWdlLmV2ZW50O1xuXG5cdHB1YmxpYyBoYW5kbGVNZXNzYWdlKG1zZzogRGVidWdQcm90b2NvbC5Qcm90b2NvbE1lc3NhZ2UpOiB2b2lkIHtcblx0XHRpZiAobXNnLnR5cGUgPT09ICdyZXF1ZXN0Jykge1xuXHRcdFx0dGhpcy5kaXNwYXRjaFJlcXVlc3QoPERlYnVnUHJvdG9jb2wuUmVxdWVzdD5tc2cpO1xuXHRcdH0gZWxzZSBpZiAobXNnLnR5cGUgPT09ICdyZXNwb25zZScpIHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gPERlYnVnUHJvdG9jb2wuUmVzcG9uc2U+bXNnO1xuXHRcdFx0Y29uc3QgY2xiID0gdGhpcy5fcGVuZGluZ1JlcXVlc3RzLmdldChyZXNwb25zZS5yZXF1ZXN0X3NlcSk7XG5cdFx0XHRpZiAoY2xiKSB7XG5cdFx0XHRcdHRoaXMuX3BlbmRpbmdSZXF1ZXN0cy5kZWxldGUocmVzcG9uc2UucmVxdWVzdF9zZXEpO1xuXHRcdFx0XHRjbGIocmVzcG9uc2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByb3RlY3RlZCBfaXNSdW5uaW5nSW5saW5lKCkge1xuXHRcdHJldHVybiB0aGlzLl9zZW5kTWVzc2FnZSAmJiB0aGlzLl9zZW5kTWVzc2FnZS5oYXNMaXN0ZW5lcigpO1xuXHR9XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdHB1YmxpYyBzdGFydChpblN0cmVhbTogTm9kZUpTLlJlYWRhYmxlU3RyZWFtLCBvdXRTdHJlYW06IE5vZGVKUy5Xcml0YWJsZVN0cmVhbSk6IHZvaWQge1xuXHRcdHRoaXMuX3NlcXVlbmNlID0gMTtcblx0XHR0aGlzLl93cml0YWJsZVN0cmVhbSA9IG91dFN0cmVhbTtcblx0XHR0aGlzLl9yYXdEYXRhID0gQnVmZmVyLmFsbG9jKDApO1xuXG5cdFx0aW5TdHJlYW0ub24oJ2RhdGEnLCAoZGF0YTogQnVmZmVyKSA9PiB0aGlzLl9oYW5kbGVEYXRhKGRhdGEpKTtcblxuXHRcdGluU3RyZWFtLm9uKCdjbG9zZScsICgpID0+IHtcblx0XHRcdHRoaXMuX2VtaXRFdmVudChuZXcgRXZlbnQoJ2Nsb3NlJykpO1xuXHRcdH0pO1xuXHRcdGluU3RyZWFtLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuXHRcdFx0dGhpcy5fZW1pdEV2ZW50KG5ldyBFdmVudCgnZXJyb3InLCAnaW5TdHJlYW0gZXJyb3I6ICcgKyAoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSkpKTtcblx0XHR9KTtcblxuXHRcdG91dFN0cmVhbS5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcblx0XHRcdHRoaXMuX2VtaXRFdmVudChuZXcgRXZlbnQoJ2Vycm9yJywgJ291dFN0cmVhbSBlcnJvcjogJyArIChlcnJvciAmJiBlcnJvci5tZXNzYWdlKSkpO1xuXHRcdH0pO1xuXG5cdFx0aW5TdHJlYW0ucmVzdW1lKCk7XG5cdH1cblxuXHRwdWJsaWMgc3RvcCgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fd3JpdGFibGVTdHJlYW0pIHtcblx0XHRcdHRoaXMuX3dyaXRhYmxlU3RyZWFtLmVuZCgpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzZW5kRXZlbnQoZXZlbnQ6IERlYnVnUHJvdG9jb2wuRXZlbnQpOiB2b2lkIHtcblx0XHR0aGlzLl9zZW5kKCdldmVudCcsIGV2ZW50KTtcblx0fVxuXG5cdHB1YmxpYyBzZW5kUmVzcG9uc2UocmVzcG9uc2U6IERlYnVnUHJvdG9jb2wuUmVzcG9uc2UpOiB2b2lkIHtcblx0XHRpZiAocmVzcG9uc2Uuc2VxID4gMCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgYXR0ZW1wdCB0byBzZW5kIG1vcmUgdGhhbiBvbmUgcmVzcG9uc2UgZm9yIGNvbW1hbmQgJHtyZXNwb25zZS5jb21tYW5kfWApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9zZW5kKCdyZXNwb25zZScsIHJlc3BvbnNlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc2VuZFJlcXVlc3QoY29tbWFuZDogc3RyaW5nLCBhcmdzOiBhbnksIHRpbWVvdXQ6IG51bWJlciwgY2I6IChyZXNwb25zZTogRGVidWdQcm90b2NvbC5SZXNwb25zZSkgPT4gdm9pZCkgOiB2b2lkIHtcblxuXHRcdGNvbnN0IHJlcXVlc3Q6IGFueSA9IHtcblx0XHRcdGNvbW1hbmQ6IGNvbW1hbmRcblx0XHR9O1xuXHRcdGlmIChhcmdzICYmIE9iamVjdC5rZXlzKGFyZ3MpLmxlbmd0aCA+IDApIHtcblx0XHRcdHJlcXVlc3QuYXJndW1lbnRzID0gYXJncztcblx0XHR9XG5cblx0XHR0aGlzLl9zZW5kKCdyZXF1ZXN0JywgcmVxdWVzdCk7XG5cblx0XHRpZiAoY2IpIHtcblx0XHRcdHRoaXMuX3BlbmRpbmdSZXF1ZXN0cy5zZXQocmVxdWVzdC5zZXEsIGNiKTtcblxuXHRcdFx0Y29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVyKTtcblx0XHRcdFx0Y29uc3QgY2xiID0gdGhpcy5fcGVuZGluZ1JlcXVlc3RzLmdldChyZXF1ZXN0LnNlcSk7XG5cdFx0XHRcdGlmIChjbGIpIHtcblx0XHRcdFx0XHR0aGlzLl9wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKHJlcXVlc3Quc2VxKTtcblx0XHRcdFx0XHRjbGIobmV3IFJlc3BvbnNlKHJlcXVlc3QsICd0aW1lb3V0JykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aW1lb3V0KTtcblx0XHR9XG5cdH1cblxuXHQvLyAtLS0tIHByb3RlY3RlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0cHJvdGVjdGVkIGRpc3BhdGNoUmVxdWVzdChyZXF1ZXN0OiBEZWJ1Z1Byb3RvY29sLlJlcXVlc3QpOiB2b2lkIHtcblx0fVxuXG5cdC8vIC0tLS0gcHJpdmF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRwcml2YXRlIF9lbWl0RXZlbnQoZXZlbnQ6IERlYnVnUHJvdG9jb2wuRXZlbnQpIHtcblx0XHR0aGlzLmVtaXQoZXZlbnQuZXZlbnQsIGV2ZW50KTtcblx0fVxuXG5cdHByaXZhdGUgX3NlbmQodHlwOiAncmVxdWVzdCcgfCAncmVzcG9uc2UnIHwgJ2V2ZW50JywgbWVzc2FnZTogRGVidWdQcm90b2NvbC5Qcm90b2NvbE1lc3NhZ2UpOiB2b2lkIHtcblxuXHRcdG1lc3NhZ2UudHlwZSA9IHR5cDtcblx0XHRtZXNzYWdlLnNlcSA9IHRoaXMuX3NlcXVlbmNlKys7XG5cblx0XHRpZiAodGhpcy5fd3JpdGFibGVTdHJlYW0pIHtcblx0XHRcdGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcblx0XHRcdHRoaXMuX3dyaXRhYmxlU3RyZWFtLndyaXRlKGBDb250ZW50LUxlbmd0aDogJHtCdWZmZXIuYnl0ZUxlbmd0aChqc29uLCAndXRmOCcpfVxcclxcblxcclxcbiR7anNvbn1gLCAndXRmOCcpO1xuXHRcdH1cblx0XHR0aGlzLl9zZW5kTWVzc2FnZS5maXJlKG1lc3NhZ2UpO1xuXHR9XG5cblx0cHJpdmF0ZSBfaGFuZGxlRGF0YShkYXRhOiBCdWZmZXIpOiB2b2lkIHtcblxuXHRcdHRoaXMuX3Jhd0RhdGEgPSBCdWZmZXIuY29uY2F0KFt0aGlzLl9yYXdEYXRhLCBkYXRhXSk7XG5cblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0aWYgKHRoaXMuX2NvbnRlbnRMZW5ndGggPj0gMCkge1xuXHRcdFx0XHRpZiAodGhpcy5fcmF3RGF0YS5sZW5ndGggPj0gdGhpcy5fY29udGVudExlbmd0aCkge1xuXHRcdFx0XHRcdGNvbnN0IG1lc3NhZ2UgPSB0aGlzLl9yYXdEYXRhLnRvU3RyaW5nKCd1dGY4JywgMCwgdGhpcy5fY29udGVudExlbmd0aCk7XG5cdFx0XHRcdFx0dGhpcy5fcmF3RGF0YSA9IHRoaXMuX3Jhd0RhdGEuc2xpY2UodGhpcy5fY29udGVudExlbmd0aCk7XG5cdFx0XHRcdFx0dGhpcy5fY29udGVudExlbmd0aCA9IC0xO1xuXHRcdFx0XHRcdGlmIChtZXNzYWdlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGxldCBtc2c6IERlYnVnUHJvdG9jb2wuUHJvdG9jb2xNZXNzYWdlID0gSlNPTi5wYXJzZShtZXNzYWdlKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5oYW5kbGVNZXNzYWdlKG1zZyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9lbWl0RXZlbnQobmV3IEV2ZW50KCdlcnJvcicsICdFcnJvciBoYW5kbGluZyBkYXRhOiAnICsgKGUgJiYgZS5tZXNzYWdlKSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250aW51ZTtcdC8vIHRoZXJlIG1heSBiZSBtb3JlIGNvbXBsZXRlIG1lc3NhZ2VzIHRvIHByb2Nlc3Ncblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgaWR4ID0gdGhpcy5fcmF3RGF0YS5pbmRleE9mKFByb3RvY29sU2VydmVyLlRXT19DUkxGKTtcblx0XHRcdFx0aWYgKGlkeCAhPT0gLTEpIHtcblx0XHRcdFx0XHRjb25zdCBoZWFkZXIgPSB0aGlzLl9yYXdEYXRhLnRvU3RyaW5nKCd1dGY4JywgMCwgaWR4KTtcblx0XHRcdFx0XHRjb25zdCBsaW5lcyA9IGhlYWRlci5zcGxpdCgnXFxyXFxuJyk7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFpciA9IGxpbmVzW2ldLnNwbGl0KC86ICsvKTtcblx0XHRcdFx0XHRcdGlmIChwYWlyWzBdID09ICdDb250ZW50LUxlbmd0aCcpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fY29udGVudExlbmd0aCA9ICtwYWlyWzFdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl9yYXdEYXRhID0gdGhpcy5fcmF3RGF0YS5zbGljZShpZHggKyBQcm90b2NvbFNlcnZlci5UV09fQ1JMRi5sZW5ndGgpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cbn1cbiJdfQ==","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.runDebugAdapter = void 0;\nconst Net = require(\"net\");\nfunction runDebugAdapter(debugSession) {\n    // parse arguments\n    let port = 0;\n    const args = process.argv.slice(2);\n    args.forEach(function (val, index, array) {\n        const portMatch = /^--server=(\\d{4,5})$/.exec(val);\n        if (portMatch) {\n            port = parseInt(portMatch[1], 10);\n        }\n    });\n    if (port > 0) {\n        // start as a server\n        console.error(`waiting for debug protocol on port ${port}`);\n        Net.createServer((socket) => {\n            console.error('>> accepted connection from client');\n            socket.on('end', () => {\n                console.error('>> client connection closed\\n');\n            });\n            const session = new debugSession(false, true);\n            session.setRunAsServer(true);\n            session.start(socket, socket);\n        }).listen(port);\n    }\n    else {\n        // start a session\n        //console.error('waiting for debug protocol on stdin/stdout');\n        const session = new debugSession(false);\n        process.on('SIGTERM', () => {\n            session.shutdown();\n        });\n        session.start(process.stdin, process.stdout);\n    }\n}\nexports.runDebugAdapter = runDebugAdapter;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVuRGVidWdBZGFwdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3J1bkRlYnVnQWRhcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztnR0FHZ0c7OztBQUVoRywyQkFBMkI7QUFJM0IsU0FBZ0IsZUFBZSxDQUFDLFlBQWlDO0lBRWhFLGtCQUFrQjtJQUNsQixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7SUFDYixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLO1FBQ3ZDLE1BQU0sU0FBUyxHQUFHLHNCQUFzQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNuRCxJQUFJLFNBQVMsRUFBRTtZQUNkLElBQUksR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ2xDO0lBQ0YsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUU7UUFDYixvQkFBb0I7UUFDcEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxzQ0FBc0MsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUM1RCxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDM0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO1lBQ3BELE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRTtnQkFDckIsT0FBTyxDQUFDLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1lBQ2hELENBQUMsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxPQUFPLEdBQUcsSUFBSSxZQUFZLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzlDLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2hCO1NBQU07UUFFTixrQkFBa0I7UUFDbEIsOERBQThEO1FBQzlELE1BQU0sT0FBTyxHQUFHLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hDLE9BQU8sQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtZQUMxQixPQUFPLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDcEIsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQzdDO0FBQ0YsQ0FBQztBQWxDRCwwQ0FrQ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0ICogYXMgTmV0IGZyb20gJ25ldCc7XG5cbmltcG9ydCB7IERlYnVnU2Vzc2lvbiB9IGZyb20gJy4vZGVidWdTZXNzaW9uJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJ1bkRlYnVnQWRhcHRlcihkZWJ1Z1Nlc3Npb246IHR5cGVvZiBEZWJ1Z1Nlc3Npb24pIHtcblxuXHQvLyBwYXJzZSBhcmd1bWVudHNcblx0bGV0IHBvcnQgPSAwO1xuXHRjb25zdCBhcmdzID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDIpO1xuXHRhcmdzLmZvckVhY2goZnVuY3Rpb24gKHZhbCwgaW5kZXgsIGFycmF5KSB7XG5cdFx0Y29uc3QgcG9ydE1hdGNoID0gL14tLXNlcnZlcj0oXFxkezQsNX0pJC8uZXhlYyh2YWwpO1xuXHRcdGlmIChwb3J0TWF0Y2gpIHtcblx0XHRcdHBvcnQgPSBwYXJzZUludChwb3J0TWF0Y2hbMV0sIDEwKTtcblx0XHR9XG5cdH0pO1xuXG5cdGlmIChwb3J0ID4gMCkge1xuXHRcdC8vIHN0YXJ0IGFzIGEgc2VydmVyXG5cdFx0Y29uc29sZS5lcnJvcihgd2FpdGluZyBmb3IgZGVidWcgcHJvdG9jb2wgb24gcG9ydCAke3BvcnR9YCk7XG5cdFx0TmV0LmNyZWF0ZVNlcnZlcigoc29ja2V0KSA9PiB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCc+PiBhY2NlcHRlZCBjb25uZWN0aW9uIGZyb20gY2xpZW50Jyk7XG5cdFx0XHRzb2NrZXQub24oJ2VuZCcsICgpID0+IHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignPj4gY2xpZW50IGNvbm5lY3Rpb24gY2xvc2VkXFxuJyk7XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHNlc3Npb24gPSBuZXcgZGVidWdTZXNzaW9uKGZhbHNlLCB0cnVlKTtcblx0XHRcdHNlc3Npb24uc2V0UnVuQXNTZXJ2ZXIodHJ1ZSk7XG5cdFx0XHRzZXNzaW9uLnN0YXJ0KHNvY2tldCwgc29ja2V0KTtcblx0XHR9KS5saXN0ZW4ocG9ydCk7XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBzdGFydCBhIHNlc3Npb25cblx0XHQvL2NvbnNvbGUuZXJyb3IoJ3dhaXRpbmcgZm9yIGRlYnVnIHByb3RvY29sIG9uIHN0ZGluL3N0ZG91dCcpO1xuXHRcdGNvbnN0IHNlc3Npb24gPSBuZXcgZGVidWdTZXNzaW9uKGZhbHNlKTtcblx0XHRwcm9jZXNzLm9uKCdTSUdURVJNJywgKCkgPT4ge1xuXHRcdFx0c2Vzc2lvbi5zaHV0ZG93bigpO1xuXHRcdH0pO1xuXHRcdHNlc3Npb24uc3RhcnQocHJvY2Vzcy5zdGRpbiwgcHJvY2Vzcy5zdGRvdXQpO1xuXHR9XG59XG4iXX0=","const optsArg = require('./lib/opts-arg.js')\nconst pathArg = require('./lib/path-arg.js')\n\nconst {mkdirpNative, mkdirpNativeSync} = require('./lib/mkdirp-native.js')\nconst {mkdirpManual, mkdirpManualSync} = require('./lib/mkdirp-manual.js')\nconst {useNative, useNativeSync} = require('./lib/use-native.js')\n\n\nconst mkdirp = (path, opts) => {\n  path = pathArg(path)\n  opts = optsArg(opts)\n  return useNative(opts)\n    ? mkdirpNative(path, opts)\n    : mkdirpManual(path, opts)\n}\n\nconst mkdirpSync = (path, opts) => {\n  path = pathArg(path)\n  opts = optsArg(opts)\n  return useNativeSync(opts)\n    ? mkdirpNativeSync(path, opts)\n    : mkdirpManualSync(path, opts)\n}\n\nmkdirp.sync = mkdirpSync\nmkdirp.native = (path, opts) => mkdirpNative(pathArg(path), optsArg(opts))\nmkdirp.manual = (path, opts) => mkdirpManual(pathArg(path), optsArg(opts))\nmkdirp.nativeSync = (path, opts) => mkdirpNativeSync(pathArg(path), optsArg(opts))\nmkdirp.manualSync = (path, opts) => mkdirpManualSync(pathArg(path), optsArg(opts))\n\nmodule.exports = mkdirp\n","const {dirname} = require('path')\n\nconst findMade = (opts, parent, path = undefined) => {\n  // we never want the 'made' return value to be a root directory\n  if (path === parent)\n    return Promise.resolve()\n\n  return opts.statAsync(parent).then(\n    st => st.isDirectory() ? path : undefined, // will fail later\n    er => er.code === 'ENOENT'\n      ? findMade(opts, dirname(parent), parent)\n      : undefined\n  )\n}\n\nconst findMadeSync = (opts, parent, path = undefined) => {\n  if (path === parent)\n    return undefined\n\n  try {\n    return opts.statSync(parent).isDirectory() ? path : undefined\n  } catch (er) {\n    return er.code === 'ENOENT'\n      ? findMadeSync(opts, dirname(parent), parent)\n      : undefined\n  }\n}\n\nmodule.exports = {findMade, findMadeSync}\n","const {dirname} = require('path')\n\nconst mkdirpManual = (path, opts, made) => {\n  opts.recursive = false\n  const parent = dirname(path)\n  if (parent === path) {\n    return opts.mkdirAsync(path, opts).catch(er => {\n      // swallowed by recursive implementation on posix systems\n      // any other error is a failure\n      if (er.code !== 'EISDIR')\n        throw er\n    })\n  }\n\n  return opts.mkdirAsync(path, opts).then(() => made || path, er => {\n    if (er.code === 'ENOENT')\n      return mkdirpManual(parent, opts)\n        .then(made => mkdirpManual(path, opts, made))\n    if (er.code !== 'EEXIST' && er.code !== 'EROFS')\n      throw er\n    return opts.statAsync(path).then(st => {\n      if (st.isDirectory())\n        return made\n      else\n        throw er\n    }, () => { throw er })\n  })\n}\n\nconst mkdirpManualSync = (path, opts, made) => {\n  const parent = dirname(path)\n  opts.recursive = false\n\n  if (parent === path) {\n    try {\n      return opts.mkdirSync(path, opts)\n    } catch (er) {\n      // swallowed by recursive implementation on posix systems\n      // any other error is a failure\n      if (er.code !== 'EISDIR')\n        throw er\n      else\n        return\n    }\n  }\n\n  try {\n    opts.mkdirSync(path, opts)\n    return made || path\n  } catch (er) {\n    if (er.code === 'ENOENT')\n      return mkdirpManualSync(path, opts, mkdirpManualSync(parent, opts, made))\n    if (er.code !== 'EEXIST' && er.code !== 'EROFS')\n      throw er\n    try {\n      if (!opts.statSync(path).isDirectory())\n        throw er\n    } catch (_) {\n      throw er\n    }\n  }\n}\n\nmodule.exports = {mkdirpManual, mkdirpManualSync}\n","const {dirname} = require('path')\nconst {findMade, findMadeSync} = require('./find-made.js')\nconst {mkdirpManual, mkdirpManualSync} = require('./mkdirp-manual.js')\n\nconst mkdirpNative = (path, opts) => {\n  opts.recursive = true\n  const parent = dirname(path)\n  if (parent === path)\n    return opts.mkdirAsync(path, opts)\n\n  return findMade(opts, path).then(made =>\n    opts.mkdirAsync(path, opts).then(() => made)\n    .catch(er => {\n      if (er.code === 'ENOENT')\n        return mkdirpManual(path, opts)\n      else\n        throw er\n    }))\n}\n\nconst mkdirpNativeSync = (path, opts) => {\n  opts.recursive = true\n  const parent = dirname(path)\n  if (parent === path)\n    return opts.mkdirSync(path, opts)\n\n  const made = findMadeSync(opts, path)\n  try {\n    opts.mkdirSync(path, opts)\n    return made\n  } catch (er) {\n    if (er.code === 'ENOENT')\n      return mkdirpManualSync(path, opts)\n    else\n      throw er\n  }\n}\n\nmodule.exports = {mkdirpNative, mkdirpNativeSync}\n","const { promisify } = require('util')\nconst fs = require('fs')\nconst optsArg = opts => {\n  if (!opts)\n    opts = { mode: 0o777, fs }\n  else if (typeof opts === 'object')\n    opts = { mode: 0o777, fs, ...opts }\n  else if (typeof opts === 'number')\n    opts = { mode: opts, fs }\n  else if (typeof opts === 'string')\n    opts = { mode: parseInt(opts, 8), fs }\n  else\n    throw new TypeError('invalid options argument')\n\n  opts.mkdir = opts.mkdir || opts.fs.mkdir || fs.mkdir\n  opts.mkdirAsync = promisify(opts.mkdir)\n  opts.stat = opts.stat || opts.fs.stat || fs.stat\n  opts.statAsync = promisify(opts.stat)\n  opts.statSync = opts.statSync || opts.fs.statSync || fs.statSync\n  opts.mkdirSync = opts.mkdirSync || opts.fs.mkdirSync || fs.mkdirSync\n  return opts\n}\nmodule.exports = optsArg\n","const platform = process.env.__TESTING_MKDIRP_PLATFORM__ || process.platform\nconst { resolve, parse } = require('path')\nconst pathArg = path => {\n  if (/\\0/.test(path)) {\n    // simulate same failure that node raises\n    throw Object.assign(\n      new TypeError('path must be a string without null bytes'),\n      {\n        path,\n        code: 'ERR_INVALID_ARG_VALUE',\n      }\n    )\n  }\n\n  path = resolve(path)\n  if (platform === 'win32') {\n    const badWinChars = /[*|\"<>?:]/\n    const {root} = parse(path)\n    if (badWinChars.test(path.substr(root.length))) {\n      throw Object.assign(new Error('Illegal characters in path.'), {\n        path,\n        code: 'EINVAL',\n      })\n    }\n  }\n\n  return path\n}\nmodule.exports = pathArg\n","const fs = require('fs')\n\nconst version = process.env.__TESTING_MKDIRP_NODE_VERSION__ || process.version\nconst versArr = version.replace(/^v/, '').split('.')\nconst hasNative = +versArr[0] > 10 || +versArr[0] === 10 && +versArr[1] >= 12\n\nconst useNative = !hasNative ? () => false : opts => opts.mkdir === fs.mkdir\nconst useNativeSync = !hasNative ? () => false : opts => opts.mkdirSync === fs.mkdirSync\n\nmodule.exports = {useNative, useNativeSync}\n","module.exports = require(\"vscode\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"net\");","module.exports = require(\"path\");","module.exports = require(\"url\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(112);\n"],"names":["Subject","this","waiters","prototype","wait","timeout","self","waiter","push","promise","Promise","resolve","resolved","noRemove","clearTimeout","pos","indexOf","splice","isFinite","setTimeout","notify","length","pop","notifyAll","i","exports","parser","renderer","parseLine","inputString","tmpObject","extractLabel","extractComment","lineExpression","extractIndentation","extractRoutines","renderLine","inputObject","tmpLine","appendLabel","appendIndentation","appendRoutines","appendComment","module","parse","inputArray","replace","split","returnArray","tmpLineObject","lineNumber","render","response","parseArray","Array","isArray","splitRoutinesAndArguments","inputLine","lineCommands","tmpCursor","substring","extractPostConditional","mRoutine","tmpIndex","mPostConditional","lineLabel","ii","lineLeadSpace","search","lineComment","lineIndentationArray","lineIndentation","tmpPosStart","tmpPosEnd","tmpFunction","tmpFunctionArray","splitLine","mArguments","postConditionFunctionArray","lineRoutines","tmpIndentation","hasOwnProperty","MumpsLineParser","fs","context","MUMPS_MODE","language","scheme","mumpsDiagnostics","vscode","languages","createDiagnosticCollection","storage","undefined","storageUri","fsPath","existsSync","mkdirSync","dbFile","subscriptions","registerCompletionItemProvider","CompletionItemProvider","wsState","workspaceState","commands","registerCommand","DocumentFunction","AutospaceFunction","autoSpaceEnter","autoSpaceTab","window","showInputBox","placeHolder","value","registerHoverProvider","MumpsHoverProvider","registerDefinitionProvider","MumpsDefinitionProvider","registerEvaluatableExpressionProvider","MumpsEvalutableExpressionProvider","registerSignatureHelpProvider","MumpsSignatureHelpProvider","registerDocumentSymbolProvider","MumpsDocumentSymbolProvider","registerDocumentSemanticTokensProvider","MumpsHighlighter","SemanticTokens","registerDocumentFormattingEditProvider","MumpsFormattingHelpProvider","registerDocumentRangeFormattingEditProvider","registerReferenceProvider","MumpsReferenceProvider","debug","registerDebugConfigurationProvider","MumpsConfigurationProvider","registerDebugAdapterDescriptorFactory","InlineDebugAdapterFactory","onDidChangeActiveTextEditor","editor","triggerUpdateDiagnostics","document","workspace","onDidChangeTextDocument","resolveDebugConfiguration","folder","config","token","type","request","name","activeTextEditor","languageId","program","stopOnEntry","hostname","localRoutinesPath","port","showInformationMessage","then","_","createDebugAdapterDescriptor","_session","DebugAdapterInlineImplementation","MumpsDebugSession","collection","clear","diags","lineCount","line","lineAt","diag","checkLine","text","code","message","range","Range","Position","position","severity","DiagnosticSeverity","Error","source","vc","concat","scanSubroutines","set","uri","updateDiagnostics","connectState","MConnect","EventEmitter","constructor","super","_socket","Socket","_event","_currentLine","_breakpointId","_logging","_singleVar","_singleVarContent","_commandQueue","_connectState","disconnected","_readedData","_mVars","_mStack","_activeBreakpoints","_breakPoints","_errorLines","_hints","on","internals","checkEvents","init","_localRoutinesPath","_hostname","_port","reject","connect","_log","waitingforStart","chunk","toString","n","data","processLine","error","msg","console","log","varname","vartype","waitingForVars","waitingForBreakpoints","waitingForSingleVar","sendEvent","end","waitingForErrorReport","waitingForHints","emit","verifyBreakpoints","waitingForSingleVarContent","writeln","shift","write","unshift","sendBreakpoint","file","onOff","start","stopAtStart","requestBreakpoints","step","continue","disconnect","restart","mumpsposition","mumpsstatus","parts","loadSource","startlabel","offset","parseInt","ln","_sourceLines","filter","bp","_sourceFile","stack","startFrame","endFrame","frames","fileposition","convertMumpsPosition","index","count","Math","min","setBreakPoint","verified","id","clearBreakPoint","bps","findIndex","clearBreakpoints","merk","forEach","internalBp","getVariables","checkRoutine","lines","ErrorreportReceived","event","errorLines","removeListener","getSingleVar","expression","reply","indexCount","content","bases","varType","charAt","SingleVarReceived","singleVar","singleVarContent","readFileSync","positionstring","filecontent","args","em","selection","active","currentLine","parsed","newLine","character","edit","editBuilder","with","cmds","match","lineContainsNoParamDo","insert","eb","labeldb","_labelsReady","_dbfile","_refreshLabelDB","provideCompletionItems","status","lineStatus","lookPosition","lastCommand","startstring","isInsidePostcond","char","isWhiteSpace","isBeginOfVariable","isAlphaChar","getLineStatus","getText","clean","replaceRange","_findLabel","db","labels","routine","label","routines","writeFileSync","JSON","stringify","readFile","err","_labelDB","dbChanged","findFiles","files","_filesToCheck","path","stat","stats","_checkReady","ms","mtimeMs","size","_refreshFileLabels","writeFile","showErrorMessage","list","hitlist","sortText","suchstring","item","startsWith","routinepart","detail","provideDefinition","MumpsTokenHelper","getTokenRefLocation","provideDocumentSymbols","parsedDoc","parseText","symbols","methods","method","kind","SymbolKind","Function","startPosition","endPostionLine","endLine","endPosition","methodRange","Location","SymbolInformation","DIVIDERLINE","makeSignature","labelLine","Signature","parameters","element","InsertPosition","translate","provideEvaluatableExpression","lineContent","getExpression","substr","result","exec","EvaluatableExpression","isInsideString","level","formatDocumentLine","textEdits","TextEdit","endsWith","endSpace","replacementString","dotPosition","dotCount","spaceCount","provideDocumentFormattingEdits","options","provideDocumentRangeFormattingEdits","tokentypes","Object","keys","TokenType","SemanticTokensLegend","provideDocumentSemanticTokens","analyzeLines","tokensBuilder","SemanticTokensBuilder","tokens","tokenId","t","exfunction","build","provideHover","getTokenHoverInfo","provideReferences","myToken","getTokenAt","searchType","searchToken","fileName","entryref","externalLabel","docLines","includes","foundPosition","getallLabelReferences","local","global","filesToCheck","Uri","mCommand","mPostCondition","comment","provideSignatureHelp","getTokenSignature","state","doExpand","filename","get","update","lastLineLength","info","expandCompressLine","errorText","lineText","join","MUMPSDIAGNOSTICS","DebugSession","_variableHandles","Handles","_configurationDone","setDebuggerLinesStartAt1","setDebuggerColumnsStartAt1","_program","_mconnect","StoppedEvent","THREAD_ID","BreakpointEvent","TerminatedEvent","initializeRequest","body","supportsConfigurationDoneRequest","supportsEvaluateForHovers","supportsDataBreakpoints","supportsCompletionsRequest","completionTriggerCharacters","supportsCancelRequest","supportsBreakpointLocationsRequest","supportsExceptionInfoRequest","supportsRestartRequest","sendResponse","InitializedEvent","configurationDoneRequest","launchRequest","refreshDiagnostics","catch","setBreakPointsRequest","clientLines","actualBreakpoints","map","l","convertClientLineToDebugger","Breakpoint","convertDebuggerLineToClient","breakpoints","threadsRequest","threads","Thread","stackTraceRequest","levels","stk","stackFrames","f","StackFrame","createSource","totalFrames","scopesRequest","scopes","Scope","create","variablesRequest","variables","insertVariable","varId","variablesReference","varObject","varparts","varBase","lastVar","firstTime","lastRef","actualVar","varAnalyze","checkVars","dummyVar","returnVar","actualReference","continueRequest","nextRequest","stepInRequest","stepOutRequest","evaluateRequest","varReply","restartRequest","sourceLines","disconnectRequest","filePath","Source","basename","convertDebuggerPathToClient","exceptionInfoRequest","statVariable","trashlength","description","exceptionId","breakMode","details","typeName","indexcount","klammerpos","countKomma","doc","diagnostics","lineIndex","lineOfText","errLines","errData","column","isNaN","endColumn","diagnostic","Diagnostic","lvn","gvn","isv","ifunction","nonMfunction","routineref","numlit","strlit","command","binoperator","unaryoperator","patcode","repititionCount","openkeywords","usekeywords","closekeywords","jobkeywords","tstartkeywords","cmdExpansions","funcExpansions","isvExpansions","cmdParams","funcParams","_tokens","linePosition","_evaluatePattern","patternComplete","evaluateExpression","repCount","exType","expressionComplete","startposition","lastExpression","subExType","evalString","localname","operator","provResult","_checkVar","_checkEntryRef","functionname","toUpperCase","longName","_checkFunction","specialvarname","sysvariable","numericliteral","number","stringlit","string","_extractLabel","errorPosition","expressionPosition","_extractComment","_extractIndentation","spacer","_extractCommands","_splitCommandsAndArguments","cmdPosition","argPosition","pcPosition","_extractPostConditional","checkFile","errlist","input","linetokens","_splitLabelAndParameters","labelparts","labeltext","parameterVars","constructLine","expandCompressFile","cmdCompressions","shortCommand","funcCompressions","shortFunction","isvCompressions","shortIsv","outline","errorinfo","outText","posCorrector","toLowerCase","checkName","keyword","repeat","intendation","cmd","longcmd","isPostconditioned","_checkCommand","memPosition","_checkEntryRefAndPostcondition","withParams","argPostcondition","isUserfunction","tokentype","ref","merkpos","globalOk","indexOk","isExluded","indexFound","globalFound","indirectionFound","varFound","isExcludedVariable","_checkBreak","_checkKeyword","keywords","slice","_checkOUC","braceComplete","_isEndOfArgument","_checkFor","argNumber","_checkJobKeyword","_checkJob","_checkKill","_checkLock","isLock","_checkMerge","_checkNew","_checkRead","mat","starDetected","_checkSet","isBraced","_checkTstart","_checkView","_checkWrite","_checkWriteSocket","fname","maxparams","paramCount","_checkXecute","_checkZbreak","_checkZprint","_checkZstep","para","postcondPossible","postcondition","argFormat","parameter","argCount","longfunc","params","minArguments","minparams","formats","format","isEndOfArgument","definitionsArray","definitions","EXTENSIONS","cache","addDefinition","definition","abbreviation","_document","_position","_getText","e","_getFunctionToken","getTokenData","help","SignatureHelp","signatures","convertDefinition","activeSignature","activeParameter","_calculateActiveParameter","snippet","Hover","commentText","parametersStartIndex","insertIndex","depth","tokendata","location","functionName","functionType","matches","assign","locationInfo","getPositionForLabel","_extractDefinition","optional","ParameterInformation","returns","signature","SignatureInformation","fileUri","nakedLabel","fullPath","extension","extendedPath","labelLength","j","reverse","labelLines","parameterNames","parametersByName","param","paramDescription","RegExp","_variablesToBeIgnored","_enableVariableCheck","_linetokens","configuration","getConfiguration","mumps","variablesToBeIgnoredAtNewCheck","enableVariableCheck","_warnings","_subroutines","_checkFile","analyzeSubroutine","_varStates","_levelExclusiveNew","isParameter","parameterPosition","startLine","intendationFound","newLevel","_reduceIntendationLevel","anyVariablesNewed","containsExclusions","varName","varState","isExcluded","newedAtLevel","newedAtLine","newedAtPostion","_addWarning","k","_checkNewed","_checkVariableUsage","key","isUsed","_isIgnoredVariable","isNewed","len","Warning","isBehindQuit","startUnreachable","ifFlag","hasPostcondition","variable","isIgnoredVariable","test","found","memLine","MemberClass","Method","declarations","memberClass","documentation","Parameter","sourceText","Parser","parseDocument","tokenizer","next","activeToken","documentText","getTokens","isAlphanumeric","parseMethod","activeMethod","isTab","isSpace","tokenBuffer","loadTokenBuffer","nextLine","checkForDocumentation","isNewLine","throwAwayTokensTil","isLineCommentInit","isLineComment","isOpenParen","processed","processParameters","prevLine","isCloseParen","closeParen","open","isComma","documentContents","Tokenizer","charType","getType","tokenType","parseCharacter","finalizedToken","finalizeToken","Token","getRange","isNumeric","documentLine","documentColumn","tokenValue","tokenPosition","stringOpen","firstSlash","asterisk","updateTokenAndAdvanceCursor","newType","c","charCode","charCodeAt","Type","defineProperty","ErrorDestination","InvalidatedEvent","ProgressEndEvent","ProgressUpdateEvent","ProgressStartEvent","CapabilitiesEvent","LoadedSourceEvent","ModuleEvent","ThreadEvent","OutputEvent","ContinuedEvent","CompletionItem","Module","Variable","protocol_1","messages_1","runDebugAdapter_1","url_1","origin","sourceReference","adapterData","reference","expensive","nm","src","col","indexedVariables","namedVariables","Event","reason","threadId","exceptionText","allThreadsContinued","output","category","breakpoint","capabilities","progressId","title","areas","stackFrameId","ProtocolServer","obsolete_debuggerLinesAndColumnsStartAt1","obsolete_isServer","linesAndColumnsStartAt1","_debuggerLinesStartAt1","_debuggerColumnsStartAt1","_debuggerPathsAreURIs","_clientLinesStartAt1","_clientColumnsStartAt1","_clientPathsAreURIs","_isServer","shutdown","setDebuggerPathFormat","enable","setRunAsServer","static","debugSession","runDebugAdapter","_isRunningInline","process","exit","sendErrorResponse","codeOrMessage","dest","User","showUser","Telemetry","sendTelemetry","success","formatPII","runInTerminalRequest","cb","sendRequest","dispatchRequest","Response","arguments","linesStartAt1","columnsStartAt1","pathFormat","initializeResponse","attachRequest","terminateRequest","setFunctionBreakPointsRequest","setExceptionBreakPointsRequest","stepBackRequest","reverseContinueRequest","restartFrameRequest","gotoRequest","pauseRequest","setVariableRequest","setExpressionRequest","sourceRequest","terminateThreadsRequest","stepInTargetsRequest","gotoTargetsRequest","completionsRequest","loadedSourcesRequest","dataBreakpointInfoRequest","setDataBreakpointsRequest","readMemoryRequest","writeMemoryRequest","disassembleRequest","cancelRequest","breakpointLocationsRequest","setInstructionBreakpointsRequest","customRequest","_exception","_stack","supportsConditionalBreakpoints","supportsHitConditionalBreakpoints","supportsFunctionBreakpoints","supportsStepBack","supportsSetVariable","supportsRestartFrame","supportsStepInTargetsRequest","supportsGotoTargetsRequest","supportsExceptionOptions","supportsValueFormattingOptions","supportTerminateDebuggee","supportsDelayedStackTraceLoading","supportsLoadedSourcesRequest","supportsLogPoints","supportsTerminateThreadsRequest","supportsSetExpression","supportsTerminateRequest","supportsReadMemoryRequest","supportsDisassembleRequest","supportsClipboardContext","supportsSteppingGranularity","supportsInstructionBreakpoints","supportsExceptionFilterOptions","convertClientColumnToDebugger","convertDebuggerColumnToClient","convertClientPathToDebugger","clientPath","uri2path","path2uri","debuggerPath","platform","encodeURI","URL","pathname","sourceUri","s","decodeURIComponent","excludePII","_formatPIIRegexp","paramName","startHandle","START_HANDLE","_handleMap","Map","_nextHandle","reset","handle","dflt","__awaiter","thisArg","_arguments","P","generator","fulfilled","rejected","done","apply","InternalLogger","mkdirp","logger_1","getFormattedTimeString","d","Date","_padZeroes","String","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","minDesiredLength","numberToPad","logCallback","isServer","beforeExitCallback","dispose","_logCallback","_logToConsole","_minLogLevel","LogLevel","Warn","disposeCallback","signal","setup","consoleMinLogLevel","_prependTimestamp","prependTimestamp","logFilePath","isAbsolute","handleError","sendLog","dirname","_logFileStream","createWriteStream","logDateTime","setupShutdownListeners","timeAndDateStamp","getUTCFullYear","getUTCMonth","getUTCDate","Verbose","addListener","removeShutdownListeners","Stop","logFn","warn","trimLastNewline","endsInNewline","LogOutputEvent","logger","Logger","internalLogger_1","debugSession_1","_pendingLogQ","Log","_write","verbose","_currentLogger","disposeP","_logFilePath","_logFilePathFromInit","logQ","logToConsole","str","LoggingDebugSession","obsolete_logFilePath","inStream","outStream","objectToLog","doNotLogOutput","enumerable","loggingDebugSession_1","handles_1","Message","seq","request_seq","ee","Emitter","listener","_listener","_this","fire","call","hasListener","_sendMessage","_pendingRequests","onDidSendMessage","handleMessage","clb","delete","_sequence","_writableStream","_rawData","Buffer","alloc","_handleData","_emitEvent","resume","stop","_send","timer","typ","json","byteLength","_contentLength","idx","TWO_CRLF","pair","Net","argv","val","array","portMatch","createServer","socket","session","listen","stdin","stdout","optsArg","pathArg","mkdirpNative","mkdirpNativeSync","mkdirpManual","mkdirpManualSync","useNative","useNativeSync","opts","sync","native","manual","nativeSync","manualSync","findMade","parent","statAsync","st","isDirectory","er","findMadeSync","statSync","made","recursive","mkdirAsync","promisify","mode","TypeError","mkdir","env","__TESTING_MKDIRP_PLATFORM__","badWinChars","root","versArr","__TESTING_MKDIRP_NODE_VERSION__","version","hasNative","require","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}